var gg=Object.defineProperty;var xg=(e,t,n)=>t in e?gg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ec=(e,t,n)=>xg(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ta(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sf={exports:{}},Gs={},Nf={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=Symbol.for("react.element"),yg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),bg=Symbol.for("react.strict_mode"),wg=Symbol.for("react.profiler"),kg=Symbol.for("react.provider"),jg=Symbol.for("react.context"),Sg=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Cg=Symbol.for("react.memo"),Pg=Symbol.for("react.lazy"),tc=Symbol.iterator;function Eg(e){return e===null||typeof e!="object"?null:(e=tc&&e[tc]||e["@@iterator"],typeof e=="function"?e:null)}var Cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pf=Object.assign,Ef={};function kr(e,t,n){this.props=e,this.context=t,this.refs=Ef,this.updater=n||Cf}kr.prototype.isReactComponent={};kr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Af(){}Af.prototype=kr.prototype;function La(e,t,n){this.props=e,this.context=t,this.refs=Ef,this.updater=n||Cf}var Ia=La.prototype=new Af;Ia.constructor=La;Pf(Ia,kr.prototype);Ia.isPureReactComponent=!0;var nc=Array.isArray,Tf=Object.prototype.hasOwnProperty,Ma={current:null},Lf={key:!0,ref:!0,__self:!0,__source:!0};function If(e,t,n){var r,l={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Tf.call(t,r)&&!Lf.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(a===1)l.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)l[r]===void 0&&(l[r]=a[r]);return{$$typeof:Nl,type:e,key:s,ref:i,props:l,_owner:Ma.current}}function Ag(e,t){return{$$typeof:Nl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Da(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nl}function Tg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rc=/\/+/g;function Si(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tg(""+e.key):t.toString(36)}function rs(e,t,n,r,l){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Nl:case yg:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+Si(i,0):r,nc(l)?(n="",e!=null&&(n=e.replace(rc,"$&/")+"/"),rs(l,t,n,"",function(c){return c})):l!=null&&(Da(l)&&(l=Ag(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(rc,"$&/")+"/")+e)),t.push(l)),1;if(i=0,r=r===""?".":r+":",nc(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+Si(s,a);i+=rs(s,t,n,u,l)}else if(u=Eg(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+Si(s,a++),i+=rs(s,t,n,u,l);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Rl(e,t,n){if(e==null)return e;var r=[],l=0;return rs(e,r,"","",function(s){return t.call(n,s,l++)}),r}function Lg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},ls={transition:null},Ig={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Ma};function Mf(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Rl,forEach:function(e,t,n){Rl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rl(e,function(){t++}),t},toArray:function(e){return Rl(e,function(t){return t})||[]},only:function(e){if(!Da(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=kr;te.Fragment=vg;te.Profiler=wg;te.PureComponent=La;te.StrictMode=bg;te.Suspense=Ng;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig;te.act=Mf;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Pf({},e.props),l=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=Ma.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Tf.call(t,u)&&!Lf.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nl,type:e.type,key:l,ref:s,props:r,_owner:i}};te.createContext=function(e){return e={$$typeof:jg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kg,_context:e},e.Consumer=e};te.createElement=If;te.createFactory=function(e){var t=If.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:Sg,render:e}};te.isValidElement=Da;te.lazy=function(e){return{$$typeof:Pg,_payload:{_status:-1,_result:e},_init:Lg}};te.memo=function(e,t){return{$$typeof:Cg,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=ls.transition;ls.transition={};try{e()}finally{ls.transition=t}};te.unstable_act=Mf;te.useCallback=function(e,t){return We.current.useCallback(e,t)};te.useContext=function(e){return We.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return We.current.useDeferredValue(e)};te.useEffect=function(e,t){return We.current.useEffect(e,t)};te.useId=function(){return We.current.useId()};te.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return We.current.useMemo(e,t)};te.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};te.useRef=function(e){return We.current.useRef(e)};te.useState=function(e){return We.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return We.current.useTransition()};te.version="18.3.1";Nf.exports=te;var I=Nf.exports;const Mg=Ta(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=I,Rg=Symbol.for("react.element"),zg=Symbol.for("react.fragment"),_g=Object.prototype.hasOwnProperty,Fg=Dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Og={key:!0,ref:!0,__self:!0,__source:!0};function Df(e,t,n){var r,l={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)_g.call(t,r)&&!Og.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Rg,type:e,key:s,ref:i,props:l,_owner:Fg.current}}Gs.Fragment=zg;Gs.jsx=Df;Gs.jsxs=Df;Sf.exports=Gs;var o=Sf.exports,go={},Rf={exports:{}},ot={},zf={exports:{}},_f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,M){var b=z.length;z.push(M);e:for(;0<b;){var _=b-1>>>1,B=z[_];if(0<l(B,M))z[_]=M,z[b]=B,b=_;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var M=z[0],b=z.pop();if(b!==M){z[0]=b;e:for(var _=0,B=z.length,S=B>>>1;_<S;){var G=2*(_+1)-1,X=z[G],F=G+1,ie=z[F];if(0>l(X,b))F<B&&0>l(ie,X)?(z[_]=ie,z[F]=b,_=F):(z[_]=X,z[G]=b,_=G);else if(F<B&&0>l(ie,b))z[_]=ie,z[F]=b,_=F;else break e}}return M}function l(z,M){var b=z.sortIndex-M.sortIndex;return b!==0?b:z.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],c=[],f=1,d=null,p=3,m=!1,y=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=z)r(c),M.sortIndex=M.expirationTime,t(u,M);else break;M=n(c)}}function C(z){if(w=!1,v(z),!y)if(n(u)!==null)y=!0,$(A);else{var M=n(c);M!==null&&V(C,M.startTime-z)}}function A(z,M){y=!1,w&&(w=!1,h(O),O=-1),m=!0;var b=p;try{for(v(M),d=n(u);d!==null&&(!(d.expirationTime>M)||z&&!k());){var _=d.callback;if(typeof _=="function"){d.callback=null,p=d.priorityLevel;var B=_(d.expirationTime<=M);M=e.unstable_now(),typeof B=="function"?d.callback=B:d===n(u)&&r(u),v(M)}else r(u);d=n(u)}if(d!==null)var S=!0;else{var G=n(c);G!==null&&V(C,G.startTime-M),S=!1}return S}finally{d=null,p=b,m=!1}}var N=!1,R=null,O=-1,P=5,x=-1;function k(){return!(e.unstable_now()-x<P)}function j(){if(R!==null){var z=e.unstable_now();x=z;var M=!0;try{M=R(!0,z)}finally{M?L():(N=!1,R=null)}}else N=!1}var L;if(typeof g=="function")L=function(){g(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,T=D.port2;D.port1.onmessage=j,L=function(){T.postMessage(null)}}else L=function(){E(j,0)};function $(z){R=z,N||(N=!0,L())}function V(z,M){O=E(function(){z(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,$(A))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var b=p;p=M;try{return z()}finally{p=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,M){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var b=p;p=z;try{return M()}finally{p=b}},e.unstable_scheduleCallback=function(z,M,b){var _=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?_+b:_):b=_,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=b+B,z={id:f++,callback:M,priorityLevel:z,startTime:b,expirationTime:B,sortIndex:-1},b>_?(z.sortIndex=b,t(c,z),n(u)===null&&z===n(c)&&(w?(h(O),O=-1):w=!0,V(C,b-_))):(z.sortIndex=B,t(u,z),y||m||(y=!0,$(A))),z},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(z){var M=p;return function(){var b=p;p=M;try{return z.apply(this,arguments)}finally{p=b}}}})(_f);zf.exports=_f;var $g=zf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg=I,it=$g;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ff=new Set,sl={};function On(e,t){pr(e,t),pr(e+"Capture",t)}function pr(e,t){for(sl[e]=t,e=0;e<t.length;e++)Ff.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=Object.prototype.hasOwnProperty,Hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lc={},sc={};function Wg(e){return xo.call(sc,e)?!0:xo.call(lc,e)?!1:Hg.test(e)?sc[e]=!0:(lc[e]=!0,!1)}function qg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ug(e,t,n,r){if(t===null||typeof t>"u"||qg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,l,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ra=/[\-:]([a-z])/g;function za(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ra,za);Ie[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ra,za);Ie[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ra,za);Ie[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function _a(e,t,n,r){var l=Ie.hasOwnProperty(t)?Ie[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ug(t,n,l,r)&&(n=null),r||l===null?Wg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qt=Bg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zl=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Vn=Symbol.for("react.fragment"),Fa=Symbol.for("react.strict_mode"),yo=Symbol.for("react.profiler"),Of=Symbol.for("react.provider"),$f=Symbol.for("react.context"),Oa=Symbol.for("react.forward_ref"),vo=Symbol.for("react.suspense"),bo=Symbol.for("react.suspense_list"),$a=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),ic=Symbol.iterator;function Tr(e){return e===null||typeof e!="object"?null:(e=ic&&e[ic]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,Ni;function Wr(e){if(Ni===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ni=t&&t[1]||""}return`
`+Ni+e}var Ci=!1;function Pi(e,t){if(!e||Ci)return"";Ci=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),s=r.stack.split(`
`),i=l.length-1,a=s.length-1;1<=i&&0<=a&&l[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(l[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||l[i]!==s[a]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{Ci=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wr(e):""}function Xg(e){switch(e.tag){case 5:return Wr(e.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return e=Pi(e.type,!1),e;case 11:return e=Pi(e.type.render,!1),e;case 1:return e=Pi(e.type,!0),e;default:return""}}function wo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vn:return"Fragment";case Xn:return"Portal";case yo:return"Profiler";case Fa:return"StrictMode";case vo:return"Suspense";case bo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $f:return(e.displayName||"Context")+".Consumer";case Of:return(e._context.displayName||"Context")+".Provider";case Oa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $a:return t=e.displayName||null,t!==null?t:wo(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return wo(e(t))}catch{}}return null}function Vg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wo(t);case 8:return t===Fa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qg(e){var t=Hf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _l(e){e._valueTracker||(e._valueTracker=Qg(e))}function Wf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ko(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qf(e,t){t=t.checked,t!=null&&_a(e,"checked",t,!1)}function jo(e,t){qf(e,t);var n=hn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?So(e,t.type,n):t.hasOwnProperty("defaultValue")&&So(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ac(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function So(e,t,n){(t!=="number"||ys(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qr=Array.isArray;function lr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function No(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(qr(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hn(n)}}function Uf(e,t){var n=hn(t.value),r=hn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fl,Vf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fl=Fl||document.createElement("div"),Fl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function il(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gg=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){Gg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function Qf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function Gf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Qf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Kg=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,t){if(t){if(Kg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Eo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ao=null;function Ba(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var To=null,sr=null,ir=null;function dc(e){if(e=El(e)){if(typeof To!="function")throw Error(q(280));var t=e.stateNode;t&&(t=ei(t),To(e.stateNode,e.type,t))}}function Kf(e){sr?ir?ir.push(e):ir=[e]:sr=e}function Yf(){if(sr){var e=sr,t=ir;if(ir=sr=null,dc(e),t)for(e=0;e<t.length;e++)dc(t[e])}}function Zf(e,t){return e(t)}function Jf(){}var Ei=!1;function ep(e,t,n){if(Ei)return e(t,n);Ei=!0;try{return Zf(e,t,n)}finally{Ei=!1,(sr!==null||ir!==null)&&(Jf(),Yf())}}function ol(e,t){var n=e.stateNode;if(n===null)return null;var r=ei(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var Lo=!1;if(Wt)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{Lo=!1}function Yg(e,t,n,r,l,s,i,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Qr=!1,vs=null,bs=!1,Io=null,Zg={onError:function(e){Qr=!0,vs=e}};function Jg(e,t,n,r,l,s,i,a,u){Qr=!1,vs=null,Yg.apply(Zg,arguments)}function ex(e,t,n,r,l,s,i,a,u){if(Jg.apply(this,arguments),Qr){if(Qr){var c=vs;Qr=!1,vs=null}else throw Error(q(198));bs||(bs=!0,Io=c)}}function $n(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fc(e){if($n(e)!==e)throw Error(q(188))}function tx(e){var t=e.alternate;if(!t){if(t=$n(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return fc(l),e;if(s===r)return fc(l),t;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=l,r=s;else{for(var i=!1,a=l.child;a;){if(a===n){i=!0,n=l,r=s;break}if(a===r){i=!0,r=l,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=l;break}if(a===r){i=!0,r=s,n=l;break}a=a.sibling}if(!i)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function np(e){return e=tx(e),e!==null?rp(e):null}function rp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rp(e);if(t!==null)return t;e=e.sibling}return null}var lp=it.unstable_scheduleCallback,pc=it.unstable_cancelCallback,nx=it.unstable_shouldYield,rx=it.unstable_requestPaint,ke=it.unstable_now,lx=it.unstable_getCurrentPriorityLevel,Ha=it.unstable_ImmediatePriority,sp=it.unstable_UserBlockingPriority,ws=it.unstable_NormalPriority,sx=it.unstable_LowPriority,ip=it.unstable_IdlePriority,Ks=null,It=null;function ix(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:ux,ox=Math.log,ax=Math.LN2;function ux(e){return e>>>=0,e===0?32:31-(ox(e)/ax|0)|0}var Ol=64,$l=4194304;function Ur(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ks(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~l;a!==0?r=Ur(a):(s&=i,s!==0&&(r=Ur(s)))}else i=n&~l,i!==0?r=Ur(i):s!==0&&(r=Ur(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,s=t&-t,l>=s||l===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-St(t),l=1<<n,r|=e[n],t&=~l;return r}function cx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-St(s),a=1<<i,u=l[i];u===-1?(!(a&n)||a&r)&&(l[i]=cx(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function Mo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function op(){var e=Ol;return Ol<<=1,!(Ol&4194240)&&(Ol=64),e}function Ai(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function fx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-St(n),s=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~s}}function Wa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-St(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var oe=0;function ap(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var up,qa,cp,dp,fp,Do=!1,Bl=[],on=null,an=null,un=null,al=new Map,ul=new Map,nn=[],px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mc(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(t.pointerId)}}function Ir(e,t,n,r,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[l]},t!==null&&(t=El(t),t!==null&&qa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function mx(e,t,n,r,l){switch(t){case"focusin":return on=Ir(on,e,t,n,r,l),!0;case"dragenter":return an=Ir(an,e,t,n,r,l),!0;case"mouseover":return un=Ir(un,e,t,n,r,l),!0;case"pointerover":var s=l.pointerId;return al.set(s,Ir(al.get(s)||null,e,t,n,r,l)),!0;case"gotpointercapture":return s=l.pointerId,ul.set(s,Ir(ul.get(s)||null,e,t,n,r,l)),!0}return!1}function pp(e){var t=Pn(e.target);if(t!==null){var n=$n(t);if(n!==null){if(t=n.tag,t===13){if(t=tp(n),t!==null){e.blockedOn=t,fp(e.priority,function(){cp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ss(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ro(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ao=r,n.target.dispatchEvent(r),Ao=null}else return t=El(n),t!==null&&qa(t),e.blockedOn=n,!1;t.shift()}return!0}function hc(e,t,n){ss(e)&&n.delete(t)}function hx(){Do=!1,on!==null&&ss(on)&&(on=null),an!==null&&ss(an)&&(an=null),un!==null&&ss(un)&&(un=null),al.forEach(hc),ul.forEach(hc)}function Mr(e,t){e.blockedOn===t&&(e.blockedOn=null,Do||(Do=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,hx)))}function cl(e){function t(l){return Mr(l,e)}if(0<Bl.length){Mr(Bl[0],e);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(on!==null&&Mr(on,e),an!==null&&Mr(an,e),un!==null&&Mr(un,e),al.forEach(t),ul.forEach(t),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)pp(n),n.blockedOn===null&&nn.shift()}var or=Qt.ReactCurrentBatchConfig,js=!0;function gx(e,t,n,r){var l=oe,s=or.transition;or.transition=null;try{oe=1,Ua(e,t,n,r)}finally{oe=l,or.transition=s}}function xx(e,t,n,r){var l=oe,s=or.transition;or.transition=null;try{oe=4,Ua(e,t,n,r)}finally{oe=l,or.transition=s}}function Ua(e,t,n,r){if(js){var l=Ro(e,t,n,r);if(l===null)Oi(e,t,r,Ss,n),mc(e,r);else if(mx(l,e,t,n,r))r.stopPropagation();else if(mc(e,r),t&4&&-1<px.indexOf(e)){for(;l!==null;){var s=El(l);if(s!==null&&up(s),s=Ro(e,t,n,r),s===null&&Oi(e,t,r,Ss,n),s===l)break;l=s}l!==null&&r.stopPropagation()}else Oi(e,t,r,null,n)}}var Ss=null;function Ro(e,t,n,r){if(Ss=null,e=Ba(r),e=Pn(e),e!==null)if(t=$n(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ss=e,null}function mp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lx()){case Ha:return 1;case sp:return 4;case ws:case sx:return 16;case ip:return 536870912;default:return 16}default:return 16}}var ln=null,Xa=null,is=null;function hp(){if(is)return is;var e,t=Xa,n=t.length,r,l="value"in ln?ln.value:ln.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[s-r];r++);return is=l.slice(e,1<r?1-r:void 0)}function os(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hl(){return!0}function gc(){return!1}function at(e){function t(n,r,l,s,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hl:gc,this.isPropagationStopped=gc,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),t}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Va=at(jr),Pl=be({},jr,{view:0,detail:0}),yx=at(Pl),Ti,Li,Dr,Ys=be({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dr&&(Dr&&e.type==="mousemove"?(Ti=e.screenX-Dr.screenX,Li=e.screenY-Dr.screenY):Li=Ti=0,Dr=e),Ti)},movementY:function(e){return"movementY"in e?e.movementY:Li}}),xc=at(Ys),vx=be({},Ys,{dataTransfer:0}),bx=at(vx),wx=be({},Pl,{relatedTarget:0}),Ii=at(wx),kx=be({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),jx=at(kx),Sx=be({},jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nx=at(Sx),Cx=be({},jr,{data:0}),yc=at(Cx),Px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ex={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ax[e])?!!t[e]:!1}function Qa(){return Tx}var Lx=be({},Pl,{key:function(e){if(e.key){var t=Px[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=os(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ex[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(e){return e.type==="keypress"?os(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?os(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ix=at(Lx),Mx=be({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vc=at(Mx),Dx=be({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),Rx=at(Dx),zx=be({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=at(zx),Fx=be({},Ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=at(Fx),$x=[9,13,27,32],Ga=Wt&&"CompositionEvent"in window,Gr=null;Wt&&"documentMode"in document&&(Gr=document.documentMode);var Bx=Wt&&"TextEvent"in window&&!Gr,gp=Wt&&(!Ga||Gr&&8<Gr&&11>=Gr),bc=" ",wc=!1;function xp(e,t){switch(e){case"keyup":return $x.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qn=!1;function Hx(e,t){switch(e){case"compositionend":return yp(t);case"keypress":return t.which!==32?null:(wc=!0,bc);case"textInput":return e=t.data,e===bc&&wc?null:e;default:return null}}function Wx(e,t){if(Qn)return e==="compositionend"||!Ga&&xp(e,t)?(e=hp(),is=Xa=ln=null,Qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gp&&t.locale!=="ko"?null:t.data;default:return null}}var qx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qx[e.type]:t==="textarea"}function vp(e,t,n,r){Kf(r),t=Ns(t,"onChange"),0<t.length&&(n=new Va("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,dl=null;function Ux(e){Tp(e,0)}function Zs(e){var t=Yn(e);if(Wf(t))return e}function Xx(e,t){if(e==="change")return t}var bp=!1;if(Wt){var Mi;if(Wt){var Di="oninput"in document;if(!Di){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),Di=typeof jc.oninput=="function"}Mi=Di}else Mi=!1;bp=Mi&&(!document.documentMode||9<document.documentMode)}function Sc(){Kr&&(Kr.detachEvent("onpropertychange",wp),dl=Kr=null)}function wp(e){if(e.propertyName==="value"&&Zs(dl)){var t=[];vp(t,dl,e,Ba(e)),ep(Ux,t)}}function Vx(e,t,n){e==="focusin"?(Sc(),Kr=t,dl=n,Kr.attachEvent("onpropertychange",wp)):e==="focusout"&&Sc()}function Qx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zs(dl)}function Gx(e,t){if(e==="click")return Zs(t)}function Kx(e,t){if(e==="input"||e==="change")return Zs(t)}function Yx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Yx;function fl(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!xo.call(t,l)||!Pt(e[l],t[l]))return!1}return!0}function Nc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,t){var n=Nc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nc(n)}}function kp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jp(){for(var e=window,t=ys();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ys(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zx(e){var t=jp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kp(n.ownerDocument.documentElement,n)){if(r!==null&&Ka(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,s=Math.min(r.start,l);r=r.end===void 0?s:Math.min(r.end,l),!e.extend&&s>r&&(l=r,r=s,s=l),l=Cc(n,s);var i=Cc(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jx=Wt&&"documentMode"in document&&11>=document.documentMode,Gn=null,zo=null,Yr=null,_o=!1;function Pc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_o||Gn==null||Gn!==ys(r)||(r=Gn,"selectionStart"in r&&Ka(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yr&&fl(Yr,r)||(Yr=r,r=Ns(zo,"onSelect"),0<r.length&&(t=new Va("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gn)))}function Wl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},Ri={},Sp={};Wt&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Js(e){if(Ri[e])return Ri[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sp)return Ri[e]=t[n];return e}var Np=Js("animationend"),Cp=Js("animationiteration"),Pp=Js("animationstart"),Ep=Js("transitionend"),Ap=new Map,Ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){Ap.set(e,t),On(t,[e])}for(var zi=0;zi<Ec.length;zi++){var _i=Ec[zi],e0=_i.toLowerCase(),t0=_i[0].toUpperCase()+_i.slice(1);xn(e0,"on"+t0)}xn(Np,"onAnimationEnd");xn(Cp,"onAnimationIteration");xn(Pp,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(Ep,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Ac(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ex(r,t,void 0,e),e.currentTarget=null}function Tp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&l.isPropagationStopped())break e;Ac(l,a,c),s=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&l.isPropagationStopped())break e;Ac(l,a,c),s=u}}}if(bs)throw e=Io,bs=!1,Io=null,e}function he(e,t){var n=t[Ho];n===void 0&&(n=t[Ho]=new Set);var r=e+"__bubble";n.has(r)||(Lp(t,e,2,!1),n.add(r))}function Fi(e,t,n){var r=0;t&&(r|=4),Lp(n,e,r,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function pl(e){if(!e[ql]){e[ql]=!0,Ff.forEach(function(n){n!=="selectionchange"&&(n0.has(n)||Fi(n,!1,e),Fi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,Fi("selectionchange",!1,t))}}function Lp(e,t,n,r){switch(mp(t)){case 1:var l=gx;break;case 4:l=xx;break;default:l=Ua}n=l.bind(null,t,n,e),l=void 0,!Lo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Oi(e,t,n,r,l){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===l||a.nodeType===8&&a.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;i=i.return}for(;a!==null;){if(i=Pn(a),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}a=a.parentNode}}r=r.return}ep(function(){var c=s,f=Ba(n),d=[];e:{var p=Ap.get(e);if(p!==void 0){var m=Va,y=e;switch(e){case"keypress":if(os(n)===0)break e;case"keydown":case"keyup":m=Ix;break;case"focusin":y="focus",m=Ii;break;case"focusout":y="blur",m=Ii;break;case"beforeblur":case"afterblur":m=Ii;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Rx;break;case Np:case Cp:case Pp:m=jx;break;case Ep:m=_x;break;case"scroll":m=yx;break;case"wheel":m=Ox;break;case"copy":case"cut":case"paste":m=Nx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=vc}var w=(t&4)!==0,E=!w&&e==="scroll",h=w?p!==null?p+"Capture":null:p;w=[];for(var g=c,v;g!==null;){v=g;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,h!==null&&(C=ol(g,h),C!=null&&w.push(ml(g,C,v)))),E)break;g=g.return}0<w.length&&(p=new m(p,y,null,n,f),d.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Ao&&(y=n.relatedTarget||n.fromElement)&&(Pn(y)||y[qt]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Pn(y):null,y!==null&&(E=$n(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=xc,C="onMouseLeave",h="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=vc,C="onPointerLeave",h="onPointerEnter",g="pointer"),E=m==null?p:Yn(m),v=y==null?p:Yn(y),p=new w(C,g+"leave",m,n,f),p.target=E,p.relatedTarget=v,C=null,Pn(f)===c&&(w=new w(h,g+"enter",y,n,f),w.target=v,w.relatedTarget=E,C=w),E=C,m&&y)t:{for(w=m,h=y,g=0,v=w;v;v=Wn(v))g++;for(v=0,C=h;C;C=Wn(C))v++;for(;0<g-v;)w=Wn(w),g--;for(;0<v-g;)h=Wn(h),v--;for(;g--;){if(w===h||h!==null&&w===h.alternate)break t;w=Wn(w),h=Wn(h)}w=null}else w=null;m!==null&&Tc(d,p,m,w,!1),y!==null&&E!==null&&Tc(d,E,y,w,!0)}}e:{if(p=c?Yn(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=Xx;else if(kc(p))if(bp)A=Kx;else{A=Qx;var N=Vx}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=Gx);if(A&&(A=A(e,c))){vp(d,A,n,f);break e}N&&N(e,p,c),e==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&So(p,"number",p.value)}switch(N=c?Yn(c):window,e){case"focusin":(kc(N)||N.contentEditable==="true")&&(Gn=N,zo=c,Yr=null);break;case"focusout":Yr=zo=Gn=null;break;case"mousedown":_o=!0;break;case"contextmenu":case"mouseup":case"dragend":_o=!1,Pc(d,n,f);break;case"selectionchange":if(Jx)break;case"keydown":case"keyup":Pc(d,n,f)}var R;if(Ga)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Qn?xp(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(gp&&n.locale!=="ko"&&(Qn||O!=="onCompositionStart"?O==="onCompositionEnd"&&Qn&&(R=hp()):(ln=f,Xa="value"in ln?ln.value:ln.textContent,Qn=!0)),N=Ns(c,O),0<N.length&&(O=new yc(O,e,null,n,f),d.push({event:O,listeners:N}),R?O.data=R:(R=yp(n),R!==null&&(O.data=R)))),(R=Bx?Hx(e,n):Wx(e,n))&&(c=Ns(c,"onBeforeInput"),0<c.length&&(f=new yc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=R))}Tp(d,t)})}function ml(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ns(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=ol(e,n),s!=null&&r.unshift(ml(e,s,l)),s=ol(e,t),s!=null&&r.push(ml(e,s,l))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tc(e,t,n,r,l){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,l?(u=ol(n,s),u!=null&&i.unshift(ml(n,u,a))):l||(u=ol(n,s),u!=null&&i.push(ml(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var r0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function Lc(e){return(typeof e=="string"?e:""+e).replace(r0,`
`).replace(l0,"")}function Ul(e,t,n){if(t=Lc(t),Lc(e)!==t&&n)throw Error(q(425))}function Cs(){}var Fo=null,Oo=null;function $o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(e){return Ic.resolve(null).then(e).catch(o0)}:Bo;function o0(e){setTimeout(function(){throw e})}function $i(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),cl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);cl(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Sr,hl="__reactProps$"+Sr,qt="__reactContainer$"+Sr,Ho="__reactEvents$"+Sr,a0="__reactListeners$"+Sr,u0="__reactHandles$"+Sr;function Pn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mc(e);e!==null;){if(n=e[Lt])return n;e=Mc(e)}return t}e=n,n=e.parentNode}return null}function El(e){return e=e[Lt]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function ei(e){return e[hl]||null}var Wo=[],Zn=-1;function yn(e){return{current:e}}function ge(e){0>Zn||(e.current=Wo[Zn],Wo[Zn]=null,Zn--)}function pe(e,t){Zn++,Wo[Zn]=e.current,e.current=t}var gn={},Fe=yn(gn),Ke=yn(!1),In=gn;function mr(e,t){var n=e.type.contextTypes;if(!n)return gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in n)l[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ye(e){return e=e.childContextTypes,e!=null}function Ps(){ge(Ke),ge(Fe)}function Dc(e,t,n){if(Fe.current!==gn)throw Error(q(168));pe(Fe,t),pe(Ke,n)}function Ip(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(q(108,Vg(e)||"Unknown",l));return be({},n,r)}function Es(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,In=Fe.current,pe(Fe,e),pe(Ke,Ke.current),!0}function Rc(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Ip(e,t,In),r.__reactInternalMemoizedMergedChildContext=e,ge(Ke),ge(Fe),pe(Fe,e)):ge(Ke),pe(Ke,n)}var Ot=null,ti=!1,Bi=!1;function Mp(e){Ot===null?Ot=[e]:Ot.push(e)}function c0(e){ti=!0,Mp(e)}function vn(){if(!Bi&&Ot!==null){Bi=!0;var e=0,t=oe;try{var n=Ot;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ot=null,ti=!1}catch(l){throw Ot!==null&&(Ot=Ot.slice(e+1)),lp(Ha,vn),l}finally{oe=t,Bi=!1}}return null}var Jn=[],er=0,As=null,Ts=0,ut=[],ct=0,Mn=null,$t=1,Bt="";function Sn(e,t){Jn[er++]=Ts,Jn[er++]=As,As=e,Ts=t}function Dp(e,t,n){ut[ct++]=$t,ut[ct++]=Bt,ut[ct++]=Mn,Mn=e;var r=$t;e=Bt;var l=32-St(r)-1;r&=~(1<<l),n+=1;var s=32-St(t)+l;if(30<s){var i=l-l%5;s=(r&(1<<i)-1).toString(32),r>>=i,l-=i,$t=1<<32-St(t)+l|n<<l|r,Bt=s+e}else $t=1<<s|n<<l|r,Bt=e}function Ya(e){e.return!==null&&(Sn(e,1),Dp(e,1,0))}function Za(e){for(;e===As;)As=Jn[--er],Jn[er]=null,Ts=Jn[--er],Jn[er]=null;for(;e===Mn;)Mn=ut[--ct],ut[ct]=null,Bt=ut[--ct],ut[ct]=null,$t=ut[--ct],ut[ct]=null}var lt=null,rt=null,xe=!1,wt=null;function Rp(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lt=e,rt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lt=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mn!==null?{id:$t,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,lt=e,rt=null,!0):!1;default:return!1}}function qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Uo(e){if(xe){var t=rt;if(t){var n=t;if(!zc(e,t)){if(qo(e))throw Error(q(418));t=cn(n.nextSibling);var r=lt;t&&zc(e,t)?Rp(r,n):(e.flags=e.flags&-4097|2,xe=!1,lt=e)}}else{if(qo(e))throw Error(q(418));e.flags=e.flags&-4097|2,xe=!1,lt=e}}}function _c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lt=e}function Xl(e){if(e!==lt)return!1;if(!xe)return _c(e),xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$o(e.type,e.memoizedProps)),t&&(t=rt)){if(qo(e))throw zp(),Error(q(418));for(;t;)Rp(e,t),t=cn(t.nextSibling)}if(_c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rt=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=lt?cn(e.stateNode.nextSibling):null;return!0}function zp(){for(var e=rt;e;)e=cn(e.nextSibling)}function hr(){rt=lt=null,xe=!1}function Ja(e){wt===null?wt=[e]:wt.push(e)}var d0=Qt.ReactCurrentBatchConfig;function Rr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var l=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=l.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Vl(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fc(e){var t=e._init;return t(e._payload)}function _p(e){function t(h,g){if(e){var v=h.deletions;v===null?(h.deletions=[g],h.flags|=16):v.push(g)}}function n(h,g){if(!e)return null;for(;g!==null;)t(h,g),g=g.sibling;return null}function r(h,g){for(h=new Map;g!==null;)g.key!==null?h.set(g.key,g):h.set(g.index,g),g=g.sibling;return h}function l(h,g){return h=mn(h,g),h.index=0,h.sibling=null,h}function s(h,g,v){return h.index=v,e?(v=h.alternate,v!==null?(v=v.index,v<g?(h.flags|=2,g):v):(h.flags|=2,g)):(h.flags|=1048576,g)}function i(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,g,v,C){return g===null||g.tag!==6?(g=Qi(v,h.mode,C),g.return=h,g):(g=l(g,v),g.return=h,g)}function u(h,g,v,C){var A=v.type;return A===Vn?f(h,g,v.props.children,C,v.key):g!==null&&(g.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===en&&Fc(A)===g.type)?(C=l(g,v.props),C.ref=Rr(h,g,v),C.return=h,C):(C=ms(v.type,v.key,v.props,null,h.mode,C),C.ref=Rr(h,g,v),C.return=h,C)}function c(h,g,v,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Gi(v,h.mode,C),g.return=h,g):(g=l(g,v.children||[]),g.return=h,g)}function f(h,g,v,C,A){return g===null||g.tag!==7?(g=Ln(v,h.mode,C,A),g.return=h,g):(g=l(g,v),g.return=h,g)}function d(h,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Qi(""+g,h.mode,v),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zl:return v=ms(g.type,g.key,g.props,null,h.mode,v),v.ref=Rr(h,null,g),v.return=h,v;case Xn:return g=Gi(g,h.mode,v),g.return=h,g;case en:var C=g._init;return d(h,C(g._payload),v)}if(qr(g)||Tr(g))return g=Ln(g,h.mode,v,null),g.return=h,g;Vl(h,g)}return null}function p(h,g,v,C){var A=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return A!==null?null:a(h,g,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:return v.key===A?u(h,g,v,C):null;case Xn:return v.key===A?c(h,g,v,C):null;case en:return A=v._init,p(h,g,A(v._payload),C)}if(qr(v)||Tr(v))return A!==null?null:f(h,g,v,C,null);Vl(h,v)}return null}function m(h,g,v,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return h=h.get(v)||null,a(g,h,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case zl:return h=h.get(C.key===null?v:C.key)||null,u(g,h,C,A);case Xn:return h=h.get(C.key===null?v:C.key)||null,c(g,h,C,A);case en:var N=C._init;return m(h,g,v,N(C._payload),A)}if(qr(C)||Tr(C))return h=h.get(v)||null,f(g,h,C,A,null);Vl(g,C)}return null}function y(h,g,v,C){for(var A=null,N=null,R=g,O=g=0,P=null;R!==null&&O<v.length;O++){R.index>O?(P=R,R=null):P=R.sibling;var x=p(h,R,v[O],C);if(x===null){R===null&&(R=P);break}e&&R&&x.alternate===null&&t(h,R),g=s(x,g,O),N===null?A=x:N.sibling=x,N=x,R=P}if(O===v.length)return n(h,R),xe&&Sn(h,O),A;if(R===null){for(;O<v.length;O++)R=d(h,v[O],C),R!==null&&(g=s(R,g,O),N===null?A=R:N.sibling=R,N=R);return xe&&Sn(h,O),A}for(R=r(h,R);O<v.length;O++)P=m(R,h,O,v[O],C),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?O:P.key),g=s(P,g,O),N===null?A=P:N.sibling=P,N=P);return e&&R.forEach(function(k){return t(h,k)}),xe&&Sn(h,O),A}function w(h,g,v,C){var A=Tr(v);if(typeof A!="function")throw Error(q(150));if(v=A.call(v),v==null)throw Error(q(151));for(var N=A=null,R=g,O=g=0,P=null,x=v.next();R!==null&&!x.done;O++,x=v.next()){R.index>O?(P=R,R=null):P=R.sibling;var k=p(h,R,x.value,C);if(k===null){R===null&&(R=P);break}e&&R&&k.alternate===null&&t(h,R),g=s(k,g,O),N===null?A=k:N.sibling=k,N=k,R=P}if(x.done)return n(h,R),xe&&Sn(h,O),A;if(R===null){for(;!x.done;O++,x=v.next())x=d(h,x.value,C),x!==null&&(g=s(x,g,O),N===null?A=x:N.sibling=x,N=x);return xe&&Sn(h,O),A}for(R=r(h,R);!x.done;O++,x=v.next())x=m(R,h,O,x.value,C),x!==null&&(e&&x.alternate!==null&&R.delete(x.key===null?O:x.key),g=s(x,g,O),N===null?A=x:N.sibling=x,N=x);return e&&R.forEach(function(j){return t(h,j)}),xe&&Sn(h,O),A}function E(h,g,v,C){if(typeof v=="object"&&v!==null&&v.type===Vn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zl:e:{for(var A=v.key,N=g;N!==null;){if(N.key===A){if(A=v.type,A===Vn){if(N.tag===7){n(h,N.sibling),g=l(N,v.props.children),g.return=h,h=g;break e}}else if(N.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===en&&Fc(A)===N.type){n(h,N.sibling),g=l(N,v.props),g.ref=Rr(h,N,v),g.return=h,h=g;break e}n(h,N);break}else t(h,N);N=N.sibling}v.type===Vn?(g=Ln(v.props.children,h.mode,C,v.key),g.return=h,h=g):(C=ms(v.type,v.key,v.props,null,h.mode,C),C.ref=Rr(h,g,v),C.return=h,h=C)}return i(h);case Xn:e:{for(N=v.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(h,g.sibling),g=l(g,v.children||[]),g.return=h,h=g;break e}else{n(h,g);break}else t(h,g);g=g.sibling}g=Gi(v,h.mode,C),g.return=h,h=g}return i(h);case en:return N=v._init,E(h,g,N(v._payload),C)}if(qr(v))return y(h,g,v,C);if(Tr(v))return w(h,g,v,C);Vl(h,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(h,g.sibling),g=l(g,v),g.return=h,h=g):(n(h,g),g=Qi(v,h.mode,C),g.return=h,h=g),i(h)):n(h,g)}return E}var gr=_p(!0),Fp=_p(!1),Ls=yn(null),Is=null,tr=null,eu=null;function tu(){eu=tr=Is=null}function nu(e){var t=Ls.current;ge(Ls),e._currentValue=t}function Xo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){Is=e,eu=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(eu!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(Is===null)throw Error(q(308));tr=e,Is.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var En=null;function ru(e){En===null?En=[e]:En.push(e)}function Op(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,ru(t)):(n.next=l.next,l.next=n),t.interleaved=n,Ut(e,r)}function Ut(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tn=!1;function lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $p(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Ut(e,n)}return l=r.interleaved,l===null?(t.next=t,ru(r)):(t.next=l.next,l.next=t),r.interleaved=t,Ut(e,n)}function as(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wa(e,n)}}function Oc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?l=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var l=e.updateQueue;tn=!1;var s=l.firstBaseUpdate,i=l.lastBaseUpdate,a=l.shared.pending;if(a!==null){l.shared.pending=null;var u=a,c=u.next;u.next=null,i===null?s=c:i.next=c,i=u;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==i&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(s!==null){var d=l.baseState;i=0,f=c=u=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,w=a;switch(p=t,m=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=be({},d,p);break e;case 2:tn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=l.effects,p===null?l.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=m,u=d):f=f.next=m,i|=p;if(a=a.next,a===null){if(a=l.shared.pending,a===null)break;p=a,a=p.next,p.next=null,l.lastBaseUpdate=p,l.shared.pending=null}}while(!0);if(f===null&&(u=d),l.baseState=u,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else s===null&&(l.shared.lanes=0);Rn|=i,e.lanes=i,e.memoizedState=d}}function $c(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(q(191,l));l.call(r)}}}var Al={},Mt=yn(Al),gl=yn(Al),xl=yn(Al);function An(e){if(e===Al)throw Error(q(174));return e}function su(e,t){switch(pe(xl,t),pe(gl,e),pe(Mt,Al),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Co(t,e)}ge(Mt),pe(Mt,t)}function xr(){ge(Mt),ge(gl),ge(xl)}function Bp(e){An(xl.current);var t=An(Mt.current),n=Co(t,e.type);t!==n&&(pe(gl,e),pe(Mt,n))}function iu(e){gl.current===e&&(ge(Mt),ge(gl))}var ye=yn(0);function Ds(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hi=[];function ou(){for(var e=0;e<Hi.length;e++)Hi[e]._workInProgressVersionPrimary=null;Hi.length=0}var us=Qt.ReactCurrentDispatcher,Wi=Qt.ReactCurrentBatchConfig,Dn=0,ve=null,Ne=null,Pe=null,Rs=!1,Zr=!1,yl=0,f0=0;function De(){throw Error(q(321))}function au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function uu(e,t,n,r,l,s){if(Dn=s,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,us.current=e===null||e.memoizedState===null?g0:x0,e=n(r,l),Zr){s=0;do{if(Zr=!1,yl=0,25<=s)throw Error(q(301));s+=1,Pe=Ne=null,t.updateQueue=null,us.current=y0,e=n(r,l)}while(Zr)}if(us.current=zs,t=Ne!==null&&Ne.next!==null,Dn=0,Pe=Ne=ve=null,Rs=!1,t)throw Error(q(300));return e}function cu(){var e=yl!==0;return yl=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ve.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function ht(){if(Ne===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=Pe===null?ve.memoizedState:Pe.next;if(t!==null)Pe=t,Ne=e;else{if(e===null)throw Error(q(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Pe===null?ve.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function vl(e,t){return typeof t=="function"?t(e):t}function qi(e){var t=ht(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=Ne,l=r.baseQueue,s=n.pending;if(s!==null){if(l!==null){var i=l.next;l.next=s.next,s.next=i}r.baseQueue=l=s,n.pending=null}if(l!==null){s=l.next,r=r.baseState;var a=i=null,u=null,c=s;do{var f=c.lane;if((Dn&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,i=r):u=u.next=d,ve.lanes|=f,Rn|=f}c=c.next}while(c!==null&&c!==s);u===null?i=r:u.next=a,Pt(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do s=l.lane,ve.lanes|=s,Rn|=s,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ui(e){var t=ht(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do s=e(s,i.action),i=i.next;while(i!==l);Pt(s,t.memoizedState)||(Qe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Hp(){}function Wp(e,t){var n=ve,r=ht(),l=t(),s=!Pt(r.memoizedState,l);if(s&&(r.memoizedState=l,Qe=!0),r=r.queue,du(Xp.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,bl(9,Up.bind(null,n,r,l,t),void 0,null),Ee===null)throw Error(q(349));Dn&30||qp(n,t,l)}return l}function qp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Up(e,t,n,r){t.value=n,t.getSnapshot=r,Vp(t)&&Qp(e)}function Xp(e,t,n){return n(function(){Vp(t)&&Qp(e)})}function Vp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function Qp(e){var t=Ut(e,1);t!==null&&Nt(t,e,1,-1)}function Bc(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t.queue=e,e=e.dispatch=h0.bind(null,ve,e),[t.memoizedState,e]}function bl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Gp(){return ht().memoizedState}function cs(e,t,n,r){var l=At();ve.flags|=e,l.memoizedState=bl(1|t,n,void 0,r===void 0?null:r)}function ni(e,t,n,r){var l=ht();r=r===void 0?null:r;var s=void 0;if(Ne!==null){var i=Ne.memoizedState;if(s=i.destroy,r!==null&&au(r,i.deps)){l.memoizedState=bl(t,n,s,r);return}}ve.flags|=e,l.memoizedState=bl(1|t,n,s,r)}function Hc(e,t){return cs(8390656,8,e,t)}function du(e,t){return ni(2048,8,e,t)}function Kp(e,t){return ni(4,2,e,t)}function Yp(e,t){return ni(4,4,e,t)}function Zp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jp(e,t,n){return n=n!=null?n.concat([e]):null,ni(4,4,Zp.bind(null,t,e),n)}function fu(){}function em(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&au(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tm(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&au(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nm(e,t,n){return Dn&21?(Pt(n,t)||(n=op(),ve.lanes|=n,Rn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function p0(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=Wi.transition;Wi.transition={};try{e(!1),t()}finally{oe=n,Wi.transition=r}}function rm(){return ht().memoizedState}function m0(e,t,n){var r=pn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lm(e))sm(t,n);else if(n=Op(e,t,n,r),n!==null){var l=He();Nt(n,e,r,l),im(n,t,r)}}function h0(e,t,n){var r=pn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lm(e))sm(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(l.hasEagerState=!0,l.eagerState=a,Pt(a,i)){var u=t.interleaved;u===null?(l.next=l,ru(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Op(e,t,l,r),n!==null&&(l=He(),Nt(n,e,r,l),im(n,t,r))}}function lm(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function sm(e,t){Zr=Rs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function im(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wa(e,n)}}var zs={readContext:mt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},g0={readContext:mt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cs(4194308,4,Zp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cs(4194308,4,e,t)},useInsertionEffect:function(e,t){return cs(4,2,e,t)},useMemo:function(e,t){var n=At();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=At();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m0.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:Bc,useDebugValue:fu,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=Bc(!1),t=e[0];return e=p0.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,l=At();if(xe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),Ee===null)throw Error(q(349));Dn&30||qp(r,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,Hc(Xp.bind(null,r,s,e),[e]),r.flags|=2048,bl(9,Up.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=At(),t=Ee.identifierPrefix;if(xe){var n=Bt,r=$t;n=(r&~(1<<32-St(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=f0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x0={readContext:mt,useCallback:em,useContext:mt,useEffect:du,useImperativeHandle:Jp,useInsertionEffect:Kp,useLayoutEffect:Yp,useMemo:tm,useReducer:qi,useRef:Gp,useState:function(){return qi(vl)},useDebugValue:fu,useDeferredValue:function(e){var t=ht();return nm(t,Ne.memoizedState,e)},useTransition:function(){var e=qi(vl)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Hp,useSyncExternalStore:Wp,useId:rm,unstable_isNewReconciler:!1},y0={readContext:mt,useCallback:em,useContext:mt,useEffect:du,useImperativeHandle:Jp,useInsertionEffect:Kp,useLayoutEffect:Yp,useMemo:tm,useReducer:Ui,useRef:Gp,useState:function(){return Ui(vl)},useDebugValue:fu,useDeferredValue:function(e){var t=ht();return Ne===null?t.memoizedState=e:nm(t,Ne.memoizedState,e)},useTransition:function(){var e=Ui(vl)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Hp,useSyncExternalStore:Wp,useId:rm,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ri={isMounted:function(e){return(e=e._reactInternals)?$n(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),l=pn(e),s=Ht(r,l);s.payload=t,n!=null&&(s.callback=n),t=dn(e,s,l),t!==null&&(Nt(t,e,l,r),as(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),l=pn(e),s=Ht(r,l);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=dn(e,s,l),t!==null&&(Nt(t,e,l,r),as(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=pn(e),l=Ht(n,r);l.tag=2,t!=null&&(l.callback=t),t=dn(e,l,r),t!==null&&(Nt(t,e,r,n),as(t,e,r))}};function Wc(e,t,n,r,l,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!fl(n,r)||!fl(l,s):!0}function om(e,t,n){var r=!1,l=gn,s=t.contextType;return typeof s=="object"&&s!==null?s=mt(s):(l=Ye(t)?In:Fe.current,r=t.contextTypes,s=(r=r!=null)?mr(e,l):gn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ri,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=s),t}function qc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ri.enqueueReplaceState(t,t.state,null)}function Qo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},lu(e);var s=t.contextType;typeof s=="object"&&s!==null?l.context=mt(s):(s=Ye(t)?In:Fe.current,l.context=mr(e,s)),l.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Vo(e,t,s,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ri.enqueueReplaceState(l,l.state,null),Ms(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=Xg(r),r=r.return;while(r);var l=n}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:l,digest:null}}function Xi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Go(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function am(e,t,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fs||(Fs=!0,sa=r),Go(e,t)},n}function um(e,t,n){n=Ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Go(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Go(e,t),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Uc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new v0;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=M0.bind(null,e,t,n),t.then(e,e))}function Xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ht(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e)}var b0=Qt.ReactCurrentOwner,Qe=!1;function $e(e,t,n,r){t.child=e===null?Fp(t,null,n,r):gr(t,e.child,n,r)}function Qc(e,t,n,r,l){n=n.render;var s=t.ref;return ar(t,l),r=uu(e,t,n,r,s,l),n=cu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Xt(e,t,l)):(xe&&n&&Ya(t),t.flags|=1,$e(e,t,r,l),t.child)}function Gc(e,t,n,r,l){if(e===null){var s=n.type;return typeof s=="function"&&!bu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,cm(e,t,s,r,l)):(e=ms(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&l)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(i,r)&&e.ref===t.ref)return Xt(e,t,l)}return t.flags|=1,e=mn(s,r),e.ref=t.ref,e.return=t,t.child=e}function cm(e,t,n,r,l){if(e!==null){var s=e.memoizedProps;if(fl(s,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=s,(e.lanes&l)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Xt(e,t,l)}return Ko(e,t,n,r,l)}function dm(e,t,n){var r=t.pendingProps,l=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(rr,nt),nt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(rr,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(rr,nt),nt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,pe(rr,nt),nt|=r;return $e(e,t,l,n),t.child}function fm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ko(e,t,n,r,l){var s=Ye(n)?In:Fe.current;return s=mr(t,s),ar(t,l),n=uu(e,t,n,r,s,l),r=cu(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Xt(e,t,l)):(xe&&r&&Ya(t),t.flags|=1,$e(e,t,n,l),t.child)}function Kc(e,t,n,r,l){if(Ye(n)){var s=!0;Es(t)}else s=!1;if(ar(t,l),t.stateNode===null)ds(e,t),om(t,n,r),Qo(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=mt(c):(c=Ye(n)?In:Fe.current,c=mr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==c)&&qc(t,i,r,c),tn=!1;var p=t.memoizedState;i.state=p,Ms(t,r,i,l),u=t.memoizedState,a!==r||p!==u||Ke.current||tn?(typeof f=="function"&&(Vo(t,n,f,r),u=t.memoizedState),(a=tn||Wc(t,n,a,r,p,u,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,$p(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vt(t.type,a),i.props=c,d=t.pendingProps,p=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=mt(u):(u=Ye(n)?In:Fe.current,u=mr(t,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||p!==u)&&qc(t,i,r,u),tn=!1,p=t.memoizedState,i.state=p,Ms(t,r,i,l);var y=t.memoizedState;a!==d||p!==y||Ke.current||tn?(typeof m=="function"&&(Vo(t,n,m,r),y=t.memoizedState),(c=tn||Wc(t,n,c,r,p,y,u)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Yo(e,t,n,r,s,l)}function Yo(e,t,n,r,l,s){fm(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Rc(t,n,!1),Xt(e,t,s);r=t.stateNode,b0.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=gr(t,e.child,null,s),t.child=gr(t,null,a,s)):$e(e,t,a,s),t.memoizedState=r.state,l&&Rc(t,n,!0),t.child}function pm(e){var t=e.stateNode;t.pendingContext?Dc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dc(e,t.context,!1),su(e,t.containerInfo)}function Yc(e,t,n,r,l){return hr(),Ja(l),t.flags|=256,$e(e,t,n,r),t.child}var Zo={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function mm(e,t,n){var r=t.pendingProps,l=ye.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(l&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),pe(ye,l&1),e===null)return Uo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ii(i,r,0,null),e=Ln(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Jo(n),t.memoizedState=Zo,e):pu(t,i));if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null))return w0(e,t,i,r,a,l,n);if(s){s=r.fallback,i=t.mode,l=e.child,a=l.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=mn(l,u),r.subtreeFlags=l.subtreeFlags&14680064),a!==null?s=mn(a,s):(s=Ln(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Jo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Zo,r}return s=e.child,e=s.sibling,r=mn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pu(e,t){return t=ii({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ql(e,t,n,r){return r!==null&&Ja(r),gr(t,e.child,null,n),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w0(e,t,n,r,l,s,i){if(n)return t.flags&256?(t.flags&=-257,r=Xi(Error(q(422))),Ql(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,l=t.mode,r=ii({mode:"visible",children:r.children},l,0,null),s=Ln(s,l,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&gr(t,e.child,null,i),t.child.memoizedState=Jo(i),t.memoizedState=Zo,s);if(!(t.mode&1))return Ql(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Xi(s,r,void 0),Ql(e,t,i,r)}if(a=(i&e.childLanes)!==0,Qe||a){if(r=Ee,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|i)?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,Ut(e,l),Nt(r,e,l,-1))}return vu(),r=Xi(Error(q(421))),Ql(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=D0.bind(null,e),l._reactRetry=t,null):(e=s.treeContext,rt=cn(l.nextSibling),lt=t,xe=!0,wt=null,e!==null&&(ut[ct++]=$t,ut[ct++]=Bt,ut[ct++]=Mn,$t=e.id,Bt=e.overflow,Mn=t),t=pu(t,r.children),t.flags|=4096,t)}function Zc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xo(e.return,t,n)}function Vi(e,t,n,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=l)}function hm(e,t,n){var r=t.pendingProps,l=r.revealOrder,s=r.tail;if($e(e,t,r.children,n),r=ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,n,t);else if(e.tag===19)Zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pe(ye,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ds(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Vi(t,!1,l,n,s);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ds(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Vi(t,!0,n,null,s);break;case"together":Vi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ds(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function k0(e,t,n){switch(t.tag){case 3:pm(t),hr();break;case 5:Bp(t);break;case 1:Ye(t.type)&&Es(t);break;case 4:su(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;pe(Ls,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pe(ye,ye.current&1),t.flags|=128,null):n&t.child.childLanes?mm(e,t,n):(pe(ye,ye.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);pe(ye,ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hm(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),pe(ye,ye.current),r)break;return null;case 22:case 23:return t.lanes=0,dm(e,t,n)}return Xt(e,t,n)}var gm,ea,xm,ym;gm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ea=function(){};xm=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,An(Mt.current);var s=null;switch(n){case"input":l=ko(e,l),r=ko(e,r),s=[];break;case"select":l=be({},l,{value:void 0}),r=be({},r,{value:void 0}),s=[];break;case"textarea":l=No(e,l),r=No(e,r),s=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cs)}Po(n,r);var i;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var a=l[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&he("scroll",e),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};ym=function(e,t,n,r){n!==r&&(t.flags|=4)};function zr(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function j0(e,t,n){var r=t.pendingProps;switch(Za(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Ye(t.type)&&Ps(),Re(t),null;case 3:return r=t.stateNode,xr(),ge(Ke),ge(Fe),ou(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(aa(wt),wt=null))),ea(e,t),Re(t),null;case 5:iu(t);var l=An(xl.current);if(n=t.type,e!==null&&t.stateNode!=null)xm(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return Re(t),null}if(e=An(Mt.current),Xl(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Lt]=t,r[hl]=s,e=(t.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(l=0;l<Xr.length;l++)he(Xr[l],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":oc(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":uc(r,s),he("invalid",r)}Po(n,s),l=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ul(r.textContent,a,e),l=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ul(r.textContent,a,e),l=["children",""+a]):sl.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&he("scroll",r)}switch(n){case"input":_l(r),ac(r,s,!0);break;case"textarea":_l(r),cc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cs)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Lt]=t,e[hl]=r,gm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Eo(n,r),n){case"dialog":he("cancel",e),he("close",e),l=r;break;case"iframe":case"object":case"embed":he("load",e),l=r;break;case"video":case"audio":for(l=0;l<Xr.length;l++)he(Xr[l],e);l=r;break;case"source":he("error",e),l=r;break;case"img":case"image":case"link":he("error",e),he("load",e),l=r;break;case"details":he("toggle",e),l=r;break;case"input":oc(e,r),l=ko(e,r),he("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=be({},r,{value:void 0}),he("invalid",e);break;case"textarea":uc(e,r),l=No(e,r),he("invalid",e);break;default:l=r}Po(n,l),a=l;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Gf(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Vf(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&il(e,u):typeof u=="number"&&il(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&he("scroll",e):u!=null&&_a(e,s,u,i))}switch(n){case"input":_l(e),ac(e,r,!1);break;case"textarea":_l(e),cc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lr(e,!!r.multiple,s,!1):r.defaultValue!=null&&lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Cs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)ym(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=An(xl.current),An(Mt.current),Xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(s=r.nodeValue!==n)&&(e=lt,e!==null))switch(e.tag){case 3:Ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return Re(t),null;case 13:if(ge(ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xe&&rt!==null&&t.mode&1&&!(t.flags&128))zp(),hr(),t.flags|=98560,s=!1;else if(s=Xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[Lt]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),s=!1}else wt!==null&&(aa(wt),wt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ye.current&1?Ce===0&&(Ce=3):vu())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return xr(),ea(e,t),e===null&&pl(t.stateNode.containerInfo),Re(t),null;case 10:return nu(t.type._context),Re(t),null;case 17:return Ye(t.type)&&Ps(),Re(t),null;case 19:if(ge(ye),s=t.memoizedState,s===null)return Re(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)zr(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ds(e),i!==null){for(t.flags|=128,zr(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(ye,ye.current&1|2),t.child}e=e.sibling}s.tail!==null&&ke()>vr&&(t.flags|=128,r=!0,zr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ds(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!xe)return Re(t),null}else 2*ke()-s.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,zr(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ke(),t.sibling=null,n=ye.current,pe(ye,r?n&1|2:n&1),t):(Re(t),null);case 22:case 23:return yu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?nt&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function S0(e,t){switch(Za(t),t.tag){case 1:return Ye(t.type)&&Ps(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xr(),ge(Ke),ge(Fe),ou(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(ge(ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(ye),null;case 4:return xr(),null;case 10:return nu(t.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var Gl=!1,ze=!1,N0=typeof WeakSet=="function"?WeakSet:Set,K=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(e,t,r)}else n.current=null}function ta(e,t,n){try{n()}catch(r){we(e,t,r)}}var Jc=!1;function C0(e,t){if(Fo=js,e=jp(),Ka(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var m;d!==n||l!==0&&d.nodeType!==3||(a=i+l),d!==s||r!==0&&d.nodeType!==3||(u=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===e)break t;if(p===n&&++c===l&&(a=i),p===s&&++f===r&&(u=i),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oo={focusedElem:e,selectionRange:n},js=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,E=y.memoizedState,h=t.stateNode,g=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:vt(t.type,w),E);h.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(C){we(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return y=Jc,Jc=!1,y}function Jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var s=l.destroy;l.destroy=void 0,s!==void 0&&ta(t,n,s)}l=l.next}while(l!==r)}}function li(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function na(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vm(e){var t=e.alternate;t!==null&&(e.alternate=null,vm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[hl],delete t[Ho],delete t[a0],delete t[u0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bm(e){return e.tag===5||e.tag===3||e.tag===4}function ed(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ra(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cs));else if(r!==4&&(e=e.child,e!==null))for(ra(e,t,n),e=e.sibling;e!==null;)ra(e,t,n),e=e.sibling}function la(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(la(e,t,n),e=e.sibling;e!==null;)la(e,t,n),e=e.sibling}var Ae=null,bt=!1;function Zt(e,t,n){for(n=n.child;n!==null;)wm(e,t,n),n=n.sibling}function wm(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:ze||nr(n,t);case 6:var r=Ae,l=bt;Ae=null,Zt(e,t,n),Ae=r,bt=l,Ae!==null&&(bt?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(bt?(e=Ae,n=n.stateNode,e.nodeType===8?$i(e.parentNode,n):e.nodeType===1&&$i(e,n),cl(e)):$i(Ae,n.stateNode));break;case 4:r=Ae,l=bt,Ae=n.stateNode.containerInfo,bt=!0,Zt(e,t,n),Ae=r,bt=l;break;case 0:case 11:case 14:case 15:if(!ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var s=l,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&ta(n,t,i),l=l.next}while(l!==r)}Zt(e,t,n);break;case 1:if(!ze&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){we(n,t,a)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(ze=(r=ze)||n.memoizedState!==null,Zt(e,t,n),ze=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new N0),t.forEach(function(r){var l=R0.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,bt=!1;break e;case 3:Ae=a.stateNode.containerInfo,bt=!0;break e;case 4:Ae=a.stateNode.containerInfo,bt=!0;break e}a=a.return}if(Ae===null)throw Error(q(160));wm(s,i,l),Ae=null,bt=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(c){we(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)km(t,e),t=t.sibling}function km(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),Et(e),r&4){try{Jr(3,e,e.return),li(3,e)}catch(w){we(e,e.return,w)}try{Jr(5,e,e.return)}catch(w){we(e,e.return,w)}}break;case 1:yt(t,e),Et(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(yt(t,e),Et(e),r&512&&n!==null&&nr(n,n.return),e.flags&32){var l=e.stateNode;try{il(l,"")}catch(w){we(e,e.return,w)}}if(r&4&&(l=e.stateNode,l!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qf(l,s),Eo(a,i);var c=Eo(a,s);for(i=0;i<u.length;i+=2){var f=u[i],d=u[i+1];f==="style"?Gf(l,d):f==="dangerouslySetInnerHTML"?Vf(l,d):f==="children"?il(l,d):_a(l,f,d,c)}switch(a){case"input":jo(l,s);break;case"textarea":Uf(l,s);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?lr(l,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?lr(l,!!s.multiple,s.defaultValue,!0):lr(l,!!s.multiple,s.multiple?[]:"",!1))}l[hl]=s}catch(w){we(e,e.return,w)}}break;case 6:if(yt(t,e),Et(e),r&4){if(e.stateNode===null)throw Error(q(162));l=e.stateNode,s=e.memoizedProps;try{l.nodeValue=s}catch(w){we(e,e.return,w)}}break;case 3:if(yt(t,e),Et(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(t.containerInfo)}catch(w){we(e,e.return,w)}break;case 4:yt(t,e),Et(e);break;case 13:yt(t,e),Et(e),l=e.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(gu=ke())),r&4&&td(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ze=(c=ze)||f,yt(t,e),ze=c):yt(t,e),Et(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(K=e,f=e.child;f!==null;){for(d=K=f;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:Jr(4,p,p.return);break;case 1:nr(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){we(r,n,w)}}break;case 5:nr(p,p.return);break;case 22:if(p.memoizedState!==null){rd(d);continue}}m!==null?(m.return=p,K=m):rd(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{l=d.stateNode,c?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Qf("display",i))}catch(w){we(e,e.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){we(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yt(t,e),Et(e),r&4&&td(e);break;case 21:break;default:yt(t,e),Et(e)}}function Et(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bm(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(il(l,""),r.flags&=-33);var s=ed(e);la(e,s,l);break;case 3:case 4:var i=r.stateNode.containerInfo,a=ed(e);ra(e,a,i);break;default:throw Error(q(161))}}catch(u){we(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function P0(e,t,n){K=e,jm(e)}function jm(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var l=K,s=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||Gl;if(!i){var a=l.alternate,u=a!==null&&a.memoizedState!==null||ze;a=Gl;var c=ze;if(Gl=i,(ze=u)&&!c)for(K=l;K!==null;)i=K,u=i.child,i.tag===22&&i.memoizedState!==null?ld(l):u!==null?(u.return=i,K=u):ld(l);for(;s!==null;)K=s,jm(s),s=s.sibling;K=l,Gl=a,ze=c}nd(e)}else l.subtreeFlags&8772&&s!==null?(s.return=l,K=s):nd(e)}}function nd(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ze||li(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ze)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:vt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$c(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$c(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&cl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ze||t.flags&512&&na(t)}catch(p){we(t,t.return,p)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function rd(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function ld(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{li(4,t)}catch(u){we(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){we(t,l,u)}}var s=t.return;try{na(t)}catch(u){we(t,s,u)}break;case 5:var i=t.return;try{na(t)}catch(u){we(t,i,u)}}}catch(u){we(t,t.return,u)}if(t===e){K=null;break}var a=t.sibling;if(a!==null){a.return=t.return,K=a;break}K=t.return}}var E0=Math.ceil,_s=Qt.ReactCurrentDispatcher,mu=Qt.ReactCurrentOwner,pt=Qt.ReactCurrentBatchConfig,le=0,Ee=null,Se=null,Le=0,nt=0,rr=yn(0),Ce=0,wl=null,Rn=0,si=0,hu=0,el=null,Ve=null,gu=0,vr=1/0,Ft=null,Fs=!1,sa=null,fn=null,Kl=!1,sn=null,Os=0,tl=0,ia=null,fs=-1,ps=0;function He(){return le&6?ke():fs!==-1?fs:fs=ke()}function pn(e){return e.mode&1?le&2&&Le!==0?Le&-Le:d0.transition!==null?(ps===0&&(ps=op()),ps):(e=oe,e!==0||(e=window.event,e=e===void 0?16:mp(e.type)),e):1}function Nt(e,t,n,r){if(50<tl)throw tl=0,ia=null,Error(q(185));Cl(e,n,r),(!(le&2)||e!==Ee)&&(e===Ee&&(!(le&2)&&(si|=n),Ce===4&&rn(e,Le)),Ze(e,r),n===1&&le===0&&!(t.mode&1)&&(vr=ke()+500,ti&&vn()))}function Ze(e,t){var n=e.callbackNode;dx(e,t);var r=ks(e,e===Ee?Le:0);if(r===0)n!==null&&pc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pc(n),t===1)e.tag===0?c0(sd.bind(null,e)):Mp(sd.bind(null,e)),i0(function(){!(le&6)&&vn()}),n=null;else{switch(ap(r)){case 1:n=Ha;break;case 4:n=sp;break;case 16:n=ws;break;case 536870912:n=ip;break;default:n=ws}n=Lm(n,Sm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sm(e,t){if(fs=-1,ps=0,le&6)throw Error(q(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=ks(e,e===Ee?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$s(e,r);else{t=r;var l=le;le|=2;var s=Cm();(Ee!==e||Le!==t)&&(Ft=null,vr=ke()+500,Tn(e,t));do try{L0();break}catch(a){Nm(e,a)}while(!0);tu(),_s.current=s,le=l,Se!==null?t=0:(Ee=null,Le=0,t=Ce)}if(t!==0){if(t===2&&(l=Mo(e),l!==0&&(r=l,t=oa(e,l))),t===1)throw n=wl,Tn(e,0),rn(e,r),Ze(e,ke()),n;if(t===6)rn(e,r);else{if(l=e.current.alternate,!(r&30)&&!A0(l)&&(t=$s(e,r),t===2&&(s=Mo(e),s!==0&&(r=s,t=oa(e,s))),t===1))throw n=wl,Tn(e,0),rn(e,r),Ze(e,ke()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:Nn(e,Ve,Ft);break;case 3:if(rn(e,r),(r&130023424)===r&&(t=gu+500-ke(),10<t)){if(ks(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Bo(Nn.bind(null,e,Ve,Ft),t);break}Nn(e,Ve,Ft);break;case 4:if(rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-St(r);s=1<<i,i=t[i],i>l&&(l=i),r&=~s}if(r=l,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E0(r/1960))-r,10<r){e.timeoutHandle=Bo(Nn.bind(null,e,Ve,Ft),r);break}Nn(e,Ve,Ft);break;case 5:Nn(e,Ve,Ft);break;default:throw Error(q(329))}}}return Ze(e,ke()),e.callbackNode===n?Sm.bind(null,e):null}function oa(e,t){var n=el;return e.current.memoizedState.isDehydrated&&(Tn(e,t).flags|=256),e=$s(e,t),e!==2&&(t=Ve,Ve=n,t!==null&&aa(t)),e}function aa(e){Ve===null?Ve=e:Ve.push.apply(Ve,e)}function A0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],s=l.getSnapshot;l=l.value;try{if(!Pt(s(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~hu,t&=~si,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),r=1<<n;e[n]=-1,t&=~r}}function sd(e){if(le&6)throw Error(q(327));ur();var t=ks(e,0);if(!(t&1))return Ze(e,ke()),null;var n=$s(e,t);if(e.tag!==0&&n===2){var r=Mo(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=wl,Tn(e,0),rn(e,t),Ze(e,ke()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nn(e,Ve,Ft),Ze(e,ke()),null}function xu(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(vr=ke()+500,ti&&vn())}}function zn(e){sn!==null&&sn.tag===0&&!(le&6)&&ur();var t=le;le|=1;var n=pt.transition,r=oe;try{if(pt.transition=null,oe=1,e)return e()}finally{oe=r,pt.transition=n,le=t,!(le&6)&&vn()}}function yu(){nt=rr.current,ge(rr)}function Tn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,s0(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Za(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ps();break;case 3:xr(),ge(Ke),ge(Fe),ou();break;case 5:iu(r);break;case 4:xr();break;case 13:ge(ye);break;case 19:ge(ye);break;case 10:nu(r.type._context);break;case 22:case 23:yu()}n=n.return}if(Ee=e,Se=e=mn(e.current,null),Le=nt=t,Ce=0,wl=null,hu=si=Rn=0,Ve=el=null,En!==null){for(t=0;t<En.length;t++)if(n=En[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=l,r.next=i}n.pending=r}En=null}return e}function Nm(e,t){do{var n=Se;try{if(tu(),us.current=zs,Rs){for(var r=ve.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Rs=!1}if(Dn=0,Pe=Ne=ve=null,Zr=!1,yl=0,mu.current=null,n===null||n.return===null){Ce=1,wl=t,Se=null;break}e:{var s=e,i=n.return,a=n,u=t;if(t=Le,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Xc(i);if(m!==null){m.flags&=-257,Vc(m,i,a,s,t),m.mode&1&&Uc(s,c,t),t=m,u=c;var y=t.updateQueue;if(y===null){var w=new Set;w.add(u),t.updateQueue=w}else y.add(u);break e}else{if(!(t&1)){Uc(s,c,t),vu();break e}u=Error(q(426))}}else if(xe&&a.mode&1){var E=Xc(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Vc(E,i,a,s,t),Ja(yr(u,a));break e}}s=u=yr(u,a),Ce!==4&&(Ce=2),el===null?el=[s]:el.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var h=am(s,u,t);Oc(s,h);break e;case 1:a=u;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(fn===null||!fn.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var C=um(s,a,t);Oc(s,C);break e}}s=s.return}while(s!==null)}Em(n)}catch(A){t=A,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function Cm(){var e=_s.current;return _s.current=zs,e===null?zs:e}function vu(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Ee===null||!(Rn&268435455)&&!(si&268435455)||rn(Ee,Le)}function $s(e,t){var n=le;le|=2;var r=Cm();(Ee!==e||Le!==t)&&(Ft=null,Tn(e,t));do try{T0();break}catch(l){Nm(e,l)}while(!0);if(tu(),le=n,_s.current=r,Se!==null)throw Error(q(261));return Ee=null,Le=0,Ce}function T0(){for(;Se!==null;)Pm(Se)}function L0(){for(;Se!==null&&!nx();)Pm(Se)}function Pm(e){var t=Tm(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?Em(e):Se=t,mu.current=null}function Em(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=S0(n,t),n!==null){n.flags&=32767,Se=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,Se=null;return}}else if(n=j0(n,t,nt),n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ce===0&&(Ce=5)}function Nn(e,t,n){var r=oe,l=pt.transition;try{pt.transition=null,oe=1,I0(e,t,n,r)}finally{pt.transition=l,oe=r}return null}function I0(e,t,n,r){do ur();while(sn!==null);if(le&6)throw Error(q(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(fx(e,s),e===Ee&&(Se=Ee=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kl||(Kl=!0,Lm(ws,function(){return ur(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pt.transition,pt.transition=null;var i=oe;oe=1;var a=le;le|=4,mu.current=null,C0(e,n),km(n,e),Zx(Oo),js=!!Fo,Oo=Fo=null,e.current=n,P0(n),rx(),le=a,oe=i,pt.transition=s}else e.current=n;if(Kl&&(Kl=!1,sn=e,Os=l),s=e.pendingLanes,s===0&&(fn=null),ix(n.stateNode),Ze(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Fs)throw Fs=!1,e=sa,sa=null,e;return Os&1&&e.tag!==0&&ur(),s=e.pendingLanes,s&1?e===ia?tl++:(tl=0,ia=e):tl=0,vn(),null}function ur(){if(sn!==null){var e=ap(Os),t=pt.transition,n=oe;try{if(pt.transition=null,oe=16>e?16:e,sn===null)var r=!1;else{if(e=sn,sn=null,Os=0,le&6)throw Error(q(331));var l=le;for(le|=4,K=e.current;K!==null;){var s=K,i=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(K=c;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:Jr(8,f,s)}var d=f.child;if(d!==null)d.return=f,K=d;else for(;K!==null;){f=K;var p=f.sibling,m=f.return;if(vm(f),f===c){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}K=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,K=i;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,K=h;break e}K=s.return}}var g=e.current;for(K=g;K!==null;){i=K;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,K=v;else e:for(i=g;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:li(9,a)}}catch(A){we(a,a.return,A)}if(a===i){K=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,K=C;break e}K=a.return}}if(le=l,vn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Ks,e)}catch{}r=!0}return r}finally{oe=n,pt.transition=t}}return!1}function id(e,t,n){t=yr(n,t),t=am(e,t,1),e=dn(e,t,1),t=He(),e!==null&&(Cl(e,1,t),Ze(e,t))}function we(e,t,n){if(e.tag===3)id(e,e,n);else for(;t!==null;){if(t.tag===3){id(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fn===null||!fn.has(r))){e=yr(n,e),e=um(t,e,1),t=dn(t,e,1),e=He(),t!==null&&(Cl(t,1,e),Ze(t,e));break}}t=t.return}}function M0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(Le&n)===n&&(Ce===4||Ce===3&&(Le&130023424)===Le&&500>ke()-gu?Tn(e,0):hu|=n),Ze(e,t)}function Am(e,t){t===0&&(e.mode&1?(t=$l,$l<<=1,!($l&130023424)&&($l=4194304)):t=1);var n=He();e=Ut(e,t),e!==null&&(Cl(e,t,n),Ze(e,n))}function D0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Am(e,n)}function R0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),Am(e,n)}var Tm;Tm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ke.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,k0(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,xe&&t.flags&1048576&&Dp(t,Ts,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ds(e,t),e=t.pendingProps;var l=mr(t,Fe.current);ar(t,n),l=uu(null,t,r,e,l,n);var s=cu();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(r)?(s=!0,Es(t)):s=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,lu(t),l.updater=ri,t.stateNode=l,l._reactInternals=t,Qo(t,r,e,n),t=Yo(null,t,r,!0,s,n)):(t.tag=0,xe&&s&&Ya(t),$e(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ds(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=_0(r),e=vt(r,e),l){case 0:t=Ko(null,t,r,e,n);break e;case 1:t=Kc(null,t,r,e,n);break e;case 11:t=Qc(null,t,r,e,n);break e;case 14:t=Gc(null,t,r,vt(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:vt(r,l),Ko(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:vt(r,l),Kc(e,t,r,l,n);case 3:e:{if(pm(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,l=s.element,$p(e,t),Ms(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){l=yr(Error(q(423)),t),t=Yc(e,t,r,n,l);break e}else if(r!==l){l=yr(Error(q(424)),t),t=Yc(e,t,r,n,l);break e}else for(rt=cn(t.stateNode.containerInfo.firstChild),lt=t,xe=!0,wt=null,n=Fp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===l){t=Xt(e,t,n);break e}$e(e,t,r,n)}t=t.child}return t;case 5:return Bp(t),e===null&&Uo(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,i=l.children,$o(r,l)?i=null:s!==null&&$o(r,s)&&(t.flags|=32),fm(e,t),$e(e,t,i,n),t.child;case 6:return e===null&&Uo(t),null;case 13:return mm(e,t,n);case 4:return su(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gr(t,null,r,n):$e(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:vt(r,l),Qc(e,t,r,l,n);case 7:return $e(e,t,t.pendingProps,n),t.child;case 8:return $e(e,t,t.pendingProps.children,n),t.child;case 12:return $e(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,s=t.memoizedProps,i=l.value,pe(Ls,r._currentValue),r._currentValue=i,s!==null)if(Pt(s.value,i)){if(s.children===l.children&&!Ke.current){t=Xt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ht(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Xo(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(q(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Xo(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}$e(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,ar(t,n),l=mt(l),r=r(l),t.flags|=1,$e(e,t,r,n),t.child;case 14:return r=t.type,l=vt(r,t.pendingProps),l=vt(r.type,l),Gc(e,t,r,l,n);case 15:return cm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:vt(r,l),ds(e,t),t.tag=1,Ye(r)?(e=!0,Es(t)):e=!1,ar(t,n),om(t,r,l),Qo(t,r,l,n),Yo(null,t,r,!0,e,n);case 19:return hm(e,t,n);case 22:return dm(e,t,n)}throw Error(q(156,t.tag))};function Lm(e,t){return lp(e,t)}function z0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new z0(e,t,n,r)}function bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _0(e){if(typeof e=="function")return bu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oa)return 11;if(e===$a)return 14}return 2}function mn(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ms(e,t,n,r,l,s){var i=2;if(r=e,typeof e=="function")bu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Vn:return Ln(n.children,l,s,t);case Fa:i=8,l|=8;break;case yo:return e=ft(12,n,t,l|2),e.elementType=yo,e.lanes=s,e;case vo:return e=ft(13,n,t,l),e.elementType=vo,e.lanes=s,e;case bo:return e=ft(19,n,t,l),e.elementType=bo,e.lanes=s,e;case Bf:return ii(n,l,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Of:i=10;break e;case $f:i=9;break e;case Oa:i=11;break e;case $a:i=14;break e;case en:i=16,r=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=ft(i,n,t,l),t.elementType=e,t.type=r,t.lanes=s,t}function Ln(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function ii(e,t,n,r){return e=ft(22,e,r,t),e.elementType=Bf,e.lanes=n,e.stateNode={isHidden:!1},e}function Qi(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function Gi(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function F0(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function wu(e,t,n,r,l,s,i,a,u){return e=new F0(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ft(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lu(s),e}function O0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Im(e){if(!e)return gn;e=e._reactInternals;e:{if($n(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(Ye(n))return Ip(e,n,t)}return t}function Mm(e,t,n,r,l,s,i,a,u){return e=wu(n,r,!0,e,l,s,i,a,u),e.context=Im(null),n=e.current,r=He(),l=pn(n),s=Ht(r,l),s.callback=t??null,dn(n,s,l),e.current.lanes=l,Cl(e,l,r),Ze(e,r),e}function oi(e,t,n,r){var l=t.current,s=He(),i=pn(l);return n=Im(n),t.context===null?t.context=n:t.pendingContext=n,t=Ht(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dn(l,t,i),e!==null&&(Nt(e,l,i,s),as(e,l,i)),i}function Bs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ku(e,t){od(e,t),(e=e.alternate)&&od(e,t)}function $0(){return null}var Dm=typeof reportError=="function"?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}ai.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));oi(e,t,null,null)};ai.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){oi(null,e,null,null)}),t[qt]=null}};function ai(e){this._internalRoot=e}ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=dp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nn.length&&t!==0&&t<nn[n].priority;n++);nn.splice(n,0,e),n===0&&pp(e)}};function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ad(){}function B0(e,t,n,r,l){if(l){if(typeof r=="function"){var s=r;r=function(){var c=Bs(i);s.call(c)}}var i=Mm(t,r,e,0,null,!1,!1,"",ad);return e._reactRootContainer=i,e[qt]=i.current,pl(e.nodeType===8?e.parentNode:e),zn(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var a=r;r=function(){var c=Bs(u);a.call(c)}}var u=wu(e,0,!1,null,null,!1,!1,"",ad);return e._reactRootContainer=u,e[qt]=u.current,pl(e.nodeType===8?e.parentNode:e),zn(function(){oi(t,u,n,r)}),u}function ci(e,t,n,r,l){var s=n._reactRootContainer;if(s){var i=s;if(typeof l=="function"){var a=l;l=function(){var u=Bs(i);a.call(u)}}oi(t,i,e,l)}else i=B0(n,t,e,l,r);return Bs(i)}up=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ur(t.pendingLanes);n!==0&&(Wa(t,n|1),Ze(t,ke()),!(le&6)&&(vr=ke()+500,vn()))}break;case 13:zn(function(){var r=Ut(e,1);if(r!==null){var l=He();Nt(r,e,1,l)}}),ku(e,1)}};qa=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var n=He();Nt(t,e,134217728,n)}ku(e,134217728)}};cp=function(e){if(e.tag===13){var t=pn(e),n=Ut(e,t);if(n!==null){var r=He();Nt(n,e,t,r)}ku(e,t)}};dp=function(){return oe};fp=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};To=function(e,t,n){switch(t){case"input":if(jo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=ei(r);if(!l)throw Error(q(90));Wf(r),jo(r,l)}}}break;case"textarea":Uf(e,n);break;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}};Zf=xu;Jf=zn;var H0={usingClientEntryPoint:!1,Events:[El,Yn,ei,Kf,Yf,xu]},_r={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W0={bundleType:_r.bundleType,version:_r.version,rendererPackageName:_r.rendererPackageName,rendererConfig:_r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=np(e),e===null?null:e.stateNode},findFiberByHostInstance:_r.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Ks=Yl.inject(W0),It=Yl}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H0;ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Su(t))throw Error(q(200));return O0(e,t,null,n)};ot.createRoot=function(e,t){if(!Su(e))throw Error(q(299));var n=!1,r="",l=Dm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=wu(e,1,!1,null,null,n,!1,r,l),e[qt]=t.current,pl(e.nodeType===8?e.parentNode:e),new ju(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=np(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return zn(e)};ot.hydrate=function(e,t,n){if(!ui(t))throw Error(q(200));return ci(null,e,t,!0,n)};ot.hydrateRoot=function(e,t,n){if(!Su(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,l=!1,s="",i=Dm;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Mm(t,null,e,1,n??null,l,!1,s,i),e[qt]=t.current,pl(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new ai(t)};ot.render=function(e,t,n){if(!ui(t))throw Error(q(200));return ci(null,e,t,!1,n)};ot.unmountComponentAtNode=function(e){if(!ui(e))throw Error(q(40));return e._reactRootContainer?(zn(function(){ci(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};ot.unstable_batchedUpdates=xu;ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ui(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return ci(e,t,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(e){console.error(e)}}Rm(),Rf.exports=ot;var q0=Rf.exports,ud=q0;go.createRoot=ud.createRoot,go.hydrateRoot=ud.hydrateRoot;/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(e,t)=>{const n=I.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:a="",children:u,...c},f)=>I.createElement("svg",{ref:f,...U0,width:l,height:l,stroke:r,strokeWidth:i?Number(s)*24/Number(l):s,className:["lucide",`lucide-${X0(e)}`,a].join(" "),...c},[...t.map(([d,p])=>I.createElement(d,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=se("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=se("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=se("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=se("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=se("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=se("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=se("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=se("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=se("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=se("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),fd=()=>({name:"",concept:"",combatXP:0,socialXP:0,stats:{MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0},skills:[],perks:[],combatPerks:[],magicPerks:[],equipment:[],customItems:[],progressionLog:[],weaponDomains:{Martial:0,Spellcraft:0},maxWounds:2,hpPerWound:5,extraHP:0,armorType:"None",equippedWeapon1:"None",equippedWeapon2:"None",equippedShield:"None",currentStamina:null,currentHealth:null,markedWounds:0,woundsNotes:"",extraHPCount:0,extraHPHistory:[],extraWoundCount:0,inventory:[],knownSpells:[],attunedSpells:[],bio:"",notes:"",reputation:""}),Fr=e=>{try{const t=Hs(),n=t.findIndex(r=>r.name===e.name);n>=0?t[n]=e:t.push(e),localStorage.setItem("exceed-characters",JSON.stringify(t))}catch(t){console.error("Failed to save character:",t)}},uy=e=>{e.knownSpells||(e.knownSpells=[]),e.attunedSpells||(e.attunedSpells=[]),e.inventory||(e.inventory=[]),e.magicPerks||(e.magicPerks=[]),e.woundsNotes||(e.woundsNotes=""),"spellcraft"in e&&delete e.spellcraft,"magicXP"in e&&delete e.magicXP;const t=e.weaponDomains;if(t&&("1H"in t||"2H"in t||"SaS"in t)){const n=Math.max(t["1H"]||0,t["2H"]||0,t.SaS||0,t.Sh||0,t.Ar||0),r=t.Spell||0;e.weaponDomains={Martial:n,Spellcraft:r}}return"Martial"in e.weaponDomains||(e.weaponDomains.Martial=0),"Spellcraft"in e.weaponDomains||(e.weaponDomains.Spellcraft=0),e},Hs=()=>{try{const e=localStorage.getItem("exceed-characters");return(e?JSON.parse(e):[]).map(uy)}catch(e){return console.error("Failed to load characters:",e),[]}},ca=e=>{try{const n=Hs().filter(r=>r.name!==e);localStorage.setItem("exceed-characters",JSON.stringify(n))}catch(t){console.error("Failed to delete character:",t)}},cy=e=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=`${e.name||"character"}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},dy=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=l=>{var s;try{const i=JSON.parse((s=l.target)==null?void 0:s.result);t(i)}catch{n(new Error("Invalid character file"))}},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(e)}),Xe={MG:"Might",EN:"Endurance",AG:"Agility",DX:"Dexterity",WT:"Wit",WI:"Will",PR:"Perception",CH:"Charisma"},fy=e=>{if(Xe[e])return Xe[e];const t=e.trim(),n=t.toLowerCase();if(n==="willpower")return"Will";const l=Object.values(Xe).find(s=>s.toLowerCase()===n);return l||t},da=[10,30,60,100,150],fa=[10,30,60,100,150],pa=[10,30,60,100,150],Or={NONE:{name:"None",speedPenalty:0,dodgePenalty:0},LIGHT:{name:"Light",speedPenalty:-1,dodgePenalty:-1},ENCUMBERED:{name:"Encumbered",speedPenalty:-2,dodgePenalty:-2},HEAVY:{name:"Heavy Encumbered",speedPenalty:-3,dodgePenalty:-3},OVER:{name:"Over-Encumbered",speedPenalty:-4,dodgePenalty:-4}},py="/Exceed-Playtest-App/data/spells.json";let cr=[],Ki=!1;async function my(){if(!Ki)try{const e=await fetch(py);if(!e.ok)throw new Error(`Failed to load spells.json: ${e.status}`);cr=(await e.json()).spells,Ki=!0,console.log(`Loaded ${cr.length} spells from database`)}catch(e){console.error("Error loading spell database:",e),cr=[],Ki=!0}}function di(e){return cr.find(t=>t.name===e)}function Hm(e){const t=typeof e.basic.limitCost=="number"?e.basic.limitCost:0;return{tier:e.tier,type:e.type,apCost:e.apCost,attributes:e.attributes,limitCost:t,traits:e.traits,effect:e.basic.effect||e.shortDescription,distance:e.basic.distance||"-",duration:e.duration||"-",damage:e.basic.damage}}function pd(e){const t=di(e);if(t)return Hm(t)}const kl=new Proxy({},{get(e,t){return pd(t)},has(e,t){return di(t)!==void 0},ownKeys(e){return cr.map(t=>t.name)},getOwnPropertyDescriptor(e,t){const n=pd(t);if(n)return{enumerable:!0,configurable:!0,value:n}}});function hy(){return cr.map(e=>[e.name,Hm(e)])}const Wm={0:{basic:1,advanced:3},1:{basic:3,advanced:5},2:{basic:5,advanced:7},3:{basic:7,advanced:10},4:{basic:10,advanced:15},5:{basic:15,advanced:25}},qm=e=>{const t=pi(e);return 3+e.stats.WI+t},gy=e=>{const t=qm(e),n=Um(e);return Math.max(0,t-n)},Um=e=>{if(!e.knownSpells||!e.attunedSpells)return 0;const t=e.attunedSpells,n=e.knownSpells;let r=0;for(const l of t){const s=n.find(i=>i.id===l);if(s){const i=fi(s);i&&(r+=i.limitCost)}}return r},ma=e=>8+e*2,fi=e=>e.isCustom&&e.customSpellData?{tier:e.customSpellData.tier,type:e.customSpellData.type,apCost:e.customSpellData.apCost,attributes:e.customSpellData.attributes,limitCost:e.customSpellData.limitCost,traits:e.customSpellData.traits,effect:e.customSpellData.effect,distance:e.customSpellData.distance,duration:e.customSpellData.duration,damage:e.customSpellData.damage}:e.dataRef&&kl[e.dataRef]?kl[e.dataRef]:null,md=(e,t)=>{const n=pi(e);return t===0?(e.perks.some(l=>l.name==="Mage")||(e.magicPerks||[]).some(l=>l.name==="Mage"))&&n>=t:n>=t},$r=(e,t)=>Wm[e][t],pi=e=>e.weaponDomains.Spellcraft||0,hd=(e,t)=>{const n=e.knownSpells||[];return{...e,knownSpells:[...n,t]}},xy=(e,t)=>{if(!e.knownSpells)return e;const n=e.knownSpells.filter(l=>l.id!==t),r=(e.attunedSpells||[]).filter(l=>l!==t);return{...e,knownSpells:n,attunedSpells:r}},yy=(e,t)=>{if(!e.knownSpells)return{success:!1,character:e,reason:"No known spells"};const n=e.knownSpells.find(i=>i.id===t);if(!n)return{success:!1,character:e,reason:"Spell not found"};const r=fi(n);if(!r)return{success:!1,character:e,reason:"Spell data not found"};if(r.limitCost===0)return{success:!1,character:e,reason:"This spell has no Limit cost and cannot be attuned"};const l=e.attunedSpells||[];if(l.includes(t))return{success:!1,character:e,reason:"Spell already attuned"};const s=gy(e);return r.limitCost>s?{success:!1,character:e,reason:`Not enough Limit. Need ${r.limitCost}, have ${s} remaining.`}:{success:!0,character:{...e,attunedSpells:[...l,t]}}},vy=(e,t)=>e.attunedSpells?{...e,attunedSpells:e.attunedSpells.filter(n=>n!==t)}:e,gd=()=>`spell_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,by=(e,t,n)=>e.knownSpells?{...e,knownSpells:e.knownSpells.map(r=>r.id===t?{...r,...n}:r)}:e,wy=e=>{const t=new Map;if(!e.knownSpells)return t;for(let n=0;n<=5;n++)t.set(n,[]);for(const n of e.knownSpells){const r=t.get(n.tier)||[];t.set(n.tier,[...r,n])}return t},Xm=e=>{if(e.type!=="basic"||e.isCustom||!e.dataRef)return!1;const t=di(e.dataRef);return(t==null?void 0:t.advanced)!==void 0},Vm=e=>{const t=Wm[e.tier].advanced,n=e.xpCost;return t-n},ky=(e,t,n)=>{if(!e.knownSpells)return{success:!1,character:e,reason:"No known spells"};const r=e.knownSpells.find(d=>d.id===t);if(!r)return{success:!1,character:e,reason:"Spell not found"};if(!Xm(r))return{success:!1,character:e,reason:"This spell cannot be upgraded"};const l=Vm(r),s=e.combatXP;if(s<l)return{success:!1,character:e,reason:`Not enough Combat XP. Need ${l}, have ${s}`};const i=di(r.dataRef),a=kl[r.dataRef];if(!(i!=null&&i.advanced))return{success:!1,character:e,reason:"No advanced version available"};const u=typeof i.advanced.limitCost=="number"?i.advanced.limitCost:0,c={...r,type:"advanced",xpCost:r.xpCost+l,isCustom:!0,dataRef:void 0,customSpellData:{tier:a.tier,type:"advanced",apCost:a.apCost,attributes:a.attributes,limitCost:u,traits:a.traits,effect:i.advanced.effect,distance:i.advanced.distance||i.basic.distance||"-",duration:i.duration||"-",damage:i.advanced.damage}},f={...e,knownSpells:e.knownSpells.map(d=>d.id===t?c:d)};return f.combatXP-=l,f.progressionLog=[...f.progressionLog,{type:"spell",name:`${r.name} (Upgrade)`,tier:r.tier,spellType:"advanced",cost:l,xpType:n}],{success:!0,character:f}},jy={MG:K0,EN:sy,AG:iy,DX:ey,WT:V0,WI:Z0,PR:Y0,CH:Bm},Sy={Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"},Yi=(e,t)=>{let n=0,r=t[0];for(let i=0;i<t.length;i++)if(e>=t[i])n=t[i],r=t[i+1]||t[i];else{r=t[i];break}if(e>=t[t.length-1])return 100;const l=r-n,s=e-n;return l>0?s/l*100:0},Ny=({character:e,onMenuToggle:t})=>{const[n,r]=I.useState(!1),l=(()=>{const f={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};return e.progressionLog.forEach(d=>{if(d.attribute&&d.cost){const p=Sy[d.attribute]||d.attribute;p in f&&(f[p]+=d.cost)}}),f})(),s=I.useMemo(()=>{let f=0,d=0;return e.progressionLog.forEach(p=>{p.type==="combatPerk"||p.type==="stagedPerk"?f+=p.cost||0:(p.type==="spell"||p.type==="magicPerk")&&(d+=p.cost||0)}),{Martial:f,Spellcraft:d}},[e.progressionLog]),i=qm(e),a=Um(e),u=i>0?a/i*100:0,c=f=>f>=80?"bg-red-600":f>=50?"bg-yellow-600":"bg-green-600";return o.jsxs("div",{className:"bg-black border-b border-slate-700",children:[o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t(),className:"text-slate-400 hover:text-white transition-colors p-1",title:"Open menu",children:o.jsx(ny,{size:20})}),o.jsx("div",{className:"flex items-center gap-2 flex-1 cursor-pointer",onClick:()=>r(!n),children:o.jsx("h2",{className:"text-2xl font-bold text-white",children:e.name})})]})}),o.jsxs("div",{className:"overflow-hidden transition-all duration-250 bg-slate-950",style:{maxHeight:n?"300px":"0px"},children:[o.jsx("div",{className:"grid grid-cols-4 gap-2 p-3 pb-2",children:Object.entries(e.stats).map(([f,d])=>{const p={MG:"Might",EN:"Endurance",AG:"Agility",DX:"Dexterity",WT:"Wit",WI:"Will",PR:"Perception",CH:"Charisma"},m=jy[f],y=l[f]||0,w=Yi(y,da);return o.jsxs("div",{className:"bg-slate-800 rounded px-2 py-1.5",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[m&&o.jsx(m,{size:14,className:"text-slate-400 flex-shrink-0"}),o.jsxs("span",{className:"text-xs font-semibold text-slate-300 flex-1",children:[o.jsx("span",{className:"hidden sm:inline",children:p[f]||f}),o.jsx("span",{className:"sm:hidden",children:f})]}),o.jsx("span",{className:"text-base font-bold text-white",children:d})]}),o.jsx("div",{className:"h-1 bg-slate-700 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${w}%`}})})]},f)})}),o.jsx("div",{className:"px-3 pb-3",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 bg-red-900/40 border border-red-800/50 rounded px-2 py-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(br,{size:12,className:"text-red-400"}),o.jsx("span",{className:"text-xs font-semibold text-red-300",children:"Martial"})]}),o.jsx("span",{className:"text-sm font-bold text-white",children:e.weaponDomains.Martial})]}),o.jsx("div",{className:"h-1 bg-red-950 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-red-500 transition-all duration-300",style:{width:`${Yi(s.Martial,fa)}%`}})})]}),o.jsxs("div",{className:"flex-1 bg-purple-900/40 border border-purple-800/50 rounded px-2 py-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Bm,{size:12,className:"text-purple-400"}),o.jsx("span",{className:"text-xs font-semibold text-purple-300",children:"Spellcraft"})]}),o.jsx("span",{className:"text-sm font-bold text-white",children:e.weaponDomains.Spellcraft})]}),o.jsx("div",{className:"h-1 bg-purple-950 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300",style:{width:`${Yi(s.Spellcraft,pa)}%`}})})]}),o.jsxs("div",{className:"flex-1 bg-emerald-900/40 border border-emerald-800/50 rounded px-2 py-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(J0,{size:12,className:"text-emerald-400"}),o.jsx("span",{className:"text-xs font-semibold text-emerald-300",children:"Limit"})]}),o.jsxs("span",{className:"text-sm font-bold text-white",children:[a,"/",i]})]}),o.jsx("div",{className:"h-1 bg-emerald-950 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-300 ${c(u)}`,style:{width:`${u}%`}})})]})]})})]})]})},Qm=({isOpen:e,onClose:t,title:n,children:r})=>e?o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 min-w-[300px] max-w-[90vw] max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:n}),r]})}):null,Gm=({attributes:e,onSelect:t,onCancel:n})=>{const r=e.split("/").map(l=>l.trim());return o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Choose an attribute to improve:"}),r.map(l=>o.jsx("button",{onClick:()=>t(l),className:"w-full bg-slate-700 hover:bg-slate-600 rounded py-3 text-white font-semibold",children:l},l)),o.jsx("button",{onClick:n,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold mt-4",children:"Cancel"})]})},Cy={"Social Skills":[{name:"Dancing",attributes:"Agility/Charisma",description:"Formal and social dancing, grace in movement, social positioning through performance"},{name:"Negotiating",attributes:"Charisma/Wit",description:"Making deals, bargaining, diplomatic solutions, finding win-win outcomes"},{name:"Manipulation",attributes:"Charisma/Will",description:"Subtle influence, psychological pressure, making people think your ideas are theirs"},{name:"Leadership",attributes:"Charisma/Will",description:"Inspiring groups, command presence, rallying others in crisis situations"},{name:"Fast-talk",attributes:"Charisma/Agility",description:"Quick convincing, rapid lies and truths, overwhelming with words, time-pressure persuasion"},{name:"Singing",attributes:"Endurance/Charisma",description:"Vocal performance, crowd entertainment, emotional resonance through music"},{name:"Gossip",attributes:"Charisma/Perception",description:"Information gathering, rumor trading, social intelligence, reputation management"},{name:"Intimidation",attributes:"Charisma/Might",description:"Coercion, demoralizing and otherwise using fear to adjust behavior of the adversary"},{name:"Acting",attributes:"Charisma/Will",description:"Staying in the role, pretending to be someone else. This doesn't allow change of behavior, but used to enter and sustain a role"}],"Athletic/Acrobatic Skills":[{name:"Running",attributes:"Agility/Endurance",description:"Speed and endurance movement; choose Agility for sprinting/quick bursts or Endurance for long-distance running. Increases Speed as per speed rules"},{name:"Climbing",attributes:"Might/Agility",description:"Scaling walls, cliffs, buildings; vertical movement and grip strength"},{name:"Swimming",attributes:"Endurance/Might",description:"Aquatic movement, underwater endurance, water rescue"},{name:"Jumping",attributes:"Might/Agility",description:"Explosive leg power, long jumps, high jumps, parkour leaps"},{name:"Acrobatics",attributes:"Agility/Dexterity",description:"Tumbling, flips, balance, contortion, graceful movement, fall mitigation, tightrope walking, escaping bonds, squeezing through spaces"},{name:"Lifting",attributes:"Might/Endurance",description:"Raw strength application, moving heavy objects, feats of strength"},{name:"Breaking",attributes:"Might/Wit",description:"Destructive force application, knowing weak points, demolition work"}],"Crafting Skills":[{name:"Smithing",attributes:"Might/Dexterity",description:"Metalwork, jewelry, weapons, armor, tools"},{name:"Woodworking",attributes:"Dexterity/Wit",description:"Carpentry, furniture, bows, wooden tools, construction"},{name:"Textilework",attributes:"Dexterity/Perception",description:"Leatherworking, tailoring, rope-making, fabric crafts"},{name:"Engineering",attributes:"Wit/Perception",description:"Designing complex interconnected mechanisms"}],"Natural Sciences":[{name:"Biology",attributes:"Wit/Perception",description:"Living organisms, anatomy, plant identification, natural remedies, organic poisons"},{name:"Chemistry",attributes:"Wit/Dexterity",description:"Chemical processes, explosives, acids, synthetic compounds, material properties"},{name:"Medicine",attributes:"Wit/Dexterity",description:"Healing, surgery, anatomy, practical medical treatment"}],"Stealth/Criminal Skills":[{name:"Stealth",attributes:"Agility/Perception",description:"Moving unseen, hiding, avoiding detection"},{name:"Lockpicking",attributes:"Dexterity/Perception",description:"Bypassing mechanical and magical security, opening locked containers"},{name:"Sleight of Hand",attributes:"Dexterity/Agility",description:"Pickpocketing, palming objects, manual dexterity tricks"}],"Wilderness Skills":[{name:"Survival",attributes:"Endurance/Perception",description:"Wilderness living, foraging, finding shelter and water"},{name:"Tracking",attributes:"Perception/Wit",description:"Following trails, reading signs, hunting quarry"},{name:"Navigation",attributes:"Perception/Wit",description:"Finding your way, reading maps, celestial navigation"}],"Knowledge Skills":[{name:"Arcane Lore",attributes:"Wit/Will",description:"Magic theory, spell identification, understanding magical phenomena"},{name:"History",attributes:"Wit/Will",description:"Past events, cultures, legends, political knowledge"},{name:"Theology",attributes:"Will/Charisma",description:"Divine knowledge, rituals, religious traditions"},{name:"Streetwise",attributes:"Charisma/Perception",description:"Criminal underworld knowledge, black market connections"}]},Py=({isOpen:e,onClose:t,onSelectSkill:n,learnedSkills:r,availableCP:l})=>{if(!e)return null;const i=(()=>{const c={};return Object.entries(Cy).forEach(([f,d])=>{const p=d.filter(m=>!r.includes(m.name));p.length>0&&(c[f]=p)}),c})(),a=Object.keys(i).length===0,u=l>=2;return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full flex flex-col",style:{maxHeight:"80vh"},onClick:c=>c.stopPropagation(),children:[o.jsxs("h3",{className:"text-xl font-bold text-white p-6 pb-4 text-center flex-shrink-0",children:["Add New Skill",o.jsxs("div",{className:"text-sm text-slate-400 font-normal mt-1",children:["Available Skill XP: ",l," CP"]}),!u&&o.jsx("div",{className:"text-sm text-red-400 font-normal",children:"Need 2 CP to learn a skill"})]}),o.jsx("div",{className:"overflow-y-auto px-6 flex-1",style:{minHeight:0},children:a?o.jsx("p",{className:"text-slate-400 text-center py-8",children:"All skills learned!"}):o.jsx("div",{className:"space-y-4 pb-4",children:Object.entries(i).map(([c,f])=>o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-400 mb-2 sticky top-0 bg-slate-800 py-1",children:c}),o.jsx("div",{className:"space-y-2",children:f.map(d=>o.jsxs("button",{onClick:()=>n(d),disabled:!u,className:`w-full rounded p-3 text-left transition-colors ${u?"bg-slate-700 hover:bg-slate-600":"bg-slate-700 opacity-50 cursor-not-allowed"}`,children:[o.jsx("div",{className:"text-white font-medium",children:d.name}),o.jsx("div",{className:"text-slate-400 text-sm",children:d.attributes})]},d.name))})]},c))})}),o.jsx("div",{className:"p-6 pt-4 border-t border-slate-700 flex-shrink-0",children:o.jsx("button",{onClick:t,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})})]})})},Ey=({isOpen:e,onClose:t,onSave:n,availableCP:r,editingPerk:l=null,existingCost:s=0})=>{const[i,a]=I.useState(""),[u,c]=I.useState(""),[f,d]=I.useState(""),[p,m]=I.useState(""),y=l!==null;if(I.useEffect(()=>{e&&l?(a(l.name),c(l.cost.toString()),d(l.attribute),m(l.description||"")):e&&!l&&(a(""),c(""),d(""),m(""))},[e,l]),!e)return null;const w=()=>{a(""),c(""),d(""),m(""),t()},E=()=>{const A=parseInt(u),N=y?A-s:A;i.trim()&&A&&f&&r>=N&&(n({name:i.trim(),cost:A,attribute:f,description:p.trim()}),w())},h=parseInt(u||"0"),g=y?h-s:h,v=r>=g,C=i.trim()&&h&&f;return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:w,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 min-w-[350px] max-w-[500px] w-full",onClick:A=>A.stopPropagation(),children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:[y?"Edit Perk":"Add New Perk",o.jsx("div",{className:"text-sm text-slate-400 font-normal mt-1",children:y?o.jsxs(o.Fragment,{children:["Current: ",s," CP  New: ",h," CP",o.jsx("br",{}),"Available Skill XP: ",r," CP"]}):`Available Skill XP: ${r} CP`})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Perk Name"}),o.jsx("input",{type:"text",value:i,onChange:A=>a(A.target.value),placeholder:"Enter perk name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Cost (CP)"}),o.jsx("input",{type:"number",value:u,onChange:A=>c(A.target.value),placeholder:"Enter CP cost",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-semibold text-white mb-2",children:["Attribute ",f&&o.jsxs("span",{className:"text-blue-400",children:["(",f,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Xe).map(([A,N])=>o.jsx("button",{onClick:()=>d(N),className:`py-2 rounded font-semibold transition-colors ${f===N?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:A},A))})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Description (Optional)"}),o.jsx("textarea",{value:p,onChange:A=>m(A.target.value),placeholder:"Enter perk description",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white resize-none"})]}),o.jsx("button",{onClick:E,disabled:!C||!v,className:`w-full rounded py-2 mb-2 text-white font-semibold ${!C||!v?"bg-slate-600 cursor-not-allowed opacity-50":y?"bg-blue-700 hover:bg-blue-600":"bg-slate-700 hover:bg-slate-600"}`,children:C?v?y?"Save Changes":"Add":"Not Enough XP":y?"Save Changes":"Add"}),o.jsx("button",{onClick:w,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})]})})},Zl=e=>Math.floor(Math.random()*e)+1,Cu=({isOpen:e,onClose:t,rollData:n})=>{const[r,l]=I.useState(null),[s,i]=I.useState(!1),[a,u]=I.useState(null),[c,f]=I.useState(null),d=n&&(s&&n.damageRollData?{type:n.type.replace("Attack","Damage"),baseModifier:n.damageRollData.damageBonus,isDamageRoll:!0,damageDice:n.damageRollData.damageDice,damageBonus:n.damageRollData.damageBonus}:n),p=d?r!==null?r:d.baseModifier:0,m=()=>{const h=[Zl(10),Zl(10),Zl(10)],g=[...h].sort((v,C)=>v-C);return{dice:h,normal:h[0]+h[1],disadvantage:g[0]+g[1],advantage:g[1]+g[2]}},y=()=>{if(!d||!d.damageDice)return;if(d.damageDice.sides===1){const g=d.damageDice.count;f({rolls:[g],total:g,breakdown:`${g}`})}else{const g=[];for(let N=0;N<d.damageDice.count;N++)g.push(Zl(d.damageDice.sides));const v=g.reduce((N,R)=>N+R,0),C=d.damageBonus||0,A=v+C;f({rolls:g,total:A,breakdown:`${g.join(" + ")}${C>0?` + ${C}`:""} = ${A}`})}};I.useEffect(()=>{e&&d&&!d.isDamageRoll&&u(m())},[e,p,s]),I.useEffect(()=>{e&&d&&d.isDamageRoll&&y()},[e,s]);const w=()=>{d&&(d.isDamageRoll?y():u(m()))},E=()=>{u(null),f(null),l(null),i(!1),t()};return!e||!n||!d?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:E,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-lg w-full",onClick:h=>h.stopPropagation(),children:[o.jsx("div",{className:"bg-slate-800 border-b border-slate-700 p-4",children:o.jsx("h3",{className:"text-xl font-bold text-white text-center",children:d.type})}),o.jsxs("div",{className:"p-4",children:[n.damageRollData&&o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsx("button",{onClick:h=>{h.stopPropagation(),i(!1),f(null)},className:`py-2 px-4 rounded font-semibold transition-colors ${s?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-blue-700 text-white"}`,children:"Attack Roll"}),o.jsx("button",{onClick:h=>{h.stopPropagation(),i(!0),u(null)},className:`py-2 px-4 rounded font-semibold transition-colors ${s?"bg-red-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Damage Roll"})]}),d.attributeOptions&&d.attributeOptions.length>1&&!d.isDamageRoll&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.attributeOptions.map((h,g)=>o.jsxs("button",{onClick:v=>{v.stopPropagation(),l(h.value)},className:`py-2 px-4 rounded font-semibold transition-colors ${(r!==null?r===h.value:g===0)?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[h.label," (+",h.value,")"]},g))})]}),!d.isDamageRoll&&a&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.dice.map((h,g)=>{const C=a.dice.filter(A=>A===h).length>=2;return o.jsxs("div",{className:`rounded-lg p-3 text-center ${C?"bg-amber-900/50 border-2 border-amber-500":"bg-slate-700 border border-slate-600"}`,children:[o.jsxs("div",{className:"text-xs text-slate-400 font-semibold mb-1",children:["Die ",g+1," ",C?"":""]}),o.jsx("div",{className:"text-3xl font-bold text-white",children:h})]},g)})}),o.jsxs("div",{className:"space-y-3 cursor-pointer",onClick:h=>{h.target.tagName!=="BUTTON"&&w()},children:[(()=>{const h=a.normal+p,g=a.dice[0]===a.dice[1];return o.jsxs("div",{className:`rounded-lg p-4 text-center ${g?"bg-amber-900/50 border-2 border-amber-500":"bg-blue-900/50 border-2 border-blue-500"}`,children:[o.jsx("div",{className:"text-7xl font-bold text-white",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[a.dice[0]," + ",a.dice[1]," + ",p]})]})})(),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const h=a.disadvantage+p,g=[...a.dice].sort((C,A)=>C-A),v=g[0]===g[1];return o.jsxs("div",{className:`rounded-lg p-3 ${v?"bg-amber-900/50 border-2 border-amber-500":"bg-red-900/30 border border-red-700"}`,children:[o.jsx("div",{className:"text-sm text-red-300 font-semibold mb-1",children:"Disadv"}),o.jsx("div",{className:"text-4xl font-bold text-white text-center",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-center",children:[g[0]," + ",g[1]," + ",p]})]})})(),(()=>{const h=a.advantage+p,g=[...a.dice].sort((C,A)=>A-C),v=g[0]===g[1];return o.jsxs("div",{className:`rounded-lg p-3 ${v?"bg-amber-900/50 border-2 border-amber-500":"bg-green-900/30 border border-green-700"}`,children:[o.jsx("div",{className:"text-sm text-green-300 font-semibold mb-1",children:"Adv"}),o.jsx("div",{className:"text-4xl font-bold text-white text-center",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-center",children:[g[0]," + ",g[1]," + ",p]})]})})()]}),o.jsx("div",{className:"text-center text-slate-500 text-xs mt-2",children:"Click to reroll"})]})]}),d.isDamageRoll&&c&&o.jsxs("div",{className:"bg-red-900/30 border-2 border-red-700 rounded-lg p-6 text-center cursor-pointer",onClick:w,children:[o.jsx("div",{className:"text-sm text-red-300 font-semibold mb-2",children:"DAMAGE"}),o.jsx("div",{className:"text-6xl font-bold text-white mb-3",children:c.total}),o.jsx("div",{className:"text-sm text-slate-300 mb-2",children:c.breakdown}),o.jsx("div",{className:"text-center text-slate-500 text-xs mt-2",children:"Click to reroll"})]})]})]})})},Ay=["Combat","Skill","Spellcraft"];function Ws(e){return e!=null&&e.tags?e.tags.filter(t=>Ay.includes(t)):[]}function dr(e,t){return[...new Set([...e,...t])]}function Ty(e,t,n=!1){if(!t)return[];const r=[],l=new Map(t.abilities.map(i=>[i.id,i])),s=(i,a,u)=>{var d,p,m,y;let c=i;if(!((d=c==null?void 0:c.grants)!=null&&d.abilities)&&(c!=null&&c.id)&&(c=[...t.perks.combat,...t.perks.magic,...t.perks.skill].find(E=>E.id===c.id)||c),!((p=c==null?void 0:c.grants)!=null&&p.abilities)&&((m=u==null?void 0:u.grants)!=null&&m.abilities)){const w=u.grants.abilities,E=n&&c?Ws(c):[];for(const h of w){const g=l.get(h);if(g){const v=n?dr(g.tags,E):g.tags;r.find(C=>C.id===g.id&&C.sourcePerk===a)||r.push({id:g.id,name:g.name,effect:g.effect,tags:v,sourcePerk:a,sourcePerkId:c==null?void 0:c.id})}}return}if(!((y=c==null?void 0:c.grants)!=null&&y.abilities))return;const f=n?Ws(c):[];for(const w of c.grants.abilities){const E=l.get(w);if(E){const h=n?dr(E.tags,f):E.tags;if(!r.find(g=>g.id===E.id&&g.sourcePerk===a))r.push({id:E.id,name:E.name,effect:E.effect,tags:h,sourcePerk:a,sourcePerkId:c.id});else if(n){const g=r.find(v=>v.id===E.id&&v.sourcePerk===a);g&&(g.tags=dr(g.tags,f))}}}};for(const i of e.perks)s(i.perkSnapshot,i.name,i);for(const i of e.combatPerks)s(i.perkSnapshot,i.name,i);for(const i of e.magicPerks||[])s(i.perkSnapshot,i.name,i);for(const i of e.stagedPerks||[])s(i.perkSnapshot,i.name,i);return r}function mi(e,t){return Ty(e,t,!0)}function Ly(e,t,n=!1){if(!t)return[];const r=[],l=new Map(t.effects.map(i=>[i.id,i])),s=(i,a,u)=>{var d,p,m,y;let c=i;if(!((d=c==null?void 0:c.grants)!=null&&d.effects)&&(c!=null&&c.id)&&(c=[...t.perks.combat,...t.perks.magic,...t.perks.skill].find(E=>E.id===c.id)||c),!((p=c==null?void 0:c.grants)!=null&&p.effects)&&((m=u==null?void 0:u.grants)!=null&&m.effects)){const w=u.grants.effects,E=n&&c?Ws(c):[];for(const h of w){const g=l.get(h);if(g){const v=n?dr(g.tags,E):g.tags;r.find(C=>C.id===g.id&&C.sourcePerk===a)||r.push({id:g.id,name:g.name,effect:g.effect,tags:v,sourcePerk:a,sourcePerkId:c==null?void 0:c.id})}}return}if(!((y=c==null?void 0:c.grants)!=null&&y.effects))return;const f=n?Ws(c):[];for(const w of c.grants.effects){const E=l.get(w);if(E){const h=n?dr(E.tags,f):E.tags;if(!r.find(g=>g.id===E.id&&g.sourcePerk===a))r.push({id:E.id,name:E.name,effect:E.effect,tags:h,sourcePerk:a,sourcePerkId:c.id});else if(n){const g=r.find(v=>v.id===E.id&&v.sourcePerk===a);g&&(g.tags=dr(g.tags,f))}}}};for(const i of e.perks)s(i.perkSnapshot,i.name,i);for(const i of e.combatPerks)s(i.perkSnapshot,i.name,i);for(const i of e.magicPerks||[])s(i.perkSnapshot,i.name,i);for(const i of e.stagedPerks||[])s(i.perkSnapshot,i.name,i);return r}function hi(e,t){return Ly(e,t,!0)}const xd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=I.useState(!1),s=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a))}),n&&o.jsxs("button",{onClick:i=>{i.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},Iy=({character:e,onUpdate:t,perkDatabase:n})=>{const r=mi(e,n),l=hi(e,n),s=r.filter(M=>M.tags.includes("Skill")),i=l.filter(M=>M.tags.includes("Skill")),[a,u]=I.useState(!1),[c,f]=I.useState(!1),[d,p]=I.useState(!1),[m,y]=I.useState(!1),[w,E]=I.useState(null),[h,g]=I.useState(null),[v,C]=I.useState(null),[A,N]=I.useState(null),[R,O]=I.useState(null),P=M=>({Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"})[M.trim()]||null,x=M=>{const _=M.attributes.split("/").map(B=>B.trim()).map(B=>{const S=P(B),G=S?e.stats[S]:0;return{label:B,value:G+M.level}});E({type:`Skill: ${M.name}`,baseModifier:_[0].value,attributeOptions:_}),y(!0)},k=M=>{e.socialXP>=2&&(g(M),u(!1),p(!0))},j=M=>{if(h!==null){if(v===null){const _={name:h.name,attributes:h.attributes,description:h.description,level:1,attributeHistory:[M]};t({...e,skills:[...e.skills,_],socialXP:e.socialXP-2,progressionLog:[...e.progressionLog,{type:"skill",name:h.name,level:1,attribute:M,cost:2,xpType:"social"}]})}else{const b=e.skills[v],_=b.level+1,B=_*2,S={...b,level:_,attributeHistory:[...b.attributeHistory,M]},G=[...e.skills];G[v]=S,t({...e,skills:G,socialXP:e.socialXP-B,progressionLog:[...e.progressionLog,{type:"skill",name:b.name,level:_,attribute:M,cost:B,xpType:"social"}]})}p(!1),g(null),C(null)}},L=()=>{p(!1),g(null),v!==null?C(null):u(!0)},D=M=>{N(A===M?null:M)},T=M=>{const b=e.skills[M],_=(b.level+1)*2;e.socialXP>=_&&(g({name:b.name,attributes:b.attributes,description:b.description}),C(M),p(!0))},$=M=>{const b=e.skills[M];if(b.level<=1)return;const _=b.level*2,B={...b,level:b.level-1,attributeHistory:b.attributeHistory.slice(0,-1)},S=[...e.skills];S[M]=B;const G=[...e.progressionLog];for(let X=G.length-1;X>=0;X--)if(G[X].type==="skill"&&G[X].name===b.name){G.splice(X,1);break}t({...e,skills:S,socialXP:e.socialXP+_,progressionLog:G})},V=M=>{if(R===null)return;const b=e.perks[R],_=M.cost-b.cost,B=[...e.perks];B[R]=M;const S=e.progressionLog.filter(G=>!(G.type==="perk"&&G.name===b.name&&G.cost===b.cost));t({...e,perks:B,socialXP:e.socialXP-_,progressionLog:[...S,{type:"perk",name:M.name,attribute:M.attribute,cost:M.cost}]}),O(null)},z=M=>{const b=e.perks.findIndex(G=>G.name===M);if(b===-1)return;const _=e.perks[b],B=e.perks.filter((G,X)=>X!==b),S=[...e.progressionLog];for(let G=S.length-1;G>=0;G--)if(S[G].type==="perk"&&S[G].name===_.name&&S[G].cost===_.cost&&S[G].attribute===_.attribute){S.splice(G,1);break}t({...e,perks:B,socialXP:e.socialXP+_.cost,progressionLog:S})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Skills"}),o.jsx("button",{onClick:()=>u(!0),className:"bg-slate-700 hover:bg-slate-600 rounded-lg p-1.5",children:o.jsx(Vt,{size:16})})]}),o.jsx("div",{className:"space-y-2",children:e.skills.map((M,b)=>o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsxs("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors flex justify-between items-center",onClick:()=>D(b),children:[o.jsxs("div",{children:[o.jsxs("span",{className:"text-white font-medium",children:[M.name,"[",M.level,"]"]}),o.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:["(",M.attributes,")"]})]}),o.jsx("button",{onClick:_=>{_.stopPropagation(),x(M)},className:"bg-blue-700 hover:bg-blue-600 rounded p-2 text-white transition-colors",children:o.jsx(zm,{size:16})})]}),A===b&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("p",{className:"text-slate-300 text-sm mt-2 mb-3",children:M.description}),o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-1",children:"Attribute History:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:M.attributeHistory.map((_,B)=>o.jsxs("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded",children:["Lvl ",B+1,": ",_]},B))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),T(b)},disabled:M.level>=5||e.socialXP<(M.level+1)*2,className:`flex-1 rounded py-2 text-white font-semibold flex items-center justify-center gap-1 ${M.level>=5||e.socialXP<(M.level+1)*2?"bg-slate-600 cursor-not-allowed opacity-50":"bg-green-700 hover:bg-green-600"}`,children:[o.jsx(Vt,{size:16}),"Level Up [",(M.level+1)*2," XP]"]}),o.jsxs("button",{onClick:_=>{_.stopPropagation(),$(b)},disabled:M.level<=1,className:`flex-1 rounded py-2 text-white font-semibold flex items-center justify-center gap-1 ${M.level<=1?"bg-slate-600 cursor-not-allowed opacity-50":"bg-red-700 hover:bg-red-600"}`,children:[o.jsx("span",{className:"text-lg leading-none",children:""}),"Level Down [",M.level*2," XP]"]})]})]})]},b))})]}),o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-3 bg-slate-750 border-b border-slate-700 flex items-center gap-2",children:[o.jsx(_n,{size:18,className:"text-slate-300"}),o.jsx("h3",{className:"text-white font-semibold",children:"Granted Abilities & Effects"}),o.jsxs("span",{className:"text-slate-400 text-sm ml-auto",children:[s.length," abilities, ",i.length," effects"]})]}),o.jsx("div",{className:"p-4",children:s.length===0&&i.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Skill perks. Add perks in the Perks tab."}):o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-blue-400 text-sm font-semibold mb-2",children:["Abilities (",s.length,")"]}),s.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No abilities"}):o.jsx("div",{className:"space-y-2",children:s.map((M,b)=>o.jsx(xd,{item:M,isAbility:!0,onDelete:()=>z(M.sourcePerk)},`skill-ability-${b}`))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-purple-400 text-sm font-semibold mb-2",children:["Effects (",i.length,")"]}),i.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No effects"}):o.jsx("div",{className:"space-y-2",children:i.map((M,b)=>o.jsx(xd,{item:M,isAbility:!1,onDelete:()=>z(M.sourcePerk)},`skill-effect-${b}`))})]})]})})]})}),o.jsx(Py,{isOpen:a,onClose:()=>u(!1),onSelectSkill:k,learnedSkills:e.skills.map(M=>M.name),availableCP:e.socialXP}),R!==null&&o.jsx(Ey,{isOpen:c,onClose:()=>{f(!1),O(null)},onSave:V,availableCP:e.socialXP,editingPerk:e.perks[R],existingCost:e.perks[R].cost}),d&&h&&o.jsxs(Qm,{isOpen:d,onClose:L,title:h.name,children:[o.jsx("p",{className:"text-slate-400 text-sm mb-2 text-center",children:v!==null?`Level ${e.skills[v].level}  ${e.skills[v].level+1}: Select attribute to improve:`:"Select which attribute to apply points to:"}),o.jsxs("p",{className:"text-slate-400 text-xs mb-4 text-center",children:["Cost:"," ",v!==null?(e.skills[v].level+1)*2:2," ","XP",o.jsxs("span",{className:"ml-2",children:["(",e.socialXP," "," ",e.socialXP-(v!==null?(e.skills[v].level+1)*2:2)," ","Skill XP)"]})]}),o.jsx(Gm,{attributes:h.attributes,onSelect:j,onCancel:L})]}),o.jsx(Cu,{isOpen:m,onClose:()=>y(!1),rollData:w})]})},Te={None:{domain:null,finesse:!1,damage:"d0",ap:0,traits:[],weight:0},Dagger:{domain:"Martial",finesse:!0,damage:"d4",ap:2,mightReq:0,traits:["Light","Quick Drawn","Range 3","Blade"],weight:.5},"Arming Sword":{domain:"Martial",finesse:!1,damage:"d6",ap:2,mightReq:0,traits:["Light","Blade"],weight:1.5},Mace:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:2,traits:["Impact"],weight:2.5},Javelin:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Range 4","Quick Drawn","Thrown","Polearm"],weight:1},Longsword:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Heavy","Versatile","Blade"],weight:2},Rapier:{domain:"Martial",finesse:!0,damage:"d8",ap:3,mightReq:1,traits:["Conduit","Blade"],weight:1.5},"Danish Axe":{domain:"Martial",finesse:!1,damage:"d12",ap:4,mightReq:3,traits:["Heavy","Large","Sweeping","Axe"],weight:4},UberZweihander:{domain:"Martial",finesse:!1,damage:"d12+1",ap:4,mightReq:4,traits:["Heavy","Reach","Large","Blade"],weight:6},Maul:{domain:"Martial",finesse:!1,damage:"d10",ap:4,mightReq:2,traits:["Nonlethal","Large","Heavy","Impact"],weight:5},Greatsword:{domain:"Martial",finesse:!1,damage:"d10",ap:3,mightReq:2,traits:["Reach","Light","Blade"],weight:3.5},Longspear:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Polearm"],weight:2},"War Staff":{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Polearm","Nonlethal","Conduit"],weight:2},Quarterstaff:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Polearm","Reach","Nonlethal","Conduit"],weight:1.5},Pike:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:2,traits:["Polearm","Long Reach","Large"],weight:3},SwordStaff:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Polearm","Reach","Nonlethal","Double"],weight:2.5},Shortbow:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:-1,traits:["Aim 10","Range 5","Ranged","Bow"],weight:1},Longbow:{domain:"Martial",finesse:!1,damage:"d10",ap:3,mightReq:0,traits:["Aim 20","Large","Range 2","Ranged","Bow"],weight:1.5}},Ge={None:{bonus:0,mightReq:0,penalty:0,penaltyMet:0,weight:0},Scout:{bonus:1,mightReq:0,penalty:0,penaltyMet:0,weight:5},Tactical:{bonus:2,mightReq:1,penalty:-1,penaltyMet:-1,weight:10},Defensive:{bonus:3,mightReq:1,penalty:-2,penaltyMet:-2,weight:15},Protective:{bonus:4,mightReq:2,penalty:-3,penaltyMet:-1,weight:20},Bulwark:{bonus:5,mightReq:3,penalty:-4,penaltyMet:-1,weight:30},Titanic:{bonus:6,mightReq:4,penalty:-5,penaltyMet:-2,weight:45},Colossal:{bonus:7,mightReq:5,penalty:-6,penaltyMet:-2,weight:65},"Plot Armor":{bonus:10,mightReq:0,penalty:0,penaltyMet:0,weight:0}},jt={None:{defenseBonus:0,negation:0,armorPenalty:0,mightReq:0,type:"Light",weight:0},Buckler:{defenseBonus:1,negation:2,armorPenalty:0,mightReq:0,type:"Light",weight:.5},Shield:{defenseBonus:1,negation:3,armorPenalty:0,mightReq:0,type:"Medium",weight:3},"Kite Shield":{defenseBonus:2,negation:4,armorPenalty:1,mightReq:1,type:"Medium",weight:3},"Tower Shield":{defenseBonus:3,negation:5,armorPenalty:2,mightReq:2,type:"Heavy",weight:6},"Fortress Shield":{defenseBonus:4,negation:6,armorPenalty:3,mightReq:3,type:"Heavy",weight:8}},Pu=e=>e.inventory?e.inventory.filter(t=>t.type==="weapon"&&t.state==="equipped"):[],gi=e=>e.inventory&&e.inventory.find(n=>n.type==="armor"&&n.state==="equipped")||null,Km=e=>e.inventory&&e.inventory.find(n=>n.type==="shield"&&n.state==="equipped")||null,xi=e=>e.type!=="weapon"?null:e.isCustom&&e.customWeaponData?{domain:e.customWeaponData.domain,finesse:e.customWeaponData.finesse,damage:e.customWeaponData.damage,ap:e.customWeaponData.ap,mightReq:e.customWeaponData.mightReq,traits:e.customWeaponData.traits,weight:e.weight}:e.dataRef&&Te[e.dataRef]?Te[e.dataRef]:null,Ll=e=>e.type!=="armor"?null:e.isCustom&&e.customArmorData?{bonus:e.customArmorData.bonus,mightReq:e.customArmorData.mightReq,penalty:e.customArmorData.penalty,penaltyMet:e.customArmorData.penaltyMet,weight:e.weight}:e.dataRef&&Ge[e.dataRef]?Ge[e.dataRef]:null,Eu=e=>e.type!=="shield"?null:e.isCustom&&e.customShieldData?{defenseBonus:e.customShieldData.defenseBonus,negation:e.customShieldData.negation,armorPenalty:e.customShieldData.armorPenalty,mightReq:e.customShieldData.mightReq,type:e.customShieldData.type,weight:e.weight}:e.dataRef&&jt[e.dataRef]?jt[e.dataRef]:null,My=(e,t,n)=>e.inventory?{...e,inventory:e.inventory.map(r=>r.id===t?{...r,state:n}:r)}:e,Dy=(e,t)=>({...e,inventory:[...e.inventory||[],t]}),Ry=(e,t)=>e.inventory?{...e,inventory:e.inventory.filter(n=>n.id!==t)}:e,zy=(e,t,n)=>e.inventory?{...e,inventory:e.inventory.map(r=>r.id===t?{...r,...n}:r)}:e,kt=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,_y=(e,t)=>{if(!e.inventory)return{canEquip:!0};if(t.type==="armor"){const n=gi(e);if(n&&n.id!==t.id)return{canEquip:!1,reason:"Another armor is already equipped. Unequip it first."}}if(t.type==="shield"){const n=Km(e);if(n&&n.id!==t.id)return{canEquip:!1,reason:"Another shield is already equipped. Unequip it first."}}if(t.type==="weapon"){const n=Pu(e);if(n.length>=2&&!n.some(r=>r.id===t.id))return{canEquip:!1,reason:"Maximum 2 weapons can be equipped. Unequip one first."}}return{canEquip:!0}},Fy={Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"},yd=e=>{const t={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};e.forEach(r=>{if(r.type!=="stagedPerk"&&r.attribute){const l=Fy[r.attribute]||r.attribute;l in t&&(t[l]+=r.cost)}});const n={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};return Object.keys(t).forEach(r=>{const l=t[r];let s=0;for(let i=0;i<da.length;i++)l>=da[i]&&(s=i+1);n[r]=s}),n},vd=e=>{let t=0,n=0;e.forEach(s=>{s.type==="combatPerk"||s.type==="stagedPerk"?t+=s.cost:(s.type==="spell"||s.type==="magicPerk")&&(n+=s.cost)});let r=0;for(let s=0;s<fa.length;s++)t>=fa[s]&&(r=s+1);let l=0;for(let s=0;s<pa.length;s++)n>=pa[s]&&(l=s+1);return{Martial:r,Spellcraft:l}},Oy=e=>{var u,c,f,d;const t=Math.pow(5+e.stats.EN+e.stats.MG,2);let n,r,l;if(e.inventory&&e.inventory.length>0){r=e.inventory.filter(y=>y.state==="equipped").reduce((y,w)=>y+w.weight*w.quantity,0);const p=e.inventory.filter(y=>y.state==="stowed").reduce((y,w)=>y+w.weight*w.quantity,0),m=e.stowedWeightReduction||0;l=Math.max(0,p-m),n=r+l}else{const p=e.equipment.reduce((g,v)=>g+v.weight*v.quantity,0),m=e.customItems.reduce((g,v)=>g+v.weight*v.quantity,0),y=((u=Ge[e.armorType])==null?void 0:u.weight)||0,w=((c=Te[e.equippedWeapon1])==null?void 0:c.weight)||0,E=((f=Te[e.equippedWeapon2])==null?void 0:f.weight)||0,h=((d=jt[e.equippedShield])==null?void 0:d.weight)||0;r=y+w+E+h,l=p+m,n=p+m+r}const s=n/t*100;let i=Or.NONE;const a=n/t;return a>=2?i=Or.OVER:a>=1.5?i=Or.HEAVY:a>=1?i=Or.ENCUMBERED:a>=.5&&(i=Or.LIGHT),{capacity:t,totalWeight:n,equippedWeight:r,inventoryWeight:l,percentage:Math.min(300,s),level:i}},$y=(e,t)=>e+t,By=e=>e>=5?3:e>=3?2:1,Hy=(e,t)=>{if(e.includes("+Might"))return{die:0,bonus:parseInt(e.split("+")[0])+t,isBow:!0};if(e.includes("+")){const[n,r]=e.split("+");return{die:parseInt(n.replace("d","")),bonus:parseInt(r)+t,isBow:!1}}return{die:parseInt(e.replace("d","")),bonus:t,isBow:!1}},Wy=(e,t)=>{let n=e.stats.AG;return t.traits.includes("Ranged")||t.traits.includes("Bow")?n=e.stats.PR:t.finesse&&e.stats.DX>e.stats.AG?n=e.stats.DX:t.traits.includes("Heavy")&&e.stats.MG>e.stats.AG&&(n=e.stats.MG),n},qy=(e,t)=>{if(!t.domain||t.traits.includes("Ranged")||t.traits.includes("Bow"))return 0;const n=e.weaponDomains.Martial||0;return(t.finesse&&e.stats.DX>e.stats.AG?e.stats.DX:e.stats.AG)+n},Uy=e=>{const t=Pu(e);let n=[];if(t.length>0)n=t.map(r=>xi(r)).filter(r=>r!==null);else if(e.equippedWeapon1||e.equippedWeapon2){if(e.equippedWeapon1&&e.equippedWeapon1!=="None"){const r=Te[e.equippedWeapon1];r&&n.push(r)}if(e.equippedWeapon2&&e.equippedWeapon2!=="None"){const r=Te[e.equippedWeapon2];r&&n.push(r)}}return Math.max(0,...n.map(r=>qy(e,r)))},Xy=e=>{const t=Km(e),n=t?Eu(t)||jt.None:e.equippedShield?jt[e.equippedShield]:jt.None,r=e.weaponDomains.Martial||0;let l=0;if(n.defenseBonus>0){let s=e.stats.AG;n.type==="Medium"?s=e.stats.EN:n.type==="Heavy"&&(s=e.stats.MG),l=s+r+n.defenseBonus}return l},Vy=e=>{const t=gi(e),n=t?Ll(t)||Ge.None:e.armorType?Ge[e.armorType]:Ge.None,l=e.stats.MG>=n.mightReq?n.penaltyMet:n.penalty;return e.stats.AG+e.stats.PR+(l||0)},Qy=e=>{var l,s;const n=((l=e.stagedPerks)==null?void 0:l.filter(i=>{var a,u;return i.level>=5&&(((u=(a=i.perkSnapshot)==null?void 0:a.tags)==null?void 0:u.includes("Conditioning"))||i.name.includes("Conditioning"))}).length)||0,r=((s=e.combatPerks)==null?void 0:s.filter(i=>{var a,u;return((u=(a=i.perkSnapshot)==null?void 0:a.tags)==null?void 0:u.includes("Conditioning"))||i.name.includes("Conditioning")}).length)||0;return 2+n+r},Gy=e=>{const t=Qy(e),n=t-e.markedWounds,r=gi(e),s=(r?Ll(r)||Ge.None:e.armorType?Ge[e.armorType]:Ge.None).bonus,i=(s+e.stats.EN)*n,a=e.hpPerWound*n+e.extraHP,u=e.currentStamina!==null?e.currentStamina:i,c=e.currentHealth!==null?e.currentHealth:a,f=i+a,d=u+c,p=d<0,m=t*e.hpPerWound;let y=0,w=0,E=0;return p?E=m>0?Math.min(100,Math.abs(d)/m*100):0:(y=a>0?Math.min(100,c/a*100):0,w=i>0?Math.min(100,u/i*100):0),{maxStamina:i,maxHealth:a,currentStamina:u,currentHealth:c,totalMax:f,totalCurrent:d,effectiveMaxWounds:n,isNegative:p,maxNegativeHP:m,healthPercent:y,staminaPercent:w,negativePercent:E,armorBonus:s}},Ky=e=>{const t=gi(e),n=t?Ll(t):null,r=n?e.stats.MG>=n.mightReq:!0,l=n?r?n.penaltyMet:n.penalty:0,s=e.skills.find(c=>c.name==="Running"),i=s?Math.floor(s.level/2):0,a=5+e.stats.AG+i+l,u=5+e.stats.AG+i;return{withArmor:a,withoutArmor:u}},bd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=I.useState(!1),s=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a))}),n&&o.jsxs("button",{onClick:i=>{i.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},Yy=({weaponName:e,weaponData:t,character:n,label:r,onOpenRoller:l})=>{const s=t.domain?n.weaponDomains.Martial:0,i=Wy(n,t),a=By(s),u=()=>{const{die:c,bonus:f,isBow:d}=Hy(t.damage,n.stats.MG);l({type:`Attack - ${e}`,baseModifier:s+i,damageRollData:{damageDice:{count:d?f:a,sides:d?1:c},damageBonus:d?0:f}})};return o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:e}),o.jsxs("div",{className:"text-slate-400 text-xs",children:[r,"  Martial ",s]})]})}),o.jsx("button",{onClick:u,className:"w-full bg-blue-600 hover:bg-blue-500 rounded py-2 text-white text-sm font-semibold",children:"Roll Attack / Damage"})]})},Zy=({character:e,onUpdate:t,perkDatabase:n})=>{const[r,l]=I.useState(!1),s=mi(e,n),i=hi(e,n),a=s.filter(_=>_.tags.includes("Combat")),u=i.filter(_=>_.tags.includes("Combat")),[c,f]=I.useState(!1),[d,p]=I.useState(0),[m,y]=I.useState(0),[w,E]=I.useState(!1),[h,g]=I.useState(null),v=Gy(e),C=_=>{const B=-(e.maxWounds*e.hpPerWound),S=Math.max(B,_);let G,X;S<=0||S<=v.maxHealth?(X=0,G=S):(G=v.maxHealth,X=Math.min(v.maxStamina,S-v.maxHealth)),t({...e,currentStamina:X,currentHealth:G})},A=_=>{f(!0),p(_.clientX),y(v.totalCurrent),_.preventDefault()},N=_=>{f(!0),p(_.touches[0].clientX),y(v.totalCurrent),_.preventDefault(),_.stopPropagation()},R=_=>{if(!c)return;const B=_.clientX-d,S=Math.round(B/30);C(m+S)},O=_=>{if(!c)return;const B=_.touches[0].clientX-d,S=Math.round(B/30);C(m+S),_.preventDefault()},P=()=>{f(!1)},x=()=>{f(!1)};I.useEffect(()=>{if(c)return window.addEventListener("mousemove",R),window.addEventListener("mouseup",P),window.addEventListener("touchmove",O),window.addEventListener("touchend",x),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",P),window.removeEventListener("touchmove",O),window.removeEventListener("touchend",x)}},[c,d,m]);const k=()=>{t({...e,currentStamina:null,currentHealth:null})},j=_=>{var gt,wn;const B=e.combatPerks[_],S=e.combatPerks.filter((W,Rt)=>Rt!==_),G=((wn=(gt=B.perkSnapshot)==null?void 0:gt.tags)==null?void 0:wn.includes("Conditioning"))||B.name.includes("(Completed)"),X=B.name.replace(" (Completed)","");let F=[...e.progressionLog],ie=0,ae=!1;if(G)F=e.progressionLog.filter(W=>W.type==="stagedPerk"&&W.name===X?(ie+=W.cost||0,!1):!(W.type==="combatPerk"&&(W.name===B.name||W.name===`${X} (Completed)`))),ae=!0;else{for(let W=F.length-1;W>=0;W--)if(F[W].type==="combatPerk"&&F[W].name===B.name&&F[W].cost===B.cost&&F[W].attribute===B.attribute){F.splice(W,1);break}ie=B.cost}const me=F.filter(W=>W.type==="combatPerk"||W.type==="stagedPerk").reduce((W,Rt)=>W+(Rt.cost||0),0);let ue=0;me>=150?ue=5:me>=100?ue=4:me>=60?ue=3:me>=30?ue=2:me>=10&&(ue=1),t({...e,combatPerks:S,weaponDomains:{...e.weaponDomains,Martial:ue},maxWounds:ae?e.maxWounds-1:e.maxWounds,combatXP:e.combatXP+ie,progressionLog:F})},L=Pu(e);let D=[];L.length>0?D=L.map(_=>{const B=xi(_);return B?{item:_,weaponData:B}:null}).filter(_=>_!==null):(e.equippedWeapon1||e.equippedWeapon2)&&(e.equippedWeapon1&&e.equippedWeapon1!=="None"&&D.push({name:e.equippedWeapon1,weaponData:Te[e.equippedWeapon1]||Te.None}),e.equippedWeapon2&&e.equippedWeapon2!=="None"&&D.push({name:e.equippedWeapon2,weaponData:Te[e.equippedWeapon2]||Te.None}));const T=Uy(e),$=Xy(e),V=Vy(e),z=$y(e.stats.EN,e.stats.WI),M=_=>{g(_),E(!0)},b=(_,B)=>{M({type:_,baseModifier:B})};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 cursor-pointer",onClick:()=>l(!r),children:[o.jsxs("div",{className:"text-white",children:[o.jsx("span",{className:`text-3xl font-bold ${v.isNegative?"text-red-400":""}`,children:v.totalCurrent}),o.jsxs("span",{className:"text-slate-400 text-lg",children:[" / ",v.totalMax]})]}),o.jsxs("div",{className:"text-right text-sm",children:[!v.isNegative&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-yellow-400",children:["Stamina: ",v.currentStamina]}),o.jsxs("div",{className:"text-red-400",children:["Health: ",v.currentHealth]})]}),v.isNegative&&o.jsx("div",{className:"text-red-400",children:"Below 0 HP!"})]})]}),o.jsxs("div",{className:`relative h-8 bg-slate-700 rounded-lg overflow-hidden ${c?"cursor-grabbing":"cursor-grab"}`,onMouseDown:A,onTouchStart:N,children:[v.isNegative?o.jsx("div",{className:"absolute inset-y-0 right-0 bg-red-900 transition-all",style:{width:`${v.negativePercent}%`}}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-600 transition-all",style:{width:`${v.staminaPercent}%`}}),o.jsx("div",{className:"absolute inset-0 bg-red-600 transition-all",style:{width:`${v.healthPercent}%`,left:`${v.staminaPercent}%`}})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-semibold text-sm drop-shadow-md pointer-events-none",children:v.isNegative?o.jsxs("span",{className:"text-red-200",children:[v.totalCurrent," HP"]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-yellow-200",children:v.currentStamina}),o.jsx("span",{className:"mx-1",children:"+"}),o.jsx("span",{className:"text-red-200",children:v.currentHealth})]})}),!c&&o.jsx("div",{className:"absolute bottom-0 right-2 text-xs text-slate-400 pointer-events-none",children:" Drag "})]}),o.jsxs("div",{className:"mt-3 text-sm text-slate-300",children:["Wounds: ",o.jsx("span",{className:"text-white font-semibold",children:e.maxWounds})," | HP/Wound: ",o.jsx("span",{className:"text-white font-semibold",children:e.hpPerWound})," | Armor: ",o.jsxs("span",{className:"text-white font-semibold",children:["+",v.armorBonus]})]}),r&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Marked Wounds"}),o.jsx("input",{type:"number",min:"0",max:e.maxWounds,value:e.markedWounds,onChange:_=>t({...e,markedWounds:Math.min(e.maxWounds,Math.max(0,parseInt(_.target.value)||0))}),className:"bg-slate-600 text-white text-lg font-bold w-14 px-2 py-1 rounded"})]}),o.jsx("div",{className:"bg-slate-700 rounded p-2",children:o.jsx("textarea",{placeholder:"Wounds notes",value:e.woundsNotes||"",onChange:_=>t({...e,woundsNotes:_.target.value}),className:"w-full h-12 bg-slate-600 text-white text-xs px-2 py-1 rounded resize-none placeholder:text-slate-500"})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:k,className:"bg-blue-700 hover:bg-blue-600 rounded py-2 text-white font-semibold",children:"Reset to Full HP"}),o.jsx("button",{onClick:()=>t({...e,currentStamina:v.maxStamina}),className:"bg-cyan-700 hover:bg-cyan-600 rounded py-2 text-white font-semibold",children:"Reset Stamina"})]})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Equipped Weapons"}),D.length===0?o.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"No weapons equipped"}):o.jsx("div",{className:`grid gap-3 ${D.length>1?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:D.map((_,B)=>{const S="item"in _?_.item.name:_.name,G=B===0?"Primary":"Secondary";return o.jsx(Yy,{weaponName:S,weaponData:_.weaponData,character:e,label:G,onOpenRoller:M},S+B)})})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Defense"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>b("Parry",T),className:`rounded py-3 text-white text-sm font-semibold ${T?"bg-emerald-700 hover:bg-emerald-600":"bg-slate-600 hover:bg-slate-500"}`,children:["Parry (",T||"0",")"]}),o.jsxs("button",{onClick:()=>b("Block",$),className:`rounded py-3 text-white text-sm font-semibold ${$?"bg-amber-700 hover:bg-amber-600":"bg-slate-600 hover:bg-slate-500"}`,children:["Block (",$||"0",")"]}),o.jsxs("button",{onClick:()=>b("Dodge",V),className:"bg-indigo-700 hover:bg-indigo-600 rounded py-3 text-white text-sm font-semibold",children:["Dodge (",V,")"]}),o.jsxs("button",{onClick:()=>b("Endure",z),className:"bg-purple-700 hover:bg-purple-600 rounded py-3 text-white text-sm font-semibold",children:["Endure (",z,")"]})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"px-4 py-3 bg-slate-750 -mx-4 -mt-4 mb-4 flex items-center gap-2 border-b border-slate-700",children:[o.jsx(br,{size:18,className:"text-slate-300"}),o.jsx("h3",{className:"text-white font-semibold",children:"Martial Abilities & Effects"}),o.jsxs("span",{className:"text-slate-400 text-sm ml-auto",children:[a.length," abilities, ",u.length," effects"]})]}),a.length===0&&u.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Combat perks. Add perks in the Perks tab."}):o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-blue-400 text-sm font-semibold mb-2",children:["Abilities (",a.length,")"]}),a.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No abilities"}):o.jsx("div",{className:"space-y-2",children:a.map((_,B)=>o.jsx(bd,{item:_,isAbility:!0,onDelete:()=>{const S=e.combatPerks.findIndex(G=>G.name===_.sourcePerk);S!==-1&&j(S)}},`combat-ability-${B}`))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-purple-400 text-sm font-semibold mb-2",children:["Effects (",u.length,")"]}),u.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No effects"}):o.jsx("div",{className:"space-y-2",children:u.map((_,B)=>o.jsx(bd,{item:_,isAbility:!1,onDelete:()=>{const S=e.combatPerks.findIndex(G=>G.name===_.sourcePerk);S!==-1&&j(S)}},`combat-effect-${B}`))})]})]})]}),o.jsx(Cu,{isOpen:w,onClose:()=>E(!1),rollData:h})]})},Jy=({isOpen:e,onClose:t,character:n,onUpdate:r})=>{const[l,s]=I.useState("weapon"),[i,a]=I.useState(!1),[u,c]=I.useState("stowed"),[f,d]=I.useState(""),[p,m]=I.useState("1"),[y,w]=I.useState("1"),[E,h]=I.useState(""),[g,v]=I.useState("Martial"),[C,A]=I.useState(!1),[N,R]=I.useState("d6"),[O,P]=I.useState("2"),[x,k]=I.useState("0"),[j,L]=I.useState(""),[D,T]=I.useState("0"),[$,V]=I.useState("0"),[z,M]=I.useState("0"),[b,_]=I.useState("0"),[B,S]=I.useState("0"),[G,X]=I.useState("0"),[F,ie]=I.useState("0"),[ae,me]=I.useState("Light"),ue=()=>{d(""),m("1"),w("1"),h(""),a(!1),c("stowed"),v("Martial"),A(!1),R("d6"),P("2"),k("0"),L(""),T("0"),V("0"),M("0"),_("0"),S("0"),X("0"),ie("0"),me("Light")},gt=()=>{let W;if(i)if(l==="weapon"){const Me={domain:g,finesse:C,damage:N,ap:parseInt(O)||0,mightReq:parseInt(x)||0,traits:j.split(",").map(Yt=>Yt.trim()).filter(Yt=>Yt)};W={id:kt(),name:f,type:"weapon",state:u,weight:parseFloat(p)||0,quantity:parseInt(y)||1,isCustom:!0,customWeaponData:Me}}else if(l==="armor"){const Me={bonus:parseInt(D)||0,mightReq:parseInt(x)||0,penalty:parseInt($)||0,penaltyMet:parseInt(z)||0};W={id:kt(),name:f,type:"armor",state:u,weight:parseFloat(p)||0,quantity:parseInt(y)||1,isCustom:!0,customArmorData:Me}}else if(l==="shield"){const Me={defenseBonus:parseInt(b)||0,negation:parseInt(B)||0,armorPenalty:parseInt(G)||0,mightReq:parseInt(F)||0,type:ae};W={id:kt(),name:f,type:"shield",state:u,weight:parseFloat(p)||0,quantity:parseInt(y)||1,isCustom:!0,customShieldData:Me}}else W={id:kt(),name:f,type:"item",state:u,weight:parseFloat(p)||0,quantity:parseInt(y)||1,isCustom:!0};else{let Me=parseFloat(p)||0,Yt=E;l==="weapon"&&Te[E]?Me=Te[E].weight:l==="armor"&&Ge[E]?Me=Ge[E].weight:l==="shield"&&jt[E]&&(Me=jt[E].weight),W={id:kt(),name:Yt,type:l,state:u,weight:Me,quantity:parseInt(y)||1,isCustom:!1,dataRef:E}}const Rt=Dy(n,W);r(Rt),ue(),t()},wn=()=>i?f.trim()!==""&&p!=="":E!=="";return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Add Item to Inventory"}),o.jsx("button",{onClick:()=>{ue(),t()},className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Item Type"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:["weapon","armor","shield","item"].map(W=>o.jsx("button",{onClick:()=>{s(W),h("")},className:`py-2 px-3 rounded font-semibold capitalize ${l===W?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:W},W))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Source"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>a(!1),className:`py-2 px-3 rounded font-semibold ${i?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-blue-700 text-white"}`,children:"From Database"}),o.jsx("button",{onClick:()=>a(!0),className:`py-2 px-3 rounded font-semibold ${i?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Custom Item"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Item State"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:["equipped","stowed","packed"].map(W=>{const Rt=Me=>Me==="stowed"?"On Self":Me==="packed"?"Stored":"Equipped";return o.jsx("button",{onClick:()=>c(W),className:`py-2 px-3 rounded font-semibold ${u===W?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:Rt(W)},W)})})]}),!i&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select ",l]}),o.jsxs("select",{value:E,onChange:W=>h(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsxs("option",{value:"",children:["-- Select ",l," --"]}),l==="weapon"&&Object.keys(Te).map(W=>o.jsxs("option",{value:W,children:[W," - ",Te[W].domain," - ",Te[W].damage]},W)),l==="armor"&&Object.keys(Ge).map(W=>o.jsxs("option",{value:W,children:[W," - Bonus +",Ge[W].bonus]},W)),l==="shield"&&Object.keys(jt).map(W=>o.jsxs("option",{value:W,children:[W," - Def +",jt[W].defenseBonus]},W))]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Name"}),o.jsx("input",{type:"text",value:f,onChange:W=>d(W.target.value),placeholder:"Item name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.1",value:p,onChange:W=>m(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",value:y,onChange:W=>w(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),l==="weapon"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Weapon Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Domain"}),o.jsxs("select",{value:g||"",onChange:W=>v(W.target.value===""?null:"Martial"),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Martial",children:"Martial"}),o.jsx("option",{value:"",children:"None (Improvised)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage"}),o.jsx("input",{type:"text",value:N,onChange:W=>R(W.target.value),placeholder:"e.g., d8, d10, 4+Might",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP"}),o.jsx("input",{type:"number",value:O,onChange:W=>P(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:x,onChange:W=>k(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center text-sm text-slate-300",children:[o.jsx("input",{type:"checkbox",checked:C,onChange:W=>A(W.target.checked),className:"mr-2"}),"Finesse Weapon"]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:j,onChange:W=>L(W.target.value),placeholder:"e.g., Light, Quick Drawn, Range 3",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),l==="armor"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Armor Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Bonus"}),o.jsx("input",{type:"number",value:D,onChange:W=>T(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:x,onChange:W=>k(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Unmet)"}),o.jsx("input",{type:"number",value:$,onChange:W=>V(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Met)"}),o.jsx("input",{type:"number",value:z,onChange:W=>M(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]})]}),l==="shield"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Shield Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Defense Bonus"}),o.jsx("input",{type:"number",value:b,onChange:W=>_(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Negation"}),o.jsx("input",{type:"number",value:B,onChange:W=>S(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Penalty"}),o.jsx("input",{type:"number",value:G,onChange:W=>X(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:F,onChange:W=>ie(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Shield Type"}),o.jsxs("select",{value:ae,onChange:W=>me(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Light",children:"Light"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Heavy",children:"Heavy"})]})]})]})]}),!i&&E&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",value:y,onChange:W=>w(W.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>{ue(),t()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:gt,disabled:!wn(),className:`px-4 py-2 rounded font-semibold ${wn()?"bg-blue-700 hover:bg-blue-600 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:"Add Item"})]})]})}):null},ev=({isOpen:e,onClose:t,item:n,character:r,onUpdate:l})=>{const[s,i]=I.useState(""),[a,u]=I.useState("1"),[c,f]=I.useState(1),[d,p]=I.useState("Martial"),[m,y]=I.useState(!1),[w,E]=I.useState("d6"),[h,g]=I.useState("2"),[v,C]=I.useState("0"),[A,N]=I.useState(""),[R,O]=I.useState("0"),[P,x]=I.useState("0"),[k,j]=I.useState("0"),[L,D]=I.useState("0"),[T,$]=I.useState("0"),[V,z]=I.useState("0"),[M,b]=I.useState("0"),[_,B]=I.useState("0"),[S,G]=I.useState("Light");I.useEffect(()=>{if(n){if(i(n.name),u(n.weight.toString()),f(n.quantity),n.type==="weapon"){const F=xi(n);F&&(p(F.domain),y(F.finesse),E(F.damage),g(F.ap.toString()),C((F.mightReq||0).toString()),N(F.traits.join(", ")))}else if(n.type==="armor"){const F=Ll(n);F&&(O(F.bonus.toString()),x(F.mightReq.toString()),j(F.penalty.toString()),D(F.penaltyMet.toString()))}else if(n.type==="shield"){const F=Eu(n);F&&($(F.defenseBonus.toString()),z(F.negation.toString()),b(F.armorPenalty.toString()),B(F.mightReq.toString()),G(F.type))}}},[n]);const X=()=>{if(!n)return;const F={name:s,weight:parseFloat(a)||0,quantity:c,isCustom:!0,dataRef:void 0};n.type==="weapon"?F.customWeaponData={domain:d,finesse:m,damage:w,ap:parseInt(h)||0,mightReq:parseInt(v)||0,traits:A.split(",").map(ae=>ae.trim()).filter(ae=>ae)}:n.type==="armor"?F.customArmorData={bonus:parseInt(R)||0,mightReq:parseInt(P)||0,penalty:parseInt(k)||0,penaltyMet:parseInt(L)||0}:n.type==="shield"&&(F.customShieldData={defenseBonus:parseInt(T)||0,negation:parseInt(V)||0,armorPenalty:parseInt(M)||0,mightReq:parseInt(_)||0,type:S});const ie=zy(r,n.id,F);l(ie),t()};return!e||!n?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Item"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[!n.isCustom&&o.jsx("div",{className:"bg-yellow-900 border border-yellow-700 rounded p-3",children:o.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:" Editing will convert this database item to a custom item"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Name"}),o.jsx("input",{type:"text",value:s,onChange:F=>i(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.1",value:a,onChange:F=>u(F.target.value),className:"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>f(Math.max(1,c-1)),className:"bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded px-2 py-1 text-white",children:o.jsx(_m,{size:14})}),o.jsx("input",{type:"number",min:"1",value:c,onChange:F=>f(Math.max(1,parseInt(F.target.value)||1)),className:"w-16 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-sm text-center"}),o.jsx("button",{onClick:()=>f(c+1),className:"bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded px-2 py-1 text-white",children:o.jsx(Vt,{size:14})})]})]})]}),n.type==="weapon"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Weapon Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Domain"}),o.jsxs("select",{value:d||"",onChange:F=>p(F.target.value===""?null:"Martial"),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Martial",children:"Martial"}),o.jsx("option",{value:"",children:"None (Improvised)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage"}),o.jsx("input",{type:"text",value:w,onChange:F=>E(F.target.value),placeholder:"e.g., d8, d10, 4+Might",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP"}),o.jsx("input",{type:"number",value:h,onChange:F=>g(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:v,onChange:F=>C(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center text-sm text-slate-300",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:F=>y(F.target.checked),className:"mr-2"}),"Finesse Weapon"]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:A,onChange:F=>N(F.target.value),placeholder:"e.g., Light, Quick Drawn, Range 3",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),n.type==="armor"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Armor Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Bonus"}),o.jsx("input",{type:"number",value:R,onChange:F=>O(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:P,onChange:F=>x(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Unmet)"}),o.jsx("input",{type:"number",value:k,onChange:F=>j(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Met)"}),o.jsx("input",{type:"number",value:L,onChange:F=>D(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]})]}),n.type==="shield"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Shield Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Defense Bonus"}),o.jsx("input",{type:"number",value:T,onChange:F=>$(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Negation"}),o.jsx("input",{type:"number",value:V,onChange:F=>z(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Penalty"}),o.jsx("input",{type:"number",value:M,onChange:F=>b(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:_,onChange:F=>B(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Shield Type"}),o.jsxs("select",{value:S,onChange:F=>G(F.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Light",children:"Light"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Heavy",children:"Heavy"})]})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded font-semibold",children:"Save Changes"})]})]})})},tv=({character:e,onUpdate:t})=>{const[n,r]=I.useState(!1),[l,s]=I.useState(null),[i,a]=I.useState(null),[u,c]=I.useState(null),[f,d]=I.useState(!1),[p,m]=I.useState("0"),y=Oy(e),{totalWeight:w,capacity:E,level:h}=y,g=P=>{if(confirm("Are you sure you want to delete this item?")){const x=Ry(e,P);t(x)}},v=(P,x)=>{var j;if(x<1)return;const k=(j=e.inventory)==null?void 0:j.map(L=>L.id===P?{...L,quantity:x}:L);t({...e,inventory:k})},C=P=>{c(P)},A=P=>{P.preventDefault()},N=P=>{if(!u)return;if(P==="equipped"){const{canEquip:k,reason:j}=_y(e,u);if(!k){alert(j),c(null);return}}const x=My(e,u.id,P);t(x),c(null)},R=P=>{if(P.type==="weapon"){const x=xi(P);if(x)return`${x.domain||"?"} | ${x.damage} | AP ${x.ap}`}else if(P.type==="armor"){const x=Ll(P);if(x)return`+${x.bonus} Armor | Might ${x.mightReq}`}else if(P.type==="shield"){const x=Eu(P);if(x)return`+${x.defenseBonus} Def | Neg ${x.negation}`}return""};e.inventory||(e.inventory=[]);const O=P=>{const x=i===P.id;return o.jsxs("div",{draggable:!0,onDragStart:()=>C(P),className:"bg-slate-700 rounded overflow-hidden cursor-move hover:bg-slate-650 transition-colors",children:[o.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 text-sm",onClick:()=>a(x?null:P.id),children:[o.jsx("div",{className:"flex-shrink-0",children:x?o.jsx(Nr,{size:16,className:"text-slate-400"}):o.jsx(Tl,{size:16,className:"text-slate-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-white font-medium truncate",children:P.name}),P.isCustom&&o.jsx("span",{className:"ml-2 text-xs bg-purple-700 px-1.5 py-0.5 rounded",children:"Custom"})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("button",{onClick:k=>{k.stopPropagation(),v(P.id,P.quantity-1)},className:"w-5 h-5 flex items-center justify-center bg-slate-600 hover:bg-slate-500 rounded text-white",disabled:P.quantity<=1,children:o.jsx(_m,{size:12})}),o.jsxs("span",{className:"text-white font-medium w-8 text-center",children:["",P.quantity]}),o.jsx("button",{onClick:k=>{k.stopPropagation(),v(P.id,P.quantity+1)},className:"w-5 h-5 flex items-center justify-center bg-slate-600 hover:bg-slate-500 rounded text-white",children:o.jsx(Vt,{size:12})})]}),o.jsxs("div",{className:"text-slate-300 text-xs flex-shrink-0",children:[(P.weight*P.quantity).toFixed(1)," kg"]})]}),x&&o.jsxs("div",{className:"px-3 pb-2 border-t border-slate-600 pt-2",children:[o.jsxs("div",{className:"text-xs text-slate-300 space-y-1 mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Type:"})," ",o.jsx("span",{className:"capitalize",children:P.type})]}),R(P)&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Stats:"})," ",R(P)]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Weight:"})," ",P.weight," kg each"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:k=>{k.stopPropagation(),s(P)},className:"flex-1 flex items-center justify-center gap-1 bg-slate-600 hover:bg-slate-500 text-white py-1.5 rounded text-xs font-semibold",children:[o.jsx(Fm,{size:12}),"Edit"]}),o.jsxs("button",{onClick:k=>{k.stopPropagation(),g(P.id)},className:"flex-1 flex items-center justify-center gap-1 bg-red-700 hover:bg-red-600 text-white py-1.5 rounded text-xs font-semibold",children:[o.jsx(Nu,{size:12}),"Delete"]})]})]})]},P.id)};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Total Weight"}),o.jsxs("div",{className:"text-white font-bold",children:[w.toFixed(1)," kg"]})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Capacity"}),o.jsxs("div",{className:"text-white font-bold",children:[E," kg"]})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Level"}),o.jsx("div",{className:`font-bold ${h.name==="None"?"text-green-400":h.name==="Light"?"text-yellow-400":h.name==="Encumbered"?"text-orange-400":"text-red-400"}`,children:h.name})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Speed"}),o.jsx("div",{className:"text-white font-bold",children:(()=>{const P=Ky(e),x=P.withArmor!==P.withoutArmor;return o.jsxs(o.Fragment,{children:[o.jsx("span",{children:P.withArmor}),x&&o.jsxs("span",{className:"text-slate-400 text-sm",children:[" / ",P.withoutArmor]})]})})()})]})]}),h.name!=="None"&&o.jsxs("div",{className:"text-sm text-slate-300 mt-2",children:["Penalties: Speed ",h.speedPenalty,", Dodge ",h.dodgePenalty]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg px-3 py-2 mb-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-slate-400 text-sm",children:"Money:"}),o.jsxs("span",{className:"text-white font-semibold",children:[e.money||0," Silver"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{m("0"),d(!0)},className:"flex items-center gap-1 bg-slate-700 hover:bg-slate-600 rounded px-3 py-1.5 text-white text-sm font-semibold",children:"Adjust Money"}),o.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 bg-blue-700 hover:bg-blue-600 rounded px-3 py-1.5 text-white text-sm font-semibold",children:[o.jsx(Vt,{size:16}),"Add Item"]})]})]}),e.inventory.length===0?o.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-slate-400",children:"No items in inventory"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:'Click "Add Item" to get started'})]})}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"bg-green-900/10 rounded-lg overflow-hidden border border-green-900/30",onDragOver:A,onDrop:()=>N("equipped"),children:[o.jsx("div",{className:"bg-green-900/30 border-b border-green-700 px-3 py-1.5",children:o.jsxs("h4",{className:"text-green-300 font-semibold text-sm text-left",children:["Equipped (",e.inventory.filter(P=>P.state==="equipped").length,")"]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(P=>P.state==="equipped").map(P=>O(P)),e.inventory.filter(P=>P.state==="equipped").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No equipped items"})]})]}),o.jsxs("div",{className:"bg-blue-900/10 rounded-lg overflow-hidden border border-blue-900/30",onDragOver:A,onDrop:()=>N("stowed"),children:[o.jsx("div",{className:"bg-blue-900/30 border-b border-blue-700 px-3 py-1.5",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"text-blue-300 font-semibold text-sm text-left",children:["On Self (",e.inventory.filter(P=>P.state==="stowed").length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-blue-400 text-xs",children:"Weight reduction:"}),o.jsx("input",{type:"number",min:"0",step:"0.1",value:e.stowedWeightReduction||0,onChange:P=>{t({...e,stowedWeightReduction:parseFloat(P.target.value)||0})},className:"w-16 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-xs"}),o.jsx("span",{className:"text-blue-400 text-xs",children:"kg"})]})]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(P=>P.state==="stowed").map(P=>O(P)),e.inventory.filter(P=>P.state==="stowed").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No items on self"})]})]}),o.jsxs("div",{className:"bg-slate-800/50 rounded-lg overflow-hidden border border-slate-700",onDragOver:A,onDrop:()=>N("packed"),children:[o.jsx("div",{className:"bg-slate-700 border-b border-slate-600 px-3 py-1.5",children:o.jsxs("h4",{className:"text-slate-300 font-semibold text-sm text-left",children:["Stored (",e.inventory.filter(P=>P.state==="packed").length,")"]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(P=>P.state==="packed").map(P=>O(P)),e.inventory.filter(P=>P.state==="packed").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No stored items"})]})]})]}),o.jsx(Jy,{isOpen:n,onClose:()=>r(!1),character:e,onUpdate:t}),o.jsx(ev,{isOpen:l!==null,onClose:()=>s(null),item:l,character:e,onUpdate:t}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{d(!1),m("0")},children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 max-w-sm w-full mx-4",onClick:P=>P.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adjust Money"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Amount"}),o.jsx("input",{type:"number",step:"1",min:"0",value:p,onChange:P=>m(P.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{const P=parseFloat(p)||0,x=(e.money||0)+P;t({...e,money:x}),d(!1),m("0")},className:"flex-1 bg-green-700 hover:bg-green-600 text-white py-2 rounded font-semibold",children:"Add"}),o.jsx("button",{onClick:()=>{const P=parseFloat(p)||0,x=Math.max(0,(e.money||0)-P);t({...e,money:x}),d(!1),m("0")},className:"flex-1 bg-red-700 hover:bg-red-600 text-white py-2 rounded font-semibold",children:"Reduce"})]})]})})]})},nv=({isOpen:e,onClose:t,character:n,onUpdate:r})=>{const[l,s]=I.useState("database"),[i,a]=I.useState(null),[u,c]=I.useState(""),[f,d]=I.useState(""),[p,m]=I.useState(0),[y,w]=I.useState("basic"),[E,h]=I.useState("2"),[g,v]=I.useState("WT"),[C,A]=I.useState("0"),[N,R]=I.useState("Spell"),[O,P]=I.useState(""),[x,k]=I.useState("3m"),[j,L]=I.useState("Instant"),[D,T]=I.useState(""),$=pi(n),V=n.combatXP,z=hy().filter(([X,F])=>{var me;const ie=(me=n.knownSpells)==null?void 0:me.some(ue=>ue.dataRef===X),ae=md(n,F.tier);return!ie&&ae}),M=()=>{if(!u){alert("Please select a spell");return}const X=kl[u],F=X.attributes.split("/").map(gt=>gt.trim());if(F.length>1&&!i){alert("Please select which attribute to advance");return}const ie=$r(X.tier,X.type);if(V<ie){alert(`Not enough Combat XP. Need ${ie}, have ${V}`);return}const ae={id:gd(),name:u,tier:X.tier,type:X.type,isCustom:!1,dataRef:u,xpCost:ie},me=hd(n,ae);me.combatXP-=ie;const ue=i||F[0];me.progressionLog=[...me.progressionLog,{type:"spell",name:u,tier:X.tier,spellType:X.type,attribute:ue,cost:ie}],r(me),c(""),a(null),t()},b=()=>{if(!f.trim()){alert("Please enter a spell name");return}const X=g.split("/").map(ue=>ue.trim());if(X.length>1&&!i){alert("Please select which attribute to advance");return}const F=$r(p,y);if(V<F){alert(`Not enough Combat XP. Need ${F}, have ${V}`);return}if(!md(n,p)){alert(`Your Spellcraft level (${$}) is too low for Tier ${p} spells`);return}const ie={id:gd(),name:f,tier:p,type:y,isCustom:!0,xpCost:F,customSpellData:{tier:p,type:y,apCost:E,attributes:g,limitCost:parseInt(C)||0,traits:N.split(",").map(ue=>ue.trim()).filter(ue=>ue),effect:O,distance:x,duration:j,damage:D||void 0}},ae=hd(n,ie);ae.combatXP-=F;const me=i||X[0];ae.progressionLog=[...ae.progressionLog,{type:"spell",name:f,tier:p,spellType:y,attribute:me,cost:F}],r(ae),_(),a(null),t()},_=()=>{d(""),m(0),w("basic"),h("2"),v("WT"),A("0"),R("Spell"),P(""),k("3m"),L("Instant"),T("")};if(!e)return null;const B=u?kl[u]:null,S=l==="database"&&B?$r(B.tier,B.type):$r(p,y),G=ma(l==="database"&&B?B.tier:p);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Learn Spell"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("button",{onClick:()=>s("database"),className:`flex-1 py-2 px-4 rounded font-semibold ${l==="database"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"From Spellbook"}),o.jsx("button",{onClick:()=>s("custom"),className:`flex-1 py-2 px-4 rounded font-semibold ${l==="custom"?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Create Custom"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-slate-400",children:"Combat XP:"}),o.jsx("span",{className:"font-bold text-red-400",children:n.combatXP})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm mt-2 pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Cost:"}),o.jsxs("span",{className:"text-yellow-400 font-bold",children:[S," XP"]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[o.jsx("span",{className:"text-slate-400",children:"After Learning:"}),o.jsxs("span",{className:`font-bold ${V-S>=0?"text-green-400":"text-red-400"}`,children:[V-S," Combat XP"]})]})]}),l==="database"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select Spell (Spellcraft ",$,")"]}),o.jsxs("select",{value:u,onChange:X=>c(X.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose a spell --"}),z.map(([X,F])=>o.jsxs("option",{value:X,children:[X," (Tier ",F.tier,", ",F.type==="basic"?"Basic":"Advanced",") - ",$r(F.tier,F.type)," XP"]},X))]}),z.length===0&&o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"No spells available at your current Spellcraft level or all spells already known."})]}),B&&o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:u}),o.jsxs("div",{className:"text-sm text-slate-300 space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Tier:"})," ",B.tier," (DC ",G,")"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Type:"})," ",B.type==="basic"?"Basic":"Advanced"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"AP Cost:"})," ",B.apCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Attributes:"})," ",B.attributes]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Limit:"})," ",B.limitCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Distance:"})," ",B.distance]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Duration:"})," ",B.duration]}),B.damage&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Damage:"})," ",B.damage]}),o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("p",{className:"text-slate-300 italic mt-1",children:B.effect})]})]})]}),B&&B.attributes.split("/").length>1&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute to Advance"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:B.attributes.split("/").map(X=>{const F=X.trim();return o.jsx("button",{onClick:()=>a(F),className:`py-2 px-4 rounded font-semibold transition-colors ${i===F?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:F},F)})})]})]}),l==="custom"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Spell Name"}),o.jsx("input",{type:"text",value:f,onChange:X=>d(X.target.value),placeholder:"e.g., Fireball",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Tier (0-5)"}),o.jsx("select",{value:p,onChange:X=>m(parseInt(X.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[0,1,2,3,4,5].map(X=>o.jsxs("option",{value:X,disabled:X>$,children:["Tier ",X," ",X>$?"(locked)":""]},X))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Type"}),o.jsxs("select",{value:y,onChange:X=>w(X.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"basic",children:"Basic"}),o.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP Cost"}),o.jsx("input",{type:"text",value:E,onChange:X=>h(X.target.value),placeholder:"2, R, 1m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Attributes"}),o.jsx("input",{type:"text",value:g,onChange:X=>v(X.target.value),placeholder:"AG/WT",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Limit Cost"}),o.jsx("input",{type:"number",value:C,onChange:X=>A(X.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Distance"}),o.jsx("input",{type:"text",value:x,onChange:X=>k(X.target.value),placeholder:"3m, Touch, 10m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Duration"}),o.jsx("input",{type:"text",value:j,onChange:X=>L(X.target.value),placeholder:"Instant, 1 minute",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:N,onChange:X=>R(X.target.value),placeholder:"Spell, Offensive, Strike",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage (optional)"}),o.jsx("input",{type:"text",value:D,onChange:X=>T(X.target.value),placeholder:"Spellcraft * 4d",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Effect Description"}),o.jsx("textarea",{value:O,onChange:X=>P(X.target.value),placeholder:"Describe what the spell does...",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2 text-xs text-slate-400",children:[o.jsxs("div",{children:["Casting DC: ",G]}),o.jsxs("div",{children:["XP Cost: ",S]})]}),g.split("/").length>1&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute to Advance"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.split("/").map(X=>{const F=X.trim();return o.jsx("button",{onClick:()=>a(F),className:`py-2 px-4 rounded font-semibold transition-colors ${i===F?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:F},F)})})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsxs("button",{onClick:l==="database"?M:b,disabled:l==="database"?!u:!f.trim(),className:`px-4 py-2 rounded font-semibold ${l==="database"&&!u||l==="custom"&&!f.trim()?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600 text-white"}`,children:["Learn Spell (",S," XP)"]})]})]})})},rv=({isOpen:e,onClose:t,spell:n,character:r,onUpdate:l})=>{const[s,i]=I.useState(""),[a,u]=I.useState(0),[c,f]=I.useState("basic"),[d,p]=I.useState("2"),[m,y]=I.useState("WT"),[w,E]=I.useState("0"),[h,g]=I.useState(""),[v,C]=I.useState(""),[A,N]=I.useState("3m"),[R,O]=I.useState("Instant"),[P,x]=I.useState("");I.useEffect(()=>{if(!n)return;const j=fi(n);j&&(i(n.name),u(j.tier),f(j.type),p(j.apCost),y(j.attributes),E(j.limitCost.toString()),g(j.traits.join(", ")),C(j.effect),N(j.distance),O(j.duration),x(j.damage||""))},[n]);const k=()=>{if(!n)return;const j={name:s,tier:a,type:c,isCustom:!0,dataRef:void 0,customSpellData:{tier:a,type:c,apCost:d,attributes:m,limitCost:parseInt(w)||0,traits:h.split(",").map(D=>D.trim()).filter(D=>D),effect:v,distance:A,duration:R,damage:P||void 0}},L=by(r,n.id,j);l(L),t()};return!e||!n?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Spell"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[!n.isCustom&&o.jsx("div",{className:"bg-yellow-900 border border-yellow-700 rounded p-3",children:o.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:" Editing will convert this database spell to a custom spell"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Spell Name"}),o.jsx("input",{type:"text",value:s,onChange:j=>i(j.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Tier (0-5)"}),o.jsx("select",{value:a,onChange:j=>u(parseInt(j.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[0,1,2,3,4,5].map(j=>o.jsxs("option",{value:j,children:["Tier ",j]},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Type"}),o.jsxs("select",{value:c,onChange:j=>f(j.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"basic",children:"Basic"}),o.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP Cost"}),o.jsx("input",{type:"text",value:d,onChange:j=>p(j.target.value),placeholder:"2, R, 1m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Attributes"}),o.jsx("input",{type:"text",value:m,onChange:j=>y(j.target.value),placeholder:"AG/WT",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Limit Cost"}),o.jsx("input",{type:"number",value:w,onChange:j=>E(j.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Distance"}),o.jsx("input",{type:"text",value:A,onChange:j=>N(j.target.value),placeholder:"3m, Touch, 10m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Duration"}),o.jsx("input",{type:"text",value:R,onChange:j=>O(j.target.value),placeholder:"Instant, 1 minute",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:h,onChange:j=>g(j.target.value),placeholder:"Spell, Offensive, Strike",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage (optional)"}),o.jsx("input",{type:"text",value:P,onChange:j=>x(j.target.value),placeholder:"Spellcraft * 4d",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Effect Description"}),o.jsx("textarea",{value:v,onChange:j=>C(j.target.value),placeholder:"Describe what the spell does...",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded font-semibold",children:"Save Changes"})]})]})})},wd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=I.useState(!1),s=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((i,a)=>o.jsx("span",{className:`text-xs bg-${s}-900/50 text-${s}-300 px-1.5 py-0.5 rounded`,children:i},a))}),n&&o.jsxs("button",{onClick:i=>{i.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},lv=({character:e,onUpdate:t,perkDatabase:n})=>{const[r,l]=I.useState(!1),[s,i]=I.useState(null),[a,u]=I.useState(!1),[c,f]=I.useState(null),[d,p]=I.useState(null);e.knownSpells||(e.knownSpells=[]),e.attunedSpells||(e.attunedSpells=[]);const m=pi(e),y=wy(e),w=mi(e,n),E=hi(e,n),h=w.filter(P=>P.tags.includes("Spellcraft")),g=E.filter(P=>P.tags.includes("Spellcraft")),v=P=>{var k;if((k=e.attunedSpells)==null?void 0:k.includes(P)){const j=vy(e,P);t(j)}else{const j=yy(e,P);j.success?t(j.character):alert(j.reason)}},C=P=>{var j;if(!confirm("Are you sure you want to delete this spell? XP will be refunded."))return;const x=(j=e.knownSpells)==null?void 0:j.find(L=>L.id===P);if(!x)return;const k=xy(e,P);k.combatXP+=x.xpCost,k.progressionLog=k.progressionLog.filter(L=>!(L.type==="spell"&&L.name===x.name&&L.cost===x.xpCost)),t(k)},A=P=>{const x=m+e.stats.WT;f({type:`Cast Spell: ${P.name}`,baseModifier:x}),u(!0)},N=P=>{const x=ky(e,P,"combat");x.success?t(x.character):alert(x.reason)},R=P=>{p(d===P?null:P)},O=P=>{const x=e.magicPerks||[],k=x.findIndex(T=>T.name===P);if(k===-1)return;const j=x[k],L=x.filter((T,$)=>$!==k),D=[...e.progressionLog];for(let T=D.length-1;T>=0;T--)if(D[T].type==="magicPerk"&&D[T].name===j.name&&D[T].cost===j.cost&&D[T].attribute===j.attribute){D.splice(T,1);break}t({...e,magicPerks:L,combatXP:e.combatXP+j.cost,progressionLog:D})};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ua,{size:18,className:"text-slate-300"}),o.jsx("h4",{className:"text-lg font-bold text-white",children:"Spellcraft Abilities & Effects"})]}),o.jsxs("span",{className:"text-slate-400 text-sm",children:[h.length," abilities, ",g.length," effects"]})]}),h.length===0&&g.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Spellcraft perks. Add perks in the Perks tab."}):o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("h5",{className:"text-blue-400 text-sm font-semibold mb-2",children:["Abilities (",h.length,")"]}),h.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No abilities"}):o.jsx("div",{className:"space-y-2",children:h.map((P,x)=>o.jsx(wd,{item:P,isAbility:!0,onDelete:()=>O(P.sourcePerk)},`spellcraft-ability-${x}`))})]}),o.jsxs("div",{children:[o.jsxs("h5",{className:"text-purple-400 text-sm font-semibold mb-2",children:["Effects (",g.length,")"]}),g.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No effects"}):o.jsx("div",{className:"space-y-2",children:g.map((P,x)=>o.jsx(wd,{item:P,isAbility:!1,onDelete:()=>O(P.sourcePerk)},`spellcraft-effect-${x}`))})]})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:"Known Spells"}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-700 hover:bg-blue-600 rounded px-4 py-2 text-white font-semibold",children:[o.jsx(Vt,{size:20}),"Learn Spell"]})]}),e.knownSpells.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-slate-400",children:"No spells learned yet"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:'Click "Learn Spell" to get started'})]}):o.jsx("div",{className:"space-y-4",children:Array.from(y.entries()).map(([P,x])=>x.length===0?null:o.jsxs("div",{className:"border-t border-slate-700 pt-3 first:border-0 first:pt-0",children:[o.jsxs("h5",{className:"text-sm font-semibold text-slate-300 mb-2",children:["Tier ",P]}),o.jsx("div",{className:"space-y-2",children:x.map(k=>{var z;const j=fi(k);if(!j)return null;const L=(z=e.attunedSpells)==null?void 0:z.includes(k.id),D=ma(k.tier),T=d===k.id,$=Xm(k),V=$?Vm(k):0;return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>R(k.id),children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T?o.jsx(Nr,{size:16,className:"text-slate-400 flex-shrink-0"}):o.jsx(Tl,{size:16,className:"text-slate-400 flex-shrink-0"}),o.jsx("span",{className:"text-white font-medium truncate",children:k.name}),o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded flex-shrink-0 ${k.type==="basic"?"bg-blue-700":"bg-purple-700"}`,children:k.type==="basic"?"Basic":"Advanced"}),k.isCustom&&o.jsx("span",{className:"text-xs bg-amber-700 px-1.5 py-0.5 rounded flex-shrink-0",children:"Custom"}),L&&o.jsx("span",{className:"text-xs bg-green-700 px-1.5 py-0.5 rounded flex-shrink-0",children:"Attuned"})]}),o.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2 flex-wrap",children:[o.jsxs("span",{children:["AP ",j.apCost]}),o.jsx("span",{children:""}),o.jsx("span",{children:j.distance}),j.limitCost>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"text-yellow-400",children:["Limit ",j.limitCost]})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[j.limitCost>0&&o.jsx("button",{onClick:M=>{M.stopPropagation(),v(k.id)},className:`flex-shrink-0 rounded p-2 ${L?"bg-green-700 hover:bg-green-600 text-white":"bg-slate-600 hover:bg-slate-500 text-slate-300"}`,title:L?"Unattuned":"Attune Spell",children:L?o.jsx(ay,{size:18}):o.jsx(oy,{size:18})}),o.jsx("button",{onClick:M=>{M.stopPropagation(),A(k)},className:"flex-shrink-0 bg-blue-600 hover:bg-blue-500 rounded p-2 text-white",title:`Cast Spell (DC ${D})`,children:o.jsx(zm,{size:18})})]})]})}),T&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-300 mt-3 mb-3 space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Duration:"})," ",j.duration]}),j.damage&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Damage:"})," ",j.damage]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Traits:"})," ",j.traits.join(", ")]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("p",{className:"text-slate-300 italic mt-1",children:j.effect})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Casting DC:"})," ",D]})]}),$&&o.jsxs("div",{className:"bg-purple-900/30 border border-purple-700 rounded p-3 mb-3",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-purple-300 font-semibold text-sm",children:"Upgrade Available"}),o.jsxs("p",{className:"text-purple-400 text-xs mt-1",children:["Upgrade to Advanced version (",V," Combat XP)"]})]})}),o.jsx("button",{onClick:M=>{M.stopPropagation(),N(k.id)},className:"w-full bg-purple-700 hover:bg-purple-600 rounded py-2 text-white font-semibold text-sm",children:"Upgrade to Advanced"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:M=>{M.stopPropagation(),i(k)},className:"flex items-center justify-center gap-1 bg-slate-600 hover:bg-slate-500 text-white py-2 rounded font-semibold text-sm",children:[o.jsx(Fm,{size:14}),"Edit"]}),o.jsxs("button",{onClick:M=>{M.stopPropagation(),C(k.id)},className:"flex items-center justify-center gap-1 bg-red-700 hover:bg-red-600 text-white py-2 rounded font-semibold text-sm",children:[o.jsx(Nu,{size:14}),"Delete"]})]})]})]},k.id)})})]},P))})]}),o.jsx(nv,{isOpen:r,onClose:()=>l(!1),character:e,onUpdate:t}),o.jsx(rv,{isOpen:s!==null,onClose:()=>i(null),spell:s,character:e,onUpdate:t}),o.jsx(Cu,{isOpen:a,onClose:()=>u(!1),rollData:c})]})},Zi=({isOpen:e,onClose:t,character:n,onUpdate:r,perkDatabase:l,category:s})=>{const[i,a]=I.useState("predefined"),[u,c]=I.useState(""),[f,d]=I.useState(""),[p,m]=I.useState(""),[y,w]=I.useState(""),[E,h]=I.useState(""),[g,v]=I.useState("");if(!e)return null;const C=[];if(l){let T;s==="combat"?T=l.perks.combat.filter($=>{var V;return!$.tags.includes("Conditioning")&&!($.cost.variable&&((V=$.cost.formula)!=null&&V.includes("Max_Wounds")))}):s==="magic"?T=l.perks.magic:s==="skill"?T=l.perks.skill:T=[...l.perks.combat,...l.perks.magic,...l.perks.skill];for(const $ of T){let V=!1;$.type==="skill"?V=n.perks.some(z=>z.id===$.id||z.name===$.name):$.type==="magic"?V=(n.magicPerks||[]).some(z=>z.id===$.id||z.name===$.name):$.type==="combat"&&(V=n.combatPerks.some(z=>z.id===$.id||z.name===$.name)),V||C.push($)}}const A=u?C.find(T=>T.id===u):null,N=A?A.attributes:[],R=N.length>1,O=()=>{a("predefined"),c(""),d(""),m(""),w(""),h(""),v(""),t()},P=()=>{i==="predefined"&&A?x(A):i==="custom"&&k()},x=T=>{let $;if(R){if(!f){alert("Please select an attribute for this perk");return}$=f}else if(T.attributes.length===1)$=T.attributes[0];else{alert("Please select an attribute");return}const V=T.type==="skill"?"social":"combat",z=V==="social"?n.socialXP:n.combatXP,M=T.cost.xp;if(z<M){alert(`Not enough ${V==="social"?"Skill":"Combat"} XP. Need ${M}, have ${z}.`);return}let b={...n};if(T.type==="skill"){const _={id:T.id,name:T.name,cost:M,attribute:$,description:T.description,isCustom:!1,source:"database",perkSnapshot:T,addedAt:Date.now()};b.perks=[...n.perks,_],b.socialXP-=M}else if(T.type==="magic"){const _={id:T.id,name:T.name,cost:M,attribute:$,description:T.description,isCustom:!1,source:"database",perkSnapshot:T,addedAt:Date.now()};b.magicPerks=[...n.magicPerks||[],_],b.combatXP-=M}else if(T.type==="combat"){const _={id:T.id,name:T.name,cost:M,attribute:$,description:T.description,isCustom:!1,source:"database",perkSnapshot:T,addedAt:Date.now()};b.combatPerks=[...n.combatPerks,_],b.combatXP-=M}b.progressionLog=[...b.progressionLog,{type:T.type==="skill"?"perk":T.type==="magic"?"magicPerk":"combatPerk",name:T.name,cost:M,attribute:$,xpType:V}],r(b),O()},k=()=>{const T=parseInt(y);if(!p||!T||!E){alert("Please fill in all required fields");return}const $=s||"skill",V=$==="skill"?"social":"combat",z=V==="social"?n.socialXP:n.combatXP;if(z<T){alert(`Not enough ${V==="social"?"Skill":"Combat"} XP. Need ${T}, have ${z}.`);return}let M={...n};if($==="skill"){const b={name:p,cost:T,attribute:E,description:g,isCustom:!0,source:"custom",addedAt:Date.now()};M.perks=[...n.perks,b],M.socialXP-=T}else if($==="magic"){const b={name:p,cost:T,attribute:E,description:g,isCustom:!0,source:"custom",addedAt:Date.now()};M.magicPerks=[...n.magicPerks||[],b],M.combatXP-=T}else if($==="combat"){const b={name:p,cost:T,attribute:E,description:g,isCustom:!0,source:"custom",addedAt:Date.now()};M.combatPerks=[...n.combatPerks,b],M.combatXP-=T}M.progressionLog=[...M.progressionLog,{type:$==="skill"?"perk":$==="magic"?"magicPerk":"combatPerk",name:p,cost:T,attribute:E,xpType:V}],r(M),O()};let j;s==="skill"?j="social":j="combat";const L=j==="social"?n.socialXP:n.combatXP,D=i==="predefined"?A?L>=A.cost.xp:!1:y?L>=parseInt(y):!1;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:O,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Add Perk"}),o.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Available ",j==="social"?"Skill":"Combat"," XP: ",L,l&&`  ${C.length} perks available`]})]}),o.jsx("button",{onClick:O,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsx("button",{onClick:()=>a("predefined"),className:`py-2 px-4 rounded font-semibold transition-colors ${i==="predefined"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Database Perk"}),o.jsx("button",{onClick:()=>a("custom"),className:`py-2 px-4 rounded font-semibold transition-colors ${i==="custom"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Custom Perk"})]}),!l&&i==="predefined"&&o.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded p-3 mb-4",children:o.jsx("p",{className:"text-yellow-200 text-sm",children:"Perk database is loading... Please wait or create a custom perk."})}),i==="predefined"&&l&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Perk"}),o.jsxs("select",{value:u,onChange:T=>{c(T.target.value),d("")},className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose a perk --"}),C.map(T=>o.jsxs("option",{value:T.id,children:[T.name," (",T.cost.xp," XP)"]},T.id))]}),C.length===0&&o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"All perks in this category are already learned."})]}),A&&o.jsxs(o.Fragment,{children:[R&&o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute for Progression *"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map((T,$)=>o.jsx("button",{onClick:()=>d(T),className:`py-2 px-4 rounded font-semibold transition-colors ${f===T?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:T},$))}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"This determines which attribute advances when you spend XP"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:A.name}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"Cost:"})," ",o.jsxs("span",{className:"text-white text-sm",children:[A.cost.xp," XP",A.cost.variable&&" (Variable)"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"Attributes:"})," ",o.jsx("span",{className:"text-white text-sm",children:A.attributes.join(" / ")})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[A.requirements.text&&A.requirements.text!=="-"&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"Requirements:"})," ",o.jsx("span",{className:"text-white text-sm",children:A.requirements.text})]}),o.jsxs("div",{className:A.requirements.text&&A.requirements.text!=="-"?"":"col-span-2",children:[A.tags.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"Tags:"})," ",o.jsx("span",{className:"text-white text-sm",children:A.tags.map(T=>`#${T}`).join(" ")})]}),A.apCost!==null&&o.jsxs("div",{className:"mt-1",children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"AP Cost:"})," ",o.jsx("span",{className:"text-white text-sm",children:A.apCost})]})]})]}),A.grants.abilities.length>0&&(l==null?void 0:l.abilities)&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Grants Abilities"}),o.jsx("div",{className:"space-y-1",children:A.grants.abilities.map(T=>l.abilities.find($=>$.id===T)).filter(Boolean).map(T=>o.jsxs("div",{className:"bg-slate-600 rounded px-2 py-1.5",children:[o.jsx("div",{className:"text-white text-sm font-medium",children:T.name}),o.jsx("div",{className:"text-slate-300 text-xs",children:T.effect})]},T.id))})]}),A.grants.effects.length>0&&(l==null?void 0:l.effects)&&o.jsxs("div",{className:"mb-3",children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Grants Effects"}),o.jsx("div",{className:"space-y-1",children:A.grants.effects.map(T=>l.effects.find($=>$.id===T)).filter(Boolean).map(T=>o.jsxs("div",{className:"bg-slate-600 rounded px-2 py-1.5",children:[o.jsx("div",{className:"text-white text-sm font-medium",children:T.name}),o.jsx("div",{className:"text-slate-300 text-xs",children:T.effect})]},T.id))})]}),A.description&&o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400 text-xs",children:"Description:"}),o.jsx("p",{className:"text-slate-300 mt-1 text-xs whitespace-pre-wrap",children:A.description})]})]})]})]}),i==="custom"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Perk Name *"}),o.jsx("input",{type:"text",value:p,onChange:T=>m(T.target.value),placeholder:"Enter perk name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"XP Cost *"}),o.jsx("input",{type:"number",value:y,onChange:T=>w(T.target.value),placeholder:"Enter XP cost",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Attribute * ",E&&o.jsxs("span",{className:"text-blue-400",children:["(",E,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Xe).map(([T,$])=>o.jsx("button",{onClick:()=>h($),className:`py-2 rounded font-semibold transition-colors ${E===$?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:T},T))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Description"}),o.jsx("textarea",{value:g,onChange:T=>v(T.target.value),placeholder:"Enter perk description",rows:4,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white resize-none"})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:O,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:P,disabled:!D||(i==="predefined"?!A||R&&!f:!p||!y||!E),className:`px-4 py-2 rounded font-semibold ${!D||(i==="predefined"?!A||R&&!f:!p||!y||!E)?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600 text-white"}`,children:D?"Add Perk":"Not Enough XP"})]})]})})},sv={combat:"bg-red-900/50 text-red-300 border-red-800",magic:"bg-purple-900/50 text-purple-300 border-purple-800",skill:"bg-blue-900/50 text-blue-300 border-blue-800"},iv=e=>e.cost.variable?e.cost.formula||"Variable":`${e.cost.xp} XP`,ov=({perk:e,character:t,abilities:n=[],effects:r=[],isLearned:l=!1,isExpanded:s=!1,onToggleExpand:i,onAdd:a,showAddButton:u=!0,availableXP:c=0})=>{var E,h,g,v,C,A;const[f,d]=I.useState(""),p=e.cost.variable?0:e.cost.xp||0,m=c>=p,y=n.filter(N=>e.grants.abilities.includes(N.id)),w=r.filter(N=>e.grants.effects.includes(N.id));return o.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h4",{className:"text-lg font-bold text-white truncate",children:e.name}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold border ${sv[e.type]||"bg-slate-700"}`,children:e.type}),o.jsx("span",{className:"text-sm font-semibold text-green-400",children:iv(e)})]}),o.jsx("p",{className:"text-slate-300 text-sm mt-1 line-clamp-2",children:e.description}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.slice(0,5).map(N=>o.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-700 text-slate-400 text-xs rounded",children:["#",N]},N))}),e.requirements.text&&e.requirements.text!=="-"&&o.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["Req: ",e.requirements.text]})]}),(e.attributes.length>0||e.description||y.length>0||w.length>0||e.requirements.tier||((E=e.requirements.skills)==null?void 0:E.length)||((h=e.requirements.perks)==null?void 0:h.length))&&o.jsx("button",{onClick:i,className:"text-slate-400 hover:text-white p-1 flex-shrink-0",children:s?o.jsx(Q0,{size:20}):o.jsx(Nr,{size:20})})]}),u&&!l&&a&&o.jsx("div",{className:"mt-2 flex gap-2",children:e.attributes.length>1?o.jsxs(o.Fragment,{children:[o.jsxs("select",{className:"flex-1 bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-white text-sm",value:f,onChange:N=>{d(N.target.value)},children:[o.jsx("option",{value:"",children:"Select attribute..."}),e.attributes.map(N=>o.jsx("option",{value:N,children:N},N))]}),o.jsx("button",{onClick:()=>{f&&a&&(a(f),d(""))},disabled:!f,className:`px-4 py-1.5 rounded text-sm font-semibold transition-colors ${m?"bg-green-700 hover:bg-green-600 text-white":"bg-red-700 text-white cursor-not-allowed opacity-60"} disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed`,children:"Add"})]}):o.jsxs("button",{onClick:()=>a(e.attributes[0]),className:`flex-1 flex items-center justify-center gap-1 py-1.5 rounded text-sm font-semibold transition-colors ${m?"bg-green-700 hover:bg-green-600 text-white":"bg-red-700 text-white cursor-not-allowed opacity-60"}`,children:[o.jsx(Vt,{size:16}),"Add"]})})]}),s&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700 pt-3 space-y-3",children:[e.attributes.length>0&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Attributes"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:e.attributes.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 text-xs rounded",children:N},N))})]}),e.description&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Description"}),o.jsx("p",{className:"text-slate-300 text-sm whitespace-pre-wrap",children:e.description})]}),(y.length>0||w.length>0)&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Grants"}),o.jsxs("div",{className:"space-y-1",children:[y.map(N=>o.jsxs("div",{className:"bg-slate-700 rounded px-2 py-1.5",children:[o.jsx("div",{className:"text-white text-sm font-medium",children:N.name}),o.jsx("div",{className:"text-slate-300 text-xs",children:N.effect}),N.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:N.tags.map(R=>o.jsxs("span",{className:"text-xs text-blue-400",children:["#",R]},R))})]},N.id)),w.map(N=>o.jsxs("div",{className:"bg-slate-700 rounded px-2 py-1.5",children:[o.jsx("div",{className:"text-white text-sm font-medium",children:N.name}),o.jsx("div",{className:"text-slate-300 text-xs",children:N.effect}),N.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:N.tags.map(R=>o.jsxs("span",{className:"text-xs text-purple-400",children:["#",R]},R))})]},N.id))]})]}),(e.requirements.tier||((g=e.requirements.skills)==null?void 0:g.length)||((v=e.requirements.perks)==null?void 0:v.length))&&o.jsxs("div",{children:[o.jsx("h5",{className:"text-sm font-semibold text-slate-400 mb-1",children:"Requirements"}),o.jsxs("div",{className:"text-xs space-y-1 text-slate-300",children:[e.requirements.tier&&o.jsxs("div",{children:["Tier ",e.requirements.tier," ",e.type==="magic"?"(Spellcraft)":"(Martial)"]}),(C=e.requirements.skills)==null?void 0:C.map(N=>o.jsx("div",{children:N},N)),(A=e.requirements.perks)==null?void 0:A.map(N=>o.jsx("div",{children:N},N))]})]})]})]})},av="/Exceed-Playtest-App/data/perks.json";async function uv(){try{const e=await fetch(av);return e.ok?await e.json():(console.error("Failed to load bundled perks:",e.statusText),null)}catch(e){return console.error("Error loading bundled perks:",e),null}}function kd(e){return[...e.perks.combat,...e.perks.magic,...e.perks.skill]}function jd(e,t){return e.perks[t]}class cv extends I.Component{constructor(){super(...arguments);ec(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error caught by boundary:",n,r)}render(){var n;return this.state.hasError?o.jsxs("div",{className:"bg-red-900 text-white p-4 m-4 rounded",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Something went wrong"}),o.jsx("pre",{className:"text-sm overflow-auto",children:(n=this.state.error)==null?void 0:n.toString()})]}):this.props.children}}const dv=({isOpen:e,onClose:t,character:n,onUpdate:r,perkDatabase:l,initialCategory:s=null})=>{const[i,a]=I.useState(""),[u,c]=I.useState(s||"all"),[f,d]=I.useState([]),[p,m]=I.useState(!0),[y,w]=I.useState(null),[E,h]=I.useState(null),[g,v]=I.useState(!1);I.useEffect(()=>{e&&(c(s||"all"),a(""),d([]),w(null))},[e,s]);const C=(x,k)=>{const j=[];if(k.requirements.tier){const L=k.requirements.tier;(k.type==="magic"?x.weaponDomains.Spellcraft||0:x.weaponDomains.Martial||0)<L&&j.push(`Tier ${L}`)}if(k.requirements.skills)for(const L of k.requirements.skills){const D=L.match(/^([A-Za-z\s]+)\s+(\d+)$/);if(D){const T=D[1].trim(),$=parseInt(D[2],10),V=x.skills.find(z=>z.name.toLowerCase()===T.toLowerCase());(!V||V.level<$)&&j.push(`${T} ${$}`)}}if(k.requirements.perks)for(const L of k.requirements.perks)x.combatPerks.some(T=>T.name.toLowerCase()===L.toLowerCase())||x.perks.some(T=>T.name.toLowerCase()===L.toLowerCase())||(x.magicPerks||[]).some(T=>T.name.toLowerCase()===L.toLowerCase())||j.push(L);return{canLearn:j.length===0,reasons:j}},A=I.useMemo(()=>{if(!l)return[];let x;u==="all"?x=kd(l):x=jd(l,u);const k=new Map;return x.forEach(j=>{j.tags.forEach(L=>{k.set(L,(k.get(L)||0)+1)})}),Array.from(k.entries()).sort((j,L)=>L[1]-j[1]).slice(0,15).map(([j])=>j)},[l,u]),N=I.useMemo(()=>{if(!l)return[];let x;if(u==="all"?x=kd(l):x=jd(l,u),x=x.filter(k=>{var L,D;if(k.tags.includes("Conditioning")||k.cost.variable&&((L=k.cost.formula)==null?void 0:L.includes("Max_Wounds")))return!((D=n.stagedPerks)!=null&&D.some(T=>T.id===k.id));if(k.type==="skill"){if(n.perks.some(T=>T.id===k.id||T.name===k.name))return!1}else if(k.type==="magic"){if((n.magicPerks||[]).some(T=>T.id===k.id||T.name===k.name))return!1}else if(n.combatPerks.some(T=>T.id===k.id||T.name===k.name))return!1;return!0}),i.trim()){const k=i.toLowerCase();x=x.filter(j=>j.name.toLowerCase().includes(k)||j.description.toLowerCase().includes(k)||j.tags.some(L=>L.toLowerCase().includes(k)))}if(f.length>0&&(x=x.filter(k=>f.every(j=>k.tags.includes(j)))),p){const k=j=>j==="skill"?n.socialXP:n.combatXP;x=x.filter(j=>{var $;if(j.cost.variable){if(j.tags.includes("Conditioning")||(($=j.cost.formula)==null?void 0:$.includes("Max_Wounds"))){const z=n.combatXP,M=n.maxWounds;if(z<M)return!1}return!0}const L=j.cost.xp;if(k(j.type)<L)return!1;const{canLearn:T}=C(n,j);return T})}return x},[l,u,i,f,p,n]),R=x=>{d(k=>k.includes(x)?k.filter(j=>j!==x):[...k,x])},O=(x,k)=>{var j,L;try{if(!l)return;if(x.tags.includes("Conditioning")||x.cost.variable&&((j=x.cost.formula)==null?void 0:j.includes("Max_Wounds"))){if(!k&&x.attributes.length>1){h(x),v(!0);return}const b=k||x.attributes[0],_=n.maxWounds*1;if((L=n.stagedPerks)==null?void 0:L.find(G=>G.id===x.id))return;const S={id:x.id,name:x.name,level:1,attribute:b,levelHistory:[{level:1,attribute:b,cost:_}],perkSnapshot:x,addedAt:Date.now()};r({...n,stagedPerks:[...n.stagedPerks||[],S],extraHP:n.extraHP+1,combatXP:n.combatXP-_,progressionLog:[...n.progressionLog,{type:"stagedPerk",name:x.name,cost:_,attribute:b,xpType:"combat",stagedLevel:1}]}),w(null);return}if(!k&&x.attributes.length>1){h(x),v(!0);return}const T=k||x.attributes[0],$=x.cost.variable?0:x.cost.xp||0,V=x.type==="skill"?"socialXP":"combatXP",z={...n},M={id:x.id,name:x.name,cost:$,attribute:T,description:x.description,isCustom:!1,source:"database",perkSnapshot:x,addedAt:Date.now()};z[V]=n[V]-$,x.type==="skill"?z.perks=[...n.perks,M]:x.type==="magic"?z.magicPerks=[...n.magicPerks||[],M]:z.combatPerks=[...n.combatPerks,M],z.progressionLog=[...n.progressionLog||[],{type:x.type==="skill"?"skill":x.type==="magic"?"magicPerk":"combatPerk",name:x.name,attribute:T,cost:$,xpType:x.type==="skill"?"social":"combat"}],r(z),w(null)}catch(D){console.error("Error adding perk:",D)}},P=x=>{E&&(O(E,x),h(null)),v(!1)};return e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:o.jsx("div",{className:"bg-slate-800 rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",onClick:x=>x.stopPropagation(),children:o.jsxs(cv,{children:[o.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Browse Perks"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white p-1",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 border-b border-slate-700 space-y-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx($m,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"text",placeholder:"Search perks by name, description, tags...",value:i,onChange:x=>a(x.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-slate-400 text-sm",children:"Category:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys({all:null,combat:null,magic:null,skill:null}).map(x=>o.jsx("button",{onClick:()=>c(x),className:`px-3 py-1 rounded text-sm font-semibold transition-colors ${u===x?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:x==="all"?"All":x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),A.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[o.jsx("span",{className:"text-slate-400 text-sm mr-1",children:"Tags:"}),A.slice(0,10).map(x=>o.jsxs("button",{onClick:()=>R(x),className:`px-2 py-0.5 rounded text-xs font-semibold transition-colors ${f.includes(x)?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:["#",x]},x)),f.length>0&&o.jsx("button",{onClick:()=>d([]),className:"px-2 py-0.5 rounded text-xs font-semibold bg-red-700 text-white hover:bg-red-600",children:"Clear tags"})]}),o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:p,onChange:x=>m(x.target.checked),className:"w-4 h-4 rounded bg-slate-700 border-slate-600"}),o.jsx("span",{className:"text-slate-300",children:"Show only affordable perks"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:N.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-slate-400",children:"No perks found"}),o.jsx("button",{onClick:()=>{a(""),d([])},className:"mt-2 text-blue-400 hover:text-blue-300 text-sm",children:"Clear filters"})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:N.map(x=>o.jsx(ov,{perk:x,character:n,abilities:(l==null?void 0:l.abilities)||[],effects:(l==null?void 0:l.effects)||[],isExpanded:y===x.id,onToggleExpand:()=>w(y===x.id?null:x.id),onAdd:k=>O(x,k),showAddButton:!0,availableXP:x.type==="skill"?n.socialXP:n.combatXP},x.id))})}),o.jsxs("div",{className:"p-4 border-t border-slate-700 flex justify-between items-center",children:[o.jsxs("span",{className:"text-slate-400 text-sm",children:[N.length," perk",N.length!==1?"s":""," found"]}),o.jsxs("div",{className:"flex gap-2 text-sm",children:[o.jsxs("span",{className:"text-red-400",children:["Combat: ",n.combatXP," XP"]}),o.jsxs("span",{className:"text-blue-400",children:["Skill: ",n.socialXP," XP"]})]})]})]})})}),g&&E&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{v(!1),h(null)},children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 max-w-sm w-full",onClick:x=>x.stopPropagation(),children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Select Attribute for ",E.name]}),o.jsx(Gm,{attributes:E.attributes.join("/"),onSelect:P,onCancel:()=>{v(!1),h(null)}})]})})]}):null},Sd=({item:e,isAbility:t})=>{const[n,r]=I.useState(!1),l=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors",onClick:()=>r(!n),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((s,i)=>o.jsx("span",{className:`text-xs bg-${l}-900/50 text-${l}-300 px-1.5 py-0.5 rounded`,children:s},i)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),n&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((s,i)=>o.jsx("span",{className:`text-xs bg-${l}-900/50 text-${l}-300 px-1.5 py-0.5 rounded`,children:s},i))})]})]})},fv=({perk:e,onDelete:t})=>{var i;const n=e.perkSnapshot,r=(n==null?void 0:n.tags)||[],l=typeof e.cost=="object"?e.cost.xp:e.cost,s=(i=e.cost)!=null&&i.variable?"Variable":`${l} XP`;return o.jsx("div",{className:"bg-slate-800 rounded overflow-hidden",children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:[s,"  ",e.attribute]})]}),t&&o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-red-400 p-1",children:o.jsx(Gt,{size:16})})]}),r.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.map((a,u)=>o.jsx("span",{className:"text-xs bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded",children:a},u))})]})})},Ji=({title:e,icon:t,perks:n,abilities:r,effects:l,onAddPerk:s,onPerkDelete:i})=>{const[a,u]=I.useState(!0);return o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-3 flex items-center justify-between bg-slate-750",children:[o.jsxs("button",{onClick:()=>u(!a),className:"flex items-center gap-2 flex-1",children:[o.jsx("div",{className:"text-slate-300",children:a?o.jsx(Nr,{size:18}):o.jsx(Tl,{size:18})}),o.jsxs("div",{className:"flex items-center gap-2",children:[t,o.jsx("span",{className:"text-white font-semibold",children:e}),o.jsxs("span",{className:"text-slate-400 text-sm",children:["(",n.length,")"]})]})]}),o.jsxs("button",{onClick:s,className:"flex items-center gap-1 bg-blue-700 hover:bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded",children:[o.jsx(Vt,{size:14}),"Add Perk"]})]}),a&&o.jsxs("div",{className:"p-4 space-y-3",children:[n.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No perks yet"}):o.jsx("div",{className:"space-y-2",children:n.map((c,f)=>o.jsx(fv,{perk:c,onDelete:i?()=>i(f):void 0},`${e}-perk-${f}-${c.id||c.name}`))}),(r.length>0||l.length>0)&&o.jsxs("div",{className:"border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-slate-300 text-sm font-semibold mb-2",children:"Granted Abilities & Effects"}),o.jsxs("div",{className:"space-y-2",children:[r.map((c,f)=>o.jsx(Sd,{item:c,isAbility:!0},`${e}-ability-${f}`)),l.map((c,f)=>o.jsx(Sd,{item:c,isAbility:!1},`${e}-effect-${f}`))]})]})]})]})},pv=({stagedPerk:e,character:t,onLevelUp:n,onAbandon:r,perkDatabase:l})=>{const[s,i]=I.useState(""),a=e.level||1,u=a+1,c=a>=5,f=t.maxWounds,d=t.combatXP>=f,p=(l==null?void 0:l.perks.combat.find(w=>w.id===e.id))||e.perkSnapshot,m=(p==null?void 0:p.attributes)||[];I.useEffect(()=>{!s&&e.attribute&&i(e.attribute)},[e.attribute,s]);const y=()=>{s&&d&&(n(s),i(""))};return o.jsxs("div",{className:"bg-slate-700 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold",children:e.name}),o.jsx("p",{className:"text-slate-400 text-sm",children:(p==null?void 0:p.description)||""})]}),!c&&o.jsx("button",{onClick:r,className:"text-red-400 hover:text-red-300 text-xs",children:"Abandon"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"text-slate-300 text-sm",children:["Level ",a,"/5"]}),c&&o.jsx("span",{className:"text-yellow-400 text-xs font-semibold",children:"CAPSTONE!"})]}),o.jsx("div",{className:"flex gap-1.5",children:[1,2,3,4,5].map(w=>o.jsx("div",{className:`flex-1 h-3 rounded ${w<=a?"bg-green-500":w===u&&!c?"bg-green-500/50 animate-pulse":"bg-slate-600"}`},w))})]}),!c&&o.jsxs("div",{className:"text-blue-400 text-xs",children:["Next level: +1 HP (Cost: ",f," XP)"]}),c&&o.jsx("div",{className:"text-yellow-400 text-xs",children:"Completed! Grants +1 Max Wounds and capstone effect."}),!c&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:m.map(w=>{var h;const E=((h=Object.entries(Xe).find(([,g])=>g===w))==null?void 0:h[0])||w;return o.jsx("button",{onClick:()=>i(w),className:`py-2 rounded font-semibold transition-colors text-sm ${s===w?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500 text-slate-300"}`,children:E},w)})})]}),o.jsx("button",{onClick:y,disabled:!s||!d,className:`w-full py-2 rounded font-semibold text-sm ${!s||!d?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-green-700 hover:bg-green-600 text-white"}`,children:d?`Train Level ${u} (${f} XP)`:`Not Enough XP (Need ${f})`})]})]})},mv=({character:e,onUpdate:t,perkDatabase:n})=>{const[r,l]=I.useState(!1),[s,i]=I.useState(!1),[a,u]=I.useState(!1),[c,f]=I.useState(!1),d=mi(e,n),p=hi(e,n),m=P=>{var x;return typeof P.cost=="number"?P.cost:typeof P.cost=="object"&&((x=P.cost)==null?void 0:x.xp)!==void 0?P.cost.xp:0},y=d.filter(P=>P.tags.includes("Spellcraft")),w=p.filter(P=>P.tags.includes("Spellcraft")),E=d.filter(P=>P.tags.includes("Combat")),h=p.filter(P=>P.tags.includes("Combat")),g=d.filter(P=>P.tags.includes("Skill")),v=p.filter(P=>P.tags.includes("Skill")),C=P=>{var D,T;const x=(D=e.magicPerks)==null?void 0:D[P];if(!x)return;const k=((T=e.magicPerks)==null?void 0:T.filter(($,V)=>V!==P))||[],j=m(x),L=[...e.progressionLog];for(let $=L.length-1;$>=0;$--)if(L[$].type==="magicPerk"&&L[$].name===x.name&&L[$].cost===j&&L[$].attribute===x.attribute){L.splice($,1);break}t({...e,magicPerks:k,combatXP:e.combatXP+j,progressionLog:L})},A=P=>{var z,M;const x=e.combatPerks[P],k=e.combatPerks.filter((b,_)=>_!==P),j=((M=(z=x.perkSnapshot)==null?void 0:z.tags)==null?void 0:M.includes("Conditioning"))||x.name.includes("Conditioning");let L=[...e.progressionLog],D=0,T=!1,$=0;if(j){for(let B=L.length-1;B>=0;B--)if(L[B].type==="combatPerk"&&L[B].name===x.name&&L[B].attribute===x.attribute){D=L[B].cost||0,L.splice(B,1);break}$=1;const b=x.name.replace(" (Completed)",""),_=e.combatPerks.filter(B=>B.name.includes(b)||B.name===x.name).length;(x.name.includes("(Completed)")||_<=1)&&(T=!0)}else for(let b=L.length-1;b>=0;b--)if(L[b].type==="combatPerk"&&L[b].name===x.name&&L[b].cost===x.cost){D=L[b].cost||0,L.splice(b,1);break}const V={...e,combatPerks:k,combatXP:e.combatXP+D,progressionLog:L};$>0&&(V.extraHP=Math.max(0,e.extraHP-$)),T&&e.maxWounds>2&&(V.maxWounds=e.maxWounds-1),t(V)},N=P=>{const x=e.perks[P],k=e.perks.filter((D,T)=>T!==P),j=m(x),L=[...e.progressionLog];for(let D=L.length-1;D>=0;D--)if(L[D].type==="perk"&&L[D].name===x.name&&L[D].cost===j&&L[D].attribute===x.attribute){L.splice(D,1);break}t({...e,perks:k,socialXP:e.socialXP+j,progressionLog:L})},R=(P,x)=>{var T,$,V,z;const k=(T=e.stagedPerks)==null?void 0:T[P];if(!k)return;const L=(k.level||1)+1,D=e.maxWounds;if(!(e.combatXP<D))if(L>=5){const M=k.perkSnapshot?{...k.perkSnapshot,grants:{...k.perkSnapshot.grants,effects:((($=k.perkSnapshot.grants)==null?void 0:$.effects)||[]).filter(B=>B!=="extra-hp")}}:void 0,b={id:k.id,name:k.name,cost:D,attribute:x,description:((V=k.perkSnapshot)==null?void 0:V.description)||"",isCustom:!1,source:"database",perkSnapshot:M,addedAt:Date.now()},_=((z=e.stagedPerks)==null?void 0:z.filter((B,S)=>S!==P))||[];t({...e,stagedPerks:_,combatPerks:[...e.combatPerks,b],maxWounds:e.maxWounds+1,extraHP:0,combatXP:e.combatXP-D,progressionLog:[...e.progressionLog,{type:"stagedPerk",name:k.name,cost:D,attribute:x,xpType:"combat",stagedLevel:L},{type:"combatPerk",name:`${k.name} (Completed)`,cost:0,attribute:x}]})}else{const M=[...e.stagedPerks||[]];M[P]={...k,level:L,attribute:x,levelHistory:[...k.levelHistory||[],{level:L,attribute:x,cost:D}]},t({...e,stagedPerks:M,extraHP:e.extraHP+1,combatXP:e.combatXP-D,progressionLog:[...e.progressionLog,{type:"stagedPerk",name:k.name,cost:D,attribute:x,xpType:"combat",stagedLevel:L}]})}},O=P=>{var $,V,z;const x=($=e.stagedPerks)==null?void 0:$[P];if(!x)return;const k=((V=x.levelHistory)==null?void 0:V.reduce((M,b)=>M+(b.cost||0),0))||0,j=x.level||1,L=((z=e.stagedPerks)==null?void 0:z.filter((M,b)=>b!==P))||[];let D=e.maxWounds;j>=5&&(D=e.maxWounds-1);const T=Math.max(0,e.extraHP-j);t({...e,stagedPerks:L,extraHP:T,maxWounds:D,combatXP:e.combatXP+k})};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-700 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors",children:[o.jsx($m,{size:20}),"Browse Perks"]}),o.jsx(Ji,{title:"Martial",icon:o.jsx(br,{size:18}),perks:e.combatPerks,abilities:E,effects:h,onAddPerk:()=>i(!0),onPerkDelete:A}),o.jsx(Ji,{title:"Spellcraft",icon:o.jsx(ua,{size:18}),perks:e.magicPerks||[],abilities:y,effects:w,onAddPerk:()=>l(!0),onPerkDelete:C}),o.jsx(Ji,{title:"Skill",icon:o.jsx(_n,{size:18}),perks:e.perks,abilities:g,effects:v,onAddPerk:()=>u(!0),onPerkDelete:N}),o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-3 flex items-center justify-between bg-slate-750",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ua,{size:18}),o.jsx("span",{className:"text-white font-semibold",children:"Conditioning"}),e.stagedPerks&&e.stagedPerks.length>0&&o.jsxs("span",{className:"text-slate-400 text-sm",children:["(",e.stagedPerks.length,")"]})]}),o.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-1 bg-green-700 hover:bg-green-600 text-white text-xs font-semibold px-2 py-1 rounded",children:[o.jsx(Vt,{size:14}),"Add Conditioning"]})]}),e.stagedPerks&&e.stagedPerks.length>0&&o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"text-center text-sm",children:[o.jsx("span",{className:"text-slate-400",children:"Total Bonus HP: "}),o.jsxs("span",{className:"text-blue-400 font-bold",children:["+",e.extraHP]})]}),e.stagedPerks.map((P,x)=>o.jsx(pv,{stagedPerk:P,character:e,perkDatabase:n,onLevelUp:k=>R(x,k),onAbandon:()=>O(x)},P.id||x))]})]}),o.jsx(Zi,{isOpen:r,onClose:()=>l(!1),character:e,onUpdate:t,category:"magic",perkDatabase:n}),o.jsx(Zi,{isOpen:s,onClose:()=>i(!1),character:e,onUpdate:t,category:"combat",perkDatabase:n}),o.jsx(Zi,{isOpen:a,onClose:()=>u(!1),character:e,onUpdate:t,category:"skill",perkDatabase:n}),o.jsx(dv,{isOpen:c,onClose:()=>f(!1),character:e,onUpdate:t,perkDatabase:n})]})},hv=({isOpen:e,onClose:t,onAddXP:n})=>{const[r,l]=I.useState(""),[s,i]=I.useState(""),a=()=>{const c=parseInt(r)||0,f=parseInt(s)||0;n(c,f),u()},u=()=>{l(""),i(""),t()};return o.jsxs(Qm,{isOpen:e,onClose:u,title:"Add Experience Points",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-white mb-2",children:[o.jsx(br,{size:16,className:"text-red-400"}),"Combat"]}),o.jsx("input",{type:"number",value:r,onChange:c=>l(c.target.value),placeholder:"Enter Combat XP",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-white mb-2",children:[o.jsx(_n,{size:16,className:"text-blue-400"}),"Skill"]}),o.jsx("input",{type:"number",value:s,onChange:c=>i(c.target.value),placeholder:"Enter Skill XP",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsx("button",{onClick:a,className:"w-full bg-slate-700 hover:bg-slate-600 rounded py-2 mb-2 text-white font-semibold",children:"Okay"}),o.jsx("button",{onClick:u,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})]})},gv=({character:e,onUpdate:t})=>{const[n,r]=I.useState(!1),[l,s]=I.useState(!1),[i,a]=I.useState(!1),[u,c]=I.useState(e.name),[f,d]=I.useState(e.name),p=(C,A)=>{t({...e,[C]:A})},m=()=>{c(e.name),d(e.name),s(!0)},y=()=>{u.trim()&&u!==e.name&&(ca(f),t({...e,name:u.trim()})),s(!1)},w=()=>{s(!1)},E=(C,A)=>{t({...e,combatXP:e.combatXP+C,socialXP:e.socialXP+A}),a(!1)},g=(()=>{const C={Might:0,Endurance:0,Agility:0,Dexterity:0,Wit:0,Will:0,Perception:0,Charisma:0};return e.progressionLog.forEach(A=>{if(A.attribute&&A.cost){const N=fy(A.attribute);C[N]=(C[N]||0)+A.cost}}),C})(),v=[{abbr:"MG",full:Xe.MG},{abbr:"EN",full:Xe.EN},{abbr:"AG",full:Xe.AG},{abbr:"DX",full:Xe.DX},{abbr:"WT",full:Xe.WT},{abbr:"WI",full:Xe.WI},{abbr:"PR",full:Xe.PR},{abbr:"CH",full:Xe.CH}];return o.jsxs("div",{className:"p-4 space-y-4",children:[l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-sm w-full p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Rename Character"}),o.jsx("input",{type:"text",value:u,onChange:C=>c(C.target.value),placeholder:"Character name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 mb-4",autoFocus:!0,onKeyDown:C=>{C.key==="Enter"&&y(),C.key==="Escape"&&w()}}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:w,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 rounded",children:"Cancel"}),o.jsx("button",{onClick:y,disabled:!u.trim(),className:"flex-1 bg-blue-700 hover:bg-blue-600 disabled:bg-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed text-white font-semibold py-2 rounded",children:"Rename"})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Name"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white truncate",children:e.name}),o.jsx("button",{onClick:m,className:"bg-blue-700 hover:bg-blue-600 text-white p-2 rounded",title:"Rename character",children:o.jsx(ly,{size:16})})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Appearance"}),o.jsx("textarea",{value:e.concept||"",onChange:C=>p("concept",C.target.value),placeholder:"Physical appearance, distinctive features, clothing...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:3})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 border border-slate-600",children:[o.jsx("span",{className:"text-sm font-semibold text-slate-400",children:"Total XP"}),o.jsxs("div",{className:"flex items-center justify-around mt-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(br,{size:18,className:"text-red-400"}),o.jsx("span",{className:"text-xl font-bold text-white",children:e.combatXP+e.progressionLog.filter(C=>C.xpType==="combat").reduce((C,A)=>C+A.cost,0)})]}),o.jsx("div",{className:"w-px h-6 bg-slate-600"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_n,{size:18,className:"text-blue-400"}),o.jsx("span",{className:"text-xl font-bold text-white",children:e.socialXP+e.progressionLog.filter(C=>C.xpType==="social").reduce((C,A)=>C+A.cost,0)})]})]})]}),o.jsxs("div",{className:"bg-slate-800 hover:bg-slate-750 rounded-lg p-3 cursor-pointer transition-colors border border-slate-600",onClick:()=>a(!0),children:[o.jsx("span",{className:"text-sm font-semibold text-slate-400",children:"Current XP (Add)"}),o.jsxs("div",{className:"flex items-center justify-around mt-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(br,{size:18,className:"text-red-400"}),o.jsx("span",{className:"text-xl font-bold text-white",children:e.combatXP})]}),o.jsx("div",{className:"w-px h-6 bg-slate-600"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_n,{size:18,className:"text-blue-400"}),o.jsx("span",{className:"text-xl font-bold text-white",children:e.socialXP})]})]})]})]}),o.jsx(hv,{isOpen:i,onClose:()=>a(!1),onAddXP:E}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:e.bio||"",onChange:C=>p("bio",C.target.value),placeholder:"Character background, personality, appearance...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Notes"}),o.jsx("textarea",{value:e.notes||"",onChange:C=>p("notes",C.target.value),placeholder:"Session notes, goals, reminders...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Reputation"}),o.jsx("textarea",{value:e.reputation||"",onChange:C=>p("reputation",C.target.value),placeholder:"Factions, relationships, standing...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("button",{onClick:()=>r(!n),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors text-left",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Progression History"}),n?o.jsx(Nr,{size:20,className:"text-slate-400"}):o.jsx(Tl,{size:20,className:"text-slate-400"})]}),n&&o.jsxs("div",{className:"p-4 border-t border-slate-700",children:[o.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Attribute Points"}),o.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 mb-6",children:[o.jsx("div",{className:"grid grid-cols-8 gap-2 mb-2",children:v.map(({abbr:C})=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-400 text-xs font-semibold",children:C}),o.jsx("div",{className:"text-white text-lg font-bold",children:e.stats[C]})]},C))}),o.jsx("div",{className:"grid grid-cols-8 gap-2",children:v.map(({abbr:C,full:A})=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-500 text-xs",children:"CP"}),o.jsx("div",{className:"text-green-400 text-sm font-semibold",children:g[A]})]},C))})]}),o.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"History"}),e.progressionLog.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-400",children:"No progression recorded yet"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-600",children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Type"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Name"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Level"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Attribute"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Cost"})]})}),o.jsx("tbody",{children:e.progressionLog.map((C,A)=>o.jsxs("tr",{className:"border-b border-slate-700",children:[o.jsx("td",{className:"py-3 px-3 text-sm",children:o.jsx("span",{className:"bg-slate-600 px-2 py-1 rounded text-xs uppercase",children:C.type})}),o.jsxs("td",{className:"py-3 px-3 text-sm text-white",children:[C.name,C.type==="spell"&&C.spellType&&o.jsxs("span",{className:"ml-2 text-xs text-purple-400",children:["(",C.spellType,")"]})]}),o.jsx("td",{className:"py-3 px-3 text-sm text-slate-300",children:C.type==="spell"?`T${C.tier||0}`:C.level||"-"}),o.jsx("td",{className:"py-3 px-3 text-sm text-blue-400",children:C.attribute||"-"}),o.jsx("td",{className:"py-3 px-3 text-sm text-green-400",children:C.type==="spell"?C.cost?`${C.cost} ${C.xpType==="social"?"SP":"CP"}`:"-":C.cost?`${C.cost} CP`:"-"})]},A))})]})})]})]})]})},xv=e=>{if(e.inventory&&e.inventory.length>0)return e;const t=[];if(e.equippedWeapon1&&e.equippedWeapon1!=="None"){const n=Te[e.equippedWeapon1];n&&t.push({id:kt(),name:e.equippedWeapon1,type:"weapon",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedWeapon1})}if(e.equippedWeapon2&&e.equippedWeapon2!=="None"){const n=Te[e.equippedWeapon2];n&&t.push({id:kt(),name:e.equippedWeapon2,type:"weapon",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedWeapon2})}if(e.armorType&&e.armorType!=="None"){const n=Ge[e.armorType];n&&t.push({id:kt(),name:e.armorType,type:"armor",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.armorType})}if(e.equippedShield&&e.equippedShield!=="None"){const n=jt[e.equippedShield];n&&t.push({id:kt(),name:e.equippedShield,type:"shield",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedShield})}return e.equipment&&e.equipment.length>0&&e.equipment.forEach(n=>{t.push({id:kt(),name:n.name,type:"item",state:"stowed",weight:n.weight,quantity:n.quantity,isCustom:!1})}),e.customItems&&e.customItems.length>0&&e.customItems.forEach(n=>{t.push({id:kt(),name:n.name,type:"item",state:"stowed",weight:n.weight,quantity:n.quantity,isCustom:!0})}),{...e,inventory:t}},Ym=e=>{const t=e.equippedWeapon1&&e.equippedWeapon1!=="None"||e.equippedWeapon2&&e.equippedWeapon2!=="None"||e.armorType&&e.armorType!=="None"||e.equippedShield&&e.equippedShield!=="None"||e.equipment&&e.equipment.length>0||e.customItems&&e.customItems.length>0,n=e.inventory&&e.inventory.length>0;return t&&!n},yv=e=>Ym(e)?(console.log("Migrating character to new inventory system..."),xv(e)):e,vv=({character:e,onUpdate:t,perkDatabase:n,onMenuToggle:r})=>{const[l,s]=I.useState("list"),[i,a]=I.useState(0),[u,c]=I.useState(0),f=["list","skills","combat","equipment","magic","perks"],d=w=>{a(w.touches[0].clientX)},p=w=>{c(w.touches[0].clientX)},m=()=>{if(!i||!u)return;const w=i-u,E=w>75,h=w<-75;if(i<50&&h){r(),a(0),c(0);return}const g=f.indexOf(l);E&&g<f.length-1&&s(f[g+1]),h&&g>0&&s(f[g-1]),a(0),c(0)};I.useEffect(()=>{if(Ym(e)){const w=yv(e);t(w)}},[e.name]),I.useEffect(()=>{const w=yd(e.progressionLog),E=vd(e.progressionLog),h=Object.keys(w).some(v=>w[v]!==e.stats[v]),g=Object.keys(E).some(v=>E[v]!==e.weaponDomains[v]);(h||g)&&t({...e,stats:w,weaponDomains:E})},[e.progressionLog]);const y={...e,stats:yd(e.progressionLog),weaponDomains:vd(e.progressionLog)};return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",onTouchStart:d,onTouchMove:p,onTouchEnd:m,children:[o.jsx(Ny,{character:y,onMenuToggle:r}),o.jsx("div",{className:"sticky top-0 z-10 bg-slate-900 border-b border-slate-700",children:o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>s("list"),className:`flex-1 py-3 font-semibold ${l==="list"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Character"}),o.jsx("button",{onClick:()=>s("skills"),className:`flex-1 py-3 font-semibold ${l==="skills"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Skills"}),o.jsx("button",{onClick:()=>s("combat"),className:`flex-1 py-3 font-semibold ${l==="combat"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Combat"}),o.jsx("button",{onClick:()=>s("equipment"),className:`flex-1 py-3 font-semibold ${l==="equipment"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Equipment"}),o.jsx("button",{onClick:()=>s("magic"),className:`flex-1 py-3 font-semibold ${l==="magic"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Magic"}),o.jsx("button",{onClick:()=>s("perks"),className:`flex-1 py-3 font-semibold ${l==="perks"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Perks"})]})}),o.jsxs("div",{className:"bg-black min-h-screen",children:[l==="list"&&o.jsx(gv,{character:y,onUpdate:t}),l==="skills"&&o.jsx(Iy,{character:y,onUpdate:t,perkDatabase:n}),l==="combat"&&o.jsx(Zy,{character:y,onUpdate:t,perkDatabase:n}),l==="equipment"&&o.jsx(tv,{character:y,onUpdate:t}),l==="magic"&&o.jsx(lv,{character:y,onUpdate:t,perkDatabase:n}),l==="perks"&&o.jsx(mv,{character:y,onUpdate:t,perkDatabase:n})]})]})};function bv(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const wv=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kv=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jv={};function Nd(e,t){return(jv.jsx?kv:wv).test(e)}const Sv=/[ \t\n\f\r]/g;function Nv(e){return typeof e=="object"?e.type==="text"?Cd(e.value):!1:Cd(e)}function Cd(e){return e.replace(Sv,"")===""}class Il{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Il.prototype.normal={};Il.prototype.property={};Il.prototype.space=void 0;function Zm(e,t){const n={},r={};for(const l of e)Object.assign(n,l.property),Object.assign(r,l.normal);return new Il(n,r,t)}function ha(e){return e.toLowerCase()}class Je{constructor(t,n){this.attribute=n,this.property=t}}Je.prototype.attribute="";Je.prototype.booleanish=!1;Je.prototype.boolean=!1;Je.prototype.commaOrSpaceSeparated=!1;Je.prototype.commaSeparated=!1;Je.prototype.defined=!1;Je.prototype.mustUseProperty=!1;Je.prototype.number=!1;Je.prototype.overloadedBoolean=!1;Je.prototype.property="";Je.prototype.spaceSeparated=!1;Je.prototype.space=void 0;let Cv=0;const J=Bn(),je=Bn(),ga=Bn(),U=Bn(),fe=Bn(),fr=Bn(),tt=Bn();function Bn(){return 2**++Cv}const xa=Object.freeze(Object.defineProperty({__proto__:null,boolean:J,booleanish:je,commaOrSpaceSeparated:tt,commaSeparated:fr,number:U,overloadedBoolean:ga,spaceSeparated:fe},Symbol.toStringTag,{value:"Module"})),eo=Object.keys(xa);class Au extends Je{constructor(t,n,r,l){let s=-1;if(super(t,n),Pd(this,"space",l),typeof r=="number")for(;++s<eo.length;){const i=eo[s];Pd(this,eo[s],(r&xa[i])===xa[i])}}}Au.prototype.defined=!0;function Pd(e,t,n){n&&(e[t]=n)}function Cr(e){const t={},n={};for(const[r,l]of Object.entries(e.properties)){const s=new Au(r,e.transform(e.attributes||{},r),l,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[ha(r)]=r,n[ha(s.attribute)]=r}return new Il(t,n,e.space)}const Jm=Cr({properties:{ariaActiveDescendant:null,ariaAtomic:je,ariaAutoComplete:null,ariaBusy:je,ariaChecked:je,ariaColCount:U,ariaColIndex:U,ariaColSpan:U,ariaControls:fe,ariaCurrent:null,ariaDescribedBy:fe,ariaDetails:null,ariaDisabled:je,ariaDropEffect:fe,ariaErrorMessage:null,ariaExpanded:je,ariaFlowTo:fe,ariaGrabbed:je,ariaHasPopup:null,ariaHidden:je,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fe,ariaLevel:U,ariaLive:null,ariaModal:je,ariaMultiLine:je,ariaMultiSelectable:je,ariaOrientation:null,ariaOwns:fe,ariaPlaceholder:null,ariaPosInSet:U,ariaPressed:je,ariaReadOnly:je,ariaRelevant:null,ariaRequired:je,ariaRoleDescription:fe,ariaRowCount:U,ariaRowIndex:U,ariaRowSpan:U,ariaSelected:je,ariaSetSize:U,ariaSort:null,ariaValueMax:U,ariaValueMin:U,ariaValueNow:U,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function eh(e,t){return t in e?e[t]:t}function th(e,t){return eh(e,t.toLowerCase())}const Pv=Cr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fr,acceptCharset:fe,accessKey:fe,action:null,allow:null,allowFullScreen:J,allowPaymentRequest:J,allowUserMedia:J,alt:null,as:null,async:J,autoCapitalize:null,autoComplete:fe,autoFocus:J,autoPlay:J,blocking:fe,capture:null,charSet:null,checked:J,cite:null,className:fe,cols:U,colSpan:null,content:null,contentEditable:je,controls:J,controlsList:fe,coords:U|fr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:J,defer:J,dir:null,dirName:null,disabled:J,download:ga,draggable:je,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:J,formTarget:null,headers:fe,height:U,hidden:ga,high:U,href:null,hrefLang:null,htmlFor:fe,httpEquiv:fe,id:null,imageSizes:null,imageSrcSet:null,inert:J,inputMode:null,integrity:null,is:null,isMap:J,itemId:null,itemProp:fe,itemRef:fe,itemScope:J,itemType:fe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:J,low:U,manifest:null,max:null,maxLength:U,media:null,method:null,min:null,minLength:U,multiple:J,muted:J,name:null,nonce:null,noModule:J,noValidate:J,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:J,optimum:U,pattern:null,ping:fe,placeholder:null,playsInline:J,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:J,referrerPolicy:null,rel:fe,required:J,reversed:J,rows:U,rowSpan:U,sandbox:fe,scope:null,scoped:J,seamless:J,selected:J,shadowRootClonable:J,shadowRootDelegatesFocus:J,shadowRootMode:null,shape:null,size:U,sizes:null,slot:null,span:U,spellCheck:je,src:null,srcDoc:null,srcLang:null,srcSet:null,start:U,step:null,style:null,tabIndex:U,target:null,title:null,translate:null,type:null,typeMustMatch:J,useMap:null,value:je,width:U,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fe,axis:null,background:null,bgColor:null,border:U,borderColor:null,bottomMargin:U,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:J,declare:J,event:null,face:null,frame:null,frameBorder:null,hSpace:U,leftMargin:U,link:null,longDesc:null,lowSrc:null,marginHeight:U,marginWidth:U,noResize:J,noHref:J,noShade:J,noWrap:J,object:null,profile:null,prompt:null,rev:null,rightMargin:U,rules:null,scheme:null,scrolling:je,standby:null,summary:null,text:null,topMargin:U,valueType:null,version:null,vAlign:null,vLink:null,vSpace:U,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:J,disableRemotePlayback:J,prefix:null,property:null,results:U,security:null,unselectable:null},space:"html",transform:th}),Ev=Cr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:tt,accentHeight:U,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:U,amplitude:U,arabicForm:null,ascent:U,attributeName:null,attributeType:null,azimuth:U,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:U,by:null,calcMode:null,capHeight:U,className:fe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:U,diffuseConstant:U,direction:null,display:null,dur:null,divisor:U,dominantBaseline:null,download:J,dx:null,dy:null,edgeMode:null,editable:null,elevation:U,enableBackground:null,end:null,event:null,exponent:U,externalResourcesRequired:null,fill:null,fillOpacity:U,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fr,g2:fr,glyphName:fr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:U,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:U,horizOriginX:U,horizOriginY:U,id:null,ideographic:U,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:U,k:U,k1:U,k2:U,k3:U,k4:U,kernelMatrix:tt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:U,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:U,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:U,overlineThickness:U,paintOrder:null,panose1:null,path:null,pathLength:U,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:U,pointsAtY:U,pointsAtZ:U,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:tt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:tt,rev:tt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:tt,requiredFeatures:tt,requiredFonts:tt,requiredFormats:tt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:U,specularExponent:U,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:U,strikethroughThickness:U,string:null,stroke:null,strokeDashArray:tt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:U,strokeOpacity:U,strokeWidth:null,style:null,surfaceScale:U,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:tt,tabIndex:U,tableValues:null,target:null,targetX:U,targetY:U,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:tt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:U,underlineThickness:U,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:U,values:null,vAlphabetic:U,vMathematical:U,vectorEffect:null,vHanging:U,vIdeographic:U,version:null,vertAdvY:U,vertOriginX:U,vertOriginY:U,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:U,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eh}),nh=Cr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),rh=Cr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:th}),lh=Cr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Av={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Tv=/[A-Z]/g,Ed=/-[a-z]/g,Lv=/^data[-\w.:]+$/i;function Iv(e,t){const n=ha(t);let r=t,l=Je;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Lv.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Ed,Dv);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Ed.test(s)){let i=s.replace(Tv,Mv);i.charAt(0)!=="-"&&(i="-"+i),t="data"+i}}l=Au}return new l(r,t)}function Mv(e){return"-"+e.toLowerCase()}function Dv(e){return e.charAt(1).toUpperCase()}const Rv=Zm([Jm,Pv,nh,rh,lh],"html"),Tu=Zm([Jm,Ev,nh,rh,lh],"svg");function zv(e){return e.join(" ").trim()}var Lu={},Ad=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,_v=/\n/g,Fv=/^\s*/,Ov=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$v=/^:\s*/,Bv=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Hv=/^[;\s]*/,Wv=/^\s+|\s+$/g,qv=`
`,Td="/",Ld="*",Cn="",Uv="comment",Xv="declaration",Vv=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function l(y){var w=y.match(_v);w&&(n+=w.length);var E=y.lastIndexOf(qv);r=~E?y.length-E:r+y.length}function s(){var y={line:n,column:r};return function(w){return w.position=new i(y),c(),w}}function i(y){this.start=y,this.end={line:n,column:r},this.source=t.source}i.prototype.content=e;function a(y){var w=new Error(t.source+":"+n+":"+r+": "+y);if(w.reason=y,w.filename=t.source,w.line=n,w.column=r,w.source=e,!t.silent)throw w}function u(y){var w=y.exec(e);if(w){var E=w[0];return l(E),e=e.slice(E.length),w}}function c(){u(Fv)}function f(y){var w;for(y=y||[];w=d();)w!==!1&&y.push(w);return y}function d(){var y=s();if(!(Td!=e.charAt(0)||Ld!=e.charAt(1))){for(var w=2;Cn!=e.charAt(w)&&(Ld!=e.charAt(w)||Td!=e.charAt(w+1));)++w;if(w+=2,Cn===e.charAt(w-1))return a("End of comment missing");var E=e.slice(2,w-2);return r+=2,l(E),e=e.slice(w),r+=2,y({type:Uv,comment:E})}}function p(){var y=s(),w=u(Ov);if(w){if(d(),!u($v))return a("property missing ':'");var E=u(Bv),h=y({type:Xv,property:Id(w[0].replace(Ad,Cn)),value:E?Id(E[0].replace(Ad,Cn)):Cn});return u(Hv),h}}function m(){var y=[];f(y);for(var w;w=p();)w!==!1&&(y.push(w),f(y));return y}return c(),m()};function Id(e){return e?e.replace(Wv,Cn):Cn}var Qv=xs&&xs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.default=Kv;const Gv=Qv(Vv);function Kv(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,Gv.default)(e),l=typeof t=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:i,value:a}=s;l?t(i,a,s):a&&(n=n||{},n[i]=a)}),n}var yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.camelCase=void 0;var Yv=/^--[a-zA-Z0-9_-]+$/,Zv=/-([a-z])/g,Jv=/^[^-]+$/,eb=/^-(webkit|moz|ms|o|khtml)-/,tb=/^-(ms)-/,nb=function(e){return!e||Jv.test(e)||Yv.test(e)},rb=function(e,t){return t.toUpperCase()},Md=function(e,t){return"".concat(t,"-")},lb=function(e,t){return t===void 0&&(t={}),nb(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(tb,Md):e=e.replace(eb,Md),e.replace(Zv,rb))};yi.camelCase=lb;var sb=xs&&xs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ib=sb(Lu),ob=yi;function ya(e,t){var n={};return!e||typeof e!="string"||(0,ib.default)(e,function(r,l){r&&l&&(n[(0,ob.camelCase)(r,t)]=l)}),n}ya.default=ya;var ab=ya;const ub=Ta(ab),sh=ih("end"),Iu=ih("start");function ih(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function cb(e){const t=Iu(e),n=sh(e);if(t&&n)return{start:t,end:n}}function nl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Dd(e.position):"start"in e||"end"in e?Dd(e):"line"in e||"column"in e?va(e):""}function va(e){return Rd(e&&e.line)+":"+Rd(e&&e.column)}function Dd(e){return va(e&&e.start)+"-"+va(e&&e.end)}function Rd(e){return e&&typeof e=="number"?e:1}class Oe extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let l="",s={},i=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?l=t:!s.cause&&t&&(i=!0,l=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=a?a.line:void 0,this.name=nl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Oe.prototype.file="";Oe.prototype.name="";Oe.prototype.reason="";Oe.prototype.message="";Oe.prototype.stack="";Oe.prototype.column=void 0;Oe.prototype.line=void 0;Oe.prototype.ancestors=void 0;Oe.prototype.cause=void 0;Oe.prototype.fatal=void 0;Oe.prototype.place=void 0;Oe.prototype.ruleId=void 0;Oe.prototype.source=void 0;const Mu={}.hasOwnProperty,db=new Map,fb=/[A-Z]/g,pb=new Set(["table","tbody","thead","tfoot","tr"]),mb=new Set(["td","th"]),oh="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hb(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=jb(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=kb(n,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Tu:Rv,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=ah(l,e,void 0);return s&&typeof s!="string"?s:l.create(e,l.Fragment,{children:s||void 0},void 0)}function ah(e,t,n){if(t.type==="element")return gb(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return xb(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return vb(e,t,n);if(t.type==="mdxjsEsm")return yb(e,t);if(t.type==="root")return bb(e,t,n);if(t.type==="text")return wb(e,t)}function gb(e,t,n){const r=e.schema;let l=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(l=Tu,e.schema=l),e.ancestors.push(t);const s=ch(e,t.tagName,!1),i=Sb(e,t);let a=Ru(e,t);return pb.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Nv(u):!0})),uh(e,i,s,t),Du(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}function xb(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}jl(e,t.position)}function yb(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jl(e,t.position)}function vb(e,t,n){const r=e.schema;let l=r;t.name==="svg"&&r.space==="html"&&(l=Tu,e.schema=l),e.ancestors.push(t);const s=t.name===null?e.Fragment:ch(e,t.name,!0),i=Nb(e,t),a=Ru(e,t);return uh(e,i,s,t),Du(i,a),e.ancestors.pop(),e.schema=r,e.create(t,s,i,n)}function bb(e,t,n){const r={};return Du(r,Ru(e,t)),e.create(t,e.Fragment,r,n)}function wb(e,t){return t.value}function uh(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Du(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function kb(e,t,n){return r;function r(l,s,i,a){const c=Array.isArray(i.children)?n:t;return a?c(s,i,a):c(s,i)}}function jb(e,t){return n;function n(r,l,s,i){const a=Array.isArray(s.children),u=Iu(r);return t(l,s,i,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Sb(e,t){const n={};let r,l;for(l in t.properties)if(l!=="children"&&Mu.call(t.properties,l)){const s=Cb(e,l,t.properties[l]);if(s){const[i,a]=s;e.tableCellAlignToStyle&&i==="align"&&typeof a=="string"&&mb.has(t.tagName)?r=a:n[i]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Nb(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const i=s.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else jl(e,t.position);else{const l=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else jl(e,t.position);else s=r.value===null?!0:r.value;n[l]=s}return n}function Ru(e,t){const n=[];let r=-1;const l=e.passKeys?new Map:db;for(;++r<t.children.length;){const s=t.children[r];let i;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const c=l.get(u)||0;i=u+"-"+c,l.set(u,c+1)}}const a=ah(e,s,i);a!==void 0&&n.push(a)}return n}function Cb(e,t,n){const r=Iv(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?bv(n):zv(n)),r.property==="style"){let l=typeof n=="object"?n:Pb(e,String(n));return e.stylePropertyNameCase==="css"&&(l=Eb(l)),["style",l]}return[e.elementAttributeNameCase==="react"&&r.space?Av[r.property]||r.property:r.attribute,n]}}function Pb(e,t){try{return ub(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,l=new Oe("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=e.filePath||void 0,l.url=oh+"#cannot-parse-style-attribute",l}}function ch(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let s=-1,i;for(;++s<l.length;){const a=Nd(l[s])?{type:"Identifier",name:l[s]}:{type:"Literal",value:l[s]};i=i?{type:"MemberExpression",object:i,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=i}else r=Nd(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const l=r.value;return Mu.call(e.components,l)?e.components[l]:l}if(e.evaluater)return e.evaluater.evaluateExpression(r);jl(e)}function jl(e,t){const n=new Oe("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=oh+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Eb(e){const t={};let n;for(n in e)Mu.call(e,n)&&(t[Ab(n)]=e[n]);return t}function Ab(e){let t=e.replace(fb,Tb);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Tb(e){return"-"+e.toLowerCase()}const to={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Lb={};function zu(e,t){const n=Lb,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dh(e,r,l)}function dh(e,t,n){if(Ib(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return zd(e.children,t,n)}return Array.isArray(e)?zd(e,t,n):""}function zd(e,t,n){const r=[];let l=-1;for(;++l<e.length;)r[l]=dh(e[l],t,n);return r.join("")}function Ib(e){return!!(e&&typeof e=="object")}const _d=document.createElement("i");function _u(e){const t="&"+e+";";_d.innerHTML=t;const n=_d.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function st(e,t,n,r){const l=e.length;let s=0,i;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);s<r.length;)i=r.slice(s,s+1e4),i.unshift(t,0),e.splice(...i),s+=1e4,t+=1e4}function dt(e,t){return e.length>0?(st(e,e.length,0,t),e):t}const Fd={}.hasOwnProperty;function fh(e){const t={};let n=-1;for(;++n<e.length;)Mb(t,e[n]);return t}function Mb(e,t){let n;for(n in t){const l=(Fd.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){Fd.call(l,i)||(l[i]=[]);const a=s[i];Db(l[i],Array.isArray(a)?a:a?[a]:[])}}}function Db(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);st(e,0,0,r)}function ph(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ct(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Be=bn(/[A-Za-z]/),_e=bn(/[\dA-Za-z]/),Rb=bn(/[#-'*+\--9=?A-Z^-~]/);function qs(e){return e!==null&&(e<32||e===127)}const ba=bn(/\d/),zb=bn(/[\dA-Fa-f]/),_b=bn(/[!-/:-@[-`{-~]/);function Y(e){return e!==null&&e<-2}function de(e){return e!==null&&(e<0||e===32)}function ee(e){return e===-2||e===-1||e===32}const vi=bn(new RegExp("\\p{P}|\\p{S}","u")),Fn=bn(/\s/);function bn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Pr(e){const t=[];let n=-1,r=0,l=0;for(;++n<e.length;){const s=e.charCodeAt(n);let i="";if(s===37&&_e(e.charCodeAt(n+1))&&_e(e.charCodeAt(n+2)))l=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(i=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(i=String.fromCharCode(s,a),l=1):i=""}else i=String.fromCharCode(s);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+l+1,i=""),l&&(n+=l,l=0)}return t.join("")+e.slice(r)}function re(e,t,n,r){const l=r?r-1:Number.POSITIVE_INFINITY;let s=0;return i;function i(u){return ee(u)?(e.enter(n),a(u)):t(u)}function a(u){return ee(u)&&s++<l?(e.consume(u),a):(e.exit(n),t(u))}}const Fb={tokenize:Ob};function Ob(e){const t=e.attempt(this.parser.constructs.contentInitial,r,l);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),re(e,t,"linePrefix")}function l(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,i(a)}function i(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Y(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),i)}}const $b={tokenize:Bb},Od={tokenize:Hb};function Bb(e){const t=this,n=[];let r=0,l,s,i;return a;function a(v){if(r<n.length){const C=n[r];return t.containerState=C[1],e.attempt(C[0].continuation,u,c)(v)}return c(v)}function u(v){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&g();const C=t.events.length;let A=C,N;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){N=t.events[A][1].end;break}h(r);let R=C;for(;R<t.events.length;)t.events[R][1].end={...N},R++;return st(t.events,A+1,0,t.events.slice(C)),t.events.length=R,c(v)}return a(v)}function c(v){if(r===n.length){if(!l)return p(v);if(l.currentConstruct&&l.currentConstruct.concrete)return y(v);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Od,f,d)(v)}function f(v){return l&&g(),h(r),p(v)}function d(v){return t.parser.lazy[t.now().line]=r!==n.length,i=t.now().offset,y(v)}function p(v){return t.containerState={},e.attempt(Od,m,y)(v)}function m(v){return r++,n.push([t.currentConstruct,t.containerState]),p(v)}function y(v){if(v===null){l&&g(),h(0),e.consume(v);return}return l=l||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:s}),w(v)}function w(v){if(v===null){E(e.exit("chunkFlow"),!0),h(0),e.consume(v);return}return Y(v)?(e.consume(v),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(v),w)}function E(v,C){const A=t.sliceStream(v);if(C&&A.push(null),v.previous=s,s&&(s.next=v),s=v,l.defineSkip(v.start),l.write(A),t.parser.lazy[v.start.line]){let N=l.events.length;for(;N--;)if(l.events[N][1].start.offset<i&&(!l.events[N][1].end||l.events[N][1].end.offset>i))return;const R=t.events.length;let O=R,P,x;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){if(P){x=t.events[O][1].end;break}P=!0}for(h(r),N=R;N<t.events.length;)t.events[N][1].end={...x},N++;st(t.events,O+1,0,t.events.slice(R)),t.events.length=N}}function h(v){let C=n.length;for(;C-- >v;){const A=n[C];t.containerState=A[1],A[0].exit.call(t,e)}n.length=v}function g(){l.write([null]),s=void 0,l=void 0,t.containerState._closeFlow=void 0}}function Hb(e,t,n){return re(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wr(e){if(e===null||de(e)||Fn(e))return 1;if(vi(e))return 2}function bi(e,t,n){const r=[];let l=-1;for(;++l<e.length;){const s=e[l].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const wa={name:"attention",resolveAll:Wb,tokenize:qb};function Wb(e,t){let n=-1,r,l,s,i,a,u,c,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},p={...e[n][1].start};$d(d,-u),$d(p,u),i={type:u>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},s={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},l={type:u>1?"strong":"emphasis",start:{...i.start},end:{...a.end}},e[r][1].end={...i.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=dt(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=dt(c,[["enter",l,t],["enter",i,t],["exit",i,t],["enter",s,t]]),c=dt(c,bi(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=dt(c,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",l,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,c=dt(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,st(e,r-1,n-r+3,c),n=r+c.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function qb(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,l=wr(r);let s;return i;function i(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const c=e.exit("attentionSequence"),f=wr(u),d=!f||f===2&&l||n.includes(u),p=!l||l===2&&f||n.includes(r);return c._open=!!(s===42?d:d&&(l||!p)),c._close=!!(s===42?p:p&&(f||!d)),t(u)}}function $d(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ub={name:"autolink",tokenize:Xb};function Xb(e,t,n){let r=0;return l;function l(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return Be(m)?(e.consume(m),i):m===64?n(m):c(m)}function i(m){return m===43||m===45||m===46||_e(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(e.consume(m),r=0,u):(m===43||m===45||m===46||_e(m))&&r++<32?(e.consume(m),a):(r=0,c(m))}function u(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||qs(m)?n(m):(e.consume(m),u)}function c(m){return m===64?(e.consume(m),f):Rb(m)?(e.consume(m),c):n(m)}function f(m){return _e(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):p(m)}function p(m){if((m===45||_e(m))&&r++<63){const y=m===45?p:d;return e.consume(m),y}return n(m)}}const Ml={partial:!0,tokenize:Vb};function Vb(e,t,n){return r;function r(s){return ee(s)?re(e,l,"linePrefix")(s):l(s)}function l(s){return s===null||Y(s)?t(s):n(s)}}const mh={continuation:{tokenize:Gb},exit:Kb,name:"blockQuote",tokenize:Qb};function Qb(e,t,n){const r=this;return l;function l(i){if(i===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(i),e.exit("blockQuoteMarker"),s}return n(i)}function s(i){return ee(i)?(e.enter("blockQuotePrefixWhitespace"),e.consume(i),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(i))}}function Gb(e,t,n){const r=this;return l;function l(i){return ee(i)?re(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):s(i)}function s(i){return e.attempt(mh,t,n)(i)}}function Kb(e){e.exit("blockQuote")}const hh={name:"characterEscape",tokenize:Yb};function Yb(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),l}function l(s){return _b(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const gh={name:"characterReference",tokenize:Zb};function Zb(e,t,n){const r=this;let l=0,s,i;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),s=31,i=_e,f(d))}function c(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=zb,f):(e.enter("characterReferenceValue"),s=7,i=ba,f(d))}function f(d){if(d===59&&l){const p=e.exit("characterReferenceValue");return i===_e&&!_u(r.sliceSerialize(p))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return i(d)&&l++<s?(e.consume(d),f):n(d)}}const Bd={partial:!0,tokenize:e1},Hd={concrete:!0,name:"codeFenced",tokenize:Jb};function Jb(e,t,n){const r=this,l={partial:!0,tokenize:A};let s=0,i=0,a;return u;function u(N){return c(N)}function c(N){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,a=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(N)}function f(N){return N===a?(i++,e.consume(N),f):i<3?n(N):(e.exit("codeFencedFenceSequence"),ee(N)?re(e,d,"whitespace")(N):d(N))}function d(N){return N===null||Y(N)?(e.exit("codeFencedFence"),r.interrupt?t(N):e.check(Bd,w,C)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(N))}function p(N){return N===null||Y(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(N)):ee(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),re(e,m,"whitespace")(N)):N===96&&N===a?n(N):(e.consume(N),p)}function m(N){return N===null||Y(N)?d(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(N))}function y(N){return N===null||Y(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(N)):N===96&&N===a?n(N):(e.consume(N),y)}function w(N){return e.attempt(l,C,E)(N)}function E(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),h}function h(N){return s>0&&ee(N)?re(e,g,"linePrefix",s+1)(N):g(N)}function g(N){return N===null||Y(N)?e.check(Bd,w,C)(N):(e.enter("codeFlowValue"),v(N))}function v(N){return N===null||Y(N)?(e.exit("codeFlowValue"),g(N)):(e.consume(N),v)}function C(N){return e.exit("codeFenced"),t(N)}function A(N,R,O){let P=0;return x;function x(T){return N.enter("lineEnding"),N.consume(T),N.exit("lineEnding"),k}function k(T){return N.enter("codeFencedFence"),ee(T)?re(N,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):j(T)}function j(T){return T===a?(N.enter("codeFencedFenceSequence"),L(T)):O(T)}function L(T){return T===a?(P++,N.consume(T),L):P>=i?(N.exit("codeFencedFenceSequence"),ee(T)?re(N,D,"whitespace")(T):D(T)):O(T)}function D(T){return T===null||Y(T)?(N.exit("codeFencedFence"),R(T)):O(T)}}}function e1(e,t,n){const r=this;return l;function l(i){return i===null?n(i):(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s)}function s(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}const no={name:"codeIndented",tokenize:n1},t1={partial:!0,tokenize:r1};function n1(e,t,n){const r=this;return l;function l(c){return e.enter("codeIndented"),re(e,s,"linePrefix",5)(c)}function s(c){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?i(c):n(c)}function i(c){return c===null?u(c):Y(c)?e.attempt(t1,i,u)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Y(c)?(e.exit("codeFlowValue"),i(c)):(e.consume(c),a)}function u(c){return e.exit("codeIndented"),t(c)}}function r1(e,t,n){const r=this;return l;function l(i){return r.parser.lazy[r.now().line]?n(i):Y(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),l):re(e,s,"linePrefix",5)(i)}function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):Y(i)?l(i):n(i)}}const l1={name:"codeText",previous:i1,resolve:s1,tokenize:o1};function s1(e){let t=e.length-4,n=3,r,l;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)l===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(l=r):(r===t||e[r][1].type==="lineEnding")&&(e[l][1].type="codeTextData",r!==l+2&&(e[l][1].end=e[r-1][1].end,e.splice(l+2,r-l-2),t-=r-l-2,r=l+2),l=void 0);return e}function i1(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function o1(e,t,n){let r=0,l,s;return i;function i(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(s=e.enter("codeTextSequence"),l=0,f(d)):Y(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Y(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),c)}function f(d){return d===96?(e.consume(d),l++,f):l===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",c(d))}}class a1{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const l=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return r&&Br(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Br(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Br(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Br(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Br(this.left,n.reverse())}}}function Br(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function xh(e){const t={};let n=-1,r,l,s,i,a,u,c;const f=new a1(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,u1(f,n)),n=t[n],c=!0);else if(r[1]._container){for(s=n,l=void 0;s--;)if(i=f.get(s),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank")i[0]==="enter"&&(l&&(f.get(l)[1].type="lineEndingBlank"),i[1].type="lineEnding",l=s);else if(!(i[1].type==="linePrefix"||i[1].type==="listItemIndent"))break;l&&(r[1].end={...f.get(l)[1].start},a=f.slice(l,n),a.unshift(r),f.splice(l,n-l+1,a))}}return st(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!c}function u1(e,t){const n=e.get(t)[1],r=e.get(t)[2];let l=t-1;const s=[];let i=n._tokenizer;i||(i=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const a=i.events,u=[],c={};let f,d,p=-1,m=n,y=0,w=0;const E=[w];for(;m;){for(;e.get(++l)[1]!==m;);s.push(l),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(f),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(w=p+1,E.push(w),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):E.pop(),p=E.length;p--;){const h=a.slice(E[p],E[p+1]),g=s.pop();u.push([g,g+h.length-1]),e.splice(g,2,h)}for(u.reverse(),p=-1;++p<u.length;)c[y+u[p][0]]=y+u[p][1],y+=u[p][1]-u[p][0]-1;return c}const c1={resolve:f1,tokenize:p1},d1={partial:!0,tokenize:m1};function f1(e){return xh(e),e}function p1(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),l(a)}function l(a){return a===null?s(a):Y(a)?e.check(d1,i,s)(a):(e.consume(a),l)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function i(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function m1(e,t,n){const r=this;return l;function l(i){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),re(e,s,"linePrefix")}function s(i){if(i===null||Y(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}function yh(e,t,n,r,l,s,i,a,u){const c=u||Number.POSITIVE_INFINITY;let f=0;return d;function d(h){return h===60?(e.enter(r),e.enter(l),e.enter(s),e.consume(h),e.exit(s),p):h===null||h===32||h===41||qs(h)?n(h):(e.enter(r),e.enter(i),e.enter(a),e.enter("chunkString",{contentType:"string"}),w(h))}function p(h){return h===62?(e.enter(s),e.consume(h),e.exit(s),e.exit(l),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),m(h))}function m(h){return h===62?(e.exit("chunkString"),e.exit(a),p(h)):h===null||h===60||Y(h)?n(h):(e.consume(h),h===92?y:m)}function y(h){return h===60||h===62||h===92?(e.consume(h),m):m(h)}function w(h){return!f&&(h===null||h===41||de(h))?(e.exit("chunkString"),e.exit(a),e.exit(i),e.exit(r),t(h)):f<c&&h===40?(e.consume(h),f++,w):h===41?(e.consume(h),f--,w):h===null||h===32||h===40||qs(h)?n(h):(e.consume(h),h===92?E:w)}function E(h){return h===40||h===41||h===92?(e.consume(h),w):w(h)}}function vh(e,t,n,r,l,s){const i=this;let a=0,u;return c;function c(m){return e.enter(r),e.enter(l),e.consume(m),e.exit(l),e.enter(s),f}function f(m){return a>999||m===null||m===91||m===93&&!u||m===94&&!a&&"_hiddenFootnoteSupport"in i.parser.constructs?n(m):m===93?(e.exit(s),e.enter(l),e.consume(m),e.exit(l),e.exit(r),t):Y(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||Y(m)||a++>999?(e.exit("chunkString"),f(m)):(e.consume(m),u||(u=!ee(m)),m===92?p:d)}function p(m){return m===91||m===92||m===93?(e.consume(m),a++,d):d(m)}}function bh(e,t,n,r,l,s){let i;return a;function a(p){return p===34||p===39||p===40?(e.enter(r),e.enter(l),e.consume(p),e.exit(l),i=p===40?41:p,u):n(p)}function u(p){return p===i?(e.enter(l),e.consume(p),e.exit(l),e.exit(r),t):(e.enter(s),c(p))}function c(p){return p===i?(e.exit(s),u(i)):p===null?n(p):Y(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),re(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===i||p===null||Y(p)?(e.exit("chunkString"),c(p)):(e.consume(p),p===92?d:f)}function d(p){return p===i||p===92?(e.consume(p),f):f(p)}}function rl(e,t){let n;return r;function r(l){return Y(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),n=!0,r):ee(l)?re(e,r,n?"linePrefix":"lineSuffix")(l):t(l)}}const h1={name:"definition",tokenize:x1},g1={partial:!0,tokenize:y1};function x1(e,t,n){const r=this;let l;return s;function s(m){return e.enter("definition"),i(m)}function i(m){return vh.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return l=Ct(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),u):n(m)}function u(m){return de(m)?rl(e,c)(m):c(m)}function c(m){return yh(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(g1,d,d)(m)}function d(m){return ee(m)?re(e,p,"whitespace")(m):p(m)}function p(m){return m===null||Y(m)?(e.exit("definition"),r.parser.defined.push(l),t(m)):n(m)}}function y1(e,t,n){return r;function r(a){return de(a)?rl(e,l)(a):n(a)}function l(a){return bh(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return ee(a)?re(e,i,"whitespace")(a):i(a)}function i(a){return a===null||Y(a)?t(a):n(a)}}const v1={name:"hardBreakEscape",tokenize:b1};function b1(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),l}function l(s){return Y(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const w1={name:"headingAtx",resolve:k1,tokenize:j1};function k1(e,t){let n=e.length-2,r=3,l,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(l={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},st(e,r,n-r+1,[["enter",l,t],["enter",s,t],["exit",s,t],["exit",l,t]])),e}function j1(e,t,n){let r=0;return l;function l(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),i(f)}function i(f){return f===35&&r++<6?(e.consume(f),i):f===null||de(f)?(e.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(e.enter("atxHeadingSequence"),u(f)):f===null||Y(f)?(e.exit("atxHeading"),t(f)):ee(f)?re(e,a,"whitespace")(f):(e.enter("atxHeadingText"),c(f))}function u(f){return f===35?(e.consume(f),u):(e.exit("atxHeadingSequence"),a(f))}function c(f){return f===null||f===35||de(f)?(e.exit("atxHeadingText"),a(f)):(e.consume(f),c)}}const S1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Wd=["pre","script","style","textarea"],N1={concrete:!0,name:"htmlFlow",resolveTo:E1,tokenize:A1},C1={partial:!0,tokenize:L1},P1={partial:!0,tokenize:T1};function E1(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function A1(e,t,n){const r=this;let l,s,i,a,u;return c;function c(S){return f(S)}function f(S){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(S),d}function d(S){return S===33?(e.consume(S),p):S===47?(e.consume(S),s=!0,w):S===63?(e.consume(S),l=3,r.interrupt?t:b):Be(S)?(e.consume(S),i=String.fromCharCode(S),E):n(S)}function p(S){return S===45?(e.consume(S),l=2,m):S===91?(e.consume(S),l=5,a=0,y):Be(S)?(e.consume(S),l=4,r.interrupt?t:b):n(S)}function m(S){return S===45?(e.consume(S),r.interrupt?t:b):n(S)}function y(S){const G="CDATA[";return S===G.charCodeAt(a++)?(e.consume(S),a===G.length?r.interrupt?t:j:y):n(S)}function w(S){return Be(S)?(e.consume(S),i=String.fromCharCode(S),E):n(S)}function E(S){if(S===null||S===47||S===62||de(S)){const G=S===47,X=i.toLowerCase();return!G&&!s&&Wd.includes(X)?(l=1,r.interrupt?t(S):j(S)):S1.includes(i.toLowerCase())?(l=6,G?(e.consume(S),h):r.interrupt?t(S):j(S)):(l=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(S):s?g(S):v(S))}return S===45||_e(S)?(e.consume(S),i+=String.fromCharCode(S),E):n(S)}function h(S){return S===62?(e.consume(S),r.interrupt?t:j):n(S)}function g(S){return ee(S)?(e.consume(S),g):x(S)}function v(S){return S===47?(e.consume(S),x):S===58||S===95||Be(S)?(e.consume(S),C):ee(S)?(e.consume(S),v):x(S)}function C(S){return S===45||S===46||S===58||S===95||_e(S)?(e.consume(S),C):A(S)}function A(S){return S===61?(e.consume(S),N):ee(S)?(e.consume(S),A):v(S)}function N(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(e.consume(S),u=S,R):ee(S)?(e.consume(S),N):O(S)}function R(S){return S===u?(e.consume(S),u=null,P):S===null||Y(S)?n(S):(e.consume(S),R)}function O(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||de(S)?A(S):(e.consume(S),O)}function P(S){return S===47||S===62||ee(S)?v(S):n(S)}function x(S){return S===62?(e.consume(S),k):n(S)}function k(S){return S===null||Y(S)?j(S):ee(S)?(e.consume(S),k):n(S)}function j(S){return S===45&&l===2?(e.consume(S),$):S===60&&l===1?(e.consume(S),V):S===62&&l===4?(e.consume(S),_):S===63&&l===3?(e.consume(S),b):S===93&&l===5?(e.consume(S),M):Y(S)&&(l===6||l===7)?(e.exit("htmlFlowData"),e.check(C1,B,L)(S)):S===null||Y(S)?(e.exit("htmlFlowData"),L(S)):(e.consume(S),j)}function L(S){return e.check(P1,D,B)(S)}function D(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),T}function T(S){return S===null||Y(S)?L(S):(e.enter("htmlFlowData"),j(S))}function $(S){return S===45?(e.consume(S),b):j(S)}function V(S){return S===47?(e.consume(S),i="",z):j(S)}function z(S){if(S===62){const G=i.toLowerCase();return Wd.includes(G)?(e.consume(S),_):j(S)}return Be(S)&&i.length<8?(e.consume(S),i+=String.fromCharCode(S),z):j(S)}function M(S){return S===93?(e.consume(S),b):j(S)}function b(S){return S===62?(e.consume(S),_):S===45&&l===2?(e.consume(S),b):j(S)}function _(S){return S===null||Y(S)?(e.exit("htmlFlowData"),B(S)):(e.consume(S),_)}function B(S){return e.exit("htmlFlow"),t(S)}}function T1(e,t,n){const r=this;return l;function l(i){return Y(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s):n(i)}function s(i){return r.parser.lazy[r.now().line]?n(i):t(i)}}function L1(e,t,n){return r;function r(l){return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),e.attempt(Ml,t,n)}}const I1={name:"htmlText",tokenize:M1};function M1(e,t,n){const r=this;let l,s,i;return a;function a(b){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(b),u}function u(b){return b===33?(e.consume(b),c):b===47?(e.consume(b),A):b===63?(e.consume(b),v):Be(b)?(e.consume(b),O):n(b)}function c(b){return b===45?(e.consume(b),f):b===91?(e.consume(b),s=0,y):Be(b)?(e.consume(b),g):n(b)}function f(b){return b===45?(e.consume(b),m):n(b)}function d(b){return b===null?n(b):b===45?(e.consume(b),p):Y(b)?(i=d,V(b)):(e.consume(b),d)}function p(b){return b===45?(e.consume(b),m):d(b)}function m(b){return b===62?$(b):b===45?p(b):d(b)}function y(b){const _="CDATA[";return b===_.charCodeAt(s++)?(e.consume(b),s===_.length?w:y):n(b)}function w(b){return b===null?n(b):b===93?(e.consume(b),E):Y(b)?(i=w,V(b)):(e.consume(b),w)}function E(b){return b===93?(e.consume(b),h):w(b)}function h(b){return b===62?$(b):b===93?(e.consume(b),h):w(b)}function g(b){return b===null||b===62?$(b):Y(b)?(i=g,V(b)):(e.consume(b),g)}function v(b){return b===null?n(b):b===63?(e.consume(b),C):Y(b)?(i=v,V(b)):(e.consume(b),v)}function C(b){return b===62?$(b):v(b)}function A(b){return Be(b)?(e.consume(b),N):n(b)}function N(b){return b===45||_e(b)?(e.consume(b),N):R(b)}function R(b){return Y(b)?(i=R,V(b)):ee(b)?(e.consume(b),R):$(b)}function O(b){return b===45||_e(b)?(e.consume(b),O):b===47||b===62||de(b)?P(b):n(b)}function P(b){return b===47?(e.consume(b),$):b===58||b===95||Be(b)?(e.consume(b),x):Y(b)?(i=P,V(b)):ee(b)?(e.consume(b),P):$(b)}function x(b){return b===45||b===46||b===58||b===95||_e(b)?(e.consume(b),x):k(b)}function k(b){return b===61?(e.consume(b),j):Y(b)?(i=k,V(b)):ee(b)?(e.consume(b),k):P(b)}function j(b){return b===null||b===60||b===61||b===62||b===96?n(b):b===34||b===39?(e.consume(b),l=b,L):Y(b)?(i=j,V(b)):ee(b)?(e.consume(b),j):(e.consume(b),D)}function L(b){return b===l?(e.consume(b),l=void 0,T):b===null?n(b):Y(b)?(i=L,V(b)):(e.consume(b),L)}function D(b){return b===null||b===34||b===39||b===60||b===61||b===96?n(b):b===47||b===62||de(b)?P(b):(e.consume(b),D)}function T(b){return b===47||b===62||de(b)?P(b):n(b)}function $(b){return b===62?(e.consume(b),e.exit("htmlTextData"),e.exit("htmlText"),t):n(b)}function V(b){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),z}function z(b){return ee(b)?re(e,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):M(b)}function M(b){return e.enter("htmlTextData"),i(b)}}const Fu={name:"labelEnd",resolveAll:_1,resolveTo:F1,tokenize:O1},D1={tokenize:$1},R1={tokenize:B1},z1={tokenize:H1};function _1(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const l=r.type==="labelImage"?4:2;r.type="data",t+=l}}return e.length!==n.length&&st(e,0,e.length,n),e}function F1(e,t){let n=e.length,r=0,l,s,i,a;for(;n--;)if(l=e[n][1],s){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;e[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(i){if(e[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(s=n,l.type!=="labelLink")){r=2;break}}else l.type==="labelEnd"&&(i=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[i][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[i-2][1].start}};return a=[["enter",u,t],["enter",c,t]],a=dt(a,e.slice(s+1,s+r+3)),a=dt(a,[["enter",f,t]]),a=dt(a,bi(t.parser.constructs.insideSpan.null,e.slice(s+r+4,i-3),t)),a=dt(a,[["exit",f,t],e[i-2],e[i-1],["exit",c,t]]),a=dt(a,e.slice(i+1)),a=dt(a,[["exit",u,t]]),st(e,s,e.length,a),e}function O1(e,t,n){const r=this;let l=r.events.length,s,i;for(;l--;)if((r.events[l][1].type==="labelImage"||r.events[l][1].type==="labelLink")&&!r.events[l][1]._balanced){s=r.events[l][1];break}return a;function a(p){return s?s._inactive?d(p):(i=r.parser.defined.includes(Ct(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),u):n(p)}function u(p){return p===40?e.attempt(D1,f,i?f:d)(p):p===91?e.attempt(R1,f,i?c:d)(p):i?f(p):d(p)}function c(p){return e.attempt(z1,f,d)(p)}function f(p){return t(p)}function d(p){return s._balanced=!0,n(p)}}function $1(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),l}function l(d){return de(d)?rl(e,s)(d):s(d)}function s(d){return d===41?f(d):yh(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function i(d){return de(d)?rl(e,u)(d):f(d)}function a(d){return n(d)}function u(d){return d===34||d===39||d===40?bh(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function c(d){return de(d)?rl(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function B1(e,t,n){const r=this;return l;function l(a){return vh.call(r,e,s,i,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Ct(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function i(a){return n(a)}}function H1(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),l}function l(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const W1={name:"labelStartImage",resolveAll:Fu.resolveAll,tokenize:q1};function q1(e,t,n){const r=this;return l;function l(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),i):n(a)}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const U1={name:"labelStartLink",resolveAll:Fu.resolveAll,tokenize:X1};function X1(e,t,n){const r=this;return l;function l(i){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelLink"),s}function s(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const ro={name:"lineEnding",tokenize:V1};function V1(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),re(e,t,"linePrefix")}}const hs={name:"thematicBreak",tokenize:Q1};function Q1(e,t,n){let r=0,l;return s;function s(c){return e.enter("thematicBreak"),i(c)}function i(c){return l=c,a(c)}function a(c){return c===l?(e.enter("thematicBreakSequence"),u(c)):r>=3&&(c===null||Y(c))?(e.exit("thematicBreak"),t(c)):n(c)}function u(c){return c===l?(e.consume(c),r++,u):(e.exit("thematicBreakSequence"),ee(c)?re(e,a,"whitespace")(c):a(c))}}const Ue={continuation:{tokenize:Z1},exit:ew,name:"list",tokenize:Y1},G1={partial:!0,tokenize:tw},K1={partial:!0,tokenize:J1};function Y1(e,t,n){const r=this,l=r.events[r.events.length-1];let s=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,i=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:ba(m)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(hs,n,c)(m):c(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(m)}return n(m)}function u(m){return ba(m)&&++i<10?(e.consume(m),u):(!r.interrupt||i<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),c(m)):n(m)}function c(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Ml,r.interrupt?n:f,e.attempt(G1,p,d))}function f(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function d(m){return ee(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function Z1(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ml,l,s);function l(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,re(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!ee(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(K1,t,i)(a))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,re(e,e.attempt(Ue,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function J1(e,t,n){const r=this;return re(e,l,"listItemIndent",r.containerState.size+1);function l(s){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(s):n(s)}}function ew(e){e.exit(this.containerState.type)}function tw(e,t,n){const r=this;return re(e,l,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(s){const i=r.events[r.events.length-1];return!ee(s)&&i&&i[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const qd={name:"setextUnderline",resolveTo:nw,tokenize:rw};function nw(e,t){let n=e.length,r,l,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(l=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const i={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[l][1].type="setextHeadingText",s?(e.splice(l,0,["enter",i,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=i,e.push(["exit",i,t]),e}function rw(e,t,n){const r=this;let l;return s;function s(c){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),l=c,i(c)):n(c)}function i(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===l?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),ee(c)?re(e,u,"lineSuffix")(c):u(c))}function u(c){return c===null||Y(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const lw={tokenize:sw};function sw(e){const t=this,n=e.attempt(Ml,r,e.attempt(this.parser.constructs.flowInitial,l,re(e,e.attempt(this.parser.constructs.flow,l,e.attempt(c1,l)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function l(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const iw={resolveAll:kh()},ow=wh("string"),aw=wh("text");function wh(e){return{resolveAll:kh(e==="text"?uw:void 0),tokenize:t};function t(n){const r=this,l=this.parser.constructs[e],s=n.attempt(l,i,a);return i;function i(f){return c(f)?s(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),u}function u(f){return c(f)?(n.exit("data"),s(f)):(n.consume(f),u)}function c(f){if(f===null)return!0;const d=l[f];let p=-1;if(d)for(;++p<d.length;){const m=d[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function kh(e){return t;function t(n,r){let l=-1,s;for(;++l<=n.length;)s===void 0?n[l]&&n[l][1].type==="data"&&(s=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==s+2&&(n[s][1].end=n[l-1][1].end,n.splice(s+2,l-s-2),l=s+2),s=void 0);return e?e(n,r):n}}function uw(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],l=t.sliceStream(r);let s=l.length,i=-1,a=0,u;for(;s--;){const c=l[s];if(typeof c=="string"){for(i=c.length;c.charCodeAt(i-1)===32;)a++,i--;if(i)break;i=-1}else if(c===-2)u=!0,a++;else if(c!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?i:r.start._bufferIndex+i,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const cw={42:Ue,43:Ue,45:Ue,48:Ue,49:Ue,50:Ue,51:Ue,52:Ue,53:Ue,54:Ue,55:Ue,56:Ue,57:Ue,62:mh},dw={91:h1},fw={[-2]:no,[-1]:no,32:no},pw={35:w1,42:hs,45:[qd,hs],60:N1,61:qd,95:hs,96:Hd,126:Hd},mw={38:gh,92:hh},hw={[-5]:ro,[-4]:ro,[-3]:ro,33:W1,38:gh,42:wa,60:[Ub,I1],91:U1,92:[v1,hh],93:Fu,95:wa,96:l1},gw={null:[wa,iw]},xw={null:[42,95]},yw={null:[]},vw=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:xw,contentInitial:dw,disable:yw,document:cw,flow:pw,flowInitial:fw,insideSpan:gw,string:mw,text:hw},Symbol.toStringTag,{value:"Module"}));function bw(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},s=[];let i=[],a=[];const u={attempt:R(A),check:R(N),consume:g,enter:v,exit:C,interrupt:R(N,{interrupt:!0})},c={code:null,containerState:{},defineSkip:w,events:[],now:y,parser:e,previous:null,sliceSerialize:p,sliceStream:m,write:d};let f=t.tokenize.call(c,u);return t.resolveAll&&s.push(t),c;function d(k){return i=dt(i,k),E(),i[i.length-1]!==null?[]:(O(t,0),c.events=bi(s,c.events,c),c.events)}function p(k,j){return kw(m(k),j)}function m(k){return ww(i,k)}function y(){const{_bufferIndex:k,_index:j,line:L,column:D,offset:T}=r;return{_bufferIndex:k,_index:j,line:L,column:D,offset:T}}function w(k){l[k.line]=k.column,x()}function E(){let k;for(;r._index<i.length;){const j=i[r._index];if(typeof j=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<j.length;)h(j.charCodeAt(r._bufferIndex));else h(j)}}function h(k){f=f(k)}function g(k){Y(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,x()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=k}function v(k,j){const L=j||{};return L.type=k,L.start=y(),c.events.push(["enter",L,c]),a.push(L),L}function C(k){const j=a.pop();return j.end=y(),c.events.push(["exit",j,c]),j}function A(k,j){O(k,j.from)}function N(k,j){j.restore()}function R(k,j){return L;function L(D,T,$){let V,z,M,b;return Array.isArray(D)?B(D):"tokenize"in D?B([D]):_(D);function _(F){return ie;function ie(ae){const me=ae!==null&&F[ae],ue=ae!==null&&F.null,gt=[...Array.isArray(me)?me:me?[me]:[],...Array.isArray(ue)?ue:ue?[ue]:[]];return B(gt)(ae)}}function B(F){return V=F,z=0,F.length===0?$:S(F[z])}function S(F){return ie;function ie(ae){return b=P(),M=F,F.partial||(c.currentConstruct=F),F.name&&c.parser.constructs.disable.null.includes(F.name)?X():F.tokenize.call(j?Object.assign(Object.create(c),j):c,u,G,X)(ae)}}function G(F){return k(M,b),T}function X(F){return b.restore(),++z<V.length?S(V[z]):$}}}function O(k,j){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&st(c.events,j,c.events.length-j,k.resolve(c.events.slice(j),c)),k.resolveTo&&(c.events=k.resolveTo(c.events,c))}function P(){const k=y(),j=c.previous,L=c.currentConstruct,D=c.events.length,T=Array.from(a);return{from:D,restore:$};function $(){r=k,c.previous=j,c.currentConstruct=L,c.events.length=D,a=T,x()}}function x(){r.line in l&&r.column<2&&(r.column=l[r.line],r.offset+=l[r.line]-1)}}function ww(e,t){const n=t.start._index,r=t.start._bufferIndex,l=t.end._index,s=t.end._bufferIndex;let i;if(n===l)i=[e[n].slice(r,s)];else{if(i=e.slice(n,l),r>-1){const a=i[0];typeof a=="string"?i[0]=a.slice(r):i.shift()}s>0&&i.push(e[l].slice(0,s))}return i}function kw(e,t){let n=-1;const r=[];let l;for(;++n<e.length;){const s=e[n];let i;if(typeof s=="string")i=s;else switch(s){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=t?" ":"	";break}case-1:{if(!t&&l)continue;i=" ";break}default:i=String.fromCharCode(s)}l=s===-2,r.push(i)}return r.join("")}function jw(e){const r={constructs:fh([vw,...(e||{}).extensions||[]]),content:l(Fb),defined:[],document:l($b),flow:l(lw),lazy:{},string:l(ow),text:l(aw)};return r;function l(s){return i;function i(a){return bw(r,s,a)}}}function Sw(e){for(;!xh(e););return e}const Ud=/[\0\t\n\r]/g;function Nw(){let e=1,t="",n=!0,r;return l;function l(s,i,a){const u=[];let c,f,d,p,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(i||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Ud.lastIndex=d,c=Ud.exec(s),p=c&&c.index!==void 0?c.index:s.length,m=s.charCodeAt(p),!c){t=s.slice(d);break}if(m===10&&d===p&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<p&&(u.push(s.slice(d,p)),e+=p-d),m){case 0:{u.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,u.push(-2);e++<f;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=p+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Cw=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Pw(e){return e.replace(Cw,Ew)}function Ew(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),s=l===120||l===88;return ph(n.slice(s?2:1),s?16:10)}return _u(n)||e}const jh={}.hasOwnProperty;function Aw(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Tw(n)(Sw(jw(n).document().write(Nw()(e,t,!0))))}function Tw(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Zu),autolinkProtocol:P,autolinkEmail:P,atxHeading:s(Me),blockQuote:s(ue),characterEscape:P,characterReference:P,codeFenced:s(gt),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:s(gt,i),codeText:s(wn,i),codeTextData:P,data:P,codeFlowValue:P,definition:s(W),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:s(Rt),hardBreakEscape:s(Yt),hardBreakTrailing:s(Yt),htmlFlow:s(Yu,i),htmlFlowData:P,htmlText:s(Yu,i),htmlTextData:P,image:s(cg),label:i,link:s(Zu),listItem:s(dg),listItemValue:p,listOrdered:s(Ju,d),listUnordered:s(Ju),paragraph:s(fg),reference:S,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:s(Me),strong:s(pg),thematicBreak:s(hg)},exit:{atxHeading:u(),atxHeadingSequence:A,autolink:u(),autolinkEmail:me,autolinkProtocol:ae,blockQuote:u(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:F,characterReference:ie,codeFenced:u(E),codeFencedFence:w,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:x,codeIndented:u(h),codeText:u(T),codeTextData:x,data:x,definition:u(),definitionDestinationString:C,definitionLabelString:g,definitionTitleString:v,emphasis:u(),hardBreakEscape:u(j),hardBreakTrailing:u(j),htmlFlow:u(L),htmlFlowData:x,htmlText:u(D),htmlTextData:x,image:u(V),label:M,labelText:z,lineEnding:k,link:u($),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:G,resourceDestinationString:b,resourceTitleString:_,resource:B,setextHeading:u(O),setextHeadingLineSequence:R,setextHeadingText:N,strong:u(),thematicBreak:u()}};Sh(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(H){let Q={type:"root",children:[]};const Z={stack:[Q],tokenStack:[],config:t,enter:a,exit:c,buffer:i,resume:f,data:n},ne=[];let ce=-1;for(;++ce<H.length;)if(H[ce][1].type==="listOrdered"||H[ce][1].type==="listUnordered")if(H[ce][0]==="enter")ne.push(ce);else{const xt=ne.pop();ce=l(H,xt,ce)}for(ce=-1;++ce<H.length;){const xt=t[H[ce][0]];jh.call(xt,H[ce][1].type)&&xt[H[ce][1].type].call(Object.assign({sliceSerialize:H[ce][2].sliceSerialize},Z),H[ce][1])}if(Z.tokenStack.length>0){const xt=Z.tokenStack[Z.tokenStack.length-1];(xt[1]||Xd).call(Z,void 0,xt[0])}for(Q.position={start:Jt(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:Jt(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},ce=-1;++ce<t.transforms.length;)Q=t.transforms[ce](Q)||Q;return Q}function l(H,Q,Z){let ne=Q-1,ce=-1,xt=!1,kn,zt,Er,Ar;for(;++ne<=Z;){const et=H[ne];switch(et[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{et[0]==="enter"?ce++:ce--,Ar=void 0;break}case"lineEndingBlank":{et[0]==="enter"&&(kn&&!Ar&&!ce&&!Er&&(Er=ne),Ar=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ar=void 0}if(!ce&&et[0]==="enter"&&et[1].type==="listItemPrefix"||ce===-1&&et[0]==="exit"&&(et[1].type==="listUnordered"||et[1].type==="listOrdered")){if(kn){let Hn=ne;for(zt=void 0;Hn--;){const _t=H[Hn];if(_t[1].type==="lineEnding"||_t[1].type==="lineEndingBlank"){if(_t[0]==="exit")continue;zt&&(H[zt][1].type="lineEndingBlank",xt=!0),_t[1].type="lineEnding",zt=Hn}else if(!(_t[1].type==="linePrefix"||_t[1].type==="blockQuotePrefix"||_t[1].type==="blockQuotePrefixWhitespace"||_t[1].type==="blockQuoteMarker"||_t[1].type==="listItemIndent"))break}Er&&(!zt||Er<zt)&&(kn._spread=!0),kn.end=Object.assign({},zt?H[zt][1].start:et[1].end),H.splice(zt||ne,0,["exit",kn,et[2]]),ne++,Z++}if(et[1].type==="listItemPrefix"){const Hn={type:"listItem",_spread:!1,start:Object.assign({},et[1].start),end:void 0};kn=Hn,H.splice(ne,0,["enter",Hn,et[2]]),ne++,Z++,Er=void 0,Ar=!0}}}return H[Q][1]._spread=xt,Z}function s(H,Q){return Z;function Z(ne){a.call(this,H(ne),ne),Q&&Q.call(this,ne)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(H,Q,Z){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([Q,Z||void 0]),H.position={start:Jt(Q.start),end:void 0}}function u(H){return Q;function Q(Z){H&&H.call(this,Z),c.call(this,Z)}}function c(H,Q){const Z=this.stack.pop(),ne=this.tokenStack.pop();if(ne)ne[0].type!==H.type&&(Q?Q.call(this,H,ne[0]):(ne[1]||Xd).call(this,H,ne[0]));else throw new Error("Cannot close `"+H.type+"` ("+nl({start:H.start,end:H.end})+"): its not open");Z.position.end=Jt(H.end)}function f(){return zu(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(H){if(this.data.expectingFirstListItemValue){const Q=this.stack[this.stack.length-2];Q.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function m(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.lang=H}function y(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.meta=H}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function h(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H.replace(/(\r?\n|\r)$/g,"")}function g(H){const Q=this.resume(),Z=this.stack[this.stack.length-1];Z.label=Q,Z.identifier=Ct(this.sliceSerialize(H)).toLowerCase()}function v(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.title=H}function C(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.url=H}function A(H){const Q=this.stack[this.stack.length-1];if(!Q.depth){const Z=this.sliceSerialize(H).length;Q.depth=Z}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function R(H){const Q=this.stack[this.stack.length-1];Q.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function P(H){const Z=this.stack[this.stack.length-1].children;let ne=Z[Z.length-1];(!ne||ne.type!=="text")&&(ne=mg(),ne.position={start:Jt(H.start),end:void 0},Z.push(ne)),this.stack.push(ne)}function x(H){const Q=this.stack.pop();Q.value+=this.sliceSerialize(H),Q.position.end=Jt(H.end)}function k(H){const Q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Z=Q.children[Q.children.length-1];Z.position.end=Jt(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Q.type)&&(P.call(this,H),x.call(this,H))}function j(){this.data.atHardBreak=!0}function L(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function D(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function T(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.value=H}function $(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=Q,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function V(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const Q=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=Q,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function z(H){const Q=this.sliceSerialize(H),Z=this.stack[this.stack.length-2];Z.label=Pw(Q),Z.identifier=Ct(Q).toLowerCase()}function M(){const H=this.stack[this.stack.length-1],Q=this.resume(),Z=this.stack[this.stack.length-1];if(this.data.inReference=!0,Z.type==="link"){const ne=H.children;Z.children=ne}else Z.alt=Q}function b(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.url=H}function _(){const H=this.resume(),Q=this.stack[this.stack.length-1];Q.title=H}function B(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function G(H){const Q=this.resume(),Z=this.stack[this.stack.length-1];Z.label=Q,Z.identifier=Ct(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function X(H){this.data.characterReferenceType=H.type}function F(H){const Q=this.sliceSerialize(H),Z=this.data.characterReferenceType;let ne;Z?(ne=ph(Q,Z==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ne=_u(Q);const ce=this.stack[this.stack.length-1];ce.value+=ne}function ie(H){const Q=this.stack.pop();Q.position.end=Jt(H.end)}function ae(H){x.call(this,H);const Q=this.stack[this.stack.length-1];Q.url=this.sliceSerialize(H)}function me(H){x.call(this,H);const Q=this.stack[this.stack.length-1];Q.url="mailto:"+this.sliceSerialize(H)}function ue(){return{type:"blockquote",children:[]}}function gt(){return{type:"code",lang:null,meta:null,value:""}}function wn(){return{type:"inlineCode",value:""}}function W(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Rt(){return{type:"emphasis",children:[]}}function Me(){return{type:"heading",depth:0,children:[]}}function Yt(){return{type:"break"}}function Yu(){return{type:"html",value:""}}function cg(){return{type:"image",title:null,url:"",alt:null}}function Zu(){return{type:"link",title:null,url:"",children:[]}}function Ju(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function dg(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function fg(){return{type:"paragraph",children:[]}}function pg(){return{type:"strong",children:[]}}function mg(){return{type:"text",value:""}}function hg(){return{type:"thematicBreak"}}}function Jt(e){return{line:e.line,column:e.column,offset:e.offset}}function Sh(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Sh(e,r):Lw(e,r)}}function Lw(e,t){let n;for(n in t)if(jh.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Xd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+nl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+nl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+nl({start:t.start,end:t.end})+") is still open")}function Iw(e){const t=this;t.parser=n;function n(r){return Aw(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Mw(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Dw(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Rw(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let l={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function zw(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _w(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Fw(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),l=Pr(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let i,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,u);const c={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,c),e.applyData(t,c)}function Ow(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $w(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Nh(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const l=e.all(t),s=l[0];s&&s.type==="text"?s.value="["+s.value:l.unshift({type:"text",value:"["});const i=l[l.length-1];return i&&i.type==="text"?i.value+=r:l.push({type:"text",value:r}),l}function Bw(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Nh(e,t);const l={src:Pr(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(l.title=r.title);const s={type:"element",tagName:"img",properties:l,children:[]};return e.patch(t,s),e.applyData(t,s)}function Hw(e,t){const n={src:Pr(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Ww(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function qw(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Nh(e,t);const l={href:Pr(r.url||"")};r.title!==null&&r.title!==void 0&&(l.title=r.title);const s={type:"element",tagName:"a",properties:l,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Uw(e,t){const n={href:Pr(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Xw(e,t,n){const r=e.all(t),l=n?Vw(n):Ch(t),s={},i=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const f=r[a];(l||a!==0||f.type!=="element"||f.tagName!=="p")&&i.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!l?i.push(...f.children):i.push(f)}const u=r[r.length-1];u&&(l||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:i};return e.patch(t,c),e.applyData(t,c)}function Vw(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ch(n[r])}return t}function Ch(e){const t=e.spread;return t??e.children.length>1}function Qw(e,t){const n={},r=e.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++l<r.length;){const i=r[l];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Gw(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Kw(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Yw(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Zw(e,t){const n=e.all(t),r=n.shift(),l=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],i),l.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Iu(t.children[1]),u=sh(t.children[t.children.length-1]);a&&u&&(i.position={start:a,end:u}),l.push(i)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,s),e.applyData(t,s)}function Jw(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,a=i?i.length:t.children.length;let u=-1;const c=[];for(;++u<a;){const d=t.children[u],p={},m=i?i[u]:void 0;m&&(p.align=m);let y={type:"element",tagName:s,properties:p,children:[]};d&&(y.children=e.all(d),e.patch(d,y),y=e.applyData(d,y)),c.push(y)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,f),e.applyData(t,f)}function ek(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Vd=9,Qd=32;function tk(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),l=0;const s=[];for(;r;)s.push(Gd(t.slice(l,r.index),l>0,!0),r[0]),l=r.index+r[0].length,r=n.exec(t);return s.push(Gd(t.slice(l),l>0,!1)),s.join("")}function Gd(e,t,n){let r=0,l=e.length;if(t){let s=e.codePointAt(r);for(;s===Vd||s===Qd;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(l-1);for(;s===Vd||s===Qd;)l--,s=e.codePointAt(l-1)}return l>r?e.slice(r,l):""}function nk(e,t){const n={type:"text",value:tk(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function rk(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const lk={blockquote:Mw,break:Dw,code:Rw,delete:zw,emphasis:_w,footnoteReference:Fw,heading:Ow,html:$w,imageReference:Bw,image:Hw,inlineCode:Ww,linkReference:qw,link:Uw,listItem:Xw,list:Qw,paragraph:Gw,root:Kw,strong:Yw,table:Zw,tableCell:ek,tableRow:Jw,text:nk,thematicBreak:rk,toml:Jl,yaml:Jl,definition:Jl,footnoteDefinition:Jl};function Jl(){}const Ph=-1,wi=0,ll=1,Us=2,Ou=3,$u=4,Bu=5,Hu=6,Eh=7,Ah=8,Kd=typeof self=="object"?self:globalThis,sk=(e,t)=>{const n=(l,s)=>(e.set(s,l),l),r=l=>{if(e.has(l))return e.get(l);const[s,i]=t[l];switch(s){case wi:case Ph:return n(i,l);case ll:{const a=n([],l);for(const u of i)a.push(r(u));return a}case Us:{const a=n({},l);for(const[u,c]of i)a[r(u)]=r(c);return a}case Ou:return n(new Date(i),l);case $u:{const{source:a,flags:u}=i;return n(new RegExp(a,u),l)}case Bu:{const a=n(new Map,l);for(const[u,c]of i)a.set(r(u),r(c));return a}case Hu:{const a=n(new Set,l);for(const u of i)a.add(r(u));return a}case Eh:{const{name:a,message:u}=i;return n(new Kd[a](u),l)}case Ah:return n(BigInt(i),l);case"BigInt":return n(Object(BigInt(i)),l);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:a}=new Uint8Array(i);return n(new DataView(a),i)}}return n(new Kd[s](i),l)};return r},Yd=e=>sk(new Map,e)(0),qn="",{toString:ik}={},{keys:ok}=Object,Hr=e=>{const t=typeof e;if(t!=="object"||!e)return[wi,t];const n=ik.call(e).slice(8,-1);switch(n){case"Array":return[ll,qn];case"Object":return[Us,qn];case"Date":return[Ou,qn];case"RegExp":return[$u,qn];case"Map":return[Bu,qn];case"Set":return[Hu,qn];case"DataView":return[ll,n]}return n.includes("Array")?[ll,n]:n.includes("Error")?[Eh,n]:[Us,n]},es=([e,t])=>e===wi&&(t==="function"||t==="symbol"),ak=(e,t,n,r)=>{const l=(i,a)=>{const u=r.push(i)-1;return n.set(a,u),u},s=i=>{if(n.has(i))return n.get(i);let[a,u]=Hr(i);switch(a){case wi:{let f=i;switch(u){case"bigint":a=Ah,f=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);f=null;break;case"undefined":return l([Ph],i)}return l([a,f],i)}case ll:{if(u){let p=i;return u==="DataView"?p=new Uint8Array(i.buffer):u==="ArrayBuffer"&&(p=new Uint8Array(i)),l([u,[...p]],i)}const f=[],d=l([a,f],i);for(const p of i)f.push(s(p));return d}case Us:{if(u)switch(u){case"BigInt":return l([u,i.toString()],i);case"Boolean":case"Number":case"String":return l([u,i.valueOf()],i)}if(t&&"toJSON"in i)return s(i.toJSON());const f=[],d=l([a,f],i);for(const p of ok(i))(e||!es(Hr(i[p])))&&f.push([s(p),s(i[p])]);return d}case Ou:return l([a,i.toISOString()],i);case $u:{const{source:f,flags:d}=i;return l([a,{source:f,flags:d}],i)}case Bu:{const f=[],d=l([a,f],i);for(const[p,m]of i)(e||!(es(Hr(p))||es(Hr(m))))&&f.push([s(p),s(m)]);return d}case Hu:{const f=[],d=l([a,f],i);for(const p of i)(e||!es(Hr(p)))&&f.push(s(p));return d}}const{message:c}=i;return l([a,{name:u,message:c}],i)};return s},Zd=(e,{json:t,lossy:n}={})=>{const r=[];return ak(!(t||n),!!t,new Map,r)(e),r},Xs=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Yd(Zd(e,t)):structuredClone(e):(e,t)=>Yd(Zd(e,t));function uk(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ck(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function dk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||uk,r=e.options.footnoteBackLabel||ck,l=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[u]);if(!c)continue;const f=e.all(c),d=String(c.identifier).toUpperCase(),p=Pr(d.toLowerCase());let m=0;const y=[],w=e.footnoteCounts.get(d);for(;w!==void 0&&++m<=w;){y.length>0&&y.push({type:"text",value:" "});let g=typeof n=="string"?n:n(u,m);typeof g=="string"&&(g={type:"text",value:g}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,m),className:["data-footnote-backref"]},children:Array.isArray(g)?g:[g]})}const E=f[f.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const g=E.children[E.children.length-1];g&&g.type==="text"?g.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...y)}else f.push(...y);const h={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(f,!0)};e.patch(c,h),a.push(h)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Xs(i),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ki=function(e){if(e==null)return hk;if(typeof e=="function")return ji(e);if(typeof e=="object")return Array.isArray(e)?fk(e):pk(e);if(typeof e=="string")return mk(e);throw new Error("Expected function, string, or object as test")};function fk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ki(e[n]);return ji(r);function r(...l){let s=-1;for(;++s<t.length;)if(t[s].apply(this,l))return!0;return!1}}function pk(e){const t=e;return ji(n);function n(r){const l=r;let s;for(s in e)if(l[s]!==t[s])return!1;return!0}}function mk(e){return ji(t);function t(n){return n&&n.type===e}}function ji(e){return t;function t(n,r,l){return!!(gk(n)&&e.call(this,n,typeof r=="number"?r:void 0,l||void 0))}}function hk(){return!0}function gk(e){return e!==null&&typeof e=="object"&&"type"in e}const Th=[],xk=!0,ka=!1,yk="skip";function Lh(e,t,n,r){let l;typeof t=="function"&&typeof n!="function"?(r=n,n=t):l=t;const s=ki(l),i=r?-1:1;a(e,void 0,[])();function a(u,c,f){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(u.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=Th,y,w,E;if((!t||s(u,c,f[f.length-1]||void 0))&&(m=vk(n(u,f)),m[0]===ka))return m;if("children"in u&&u.children){const h=u;if(h.children&&m[0]!==yk)for(w=(r?h.children.length:-1)+i,E=f.concat(h);w>-1&&w<h.children.length;){const g=h.children[w];if(y=a(g,w,E)(),y[0]===ka)return y;w=typeof y[1]=="number"?y[1]:w+i}}return m}}}function vk(e){return Array.isArray(e)?e:typeof e=="number"?[xk,e]:e==null?Th:[e]}function Wu(e,t,n,r){let l,s,i;typeof t=="function"&&typeof n!="function"?(s=void 0,i=t,l=n):(s=t,i=n,l=r),Lh(e,s,a,l);function a(u,c){const f=c[c.length-1],d=f?f.children.indexOf(u):void 0;return i(u,d,f)}}const ja={}.hasOwnProperty,bk={};function wk(e,t){const n=t||bk,r=new Map,l=new Map,s=new Map,i={...lk,...n.handlers},a={all:c,applyData:jk,definitionById:r,footnoteById:l,footnoteCounts:s,footnoteOrder:[],handlers:i,one:u,options:n,patch:kk,wrap:Nk};return Wu(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:l,p=String(f.identifier).toUpperCase();d.has(p)||d.set(p,f)}}),a;function u(f,d){const p=f.type,m=a.handlers[p];if(ja.call(a.handlers,p)&&m)return m(a,f,d);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in f){const{children:w,...E}=f,h=Xs(E);return h.children=a.all(f),h}return Xs(f)}return(a.options.unknownHandler||Sk)(a,f,d)}function c(f){const d=[];if("children"in f){const p=f.children;let m=-1;for(;++m<p.length;){const y=a.one(p[m],f);if(y){if(m&&p[m-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Jd(y.value)),!Array.isArray(y)&&y.type==="element")){const w=y.children[0];w&&w.type==="text"&&(w.value=Jd(w.value))}Array.isArray(y)?d.push(...y):d.push(y)}}}return d}}function kk(e,t){e.position&&(t.position=cb(e))}function jk(e,t){let n=t;if(e&&e.data){const r=e.data.hName,l=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&s&&Object.assign(n.properties,Xs(s)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function Sk(e,t){const n=t.data||{},r="value"in t&&!(ja.call(n,"hProperties")||ja.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Nk(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Jd(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function ef(e,t){const n=wk(e,t),r=n.one(e,void 0),l=dk(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return l&&s.children.push({type:"text",value:`
`},l),s}function Ck(e,t){return e&&"run"in e?async function(n,r){const l=ef(n,{file:r,...t});await e.run(l,r)}:function(n,r){return ef(n,{file:r,...e||t})}}function tf(e){if(e)throw e}var gs=Object.prototype.hasOwnProperty,Ih=Object.prototype.toString,nf=Object.defineProperty,rf=Object.getOwnPropertyDescriptor,lf=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Ih.call(t)==="[object Array]"},sf=function(t){if(!t||Ih.call(t)!=="[object Object]")return!1;var n=gs.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&gs.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var l;for(l in t);return typeof l>"u"||gs.call(t,l)},of=function(t,n){nf&&n.name==="__proto__"?nf(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},af=function(t,n){if(n==="__proto__")if(gs.call(t,n)){if(rf)return rf(t,n).value}else return;return t[n]},Pk=function e(){var t,n,r,l,s,i,a=arguments[0],u=1,c=arguments.length,f=!1;for(typeof a=="boolean"&&(f=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(n in t)r=af(a,n),l=af(t,n),a!==l&&(f&&l&&(sf(l)||(s=lf(l)))?(s?(s=!1,i=r&&lf(r)?r:[]):i=r&&sf(r)?r:{},of(a,{name:n,newValue:e(f,i,l)})):typeof l<"u"&&of(a,{name:n,newValue:l}));return a};const lo=Ta(Pk);function Sa(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ek(){const e=[],t={run:n,use:r};return t;function n(...l){let s=-1;const i=l.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);a(null,...l);function a(u,...c){const f=e[++s];let d=-1;if(u){i(u);return}for(;++d<l.length;)(c[d]===null||c[d]===void 0)&&(c[d]=l[d]);l=c,f?Ak(f,a)(...c):i(null,...c)}}function r(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return e.push(l),t}}function Ak(e,t){let n;return r;function r(...i){const a=e.length>i.length;let u;a&&i.push(l);try{u=e.apply(this,i)}catch(c){const f=c;if(a&&n)throw f;return l(f)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,l):u instanceof Error?l(u):s(u))}function l(i,...a){n||(n=!0,t(i,...a))}function s(i){l(null,i)}}const Tt={basename:Tk,dirname:Lk,extname:Ik,join:Mk,sep:"/"};function Tk(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Dl(e);let n=0,r=-1,l=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;l--;)if(e.codePointAt(l)===47){if(s){n=l+1;break}}else r<0&&(s=!0,r=l+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let i=-1,a=t.length-1;for(;l--;)if(e.codePointAt(l)===47){if(s){n=l+1;break}}else i<0&&(s=!0,i=l+1),a>-1&&(e.codePointAt(l)===t.codePointAt(a--)?a<0&&(r=l):(a=-1,r=i));return n===r?r=i:r<0&&(r=e.length),e.slice(n,r)}function Lk(e){if(Dl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ik(e){Dl(e);let t=e.length,n=-1,r=0,l=-1,s=0,i;for(;t--;){const a=e.codePointAt(t);if(a===47){if(i){r=t+1;break}continue}n<0&&(i=!0,n=t+1),a===46?l<0?l=t:s!==1&&(s=1):l>-1&&(s=-1)}return l<0||n<0||s===0||s===1&&l===n-1&&l===r+1?"":e.slice(l,n)}function Mk(...e){let t=-1,n;for(;++t<e.length;)Dl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Dk(n)}function Dk(e){Dl(e);const t=e.codePointAt(0)===47;let n=Rk(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Rk(e,t){let n="",r=0,l=-1,s=0,i=-1,a,u;for(;++i<=e.length;){if(i<e.length)a=e.codePointAt(i);else{if(a===47)break;a=47}if(a===47){if(!(l===i-1||s===1))if(l!==i-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),l=i,s=0;continue}}else if(n.length>0){n="",r=0,l=i,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(l+1,i):n=e.slice(l+1,i),r=i-l-1;l=i,s=0}else a===46&&s>-1?s++:s=-1}return n}function Dl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const zk={cwd:_k};function _k(){return"/"}function Na(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Fk(e){if(typeof e=="string")e=new URL(e);else if(!Na(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ok(e)}function Ok(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const so=["history","path","basename","stem","extname","dirname"];class Mh{constructor(t){let n;t?Na(t)?n={path:t}:typeof t=="string"||$k(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":zk.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<so.length;){const s=so[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let l;for(l in n)so.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?Tt.basename(this.path):void 0}set basename(t){oo(t,"basename"),io(t,"basename"),this.path=Tt.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Tt.dirname(this.path):void 0}set dirname(t){uf(this.basename,"dirname"),this.path=Tt.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Tt.extname(this.path):void 0}set extname(t){if(io(t,"extname"),uf(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tt.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Na(t)&&(t=Fk(t)),oo(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Tt.basename(this.path,this.extname):void 0}set stem(t){oo(t,"stem"),io(t,"stem"),this.path=Tt.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const l=this.message(t,n,r);throw l.fatal=!0,l}info(t,n,r){const l=this.message(t,n,r);return l.fatal=void 0,l}message(t,n,r){const l=new Oe(t,n,r);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function io(e,t){if(e&&e.includes(Tt.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tt.sep+"`")}function oo(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function uf(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function $k(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Bk=function(e){const r=this.constructor.prototype,l=r[e],s=function(){return l.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Hk={}.hasOwnProperty;class qu extends Bk{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ek()}copy(){const t=new qu;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(lo(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(co("data",this.frozen),this.namespace[t]=n,this):Hk.call(this.namespace,t)&&this.namespace[t]||void 0:t?(co("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const l=n.call(t,...r);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ts(t),r=this.parser||this.Parser;return ao("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),ao("process",this.parser||this.Parser),uo("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(s,i){const a=ts(t),u=r.parse(a);r.run(u,a,function(f,d,p){if(f||!d||!p)return c(f);const m=d,y=r.stringify(m,p);Uk(y)?p.value=y:p.result=y,c(f,p)});function c(f,d){f||!d?i(f):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),ao("processSync",this.parser||this.Parser),uo("processSync",this.compiler||this.Compiler),this.process(t,l),df("processSync","process",n),r;function l(s,i){n=!0,tf(s),r=i}}run(t,n,r){cf(t),this.freeze();const l=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(i,a){const u=ts(n);l.run(t,u,c);function c(f,d,p){const m=d||t;f?a(f):i?i(m):r(void 0,m,p)}}}runSync(t,n){let r=!1,l;return this.run(t,n,s),df("runSync","run",r),l;function s(i,a){tf(i),l=a,r=!0}}stringify(t,n){this.freeze();const r=ts(n),l=this.compiler||this.Compiler;return uo("stringify",l),cf(t),l(t,r)}use(t,...n){const r=this.attachers,l=this.namespace;if(co("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):i(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(c){if(typeof c=="function")u(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[f,...d]=c;u(f,d)}else i(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function i(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(l.settings=lo(!0,l.settings,c.settings))}function a(c){let f=-1;if(c!=null)if(Array.isArray(c))for(;++f<c.length;){const d=c[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function u(c,f){let d=-1,p=-1;for(;++d<r.length;)if(r[d][0]===c){p=d;break}if(p===-1)r.push([c,...f]);else if(f.length>0){let[m,...y]=f;const w=r[p][1];Sa(w)&&Sa(m)&&(m=lo(!0,w,m)),r[p]=[c,m,...y]}}}}const Wk=new qu().freeze();function ao(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function uo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function co(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function cf(e){if(!Sa(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function df(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ts(e){return qk(e)?e:new Mh(e)}function qk(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Uk(e){return typeof e=="string"||Xk(e)}function Xk(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Vk="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ff=[],pf={allowDangerousHtml:!0},Qk=/^(https?|ircs?|mailto|xmpp)$/i,Gk=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function mf(e){const t=Kk(e),n=Yk(e);return Zk(t.runSync(t.parse(n),n),e)}function Kk(e){const t=e.rehypePlugins||ff,n=e.remarkPlugins||ff,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...pf}:pf;return Wk().use(Iw).use(n).use(Ck,r).use(t)}function Yk(e){const t=e.children||"",n=new Mh;return typeof t=="string"&&(n.value=t),n}function Zk(e,t){const n=t.allowedElements,r=t.allowElement,l=t.components,s=t.disallowedElements,i=t.skipHtml,a=t.unwrapDisallowed,u=t.urlTransform||Jk;for(const f of Gk)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Vk+f.id,void 0);return Wu(e,c),hb(e,{Fragment:o.Fragment,components:l,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function c(f,d,p){if(f.type==="raw"&&p&&typeof d=="number")return i?p.children.splice(d,1):p.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in to)if(Object.hasOwn(to,m)&&Object.hasOwn(f.properties,m)){const y=f.properties[m],w=to[m];(w===null||w.includes(f.tagName))&&(f.properties[m]=u(String(y||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,p)),m&&p&&typeof d=="number")return a&&f.children?p.children.splice(d,1,...f.children):p.children.splice(d,1),d}}}function Jk(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),l=e.indexOf("/");return t===-1||l!==-1&&t>l||n!==-1&&t>n||r!==-1&&t>r||Qk.test(e.slice(0,t))?e:""}function hf(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,l=n.indexOf(t);for(;l!==-1;)r++,l=n.indexOf(t,l+t.length);return r}function ej(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function tj(e,t,n){const l=ki((n||{}).ignore||[]),s=nj(t);let i=-1;for(;++i<s.length;)Lh(e,"text",a);function a(c,f){let d=-1,p;for(;++d<f.length;){const m=f[d],y=p?p.children:void 0;if(l(m,y?y.indexOf(m):void 0,p))return;p=m}if(p)return u(c,f)}function u(c,f){const d=f[f.length-1],p=s[i][0],m=s[i][1];let y=0;const E=d.children.indexOf(c);let h=!1,g=[];p.lastIndex=0;let v=p.exec(c.value);for(;v;){const C=v.index,A={index:v.index,input:v.input,stack:[...f,c]};let N=m(...v,A);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?p.lastIndex=C+1:(y!==C&&g.push({type:"text",value:c.value.slice(y,C)}),Array.isArray(N)?g.push(...N):N&&g.push(N),y=C+v[0].length,h=!0),!p.global)break;v=p.exec(c.value)}return h?(y<c.value.length&&g.push({type:"text",value:c.value.slice(y)}),d.children.splice(E,1,...g)):g=[c],E+g.length}}function nj(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const l=n[r];t.push([rj(l[0]),lj(l[1])])}return t}function rj(e){return typeof e=="string"?new RegExp(ej(e),"g"):e}function lj(e){return typeof e=="function"?e:function(){return e}}const fo="phrasing",po=["autolink","link","image","label"];function sj(){return{transforms:[fj],enter:{literalAutolink:oj,literalAutolinkEmail:mo,literalAutolinkHttp:mo,literalAutolinkWww:mo},exit:{literalAutolink:dj,literalAutolinkEmail:cj,literalAutolinkHttp:aj,literalAutolinkWww:uj}}}function ij(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:fo,notInConstruct:po},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:fo,notInConstruct:po},{character:":",before:"[ps]",after:"\\/",inConstruct:fo,notInConstruct:po}]}}function oj(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function mo(e){this.config.enter.autolinkProtocol.call(this,e)}function aj(e){this.config.exit.autolinkProtocol.call(this,e)}function uj(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function cj(e){this.config.exit.autolinkEmail.call(this,e)}function dj(e){this.exit(e)}function fj(e){tj(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,pj],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),mj]],{ignore:["link","linkReference"]})}function pj(e,t,n,r,l){let s="";if(!Dh(l)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!hj(n)))return!1;const i=gj(n+r);if(!i[0])return!1;const a={type:"link",title:null,url:s+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[a,{type:"text",value:i[1]}]:a}function mj(e,t,n,r){return!Dh(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function hj(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function gj(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const l=hf(e,"(");let s=hf(e,")");for(;r!==-1&&l>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Dh(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Fn(n)||vi(n))&&(!t||n!==47)}Rh.peek=Nj;function xj(){this.buffer()}function yj(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function vj(){this.buffer()}function bj(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function wj(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ct(this.sliceSerialize(e)).toLowerCase(),n.label=t}function kj(e){this.exit(e)}function jj(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ct(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Sj(e){this.exit(e)}function Nj(){return"["}function Rh(e,t,n,r){const l=n.createTracker(r);let s=l.move("[^");const i=n.enter("footnoteReference"),a=n.enter("reference");return s+=l.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),i(),s+=l.move("]"),s}function Cj(){return{enter:{gfmFootnoteCallString:xj,gfmFootnoteCall:yj,gfmFootnoteDefinitionLabelString:vj,gfmFootnoteDefinition:bj},exit:{gfmFootnoteCallString:wj,gfmFootnoteCall:kj,gfmFootnoteDefinitionLabelString:jj,gfmFootnoteDefinition:Sj}}}function Pj(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Rh},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,l,s,i){const a=s.createTracker(i);let u=a.move("[^");const c=s.enter("footnoteDefinition"),f=s.enter("label");return u+=a.move(s.safe(s.associationId(r),{before:u,after:"]"})),f(),u+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),u+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?zh:Ej))),c(),u}}function Ej(e,t,n){return t===0?e:zh(e,t,n)}function zh(e,t,n){return(n?"":"    ")+e}const Aj=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];_h.peek=Dj;function Tj(){return{canContainEols:["delete"],enter:{strikethrough:Ij},exit:{strikethrough:Mj}}}function Lj(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Aj}],handlers:{delete:_h}}}function Ij(e){this.enter({type:"delete",children:[]},e)}function Mj(e){this.exit(e)}function _h(e,t,n,r){const l=n.createTracker(r),s=n.enter("strikethrough");let i=l.move("~~");return i+=n.containerPhrasing(e,{...l.current(),before:i,after:"~"}),i+=l.move("~~"),s(),i}function Dj(){return"~"}function Rj(e){return e.length}function zj(e,t){const n=t||{},r=(n.align||[]).concat(),l=n.stringLength||Rj,s=[],i=[],a=[],u=[];let c=0,f=-1;for(;++f<e.length;){const w=[],E=[];let h=-1;for(e[f].length>c&&(c=e[f].length);++h<e[f].length;){const g=_j(e[f][h]);if(n.alignDelimiters!==!1){const v=l(g);E[h]=v,(u[h]===void 0||v>u[h])&&(u[h]=v)}w.push(g)}i[f]=w,a[f]=E}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)s[d]=gf(r[d]);else{const w=gf(r);for(;++d<c;)s[d]=w}d=-1;const p=[],m=[];for(;++d<c;){const w=s[d];let E="",h="";w===99?(E=":",h=":"):w===108?E=":":w===114&&(h=":");let g=n.alignDelimiters===!1?1:Math.max(1,u[d]-E.length-h.length);const v=E+"-".repeat(g)+h;n.alignDelimiters!==!1&&(g=E.length+g+h.length,g>u[d]&&(u[d]=g),m[d]=g),p[d]=v}i.splice(1,0,p),a.splice(1,0,m),f=-1;const y=[];for(;++f<i.length;){const w=i[f],E=a[f];d=-1;const h=[];for(;++d<c;){const g=w[d]||"";let v="",C="";if(n.alignDelimiters!==!1){const A=u[d]-(E[d]||0),N=s[d];N===114?v=" ".repeat(A):N===99?A%2?(v=" ".repeat(A/2+.5),C=" ".repeat(A/2-.5)):(v=" ".repeat(A/2),C=v):C=" ".repeat(A)}n.delimiterStart!==!1&&!d&&h.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&g==="")&&(n.delimiterStart!==!1||d)&&h.push(" "),n.alignDelimiters!==!1&&h.push(v),h.push(g),n.alignDelimiters!==!1&&h.push(C),n.padding!==!1&&h.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&h.push("|")}y.push(n.delimiterEnd===!1?h.join("").replace(/ +$/,""):h.join(""))}return y.join(`
`)}function _j(e){return e==null?"":String(e)}function gf(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Fj(e,t,n,r){const l=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const i=n.indentLines(n.containerFlow(e,s.current()),Oj);return l(),i}function Oj(e,t,n){return">"+(n?"":" ")+e}function $j(e,t){return xf(e,t.inConstruct,!0)&&!xf(e,t.notInConstruct,!1)}function xf(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function yf(e,t,n,r){let l=-1;for(;++l<n.unsafe.length;)if(n.unsafe[l].character===`
`&&$j(n.stack,n.unsafe[l]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Bj(e,t){const n=String(e);let r=n.indexOf(t),l=r,s=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===l?++s>i&&(i=s):s=1,l=r+t.length,r=n.indexOf(t,l);return i}function Hj(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Wj(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function qj(e,t,n,r){const l=Wj(n),s=e.value||"",i=l==="`"?"GraveAccent":"Tilde";if(Hj(e,n)){const d=n.enter("codeIndented"),p=n.indentLines(s,Uj);return d(),p}const a=n.createTracker(r),u=l.repeat(Math.max(Bj(s,l)+1,3)),c=n.enter("codeFenced");let f=a.move(u);if(e.lang){const d=n.enter(`codeFencedLang${i}`);f+=a.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${i}`);f+=a.move(" "),f+=a.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...a.current()})),d()}return f+=a.move(`
`),s&&(f+=a.move(s+`
`)),f+=a.move(u),c(),f}function Uj(e,t,n){return(n?"":"    ")+e}function Uu(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Xj(e,t,n,r){const l=Uu(n),s=l==='"'?"Quote":"Apostrophe",i=n.enter("definition");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),{before:c,after:"]",...u.current()})),c+=u.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(a=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...u.current()}))),a(),e.title&&(a=n.enter(`title${s}`),c+=u.move(" "+l),c+=u.move(n.safe(e.title,{before:c,after:l,...u.current()})),c+=u.move(l),a()),i(),c}function Vj(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Sl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Vs(e,t,n){const r=wr(e),l=wr(t);return r===void 0?l===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Fh.peek=Qj;function Fh(e,t,n,r){const l=Vj(n),s=n.enter("emphasis"),i=n.createTracker(r),a=i.move(l);let u=i.move(n.containerPhrasing(e,{after:l,before:a,...i.current()}));const c=u.charCodeAt(0),f=Vs(r.before.charCodeAt(r.before.length-1),c,l);f.inside&&(u=Sl(c)+u.slice(1));const d=u.charCodeAt(u.length-1),p=Vs(r.after.charCodeAt(0),d,l);p.inside&&(u=u.slice(0,-1)+Sl(d));const m=i.move(l);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+u+m}function Qj(e,t,n){return n.options.emphasis||"*"}function Gj(e,t){let n=!1;return Wu(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,ka}),!!((!e.depth||e.depth<3)&&zu(e)&&(t.options.setext||n))}function Kj(e,t,n,r){const l=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(Gj(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),p=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),f(),p+`
`+(l===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const i="#".repeat(l),a=n.enter("headingAtx"),u=n.enter("phrasing");s.move(i+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Sl(c.charCodeAt(0))+c.slice(1)),c=c?i+" "+c:i,n.options.closeAtx&&(c+=" "+i),u(),a(),c}Oh.peek=Yj;function Oh(e){return e.value||""}function Yj(){return"<"}$h.peek=Zj;function $h(e,t,n,r){const l=Uu(n),s=l==='"'?"Quote":"Apostrophe",i=n.enter("image");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("![");return c+=u.move(n.safe(e.alt,{before:c,after:"]",...u.current()})),c+=u.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(a=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":")",...u.current()}))),a(),e.title&&(a=n.enter(`title${s}`),c+=u.move(" "+l),c+=u.move(n.safe(e.title,{before:c,after:l,...u.current()})),c+=u.move(l),a()),c+=u.move(")"),i(),c}function Zj(){return"!"}Bh.peek=Jj;function Bh(e,t,n,r){const l=e.referenceType,s=n.enter("imageReference");let i=n.enter("label");const a=n.createTracker(r);let u=a.move("![");const c=n.safe(e.alt,{before:u,after:"]",...a.current()});u+=a.move(c+"]["),i();const f=n.stack;n.stack=[],i=n.enter("reference");const d=n.safe(n.associationId(e),{before:u,after:"]",...a.current()});return i(),n.stack=f,s(),l==="full"||!c||c!==d?u+=a.move(d+"]"):l==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function Jj(){return"!"}Hh.peek=eS;function Hh(e,t,n){let r=e.value||"",l="`",s=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(r);)l+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const i=n.unsafe[s],a=n.compilePattern(i);let u;if(i.atBreak)for(;u=a.exec(r);){let c=u.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(u.index+1)}}return l+r+l}function eS(){return"`"}function Wh(e,t){const n=zu(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}qh.peek=tS;function qh(e,t,n,r){const l=Uu(n),s=l==='"'?"Quote":"Apostrophe",i=n.createTracker(r);let a,u;if(Wh(e,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let d=i.move("<");return d+=i.move(n.containerPhrasing(e,{before:d,after:">",...i.current()})),d+=i.move(">"),a(),n.stack=f,d}a=n.enter("link"),u=n.enter("label");let c=i.move("[");return c+=i.move(n.containerPhrasing(e,{before:c,after:"](",...i.current()})),c+=i.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=i.move("<"),c+=i.move(n.safe(e.url,{before:c,after:">",...i.current()})),c+=i.move(">")):(u=n.enter("destinationRaw"),c+=i.move(n.safe(e.url,{before:c,after:e.title?" ":")",...i.current()}))),u(),e.title&&(u=n.enter(`title${s}`),c+=i.move(" "+l),c+=i.move(n.safe(e.title,{before:c,after:l,...i.current()})),c+=i.move(l),u()),c+=i.move(")"),a(),c}function tS(e,t,n){return Wh(e,n)?"<":"["}Uh.peek=nS;function Uh(e,t,n,r){const l=e.referenceType,s=n.enter("linkReference");let i=n.enter("label");const a=n.createTracker(r);let u=a.move("[");const c=n.containerPhrasing(e,{before:u,after:"]",...a.current()});u+=a.move(c+"]["),i();const f=n.stack;n.stack=[],i=n.enter("reference");const d=n.safe(n.associationId(e),{before:u,after:"]",...a.current()});return i(),n.stack=f,s(),l==="full"||!c||c!==d?u+=a.move(d+"]"):l==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function nS(){return"["}function Xu(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function rS(e){const t=Xu(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function lS(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Xh(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function sS(e,t,n,r){const l=n.enter("list"),s=n.bulletCurrent;let i=e.ordered?lS(n):Xu(n);const a=e.ordered?i==="."?")":".":rS(n);let u=t&&n.bulletLastUsed?i===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((i==="*"||i==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),Xh(n)===i&&f){let d=-1;for(;++d<e.children.length;){const p=e.children[d];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(i=a),n.bulletCurrent=i;const c=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=s,l(),c}function iS(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function oS(e,t,n,r){const l=iS(n);let s=n.bulletCurrent||Xu(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let i=s.length+1;(l==="tab"||l==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(i=Math.ceil(i/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(i-s.length)),a.shift(i);const u=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),f);return u(),c;function f(d,p,m){return p?(m?"":" ".repeat(i))+d:(m?s:s+" ".repeat(i-s.length))+d}}function aS(e,t,n,r){const l=n.enter("paragraph"),s=n.enter("phrasing"),i=n.containerPhrasing(e,r);return s(),l(),i}const uS=ki(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function cS(e,t,n,r){return(e.children.some(function(i){return uS(i)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function dS(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Vh.peek=fS;function Vh(e,t,n,r){const l=dS(n),s=n.enter("strong"),i=n.createTracker(r),a=i.move(l+l);let u=i.move(n.containerPhrasing(e,{after:l,before:a,...i.current()}));const c=u.charCodeAt(0),f=Vs(r.before.charCodeAt(r.before.length-1),c,l);f.inside&&(u=Sl(c)+u.slice(1));const d=u.charCodeAt(u.length-1),p=Vs(r.after.charCodeAt(0),d,l);p.inside&&(u=u.slice(0,-1)+Sl(d));const m=i.move(l+l);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+u+m}function fS(e,t,n){return n.options.strong||"*"}function pS(e,t,n,r){return n.safe(e.value,r)}function mS(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function hS(e,t,n){const r=(Xh(n)+(n.options.ruleSpaces?" ":"")).repeat(mS(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Qh={blockquote:Fj,break:yf,code:qj,definition:Xj,emphasis:Fh,hardBreak:yf,heading:Kj,html:Oh,image:$h,imageReference:Bh,inlineCode:Hh,link:qh,linkReference:Uh,list:sS,listItem:oS,paragraph:aS,root:cS,strong:Vh,text:pS,thematicBreak:hS};function gS(){return{enter:{table:xS,tableData:vf,tableHeader:vf,tableRow:vS},exit:{codeText:bS,table:yS,tableData:ho,tableHeader:ho,tableRow:ho}}}function xS(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function yS(e){this.exit(e),this.data.inTable=void 0}function vS(e){this.enter({type:"tableRow",children:[]},e)}function ho(e){this.exit(e)}function vf(e){this.enter({type:"tableCell",children:[]},e)}function bS(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,wS));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function wS(e,t){return t==="|"?t:e}function kS(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,l=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:i,tableCell:u,tableRow:a}};function i(m,y,w,E){return c(f(m,w,E),m.align)}function a(m,y,w,E){const h=d(m,w,E),g=c([h]);return g.slice(0,g.indexOf(`
`))}function u(m,y,w,E){const h=w.enter("tableCell"),g=w.enter("phrasing"),v=w.containerPhrasing(m,{...E,before:s,after:s});return g(),h(),v}function c(m,y){return zj(m,{align:y,alignDelimiters:r,padding:n,stringLength:l})}function f(m,y,w){const E=m.children;let h=-1;const g=[],v=y.enter("table");for(;++h<E.length;)g[h]=d(E[h],y,w);return v(),g}function d(m,y,w){const E=m.children;let h=-1;const g=[],v=y.enter("tableRow");for(;++h<E.length;)g[h]=u(E[h],m,y,w);return v(),g}function p(m,y,w){let E=Qh.inlineCode(m,y,w);return w.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function jS(){return{exit:{taskListCheckValueChecked:bf,taskListCheckValueUnchecked:bf,paragraph:NS}}}function SS(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:CS}}}function bf(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function NS(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const l=t.children;let s=-1,i;for(;++s<l.length;){const a=l[s];if(a.type==="paragraph"){i=a;break}}i===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function CS(e,t,n,r){const l=e.children[0],s=typeof e.checked=="boolean"&&l&&l.type==="paragraph",i="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(i);let u=Qh.listItem(e,t,n,{...r,...a.current()});return s&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),u;function c(f){return f+i}}function PS(){return[sj(),Cj(),Tj(),gS(),jS()]}function ES(e){return{extensions:[ij(),Pj(e),Lj(),kS(e),SS()]}}const AS={tokenize:RS,partial:!0},Gh={tokenize:zS,partial:!0},Kh={tokenize:_S,partial:!0},Yh={tokenize:FS,partial:!0},TS={tokenize:OS,partial:!0},Zh={name:"wwwAutolink",tokenize:MS,previous:eg},Jh={name:"protocolAutolink",tokenize:DS,previous:tg},Kt={name:"emailAutolink",tokenize:IS,previous:ng},Dt={};function LS(){return{text:Dt}}let jn=48;for(;jn<123;)Dt[jn]=Kt,jn++,jn===58?jn=65:jn===91&&(jn=97);Dt[43]=Kt;Dt[45]=Kt;Dt[46]=Kt;Dt[95]=Kt;Dt[72]=[Kt,Jh];Dt[104]=[Kt,Jh];Dt[87]=[Kt,Zh];Dt[119]=[Kt,Zh];function IS(e,t,n){const r=this;let l,s;return i;function i(d){return!Ca(d)||!ng.call(r,r.previous)||Vu(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(d))}function a(d){return Ca(d)?(e.consume(d),a):d===64?(e.consume(d),u):n(d)}function u(d){return d===46?e.check(TS,f,c)(d):d===45||d===95||_e(d)?(s=!0,e.consume(d),u):f(d)}function c(d){return e.consume(d),l=!0,u}function f(d){return s&&l&&Be(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function MS(e,t,n){const r=this;return l;function l(i){return i!==87&&i!==119||!eg.call(r,r.previous)||Vu(r.events)?n(i):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(AS,e.attempt(Gh,e.attempt(Kh,s),n),n)(i))}function s(i){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(i)}}function DS(e,t,n){const r=this;let l="",s=!1;return i;function i(d){return(d===72||d===104)&&tg.call(r,r.previous)&&!Vu(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),l+=String.fromCodePoint(d),e.consume(d),a):n(d)}function a(d){if(Be(d)&&l.length<5)return l+=String.fromCodePoint(d),e.consume(d),a;if(d===58){const p=l.toLowerCase();if(p==="http"||p==="https")return e.consume(d),u}return n(d)}function u(d){return d===47?(e.consume(d),s?c:(s=!0,u)):n(d)}function c(d){return d===null||qs(d)||de(d)||Fn(d)||vi(d)?n(d):e.attempt(Gh,e.attempt(Kh,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function RS(e,t,n){let r=0;return l;function l(i){return(i===87||i===119)&&r<3?(r++,e.consume(i),l):i===46&&r===3?(e.consume(i),s):n(i)}function s(i){return i===null?n(i):t(i)}}function zS(e,t,n){let r,l,s;return i;function i(c){return c===46||c===95?e.check(Yh,u,a)(c):c===null||de(c)||Fn(c)||c!==45&&vi(c)?u(c):(s=!0,e.consume(c),i)}function a(c){return c===95?r=!0:(l=r,r=void 0),e.consume(c),i}function u(c){return l||r||!s?n(c):t(c)}}function _S(e,t){let n=0,r=0;return l;function l(i){return i===40?(n++,e.consume(i),l):i===41&&r<n?s(i):i===33||i===34||i===38||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===60||i===63||i===93||i===95||i===126?e.check(Yh,t,s)(i):i===null||de(i)||Fn(i)?t(i):(e.consume(i),l)}function s(i){return i===41&&r++,e.consume(i),l}}function FS(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),l):a===60||a===null||de(a)||Fn(a)?t(a):n(a)}function l(a){return a===null||a===40||a===91||de(a)||Fn(a)?t(a):r(a)}function s(a){return Be(a)?i(a):n(a)}function i(a){return a===59?(e.consume(a),r):Be(a)?(e.consume(a),i):n(a)}}function OS(e,t,n){return r;function r(s){return e.consume(s),l}function l(s){return _e(s)?n(s):t(s)}}function eg(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||de(e)}function tg(e){return!Be(e)}function ng(e){return!(e===47||Ca(e))}function Ca(e){return e===43||e===45||e===46||e===95||_e(e)}function Vu(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const $S={tokenize:QS,partial:!0};function BS(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:US,continuation:{tokenize:XS},exit:VS}},text:{91:{name:"gfmFootnoteCall",tokenize:qS},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:HS,resolveTo:WS}}}}function HS(e,t,n){const r=this;let l=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;l--;){const u=r.events[l][1];if(u.type==="labelImage"){i=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return a;function a(u){if(!i||!i._balanced)return n(u);const c=Ct(r.sliceSerialize({start:i.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function WS(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},e[e.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",l,t],["exit",l,t],["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function qS(e,t,n){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,i;return a;function a(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),u}function u(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(d){if(s>999||d===93&&!i||d===null||d===91||de(d))return n(d);if(d===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return l.includes(Ct(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return de(d)||(i=!0),s++,e.consume(d),d===92?f:c}function f(d){return d===91||d===92||d===93?(e.consume(d),s++,c):c(d)}}function US(e,t,n){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,i=0,a;return u;function u(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(y)}function f(y){if(i>999||y===93&&!a||y===null||y===91||de(y))return n(y);if(y===93){e.exit("chunkString");const w=e.exit("gfmFootnoteDefinitionLabelString");return s=Ct(r.sliceSerialize(w)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return de(y)||(a=!0),i++,e.consume(y),y===92?d:f}function d(y){return y===91||y===92||y===93?(e.consume(y),i++,f):f(y)}function p(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),l.includes(s)||l.push(s),re(e,m,"gfmFootnoteDefinitionWhitespace")):n(y)}function m(y){return t(y)}}function XS(e,t,n){return e.check(Ml,t,e.attempt($S,t,n))}function VS(e){e.exit("gfmFootnoteDefinition")}function QS(e,t,n){const r=this;return re(e,l,"gfmFootnoteDefinitionIndent",5);function l(s){const i=r.events[r.events.length-1];return i&&i[1].type==="gfmFootnoteDefinitionIndent"&&i[2].sliceSerialize(i[1],!0).length===4?t(s):n(s)}}function GS(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:l};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function l(i,a){let u=-1;for(;++u<i.length;)if(i[u][0]==="enter"&&i[u][1].type==="strikethroughSequenceTemporary"&&i[u][1]._close){let c=u;for(;c--;)if(i[c][0]==="exit"&&i[c][1].type==="strikethroughSequenceTemporary"&&i[c][1]._open&&i[u][1].end.offset-i[u][1].start.offset===i[c][1].end.offset-i[c][1].start.offset){i[u][1].type="strikethroughSequence",i[c][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},i[c][1].start),end:Object.assign({},i[u][1].end)},d={type:"strikethroughText",start:Object.assign({},i[c][1].end),end:Object.assign({},i[u][1].start)},p=[["enter",f,a],["enter",i[c][1],a],["exit",i[c][1],a],["enter",d,a]],m=a.parser.constructs.insideSpan.null;m&&st(p,p.length,0,bi(m,i.slice(c+1,u),a)),st(p,p.length,0,[["exit",d,a],["enter",i[u][1],a],["exit",i[u][1],a],["exit",f,a]]),st(i,c-1,u-c+3,p),u=c+p.length-2;break}}for(u=-1;++u<i.length;)i[u][1].type==="strikethroughSequenceTemporary"&&(i[u][1].type="data");return i}function s(i,a,u){const c=this.previous,f=this.events;let d=0;return p;function p(y){return c===126&&f[f.length-1][1].type!=="characterEscape"?u(y):(i.enter("strikethroughSequenceTemporary"),m(y))}function m(y){const w=wr(c);if(y===126)return d>1?u(y):(i.consume(y),d++,m);if(d<2&&!n)return u(y);const E=i.exit("strikethroughSequenceTemporary"),h=wr(y);return E._open=!h||h===2&&!!w,E._close=!w||w===2&&!!h,a(y)}}}class KS{constructor(){this.map=[]}add(t,n,r){YS(this,t,n,r)}consume(t){if(this.map.sort(function(s,i){return s[0]-i[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let l=r.pop();for(;l;){for(const s of l)t.push(s);l=r.pop()}this.map.length=0}}function YS(e,t,n,r){let l=0;if(!(n===0&&r.length===0)){for(;l<e.map.length;){if(e.map[l][0]===t){e.map[l][1]+=n,e.map[l][2].push(...r);return}l+=1}e.map.push([t,n,r])}}function ZS(e,t){let n=!1;const r=[];for(;t<e.length;){const l=e[t];if(n){if(l[0]==="enter")l[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function JS(){return{flow:{null:{name:"table",tokenize:eN,resolveAll:tN}}}}function eN(e,t,n){const r=this;let l=0,s=0,i;return a;function a(x){let k=r.events.length-1;for(;k>-1;){const D=r.events[k][1].type;if(D==="lineEnding"||D==="linePrefix")k--;else break}const j=k>-1?r.events[k][1].type:null,L=j==="tableHead"||j==="tableRow"?N:u;return L===N&&r.parser.lazy[r.now().line]?n(x):L(x)}function u(x){return e.enter("tableHead"),e.enter("tableRow"),c(x)}function c(x){return x===124||(i=!0,s+=1),f(x)}function f(x){return x===null?n(x):Y(x)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),m):n(x):ee(x)?re(e,f,"whitespace")(x):(s+=1,i&&(i=!1,l+=1),x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),i=!0,f):(e.enter("data"),d(x)))}function d(x){return x===null||x===124||de(x)?(e.exit("data"),f(x)):(e.consume(x),x===92?p:d)}function p(x){return x===92||x===124?(e.consume(x),d):d(x)}function m(x){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(x):(e.enter("tableDelimiterRow"),i=!1,ee(x)?re(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):y(x))}function y(x){return x===45||x===58?E(x):x===124?(i=!0,e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),w):A(x)}function w(x){return ee(x)?re(e,E,"whitespace")(x):E(x)}function E(x){return x===58?(s+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),h):x===45?(s+=1,h(x)):x===null||Y(x)?C(x):A(x)}function h(x){return x===45?(e.enter("tableDelimiterFiller"),g(x)):A(x)}function g(x){return x===45?(e.consume(x),g):x===58?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(x))}function v(x){return ee(x)?re(e,C,"whitespace")(x):C(x)}function C(x){return x===124?y(x):x===null||Y(x)?!i||l!==s?A(x):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(x)):A(x)}function A(x){return n(x)}function N(x){return e.enter("tableRow"),R(x)}function R(x){return x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),R):x===null||Y(x)?(e.exit("tableRow"),t(x)):ee(x)?re(e,R,"whitespace")(x):(e.enter("data"),O(x))}function O(x){return x===null||x===124||de(x)?(e.exit("data"),R(x)):(e.consume(x),x===92?P:O)}function P(x){return x===92||x===124?(e.consume(x),O):O(x)}}function tN(e,t){let n=-1,r=!0,l=0,s=[0,0,0,0],i=[0,0,0,0],a=!1,u=0,c,f,d;const p=new KS;for(;++n<e.length;){const m=e[n],y=m[1];m[0]==="enter"?y.type==="tableHead"?(a=!1,u!==0&&(wf(p,t,u,c,f),f=void 0,u=0),c={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",c,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],i=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},p.add(n,0,[["enter",f,t]])),l=y.type==="tableDelimiterRow"?2:f?3:1):l&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,i[2]===0&&(s[1]!==0&&(i[0]=i[1],d=ns(p,t,s,l,void 0,d),s=[0,0,0,0]),i[2]=n)):y.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(i[0]=i[1],d=ns(p,t,s,l,void 0,d)),s=i,i=[s[1],n,0,0])):y.type==="tableHead"?(a=!0,u=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(u=n,s[1]!==0?(i[0]=i[1],d=ns(p,t,s,l,n,d)):i[1]!==0&&(d=ns(p,t,i,l,n,d)),l=0):l&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(i[3]=n)}for(u!==0&&wf(p,t,u,c,f),p.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=ZS(t.events,n))}return e}function ns(e,t,n,r,l,s){const i=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Un(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const u=Un(t.events,n[1]);if(s={type:i,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const c=Un(t.events,n[2]),f=Un(t.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const p=t.events[n[2]],m=t.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,w=n[3]-n[2]-1;e.add(y,w,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return l!==void 0&&(s.end=Object.assign({},Un(t.events,l)),e.add(l,0,[["exit",s,t]]),s=void 0),s}function wf(e,t,n,r,l){const s=[],i=Un(t.events,n);l&&(l.end=Object.assign({},i),s.push(["exit",l,t])),r.end=Object.assign({},i),s.push(["exit",r,t]),e.add(n+1,0,s)}function Un(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const nN={name:"tasklistCheck",tokenize:lN};function rN(){return{text:{91:nN}}}function lN(e,t,n){const r=this;return l;function l(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),s)}function s(u){return de(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),i):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),i):n(u)}function i(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(u)}function a(u){return Y(u)?t(u):ee(u)?e.check({tokenize:sN},t,n)(u):n(u)}}function sN(e,t,n){return re(e,r,"whitespace");function r(l){return l===null?n(l):t(l)}}function iN(e){return fh([LS(),BS(),GS(e),JS(),rN()])}const oN={};function kf(e){const t=this,n=e||oN,r=t.data(),l=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),i=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);l.push(iN(n)),s.push(PS()),i.push(ES(n))}const aN="https://api.github.com/repos/BigScaryGames/ExceedV/contents",rg="https://raw.githubusercontent.com/BigScaryGames/ExceedV/main",Qu="Ruleset/Core Rules",lg=24*60*60*1e3,Gu="exceed_rules_",Ku="exceed_rules_meta",Pa="exceed_rules_filelist";function sg(){const e=localStorage.getItem(Ku);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function uN(e,t){const n=sg()||{lastFetch:0,files:{}};n.files[e]=t,n.lastFetch=Date.now(),localStorage.setItem(Ku,JSON.stringify(n))}function Ea(e){const t=Gu+e,n=localStorage.getItem(t);if(!n)return null;try{const r=JSON.parse(n);return Date.now()-r.timestamp<lg?r:null}catch{return null}}function ig(e,t,n){const r=Gu+e,l={content:t,timestamp:Date.now(),url:n};localStorage.setItem(r,JSON.stringify(l)),uN(e,l.timestamp)}async function jf(e=!1){if(!e){const s=localStorage.getItem(Pa);if(s)try{const i=JSON.parse(s);if(Date.now()-i.timestamp<lg)return i.files}catch{}}const t=`${aN}/${Qu}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file list: ${n.statusText}`);const l=(await n.json()).filter(s=>s.type==="file"&&s.name.endsWith(".md")).map(s=>({name:s.name,path:s.path,download_url:s.download_url})).sort((s,i)=>s.name.localeCompare(i.name,void 0,{numeric:!0}));return localStorage.setItem(Pa,JSON.stringify({files:l,timestamp:Date.now()})),l}async function cN(e,t=!1){if(!t){const n=Ea(e);if(n)return{content:n.content,cached:!0,timestamp:n.timestamp}}try{const n=`${rg}/${Qu}/${encodeURIComponent(e)}`,r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch ${e}: ${r.statusText}`);const l=await r.text();return ig(e,l,n),{content:l,cached:!1,timestamp:Date.now()}}catch(n){const r=Ea(e);if(r)return console.warn(`Using stale cache for ${e}:`,n),{content:r.content,cached:!0,timestamp:r.timestamp};throw n}}function dN(){const e=sg();e&&Object.keys(e.files).forEach(t=>{const n=Gu+t;localStorage.removeItem(n)}),localStorage.removeItem(Ku),localStorage.removeItem(Pa)}async function fN(e){const t=e.endsWith(".md")?e:`${e}.md`,n=`embed_${t}`,r=Ea(n);if(r)return r.content;const l=`${rg}/${Qu}/${encodeURIComponent(t).replace(/%2F/g,"/")}`;try{const s=await fetch(l);if(!s.ok)return console.warn(`Failed to fetch embedded file ${t}: ${s.statusText}`),`> *[Could not load: ${e}]*`;const i=await s.text();return ig(n,i,l),i}catch(s){return console.warn(`Error fetching embedded file ${t}:`,s),`> *[Could not load: ${e}]*`}}async function og(e,t=3,n=0){if(n>=t)return e;const r=/!\[\[([^\]]+)\]\]/g,l=[...e.matchAll(r)];if(l.length===0)return e;const s=l.map(async u=>{const c=u[1],f=await fN(c),d=await og(f,t,n+1);return{original:u[0],resolved:d}}),i=await Promise.all(s);let a=e;for(const{original:u,resolved:c}of i)a=a.replace(u,c);return a}function pN(e){return e.replace(/\[\[([^\]|#]+)(?:#[^\]|]*)?(?:\|([^\]]+))?\]\]/g,(t,n,r)=>{const l=r||n,s=n.trim();return`[${l}](#rule:${encodeURIComponent(s)})`})}function mN(e){const t=Date.now()-e,n=Math.floor(t/6e4),r=Math.floor(n/60),l=Math.floor(r/24);return l>0?`${l}d ago`:r>0?`${r}h ago`:n>0?`${n}m ago`:"Just now"}const hN=()=>{const[e,t]=I.useState([]),[n,r]=I.useState(null),[l,s]=I.useState(""),[i,a]=I.useState(!0),[u,c]=I.useState(!1),[f,d]=I.useState(null),[p,m]=I.useState(null),[y,w]=I.useState(!1),[E,h]=I.useState(new Set);I.useEffect(()=>{g()},[]);const g=async(k=!1)=>{a(!0),d(null);try{const j=await jf(k);t(j)}catch(j){d(`Failed to load rules list: ${j instanceof Error?j.message:"Unknown error"}`)}finally{a(!1)}},v=async(k,j=!1)=>{r(k),a(!0),d(null);try{const L=await cN(k.name,j),D=await og(L.content),T=pN(D);s(T),m(L.timestamp),w(L.cached)}catch(L){d(`Failed to load rule: ${L instanceof Error?L.message:"Unknown error"}`),s("")}finally{a(!1)}},C=async k=>{if(k.startsWith("#rule:")){const j=decodeURIComponent(k.replace("#rule:",""));console.log("Navigating to rule:",j);let L=e;L.length===0&&(console.log("Files not loaded, fetching..."),L=await jf(),t(L)),console.log("Available files:",L.map(T=>T.name));let D=L.find(T=>T.name.replace(".md","")===j||T.name===j||T.name===`${j}.md`);console.log("Exact match result:",D),D||(D=L.find(T=>T.name.replace(".md","").endsWith(j)||T.name.replace(".md","").toLowerCase().includes(j.toLowerCase())),console.log("Fuzzy match result:",D)),D?(console.log("Loading file:",D.name),v(D)):(console.warn(`Rule not found: ${j}`),console.warn("Searched in files:",L.map(T=>T.name)))}},A=({href:k,children:j})=>k!=null&&k.startsWith("#rule:")?o.jsx("button",{onClick:()=>C(k),className:"text-blue-400 hover:text-blue-300 underline cursor-pointer",children:j}):o.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:j}),N=async()=>{c(!0);try{dN(),await g(!0),n&&await v(n,!0)}catch(k){d(`Refresh failed: ${k instanceof Error?k.message:"Unknown error"}`)}finally{c(!1)}},R=k=>k.replace(".md",""),O=I.useMemo(()=>{if(!l)return[];const k=l.split(`
`),j=[];let L=null,D=null,T=[];const $=()=>{const z=T.join(`
`).trim();return T=[],z};for(const z of k){const M=z.match(/^(#{1,4})\s+(.+)$/);if(M){const b=M[1].length,_=M[2],B=`${_.toLowerCase().replace(/[^a-z0-9]+/g,"-")}-${j.length}`;if(b<=2)D?D.content=$():L&&(L.content=$()),L&&j.push(L),L={id:B,title:_,content:"",level:2,children:[]},D=null;else if(b===3&&L)D?D.content=$():L.content=$(),D={id:B,title:_,content:"",level:3,children:[]},L.children.push(D);else if(b===4&&D){const S=$();D.children.length===0?D.content=S:D.children.length>0&&(D.children[D.children.length-1].content=S);const G={id:B,title:_,content:"",level:4,children:[]};D.children.push(G)}else T.push(z)}else T.push(z)}const V=$();return D?D.children.length>0?D.children[D.children.length-1].content=V:D.content=V:L&&(L.content=V),L&&j.push(L),j.length>0&&E.size===0&&h(new Set([j[0].id])),j},[l]),P=k=>{h(j=>{const L=new Set(j);return L.has(k)?L.delete(k):L.add(k),L})},x=(k,j=0)=>{const L=E.has(k.id),D=k.content.length>0,T=k.children.length>0,$=j>0?"ml-4":"";return o.jsxs("div",{className:`border border-slate-700 rounded-lg overflow-hidden ${$} ${j>0?"mt-2":""}`,children:[o.jsxs("button",{onClick:()=>P(k.id),className:`w-full flex items-center justify-between p-3 hover:bg-slate-700 transition-colors text-left ${j===0?"bg-slate-750":"bg-slate-800"}`,children:[o.jsx("h2",{className:`font-semibold text-white ${j===0?"text-lg":j===1?"text-base":"text-sm"}`,children:k.title}),(D||T)&&(L?o.jsx(Nr,{size:18,className:"text-slate-400 flex-shrink-0"}):o.jsx(Tl,{size:18,className:"text-slate-400 flex-shrink-0"}))]}),L&&(D||T)&&o.jsxs("div",{className:`bg-slate-800 border-t border-slate-700 ${D?"p-4":"p-2"}`,children:[D&&o.jsx("div",{className:"prose prose-invert prose-slate max-w-none text-left prose-sm",children:o.jsx(mf,{remarkPlugins:[kf],components:{a:A},children:k.content})}),T&&o.jsx("div",{className:D?"mt-3":"",children:k.children.map(V=>x(V,j+1))})]})]},k.id)};return o.jsxs("div",{className:"p-4 h-screen flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Rules"}),o.jsx("button",{onClick:N,disabled:u,className:`p-2 rounded-lg transition-colors ${u?"bg-slate-600 cursor-not-allowed":"bg-slate-700 hover:bg-slate-600"}`,title:"Refresh rules from GitHub",children:o.jsx(Om,{size:20,className:`text-white ${u?"animate-spin":""}`})})]}),f&&o.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded-lg p-3 mb-4",children:o.jsx("p",{className:"text-red-200 text-sm",children:f})}),n&&p&&o.jsxs("div",{className:"text-xs text-slate-400 mb-2",children:[y?"Cached":"Fresh","  Last updated: ",mN(p)]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Rule"}),i&&!n?o.jsx("div",{className:"bg-slate-800 rounded-lg p-3 text-slate-400 text-center",children:"Loading rules..."}):e.length===0?o.jsx("div",{className:"bg-slate-800 rounded-lg p-3 text-slate-400 text-center",children:"No rules found"}):o.jsxs("select",{value:(n==null?void 0:n.name)||"",onChange:k=>{const j=e.find(L=>L.name===k.target.value);j&&v(j)},className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:[o.jsx("option",{value:"",children:"-- Choose a rule --"}),e.map(k=>o.jsx("option",{value:k.name,children:R(k.name)},k.name))]})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-slate-800 rounded-lg p-6 overflow-y-auto",children:n?i?o.jsx("div",{className:"text-center text-slate-400 py-16",children:"Loading rule content..."}):O.length>0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:R(n.name)}),O.map(k=>x(k,0))]}):l?o.jsx("div",{className:"prose prose-invert prose-slate max-w-none text-left",children:o.jsx(mf,{remarkPlugins:[kf],components:{a:A},children:l})}):null:o.jsxs("div",{className:"text-center text-slate-400 py-16",children:[o.jsx("p",{className:"text-lg mb-2",children:"Select a rule to view"}),o.jsx("p",{className:"text-sm",children:"Choose from the dropdown above"})]})})})]})},gN=({isOpen:e,onClose:t,characterName:n,onBackToLanding:r,onRename:l,onExport:s,onViewRules:i})=>{const a=u=>{u(),t()};return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:t}),o.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-slate-800 z-50 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,children:[o.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-bold text-white truncate",children:n}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:o.jsx(Gt,{size:24})})]}),o.jsxs("nav",{className:"p-2",children:[o.jsxs("button",{onClick:()=>a(r),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(ty,{size:20}),o.jsx("span",{children:"Back to Landing"})]}),o.jsxs("button",{onClick:()=>a(l),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(ry,{size:20}),o.jsx("span",{children:"Rename Character"})]}),o.jsxs("button",{onClick:()=>a(s),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(G0,{size:20}),o.jsx("span",{children:"Export Character"})]}),o.jsxs("button",{onClick:()=>a(i),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(_n,{size:20}),o.jsx("span",{children:"View Rules"})]})]})]})]})},xN=({isOpen:e,onClose:t,currentName:n,onRename:r})=>{const[l,s]=I.useState(n);if(I.useEffect(()=>{e&&s(n)},[e,n]),!e)return null;const i=()=>{const u=l.trim();if(!u){alert("Character name cannot be empty");return}r(u),t()},a=u=>{u.key==="Enter"&&i()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-md w-full p-6",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Rename Character"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"New Name"}),o.jsx("input",{type:"text",value:l,onChange:u=>s(u.target.value),onKeyDown:a,placeholder:"Enter character name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:t,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 rounded transition-colors",children:"Cancel"}),o.jsx("button",{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded transition-colors",children:"Rename"})]})]})})},yN="BigScaryGames/ExceedV",vN="main",bN=`https://raw.githubusercontent.com/${yN}/${vN}/Ruleset/Perks`,Qs="exceed-perks-cache",wN=7*24*60*60*1e3;function kN(){try{const e=localStorage.getItem(Qs);if(!e)return null;const t=JSON.parse(e);return Date.now()>t.expiresAt?(localStorage.removeItem(Qs),null):t.database}catch(e){return console.error("Error reading perk cache:",e),null}}function Aa(e){try{const t={database:e,timestamp:Date.now(),expiresAt:Date.now()+wN};localStorage.setItem(Qs,JSON.stringify(t))}catch(t){console.error("Error caching perks:",t)}}async function jN(){const e=kN();if(e)return console.log("[PerkSync] Using cached perks from localStorage"),SN(e).catch(n=>console.error("[PerkSync] Background update check failed:",n)),e;console.log("[PerkSync] Loading bundled perks");const t=await uv();if(!t)throw new Error("Failed to load perks: bundled data not available");return ug().then(n=>{n&&ag(n,t)?(console.log("[PerkSync] GitHub perks are newer, caching"),Aa(n)):(console.log("[PerkSync] Bundled perks are current, caching"),Aa(t))}).catch(n=>console.error("[PerkSync] GitHub fetch failed:",n)),t}async function SN(e){console.log("[PerkSync] Checking for updates from GitHub");const t=await ug();if(!t){console.log("[PerkSync] GitHub fetch failed, keeping current perks");return}ag(t,e)?(console.log("[PerkSync] Newer perks available, updating cache"),Aa(t),window.dispatchEvent(new CustomEvent("perks-updated",{detail:t}))):console.log("[PerkSync] Current perks are up-to-date")}function ag(e,t){return e.lastUpdated>t.lastUpdated}async function ug(){try{return console.log("[PerkSync] GitHub fetch not yet fully implemented"),console.log("[PerkSync] Would fetch from:",bN),null}catch(e){return console.error("[PerkSync] Error fetching from GitHub:",e),null}}function NN(){localStorage.removeItem(Qs),console.log("[PerkSync] Cache cleared")}function CN(){const[e,t]=I.useState("landing"),[n,r]=I.useState([]),[l,s]=I.useState(null),[i,a]=I.useState(fd()),[u,c]=I.useState(null),[f,d]=I.useState(!1),[p,m]=I.useState(!1),y=I.useRef(null);I.useEffect(()=>{const k=Hs();r(k)},[]),I.useEffect(()=>{jN().then(j=>{c(j),console.log("[App] Perk database loaded:",{combat:j.perks.combat.length,magic:j.perks.magic.length,skill:j.perks.skill.length,version:j.version})}).catch(j=>{console.error("[App] Failed to load perk database:",j)}),my().catch(j=>{console.error("[App] Failed to load spell database:",j)});const k=j=>{console.log("[App] Perks updated from GitHub"),c(j.detail)};return window.addEventListener("perks-updated",k),()=>{window.removeEventListener("perks-updated",k)}},[]),I.useEffect(()=>{l&&e==="characterSheet"&&(Fr(l),r(k=>k.map(j=>j.name===l.name?l:j)))},[l,e]);const w=()=>{a(fd()),t("create")},E=()=>{const k=Hs();r(k),t("characterList")},h=()=>{if(!i.name.trim()){alert("Please enter a character name");return}Fr(i),r(k=>[...k,i]),s(i),t("characterSheet")},g=k=>{const j={...k,lastOpened:Date.now()};Fr(j),s(j),t("characterSheet")},v=k=>{s(k)},C=async k=>{var L;const j=(L=k.target.files)==null?void 0:L[0];if(j){try{const D=await dy(j);Fr(D),r(T=>[...T,D]),s(D),t("characterSheet"),alert("Character imported successfully!")}catch(D){alert("Failed to import character. Please check the file format."),console.error("Import error:",D)}y.current&&(y.current.value="")}},A=()=>{l&&cy(l)},N=(k,j)=>{if(j.stopPropagation(),!confirm(`Are you sure you want to delete "${k}"? This cannot be undone.`))return;ca(k);const L=n.filter(D=>D.name!==k);r(L),(l==null?void 0:l.name)===k&&s(null)},R=()=>{t("landing"),s(null),d(!1)},O=k=>{if(!l)return;const j=l.name,L={...l,name:k};ca(j),Fr(L),s(L),r(D=>D.map(T=>T.name===j?L:T))},P=()=>{t("rules"),d(!1)},x=async()=>{if(NN(),"caches"in window){const k=await caches.keys();await Promise.all(k.map(j=>caches.delete(j)))}window.location.reload()};return e==="landing"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-5xl font-bold text-slate-100 mb-2",children:"EXCEED"}),o.jsx("p",{className:"text-slate-400 text-lg",children:"Character Manager"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 space-y-4 shadow-xl border border-slate-700",children:[o.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors",children:[o.jsx(dd,{size:24}),o.jsx("span",{children:"New Character"})]}),o.jsxs("button",{onClick:E,className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600",children:[o.jsx(cd,{size:24}),o.jsx("span",{children:"Load Character"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:y,type:"file",accept:".json",onChange:C,className:"hidden",id:"file-import"}),o.jsxs("label",{htmlFor:"file-import",className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600 cursor-pointer",children:[o.jsx(cd,{size:24}),o.jsx("span",{children:"Import Character"})]})]}),o.jsxs("button",{onClick:()=>t("rules"),className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600",children:[o.jsx(_n,{size:24}),o.jsx("span",{children:"View Rules"})]}),o.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-3 bg-orange-700 hover:bg-orange-600 text-slate-100 font-semibold py-3 px-6 rounded-lg transition-colors border border-orange-600 text-sm",children:[o.jsx(Om,{size:18}),o.jsx("span",{children:"Clear Cache & Reload"})]})]}),o.jsxs("div",{className:"text-center text-slate-500 text-sm space-y-1",children:[o.jsx("p",{children:"A skill-based fantasy TTRPG system"}),o.jsxs("p",{className:"text-xs text-slate-600",children:["Build: ",new Date().toLocaleString()]})]})]})}):e==="create"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-8",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Character Creation"}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 space-y-4 border border-slate-700",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:i.name,onChange:k=>a({...i,name:k.target.value}),placeholder:"Character name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",autoFocus:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Combat XP"}),o.jsx("input",{type:"number",value:i.combatXP,onChange:k=>a({...i,combatXP:parseInt(k.target.value)||0}),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Skill XP"}),o.jsx("input",{type:"number",value:i.socialXP,onChange:k=>a({...i,socialXP:parseInt(k.target.value)||0}),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",min:"0"})]})]}),o.jsxs("div",{className:"flex gap-4 mt-6",children:[o.jsx("button",{onClick:h,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Create Character"}),o.jsx("button",{onClick:R,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]})}):e==="characterList"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-3xl font-bold",children:"Load Character"}),o.jsx("button",{onClick:R,className:"bg-slate-700 hover:bg-slate-600 text-slate-100 px-4 py-2 rounded transition-colors",children:"Back"})]}),o.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700",children:n.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(dd,{size:48,className:"mx-auto mb-4 text-slate-600"}),o.jsx("p",{className:"text-slate-400 text-lg mb-2",children:"No characters yet"}),o.jsx("p",{className:"text-slate-500 text-sm",children:"Create a new character to get started"})]}):o.jsx("div",{className:"divide-y divide-slate-700",children:n.sort((k,j)=>{const L=k.lastOpened||0;return(j.lastOpened||0)-L}).map((k,j)=>o.jsxs("div",{onClick:()=>g(k),className:"p-4 hover:bg-slate-750 cursor-pointer transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:k.name}),k.concept&&o.jsx("p",{className:"text-slate-400 text-sm italic",children:k.concept}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[o.jsxs("span",{children:["Combat XP: ",k.combatXP]}),o.jsxs("span",{children:["Skill XP: ",k.socialXP]}),k.lastOpened&&o.jsxs("span",{children:[" Last opened: ",new Date(k.lastOpened).toLocaleDateString()," ",new Date(k.lastOpened).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("button",{onClick:L=>N(k.name,L),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 p-2 rounded transition-colors",title:"Delete character",children:o.jsx(Nu,{size:20})})]},k.name+j))})})]})}):e==="characterSheet"&&l?o.jsxs(o.Fragment,{children:[o.jsx(gN,{isOpen:f,onClose:()=>d(!1),characterName:l.name,onBackToLanding:R,onRename:()=>m(!0),onExport:A,onViewRules:P}),o.jsx(xN,{isOpen:p,onClose:()=>m(!1),currentName:l.name,onRename:O}),o.jsx(vv,{character:l,onUpdate:v,perkDatabase:u,onMenuToggle:()=>d(!f)})]}):e==="rules"?o.jsxs("div",{className:"min-h-screen bg-slate-900",children:[o.jsx("div",{className:"bg-black p-4 border-b border-slate-700",children:o.jsx("button",{onClick:R,className:"text-slate-400 hover:text-white transition-colors",children:" Back"})}),o.jsx(hN,{})]}):null}go.createRoot(document.getElementById("root")).render(o.jsx(Mg.StrictMode,{children:o.jsx(CN,{})}));
