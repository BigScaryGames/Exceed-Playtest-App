(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vf={exports:{}},Qi={},bf={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),fg=Symbol.for("react.portal"),pg=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),hg=Symbol.for("react.profiler"),gg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),yg=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),bg=Symbol.for("react.memo"),kg=Symbol.for("react.lazy"),Zu=Symbol.iterator;function wg(e){return e===null||typeof e!="object"?null:(e=Zu&&e[Zu]||e["@@iterator"],typeof e=="function"?e:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wf=Object.assign,jf={};function br(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||kf}br.prototype.isReactComponent={};br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sf(){}Sf.prototype=br.prototype;function Ta(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||kf}var Da=Ta.prototype=new Sf;Da.constructor=Ta;wf(Da,br.prototype);Da.isPureReactComponent=!0;var ec=Array.isArray,Nf=Object.prototype.hasOwnProperty,Ia={current:null},Cf={key:!0,ref:!0,__self:!0,__source:!0};function Pf(e,t,n){var r,l={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)Nf.call(t,r)&&!Cf.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(a===1)l.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)l[r]===void 0&&(l[r]=a[r]);return{$$typeof:jl,type:e,key:i,ref:s,props:l,_owner:Ia.current}}function jg(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function La(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function Sg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tc=/\/+/g;function js(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sg(""+e.key):t.toString(36)}function ni(e,t,n,r,l){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case jl:case fg:s=!0}}if(s)return s=e,l=l(s),e=r===""?"."+js(s,0):r,ec(l)?(n="",e!=null&&(n=e.replace(tc,"$&/")+"/"),ni(l,t,n,"",function(c){return c})):l!=null&&(La(l)&&(l=jg(l,n+(!l.key||s&&s.key===l.key?"":(""+l.key).replace(tc,"$&/")+"/")+e)),t.push(l)),1;if(s=0,r=r===""?".":r+":",ec(e))for(var a=0;a<e.length;a++){i=e[a];var u=r+js(i,a);s+=ni(i,t,n,u,l)}else if(u=wg(e),typeof u=="function")for(e=u.call(e),a=0;!(i=e.next()).done;)i=i.value,u=r+js(i,a++),s+=ni(i,t,n,u,l);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ml(e,t,n){if(e==null)return e;var r=[],l=0;return ni(e,r,"","",function(i){return t.call(n,i,l++)}),r}function Ng(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},ri={transition:null},Cg={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ri,ReactCurrentOwner:Ia};function Ef(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ml,forEach:function(e,t,n){Ml(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ml(e,function(){t++}),t},toArray:function(e){return Ml(e,function(t){return t})||[]},only:function(e){if(!La(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=br;le.Fragment=pg;le.Profiler=hg;le.PureComponent=Ta;le.StrictMode=mg;le.Suspense=vg;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cg;le.act=Ef;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wf({},e.props),l=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Ia.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Nf.call(t,u)&&!Cf.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:jl,type:e.type,key:l,ref:i,props:r,_owner:s}};le.createContext=function(e){return e={$$typeof:xg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gg,_context:e},e.Consumer=e};le.createElement=Pf;le.createFactory=function(e){var t=Pf.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:yg,render:e}};le.isValidElement=La;le.lazy=function(e){return{$$typeof:kg,_payload:{_status:-1,_result:e},_init:Ng}};le.memo=function(e,t){return{$$typeof:bg,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=ri.transition;ri.transition={};try{e()}finally{ri.transition=t}};le.unstable_act=Ef;le.useCallback=function(e,t){return Ue.current.useCallback(e,t)};le.useContext=function(e){return Ue.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};le.useEffect=function(e,t){return Ue.current.useEffect(e,t)};le.useId=function(){return Ue.current.useId()};le.useImperativeHandle=function(e,t,n){return Ue.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return Ue.current.useMemo(e,t)};le.useReducer=function(e,t,n){return Ue.current.useReducer(e,t,n)};le.useRef=function(e){return Ue.current.useRef(e)};le.useState=function(e){return Ue.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return Ue.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return Ue.current.useTransition()};le.version="18.3.1";bf.exports=le;var T=bf.exports;const Pg=Aa(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=T,Ag=Symbol.for("react.element"),Tg=Symbol.for("react.fragment"),Dg=Object.prototype.hasOwnProperty,Ig=Eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lg={key:!0,ref:!0,__self:!0,__source:!0};function Af(e,t,n){var r,l={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Dg.call(t,r)&&!Lg.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Ag,type:e,key:i,ref:s,props:l,_owner:Ig.current}}Qi.Fragment=Tg;Qi.jsx=Af;Qi.jsxs=Af;vf.exports=Qi;var o=vf.exports,ho={},Tf={exports:{}},at={},Df={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,L){var b=z.length;z.push(L);e:for(;0<b;){var R=b-1>>>1,_=z[R];if(0<l(_,L))z[R]=L,z[b]=_,b=R;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var L=z[0],b=z.pop();if(b!==L){z[0]=b;e:for(var R=0,_=z.length,v=_>>>1;R<v;){var W=2*(R+1)-1,O=z[W],M=W+1,ee=z[M];if(0>l(O,b))M<_&&0>l(ee,O)?(z[R]=ee,z[M]=b,R=M):(z[R]=O,z[W]=b,R=W);else if(M<_&&0>l(ee,b))z[R]=ee,z[M]=b,R=M;else break e}}return L}function l(z,L){var b=z.sortIndex-L.sortIndex;return b!==0?b:z.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],c=[],f=1,d=null,p=3,m=!1,g=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(z){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=z)r(c),L.sortIndex=L.expirationTime,t(u,L);else break;L=n(c)}}function E(z){if(k=!1,y(z),!g)if(n(u)!==null)g=!0,q(N);else{var L=n(c);L!==null&&Q(E,L.startTime-z)}}function N(z,L){g=!1,k&&(k=!1,h(D),D=-1),m=!0;var b=p;try{for(y(L),d=n(u);d!==null&&(!(d.expirationTime>L)||z&&!C());){var R=d.callback;if(typeof R=="function"){d.callback=null,p=d.priorityLevel;var _=R(d.expirationTime<=L);L=e.unstable_now(),typeof _=="function"?d.callback=_:d===n(u)&&r(u),y(L)}else r(u);d=n(u)}if(d!==null)var v=!0;else{var W=n(c);W!==null&&Q(E,W.startTime-L),v=!1}return v}finally{d=null,p=b,m=!1}}var S=!1,w=null,D=-1,H=5,j=-1;function C(){return!(e.unstable_now()-j<H)}function P(){if(w!==null){var z=e.unstable_now();j=z;var L=!0;try{L=w(!0,z)}finally{L?$():(S=!1,w=null)}}else S=!1}var $;if(typeof x=="function")$=function(){x(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=P,$=function(){I.postMessage(null)}}else $=function(){A(P,0)};function q(z){w=z,S||(S=!0,$())}function Q(z,L){D=A(function(){z(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,q(N))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var b=p;p=L;try{return z()}finally{p=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,L){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var b=p;p=z;try{return L()}finally{p=b}},e.unstable_scheduleCallback=function(z,L,b){var R=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?R+b:R):b=R,z){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=b+_,z={id:f++,callback:L,priorityLevel:z,startTime:b,expirationTime:_,sortIndex:-1},b>R?(z.sortIndex=b,t(c,z),n(u)===null&&z===n(c)&&(k?(h(D),D=-1):k=!0,Q(E,b-R))):(z.sortIndex=_,t(u,z),g||m||(g=!0,q(N))),z},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(z){var L=p;return function(){var b=p;p=L;try{return z.apply(this,arguments)}finally{p=b}}}})(If);Df.exports=If;var Mg=Df.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=T,ot=Mg;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lf=new Set,rl={};function On(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(rl[e]=t,e=0;e<t.length;e++)Lf.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),go=Object.prototype.hasOwnProperty,zg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nc={},rc={};function _g(e){return go.call(rc,e)?!0:go.call(nc,e)?!1:zg.test(e)?rc[e]=!0:(nc[e]=!0,!1)}function Fg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Og(e,t,n,r){if(t===null||typeof t>"u"||Fg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,l,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ma=/[\-:]([a-z])/g;function Ra(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ma,Ra);Re[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ma,Ra);Re[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ma,Ra);Re[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function za(e,t,n,r){var l=Re.hasOwnProperty(t)?Re[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Og(t,n,l,r)&&(n=null),r||l===null?_g(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qt=Rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Vn=Symbol.for("react.fragment"),_a=Symbol.for("react.strict_mode"),xo=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Rf=Symbol.for("react.context"),Fa=Symbol.for("react.forward_ref"),yo=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),Oa=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),zf=Symbol.for("react.offscreen"),lc=Symbol.iterator;function Er(e){return e===null||typeof e!="object"?null:(e=lc&&e[lc]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,Ss;function Br(e){if(Ss===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ss=t&&t[1]||""}return`
`+Ss+e}var Ns=!1;function Cs(e,t){if(!e||Ns)return"";Ns=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),i=r.stack.split(`
`),s=l.length-1,a=i.length-1;1<=s&&0<=a&&l[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(l[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||l[s]!==i[a]){var u=`
`+l[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=a);break}}}finally{Ns=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Br(e):""}function $g(e){switch(e.tag){case 5:return Br(e.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return e=Cs(e.type,!1),e;case 11:return e=Cs(e.type.render,!1),e;case 1:return e=Cs(e.type,!0),e;default:return""}}function bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vn:return"Fragment";case Xn:return"Portal";case xo:return"Profiler";case _a:return"StrictMode";case yo:return"Suspense";case vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rf:return(e.displayName||"Context")+".Consumer";case Mf:return(e._context.displayName||"Context")+".Provider";case Fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oa:return t=e.displayName||null,t!==null?t:bo(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return bo(e(t))}catch{}}return null}function Bg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(t);case 8:return t===_a?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _f(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wg(e){var t=_f(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zl(e){e._valueTracker||(e._valueTracker=Wg(e))}function Ff(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_f(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ko(e,t){var n=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ic(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Of(e,t){t=t.checked,t!=null&&za(e,"checked",t,!1)}function wo(e,t){Of(e,t);var n=hn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jo(e,t.type,n):t.hasOwnProperty("defaultValue")&&jo(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jo(e,t,n){(t!=="number"||xi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wr=Array.isArray;function lr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function So(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(U(92));if(Wr(n)){if(1<n.length)throw Error(U(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hn(n)}}function $f(e,t){var n=hn(t.value),r=hn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ac(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function No(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _l,Wf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ll(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hg=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(e){Hg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ur[t]=Ur[e]})});function Hf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ur.hasOwnProperty(e)&&Ur[e]?(""+t).trim():t+"px"}function qf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Hf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var qg=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(e,t){if(t){if(qg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Po(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=null;function $a(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ao=null,ir=null,sr=null;function uc(e){if(e=Cl(e)){if(typeof Ao!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Zi(t),Ao(e.stateNode,e.type,t))}}function Uf(e){ir?sr?sr.push(e):sr=[e]:ir=e}function Xf(){if(ir){var e=ir,t=sr;if(sr=ir=null,uc(e),t)for(e=0;e<t.length;e++)uc(t[e])}}function Vf(e,t){return e(t)}function Qf(){}var Ps=!1;function Gf(e,t,n){if(Ps)return e(t,n);Ps=!0;try{return Vf(e,t,n)}finally{Ps=!1,(ir!==null||sr!==null)&&(Qf(),Xf())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=Zi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var To=!1;if(qt)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){To=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{To=!1}function Ug(e,t,n,r,l,i,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Xr=!1,yi=null,vi=!1,Do=null,Xg={onError:function(e){Xr=!0,yi=e}};function Vg(e,t,n,r,l,i,s,a,u){Xr=!1,yi=null,Ug.apply(Xg,arguments)}function Qg(e,t,n,r,l,i,s,a,u){if(Vg.apply(this,arguments),Xr){if(Xr){var c=yi;Xr=!1,yi=null}else throw Error(U(198));vi||(vi=!0,Do=c)}}function $n(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Kf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cc(e){if($n(e)!==e)throw Error(U(188))}function Gg(e){var t=e.alternate;if(!t){if(t=$n(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return cc(l),e;if(i===r)return cc(l),t;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=l,r=i;else{for(var s=!1,a=l.child;a;){if(a===n){s=!0,n=l,r=i;break}if(a===r){s=!0,r=l,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=l;break}if(a===r){s=!0,r=i,n=l;break}a=a.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Yf(e){return e=Gg(e),e!==null?Jf(e):null}function Jf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jf(e);if(t!==null)return t;e=e.sibling}return null}var Zf=ot.unstable_scheduleCallback,dc=ot.unstable_cancelCallback,Kg=ot.unstable_shouldYield,Yg=ot.unstable_requestPaint,Se=ot.unstable_now,Jg=ot.unstable_getCurrentPriorityLevel,Ba=ot.unstable_ImmediatePriority,ep=ot.unstable_UserBlockingPriority,bi=ot.unstable_NormalPriority,Zg=ot.unstable_LowPriority,tp=ot.unstable_IdlePriority,Gi=null,Mt=null;function ex(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Gi,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:rx,tx=Math.log,nx=Math.LN2;function rx(e){return e>>>=0,e===0?32:31-(tx(e)/nx|0)|0}var Fl=64,Ol=4194304;function Hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ki(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~l;a!==0?r=Hr(a):(i&=s,i!==0&&(r=Hr(i)))}else s=n&~l,s!==0?r=Hr(s):i!==0&&(r=Hr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ct(t),l=1<<n,r|=e[n],t&=~l;return r}function lx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Ct(i),a=1<<s,u=l[s];u===-1?(!(a&n)||a&r)&&(l[s]=lx(a,t)):u<=t&&(e.expiredLanes|=a),i&=~a}}function Io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function np(){var e=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),e}function Es(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=n}function sx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Ct(n),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~i}}function Wa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ct(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var ae=0;function rp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lp,Ha,ip,sp,op,Lo=!1,$l=[],on=null,an=null,un=null,sl=new Map,ol=new Map,nn=[],ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function Tr(e,t,n,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=Cl(t),t!==null&&Ha(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ax(e,t,n,r,l){switch(t){case"focusin":return on=Tr(on,e,t,n,r,l),!0;case"dragenter":return an=Tr(an,e,t,n,r,l),!0;case"mouseover":return un=Tr(un,e,t,n,r,l),!0;case"pointerover":var i=l.pointerId;return sl.set(i,Tr(sl.get(i)||null,e,t,n,r,l)),!0;case"gotpointercapture":return i=l.pointerId,ol.set(i,Tr(ol.get(i)||null,e,t,n,r,l)),!0}return!1}function ap(e){var t=Cn(e.target);if(t!==null){var n=$n(t);if(n!==null){if(t=n.tag,t===13){if(t=Kf(n),t!==null){e.blockedOn=t,op(e.priority,function(){ip(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function li(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Mo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Eo=r,n.target.dispatchEvent(r),Eo=null}else return t=Cl(n),t!==null&&Ha(t),e.blockedOn=n,!1;t.shift()}return!0}function pc(e,t,n){li(e)&&n.delete(t)}function ux(){Lo=!1,on!==null&&li(on)&&(on=null),an!==null&&li(an)&&(an=null),un!==null&&li(un)&&(un=null),sl.forEach(pc),ol.forEach(pc)}function Dr(e,t){e.blockedOn===t&&(e.blockedOn=null,Lo||(Lo=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,ux)))}function al(e){function t(l){return Dr(l,e)}if(0<$l.length){Dr($l[0],e);for(var n=1;n<$l.length;n++){var r=$l[n];r.blockedOn===e&&(r.blockedOn=null)}}for(on!==null&&Dr(on,e),an!==null&&Dr(an,e),un!==null&&Dr(un,e),sl.forEach(t),ol.forEach(t),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)ap(n),n.blockedOn===null&&nn.shift()}var or=Qt.ReactCurrentBatchConfig,wi=!0;function cx(e,t,n,r){var l=ae,i=or.transition;or.transition=null;try{ae=1,qa(e,t,n,r)}finally{ae=l,or.transition=i}}function dx(e,t,n,r){var l=ae,i=or.transition;or.transition=null;try{ae=4,qa(e,t,n,r)}finally{ae=l,or.transition=i}}function qa(e,t,n,r){if(wi){var l=Mo(e,t,n,r);if(l===null)Fs(e,t,r,ji,n),fc(e,r);else if(ax(l,e,t,n,r))r.stopPropagation();else if(fc(e,r),t&4&&-1<ox.indexOf(e)){for(;l!==null;){var i=Cl(l);if(i!==null&&lp(i),i=Mo(e,t,n,r),i===null&&Fs(e,t,r,ji,n),i===l)break;l=i}l!==null&&r.stopPropagation()}else Fs(e,t,r,null,n)}}var ji=null;function Mo(e,t,n,r){if(ji=null,e=$a(r),e=Cn(e),e!==null)if(t=$n(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Kf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ji=e,null}function up(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jg()){case Ba:return 1;case ep:return 4;case bi:case Zg:return 16;case tp:return 536870912;default:return 16}default:return 16}}var ln=null,Ua=null,ii=null;function cp(){if(ii)return ii;var e,t=Ua,n=t.length,r,l="value"in ln?ln.value:ln.textContent,i=l.length;for(e=0;e<n&&t[e]===l[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===l[i-r];r++);return ii=l.slice(e,1<r?1-r:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bl(){return!0}function mc(){return!1}function ut(e){function t(n,r,l,i,s){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bl:mc,this.isPropagationStopped=mc,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),t}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=ut(kr),Nl=we({},kr,{view:0,detail:0}),fx=ut(Nl),As,Ts,Ir,Ki=we({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ir&&(Ir&&e.type==="mousemove"?(As=e.screenX-Ir.screenX,Ts=e.screenY-Ir.screenY):Ts=As=0,Ir=e),As)},movementY:function(e){return"movementY"in e?e.movementY:Ts}}),hc=ut(Ki),px=we({},Ki,{dataTransfer:0}),mx=ut(px),hx=we({},Nl,{relatedTarget:0}),Ds=ut(hx),gx=we({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),xx=ut(gx),yx=we({},kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vx=ut(yx),bx=we({},kr,{data:0}),gc=ut(bx),kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jx[e])?!!t[e]:!1}function Va(){return Sx}var Nx=we({},Nl,{key:function(e){if(e.key){var t=kx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cx=ut(Nx),Px=we({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=ut(Px),Ex=we({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),Ax=ut(Ex),Tx=we({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dx=ut(Tx),Ix=we({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lx=ut(Ix),Mx=[9,13,27,32],Qa=qt&&"CompositionEvent"in window,Vr=null;qt&&"documentMode"in document&&(Vr=document.documentMode);var Rx=qt&&"TextEvent"in window&&!Vr,dp=qt&&(!Qa||Vr&&8<Vr&&11>=Vr),yc=" ",vc=!1;function fp(e,t){switch(e){case"keyup":return Mx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qn=!1;function zx(e,t){switch(e){case"compositionend":return pp(t);case"keypress":return t.which!==32?null:(vc=!0,yc);case"textInput":return e=t.data,e===yc&&vc?null:e;default:return null}}function _x(e,t){if(Qn)return e==="compositionend"||!Qa&&fp(e,t)?(e=cp(),ii=Ua=ln=null,Qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dp&&t.locale!=="ko"?null:t.data;default:return null}}var Fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fx[e.type]:t==="textarea"}function mp(e,t,n,r){Uf(r),t=Si(t,"onChange"),0<t.length&&(n=new Xa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qr=null,ul=null;function Ox(e){Np(e,0)}function Yi(e){var t=Yn(e);if(Ff(t))return e}function $x(e,t){if(e==="change")return t}var hp=!1;if(qt){var Is;if(qt){var Ls="oninput"in document;if(!Ls){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),Ls=typeof kc.oninput=="function"}Is=Ls}else Is=!1;hp=Is&&(!document.documentMode||9<document.documentMode)}function wc(){Qr&&(Qr.detachEvent("onpropertychange",gp),ul=Qr=null)}function gp(e){if(e.propertyName==="value"&&Yi(ul)){var t=[];mp(t,ul,e,$a(e)),Gf(Ox,t)}}function Bx(e,t,n){e==="focusin"?(wc(),Qr=t,ul=n,Qr.attachEvent("onpropertychange",gp)):e==="focusout"&&wc()}function Wx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yi(ul)}function Hx(e,t){if(e==="click")return Yi(t)}function qx(e,t){if(e==="input"||e==="change")return Yi(t)}function Ux(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:Ux;function cl(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!go.call(t,l)||!At(e[l],t[l]))return!1}return!0}function jc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sc(e,t){var n=jc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jc(n)}}function xp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yp(){for(var e=window,t=xi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xi(e.document)}return t}function Ga(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xx(e){var t=yp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xp(n.ownerDocument.documentElement,n)){if(r!==null&&Ga(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Sc(n,i);var s=Sc(n,r);l&&s&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vx=qt&&"documentMode"in document&&11>=document.documentMode,Gn=null,Ro=null,Gr=null,zo=!1;function Nc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zo||Gn==null||Gn!==xi(r)||(r=Gn,"selectionStart"in r&&Ga(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gr&&cl(Gr,r)||(Gr=r,r=Si(Ro,"onSelect"),0<r.length&&(t=new Xa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gn)))}function Wl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},Ms={},vp={};qt&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Ji(e){if(Ms[e])return Ms[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in vp)return Ms[e]=t[n];return e}var bp=Ji("animationend"),kp=Ji("animationiteration"),wp=Ji("animationstart"),jp=Ji("transitionend"),Sp=new Map,Cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){Sp.set(e,t),On(t,[e])}for(var Rs=0;Rs<Cc.length;Rs++){var zs=Cc[Rs],Qx=zs.toLowerCase(),Gx=zs[0].toUpperCase()+zs.slice(1);xn(Qx,"on"+Gx)}xn(bp,"onAnimationEnd");xn(kp,"onAnimationIteration");xn(wp,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(jp,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("cancel close invalid load scroll toggle".split(" ").concat(qr));function Pc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Qg(r,t,void 0,e),e.currentTarget=null}function Np(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&l.isPropagationStopped())break e;Pc(l,a,c),i=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&l.isPropagationStopped())break e;Pc(l,a,c),i=u}}}if(vi)throw e=Do,vi=!1,Do=null,e}function ge(e,t){var n=t[Bo];n===void 0&&(n=t[Bo]=new Set);var r=e+"__bubble";n.has(r)||(Cp(t,e,2,!1),n.add(r))}function _s(e,t,n){var r=0;t&&(r|=4),Cp(n,e,r,t)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function dl(e){if(!e[Hl]){e[Hl]=!0,Lf.forEach(function(n){n!=="selectionchange"&&(Kx.has(n)||_s(n,!1,e),_s(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hl]||(t[Hl]=!0,_s("selectionchange",!1,t))}}function Cp(e,t,n,r){switch(up(t)){case 1:var l=cx;break;case 4:l=dx;break;default:l=qa}n=l.bind(null,t,n,e),l=void 0,!To||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Fs(e,t,n,r,l){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===l||a.nodeType===8&&a.parentNode===l)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;s=s.return}for(;a!==null;){if(s=Cn(a),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Gf(function(){var c=i,f=$a(n),d=[];e:{var p=Sp.get(e);if(p!==void 0){var m=Xa,g=e;switch(e){case"keypress":if(si(n)===0)break e;case"keydown":case"keyup":m=Cx;break;case"focusin":g="focus",m=Ds;break;case"focusout":g="blur",m=Ds;break;case"beforeblur":case"afterblur":m=Ds;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ax;break;case bp:case kp:case wp:m=xx;break;case jp:m=Dx;break;case"scroll":m=fx;break;case"wheel":m=Lx;break;case"copy":case"cut":case"paste":m=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=xc}var k=(t&4)!==0,A=!k&&e==="scroll",h=k?p!==null?p+"Capture":null:p;k=[];for(var x=c,y;x!==null;){y=x;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,h!==null&&(E=il(x,h),E!=null&&k.push(fl(x,E,y)))),A)break;x=x.return}0<k.length&&(p=new m(p,g,null,n,f),d.push({event:p,listeners:k}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Eo&&(g=n.relatedTarget||n.fromElement)&&(Cn(g)||g[Ut]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Cn(g):null,g!==null&&(A=$n(g),g!==A||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(k=hc,E="onMouseLeave",h="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(k=xc,E="onPointerLeave",h="onPointerEnter",x="pointer"),A=m==null?p:Yn(m),y=g==null?p:Yn(g),p=new k(E,x+"leave",m,n,f),p.target=A,p.relatedTarget=y,E=null,Cn(f)===c&&(k=new k(h,x+"enter",g,n,f),k.target=y,k.relatedTarget=A,E=k),A=E,m&&g)t:{for(k=m,h=g,x=0,y=k;y;y=Hn(y))x++;for(y=0,E=h;E;E=Hn(E))y++;for(;0<x-y;)k=Hn(k),x--;for(;0<y-x;)h=Hn(h),y--;for(;x--;){if(k===h||h!==null&&k===h.alternate)break t;k=Hn(k),h=Hn(h)}k=null}else k=null;m!==null&&Ec(d,p,m,k,!1),g!==null&&A!==null&&Ec(d,A,g,k,!0)}}e:{if(p=c?Yn(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=$x;else if(bc(p))if(hp)N=qx;else{N=Wx;var S=Bx}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Hx);if(N&&(N=N(e,c))){mp(d,N,n,f);break e}S&&S(e,p,c),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&jo(p,"number",p.value)}switch(S=c?Yn(c):window,e){case"focusin":(bc(S)||S.contentEditable==="true")&&(Gn=S,Ro=c,Gr=null);break;case"focusout":Gr=Ro=Gn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Nc(d,n,f);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":Nc(d,n,f)}var w;if(Qa)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Qn?fp(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(dp&&n.locale!=="ko"&&(Qn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Qn&&(w=cp()):(ln=f,Ua="value"in ln?ln.value:ln.textContent,Qn=!0)),S=Si(c,D),0<S.length&&(D=new gc(D,e,null,n,f),d.push({event:D,listeners:S}),w?D.data=w:(w=pp(n),w!==null&&(D.data=w)))),(w=Rx?zx(e,n):_x(e,n))&&(c=Si(c,"onBeforeInput"),0<c.length&&(f=new gc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=w))}Np(d,t)})}function fl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Si(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=il(e,n),i!=null&&r.unshift(fl(e,i,l)),i=il(e,t),i!=null&&r.push(fl(e,i,l))),e=e.return}return r}function Hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ec(e,t,n,r,l){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,l?(u=il(n,i),u!=null&&s.unshift(fl(n,u,a))):l||(u=il(n,i),u!=null&&s.push(fl(n,u,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Yx=/\r\n?/g,Jx=/\u0000|\uFFFD/g;function Ac(e){return(typeof e=="string"?e:""+e).replace(Yx,`
`).replace(Jx,"")}function ql(e,t,n){if(t=Ac(t),Ac(e)!==t&&n)throw Error(U(425))}function Ni(){}var _o=null,Fo=null;function Oo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $o=typeof setTimeout=="function"?setTimeout:void 0,Zx=typeof clearTimeout=="function"?clearTimeout:void 0,Tc=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof Tc<"u"?function(e){return Tc.resolve(null).then(e).catch(t0)}:$o;function t0(e){setTimeout(function(){throw e})}function Os(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);al(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+wr,pl="__reactProps$"+wr,Ut="__reactContainer$"+wr,Bo="__reactEvents$"+wr,n0="__reactListeners$"+wr,r0="__reactHandles$"+wr;function Cn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ut]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dc(e);e!==null;){if(n=e[Lt])return n;e=Dc(e)}return t}e=n,n=e.parentNode}return null}function Cl(e){return e=e[Lt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Zi(e){return e[pl]||null}var Wo=[],Jn=-1;function yn(e){return{current:e}}function xe(e){0>Jn||(e.current=Wo[Jn],Wo[Jn]=null,Jn--)}function me(e,t){Jn++,Wo[Jn]=e.current,e.current=t}var gn={},$e=yn(gn),Ye=yn(!1),Dn=gn;function pr(e,t){var n=e.type.contextTypes;if(!n)return gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Je(e){return e=e.childContextTypes,e!=null}function Ci(){xe(Ye),xe($e)}function Ic(e,t,n){if($e.current!==gn)throw Error(U(168));me($e,t),me(Ye,n)}function Pp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(U(108,Bg(e)||"Unknown",l));return we({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,Dn=$e.current,me($e,e),me(Ye,Ye.current),!0}function Lc(e,t,n){var r=e.stateNode;if(!r)throw Error(U(169));n?(e=Pp(e,t,Dn),r.__reactInternalMemoizedMergedChildContext=e,xe(Ye),xe($e),me($e,e)):xe(Ye),me(Ye,n)}var $t=null,es=!1,$s=!1;function Ep(e){$t===null?$t=[e]:$t.push(e)}function l0(e){es=!0,Ep(e)}function vn(){if(!$s&&$t!==null){$s=!0;var e=0,t=ae;try{var n=$t;for(ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}$t=null,es=!1}catch(l){throw $t!==null&&($t=$t.slice(e+1)),Zf(Ba,vn),l}finally{ae=t,$s=!1}}return null}var Zn=[],er=0,Ei=null,Ai=0,dt=[],ft=0,In=null,Bt=1,Wt="";function jn(e,t){Zn[er++]=Ai,Zn[er++]=Ei,Ei=e,Ai=t}function Ap(e,t,n){dt[ft++]=Bt,dt[ft++]=Wt,dt[ft++]=In,In=e;var r=Bt;e=Wt;var l=32-Ct(r)-1;r&=~(1<<l),n+=1;var i=32-Ct(t)+l;if(30<i){var s=l-l%5;i=(r&(1<<s)-1).toString(32),r>>=s,l-=s,Bt=1<<32-Ct(t)+l|n<<l|r,Wt=i+e}else Bt=1<<i|n<<l|r,Wt=e}function Ka(e){e.return!==null&&(jn(e,1),Ap(e,1,0))}function Ya(e){for(;e===Ei;)Ei=Zn[--er],Zn[er]=null,Ai=Zn[--er],Zn[er]=null;for(;e===In;)In=dt[--ft],dt[ft]=null,Wt=dt[--ft],dt[ft]=null,Bt=dt[--ft],dt[ft]=null}var it=null,lt=null,ve=!1,jt=null;function Tp(e,t){var n=mt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,lt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=In!==null?{id:Bt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,lt=null,!0):!1;default:return!1}}function Ho(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qo(e){if(ve){var t=lt;if(t){var n=t;if(!Mc(e,t)){if(Ho(e))throw Error(U(418));t=cn(n.nextSibling);var r=it;t&&Mc(e,t)?Tp(r,n):(e.flags=e.flags&-4097|2,ve=!1,it=e)}}else{if(Ho(e))throw Error(U(418));e.flags=e.flags&-4097|2,ve=!1,it=e}}}function Rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function Ul(e){if(e!==it)return!1;if(!ve)return Rc(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Oo(e.type,e.memoizedProps)),t&&(t=lt)){if(Ho(e))throw Dp(),Error(U(418));for(;t;)Tp(e,t),t=cn(t.nextSibling)}if(Rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){lt=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}lt=null}}else lt=it?cn(e.stateNode.nextSibling):null;return!0}function Dp(){for(var e=lt;e;)e=cn(e.nextSibling)}function mr(){lt=it=null,ve=!1}function Ja(e){jt===null?jt=[e]:jt.push(e)}var i0=Qt.ReactCurrentBatchConfig;function Lr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=l.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,e))}return e}function Xl(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zc(e){var t=e._init;return t(e._payload)}function Ip(e){function t(h,x){if(e){var y=h.deletions;y===null?(h.deletions=[x],h.flags|=16):y.push(x)}}function n(h,x){if(!e)return null;for(;x!==null;)t(h,x),x=x.sibling;return null}function r(h,x){for(h=new Map;x!==null;)x.key!==null?h.set(x.key,x):h.set(x.index,x),x=x.sibling;return h}function l(h,x){return h=mn(h,x),h.index=0,h.sibling=null,h}function i(h,x,y){return h.index=y,e?(y=h.alternate,y!==null?(y=y.index,y<x?(h.flags|=2,x):y):(h.flags|=2,x)):(h.flags|=1048576,x)}function s(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,x,y,E){return x===null||x.tag!==6?(x=Vs(y,h.mode,E),x.return=h,x):(x=l(x,y),x.return=h,x)}function u(h,x,y,E){var N=y.type;return N===Vn?f(h,x,y.props.children,E,y.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&zc(N)===x.type)?(E=l(x,y.props),E.ref=Lr(h,x,y),E.return=h,E):(E=pi(y.type,y.key,y.props,null,h.mode,E),E.ref=Lr(h,x,y),E.return=h,E)}function c(h,x,y,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Qs(y,h.mode,E),x.return=h,x):(x=l(x,y.children||[]),x.return=h,x)}function f(h,x,y,E,N){return x===null||x.tag!==7?(x=Tn(y,h.mode,E,N),x.return=h,x):(x=l(x,y),x.return=h,x)}function d(h,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Vs(""+x,h.mode,y),x.return=h,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rl:return y=pi(x.type,x.key,x.props,null,h.mode,y),y.ref=Lr(h,null,x),y.return=h,y;case Xn:return x=Qs(x,h.mode,y),x.return=h,x;case en:var E=x._init;return d(h,E(x._payload),y)}if(Wr(x)||Er(x))return x=Tn(x,h.mode,y,null),x.return=h,x;Xl(h,x)}return null}function p(h,x,y,E){var N=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:a(h,x,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:return y.key===N?u(h,x,y,E):null;case Xn:return y.key===N?c(h,x,y,E):null;case en:return N=y._init,p(h,x,N(y._payload),E)}if(Wr(y)||Er(y))return N!==null?null:f(h,x,y,E,null);Xl(h,y)}return null}function m(h,x,y,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return h=h.get(y)||null,a(x,h,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rl:return h=h.get(E.key===null?y:E.key)||null,u(x,h,E,N);case Xn:return h=h.get(E.key===null?y:E.key)||null,c(x,h,E,N);case en:var S=E._init;return m(h,x,y,S(E._payload),N)}if(Wr(E)||Er(E))return h=h.get(y)||null,f(x,h,E,N,null);Xl(x,E)}return null}function g(h,x,y,E){for(var N=null,S=null,w=x,D=x=0,H=null;w!==null&&D<y.length;D++){w.index>D?(H=w,w=null):H=w.sibling;var j=p(h,w,y[D],E);if(j===null){w===null&&(w=H);break}e&&w&&j.alternate===null&&t(h,w),x=i(j,x,D),S===null?N=j:S.sibling=j,S=j,w=H}if(D===y.length)return n(h,w),ve&&jn(h,D),N;if(w===null){for(;D<y.length;D++)w=d(h,y[D],E),w!==null&&(x=i(w,x,D),S===null?N=w:S.sibling=w,S=w);return ve&&jn(h,D),N}for(w=r(h,w);D<y.length;D++)H=m(w,h,D,y[D],E),H!==null&&(e&&H.alternate!==null&&w.delete(H.key===null?D:H.key),x=i(H,x,D),S===null?N=H:S.sibling=H,S=H);return e&&w.forEach(function(C){return t(h,C)}),ve&&jn(h,D),N}function k(h,x,y,E){var N=Er(y);if(typeof N!="function")throw Error(U(150));if(y=N.call(y),y==null)throw Error(U(151));for(var S=N=null,w=x,D=x=0,H=null,j=y.next();w!==null&&!j.done;D++,j=y.next()){w.index>D?(H=w,w=null):H=w.sibling;var C=p(h,w,j.value,E);if(C===null){w===null&&(w=H);break}e&&w&&C.alternate===null&&t(h,w),x=i(C,x,D),S===null?N=C:S.sibling=C,S=C,w=H}if(j.done)return n(h,w),ve&&jn(h,D),N;if(w===null){for(;!j.done;D++,j=y.next())j=d(h,j.value,E),j!==null&&(x=i(j,x,D),S===null?N=j:S.sibling=j,S=j);return ve&&jn(h,D),N}for(w=r(h,w);!j.done;D++,j=y.next())j=m(w,h,D,j.value,E),j!==null&&(e&&j.alternate!==null&&w.delete(j.key===null?D:j.key),x=i(j,x,D),S===null?N=j:S.sibling=j,S=j);return e&&w.forEach(function(P){return t(h,P)}),ve&&jn(h,D),N}function A(h,x,y,E){if(typeof y=="object"&&y!==null&&y.type===Vn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:e:{for(var N=y.key,S=x;S!==null;){if(S.key===N){if(N=y.type,N===Vn){if(S.tag===7){n(h,S.sibling),x=l(S,y.props.children),x.return=h,h=x;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&zc(N)===S.type){n(h,S.sibling),x=l(S,y.props),x.ref=Lr(h,S,y),x.return=h,h=x;break e}n(h,S);break}else t(h,S);S=S.sibling}y.type===Vn?(x=Tn(y.props.children,h.mode,E,y.key),x.return=h,h=x):(E=pi(y.type,y.key,y.props,null,h.mode,E),E.ref=Lr(h,x,y),E.return=h,h=E)}return s(h);case Xn:e:{for(S=y.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(h,x.sibling),x=l(x,y.children||[]),x.return=h,h=x;break e}else{n(h,x);break}else t(h,x);x=x.sibling}x=Qs(y,h.mode,E),x.return=h,h=x}return s(h);case en:return S=y._init,A(h,x,S(y._payload),E)}if(Wr(y))return g(h,x,y,E);if(Er(y))return k(h,x,y,E);Xl(h,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(h,x.sibling),x=l(x,y),x.return=h,h=x):(n(h,x),x=Vs(y,h.mode,E),x.return=h,h=x),s(h)):n(h,x)}return A}var hr=Ip(!0),Lp=Ip(!1),Ti=yn(null),Di=null,tr=null,Za=null;function eu(){Za=tr=Di=null}function tu(e){var t=Ti.current;xe(Ti),e._currentValue=t}function Uo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){Di=e,Za=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Za!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(Di===null)throw Error(U(308));tr=e,Di.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var Pn=null;function nu(e){Pn===null?Pn=[e]:Pn.push(e)}function Mp(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,nu(t)):(n.next=l.next,l.next=n),t.interleaved=n,Xt(e,r)}function Xt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tn=!1;function ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Xt(e,n)}return l=r.interleaved,l===null?(t.next=t,nu(r)):(t.next=l.next,l.next=t),r.interleaved=t,Xt(e,n)}function oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wa(e,n)}}function _c(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?l=i=t:i=i.next=t}else l=i=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ii(e,t,n,r){var l=e.updateQueue;tn=!1;var i=l.firstBaseUpdate,s=l.lastBaseUpdate,a=l.shared.pending;if(a!==null){l.shared.pending=null;var u=a,c=u.next;u.next=null,s===null?i=c:s.next=c,s=u;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(i!==null){var d=l.baseState;s=0,f=c=u=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,k=a;switch(p=t,m=n,k.tag){case 1:if(g=k.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=k.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=we({},d,p);break e;case 2:tn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=l.effects,p===null?l.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=m,u=d):f=f.next=m,s|=p;if(a=a.next,a===null){if(a=l.shared.pending,a===null)break;p=a,a=p.next,p.next=null,l.lastBaseUpdate=p,l.shared.pending=null}}while(!0);if(f===null&&(u=d),l.baseState=u,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do s|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);Mn|=s,e.lanes=s,e.memoizedState=d}}function Fc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(U(191,l));l.call(r)}}}var Pl={},Rt=yn(Pl),ml=yn(Pl),hl=yn(Pl);function En(e){if(e===Pl)throw Error(U(174));return e}function lu(e,t){switch(me(hl,t),me(ml,e),me(Rt,Pl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:No(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=No(t,e)}xe(Rt),me(Rt,t)}function gr(){xe(Rt),xe(ml),xe(hl)}function zp(e){En(hl.current);var t=En(Rt.current),n=No(t,e.type);t!==n&&(me(ml,e),me(Rt,n))}function iu(e){ml.current===e&&(xe(Rt),xe(ml))}var be=yn(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bs=[];function su(){for(var e=0;e<Bs.length;e++)Bs[e]._workInProgressVersionPrimary=null;Bs.length=0}var ai=Qt.ReactCurrentDispatcher,Ws=Qt.ReactCurrentBatchConfig,Ln=0,ke=null,Pe=null,Ae=null,Mi=!1,Kr=!1,gl=0,s0=0;function ze(){throw Error(U(321))}function ou(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function au(e,t,n,r,l,i){if(Ln=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=e===null||e.memoizedState===null?c0:d0,e=n(r,l),Kr){i=0;do{if(Kr=!1,gl=0,25<=i)throw Error(U(301));i+=1,Ae=Pe=null,t.updateQueue=null,ai.current=f0,e=n(r,l)}while(Kr)}if(ai.current=Ri,t=Pe!==null&&Pe.next!==null,Ln=0,Ae=Pe=ke=null,Mi=!1,t)throw Error(U(300));return e}function uu(){var e=gl!==0;return gl=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?ke.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function xt(){if(Pe===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=Ae===null?ke.memoizedState:Ae.next;if(t!==null)Ae=t,Pe=e;else{if(e===null)throw Error(U(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ae===null?ke.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function xl(e,t){return typeof t=="function"?t(e):t}function Hs(e){var t=xt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=Pe,l=r.baseQueue,i=n.pending;if(i!==null){if(l!==null){var s=l.next;l.next=i.next,i.next=s}r.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,r=r.baseState;var a=s=null,u=null,c=i;do{var f=c.lane;if((Ln&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,s=r):u=u.next=d,ke.lanes|=f,Mn|=f}c=c.next}while(c!==null&&c!==i);u===null?s=r:u.next=a,At(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do i=l.lane,ke.lanes|=i,Mn|=i,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qs(e){var t=xt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,i=t.memoizedState;if(l!==null){n.pending=null;var s=l=l.next;do i=e(i,s.action),s=s.next;while(s!==l);At(i,t.memoizedState)||(Ge=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _p(){}function Fp(e,t){var n=ke,r=xt(),l=t(),i=!At(r.memoizedState,l);if(i&&(r.memoizedState=l,Ge=!0),r=r.queue,cu(Bp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,yl(9,$p.bind(null,n,r,l,t),void 0,null),De===null)throw Error(U(349));Ln&30||Op(n,t,l)}return l}function Op(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $p(e,t,n,r){t.value=n,t.getSnapshot=r,Wp(t)&&Hp(e)}function Bp(e,t,n){return n(function(){Wp(t)&&Hp(e)})}function Wp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function Hp(e){var t=Xt(e,1);t!==null&&Pt(t,e,1,-1)}function Oc(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:e},t.queue=e,e=e.dispatch=u0.bind(null,ke,e),[t.memoizedState,e]}function yl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qp(){return xt().memoizedState}function ui(e,t,n,r){var l=Dt();ke.flags|=e,l.memoizedState=yl(1|t,n,void 0,r===void 0?null:r)}function ts(e,t,n,r){var l=xt();r=r===void 0?null:r;var i=void 0;if(Pe!==null){var s=Pe.memoizedState;if(i=s.destroy,r!==null&&ou(r,s.deps)){l.memoizedState=yl(t,n,i,r);return}}ke.flags|=e,l.memoizedState=yl(1|t,n,i,r)}function $c(e,t){return ui(8390656,8,e,t)}function cu(e,t){return ts(2048,8,e,t)}function Up(e,t){return ts(4,2,e,t)}function Xp(e,t){return ts(4,4,e,t)}function Vp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qp(e,t,n){return n=n!=null?n.concat([e]):null,ts(4,4,Vp.bind(null,t,e),n)}function du(){}function Gp(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Kp(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yp(e,t,n){return Ln&21?(At(n,t)||(n=np(),ke.lanes|=n,Mn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function o0(e,t){var n=ae;ae=n!==0&&4>n?n:4,e(!0);var r=Ws.transition;Ws.transition={};try{e(!1),t()}finally{ae=n,Ws.transition=r}}function Jp(){return xt().memoizedState}function a0(e,t,n){var r=pn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zp(e))em(t,n);else if(n=Mp(e,t,n,r),n!==null){var l=qe();Pt(n,e,r,l),tm(n,t,r)}}function u0(e,t,n){var r=pn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zp(e))em(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(l.hasEagerState=!0,l.eagerState=a,At(a,s)){var u=t.interleaved;u===null?(l.next=l,nu(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Mp(e,t,l,r),n!==null&&(l=qe(),Pt(n,e,r,l),tm(n,t,r))}}function Zp(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function em(e,t){Kr=Mi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wa(e,n)}}var Ri={readContext:gt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},c0={readContext:gt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:$c,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ui(4194308,4,Vp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return ui(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=a0.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Oc,useDebugValue:du,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Oc(!1),t=e[0];return e=o0.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,l=Dt();if(ve){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),De===null)throw Error(U(349));Ln&30||Op(r,t,n)}l.memoizedState=n;var i={value:n,getSnapshot:t};return l.queue=i,$c(Bp.bind(null,r,i,e),[e]),r.flags|=2048,yl(9,$p.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Dt(),t=De.identifierPrefix;if(ve){var n=Wt,r=Bt;n=(r&~(1<<32-Ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=s0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d0={readContext:gt,useCallback:Gp,useContext:gt,useEffect:cu,useImperativeHandle:Qp,useInsertionEffect:Up,useLayoutEffect:Xp,useMemo:Kp,useReducer:Hs,useRef:qp,useState:function(){return Hs(xl)},useDebugValue:du,useDeferredValue:function(e){var t=xt();return Yp(t,Pe.memoizedState,e)},useTransition:function(){var e=Hs(xl)[0],t=xt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Fp,useId:Jp,unstable_isNewReconciler:!1},f0={readContext:gt,useCallback:Gp,useContext:gt,useEffect:cu,useImperativeHandle:Qp,useInsertionEffect:Up,useLayoutEffect:Xp,useMemo:Kp,useReducer:qs,useRef:qp,useState:function(){return qs(xl)},useDebugValue:du,useDeferredValue:function(e){var t=xt();return Pe===null?t.memoizedState=e:Yp(t,Pe.memoizedState,e)},useTransition:function(){var e=qs(xl)[0],t=xt().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Fp,useId:Jp,unstable_isNewReconciler:!1};function kt(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:we({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ns={isMounted:function(e){return(e=e._reactInternals)?$n(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qe(),l=pn(e),i=Ht(r,l);i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,l),t!==null&&(Pt(t,e,l,r),oi(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qe(),l=pn(e),i=Ht(r,l);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,l),t!==null&&(Pt(t,e,l,r),oi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),r=pn(e),l=Ht(n,r);l.tag=2,t!=null&&(l.callback=t),t=dn(e,l,r),t!==null&&(Pt(t,e,r,n),oi(t,e,r))}};function Bc(e,t,n,r,l,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!cl(n,r)||!cl(l,i):!0}function nm(e,t,n){var r=!1,l=gn,i=t.contextType;return typeof i=="object"&&i!==null?i=gt(i):(l=Je(t)?Dn:$e.current,r=t.contextTypes,i=(r=r!=null)?pr(e,l):gn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ns,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function Wc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ns.enqueueReplaceState(t,t.state,null)}function Vo(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},ru(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=gt(i):(i=Je(t)?Dn:$e.current,l.context=pr(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xo(e,t,i,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ns.enqueueReplaceState(l,l.state,null),Ii(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function xr(e,t){try{var n="",r=t;do n+=$g(r),r=r.return;while(r);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function Us(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var p0=typeof WeakMap=="function"?WeakMap:Map;function rm(e,t,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_i||(_i=!0,la=r),Qo(e,t)},n}function lm(e,t,n){n=Ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Qo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qo(e,t),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Hc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new p0;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=P0.bind(null,e,t,n),t.then(e,e))}function qc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ht(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e)}var m0=Qt.ReactCurrentOwner,Ge=!1;function We(e,t,n,r){t.child=e===null?Lp(t,null,n,r):hr(t,e.child,n,r)}function Xc(e,t,n,r,l){n=n.render;var i=t.ref;return ar(t,l),r=au(e,t,n,r,i,l),n=uu(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Vt(e,t,l)):(ve&&n&&Ka(t),t.flags|=1,We(e,t,r,l),t.child)}function Vc(e,t,n,r,l){if(e===null){var i=n.type;return typeof i=="function"&&!vu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,im(e,t,i,r,l)):(e=pi(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&l)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(s,r)&&e.ref===t.ref)return Vt(e,t,l)}return t.flags|=1,e=mn(i,r),e.ref=t.ref,e.return=t,t.child=e}function im(e,t,n,r,l){if(e!==null){var i=e.memoizedProps;if(cl(i,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=i,(e.lanes&l)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,Vt(e,t,l)}return Go(e,t,n,r,l)}function sm(e,t,n){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(rr,rt),rt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(rr,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(rr,rt),rt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,me(rr,rt),rt|=r;return We(e,t,l,n),t.child}function om(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Go(e,t,n,r,l){var i=Je(n)?Dn:$e.current;return i=pr(t,i),ar(t,l),n=au(e,t,n,r,i,l),r=uu(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Vt(e,t,l)):(ve&&r&&Ka(t),t.flags|=1,We(e,t,n,l),t.child)}function Qc(e,t,n,r,l){if(Je(n)){var i=!0;Pi(t)}else i=!1;if(ar(t,l),t.stateNode===null)ci(e,t),nm(t,n,r),Vo(t,n,r,l),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=gt(c):(c=Je(n)?Dn:$e.current,c=pr(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Wc(t,s,r,c),tn=!1;var p=t.memoizedState;s.state=p,Ii(t,r,s,l),u=t.memoizedState,a!==r||p!==u||Ye.current||tn?(typeof f=="function"&&(Xo(t,n,f,r),u=t.memoizedState),(a=tn||Bc(t,n,a,r,p,u,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Rp(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:kt(t.type,a),s.props=c,d=t.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=gt(u):(u=Je(n)?Dn:$e.current,u=pr(t,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||p!==u)&&Wc(t,s,r,u),tn=!1,p=t.memoizedState,s.state=p,Ii(t,r,s,l);var g=t.memoizedState;a!==d||p!==g||Ye.current||tn?(typeof m=="function"&&(Xo(t,n,m,r),g=t.memoizedState),(c=tn||Bc(t,n,c,r,p,g,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),s.props=r,s.state=g,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ko(e,t,n,r,i,l)}function Ko(e,t,n,r,l,i){om(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return l&&Lc(t,n,!1),Vt(e,t,i);r=t.stateNode,m0.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=hr(t,e.child,null,i),t.child=hr(t,null,a,i)):We(e,t,a,i),t.memoizedState=r.state,l&&Lc(t,n,!0),t.child}function am(e){var t=e.stateNode;t.pendingContext?Ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ic(e,t.context,!1),lu(e,t.containerInfo)}function Gc(e,t,n,r,l){return mr(),Ja(l),t.flags|=256,We(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0};function Jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function um(e,t,n){var r=t.pendingProps,l=be.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(l&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),me(be,l&1),e===null)return qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=is(s,r,0,null),e=Tn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Jo(n),t.memoizedState=Yo,e):fu(t,s));if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null))return h0(e,t,s,r,a,l,n);if(i){i=r.fallback,s=t.mode,l=e.child,a=l.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=mn(l,u),r.subtreeFlags=l.subtreeFlags&14680064),a!==null?i=mn(a,i):(i=Tn(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Jo(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Yo,r}return i=e.child,e=i.sibling,r=mn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fu(e,t){return t=is({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vl(e,t,n,r){return r!==null&&Ja(r),hr(t,e.child,null,n),e=fu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function h0(e,t,n,r,l,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Us(Error(U(422))),Vl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=is({mode:"visible",children:r.children},l,0,null),i=Tn(i,l,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&hr(t,e.child,null,s),t.child.memoizedState=Jo(s),t.memoizedState=Yo,i);if(!(t.mode&1))return Vl(e,t,s,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Us(i,r,void 0),Vl(e,t,s,r)}if(a=(s&e.childLanes)!==0,Ge||a){if(r=De,r!==null){switch(s&-s){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|s)?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,Xt(e,l),Pt(r,e,l,-1))}return yu(),r=Us(Error(U(421))),Vl(e,t,s,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=E0.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,lt=cn(l.nextSibling),it=t,ve=!0,jt=null,e!==null&&(dt[ft++]=Bt,dt[ft++]=Wt,dt[ft++]=In,Bt=e.id,Wt=e.overflow,In=t),t=fu(t,r.children),t.flags|=4096,t)}function Kc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Uo(e.return,t,n)}function Xs(e,t,n,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=l)}function cm(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(We(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kc(e,n,t);else if(e.tag===19)Kc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(me(be,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Li(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Xs(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Li(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Xs(t,!0,n,null,i);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function g0(e,t,n){switch(t.tag){case 3:am(t),mr();break;case 5:zp(t);break;case 1:Je(t.type)&&Pi(t);break;case 4:lu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;me(Ti,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(me(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?um(e,t,n):(me(be,be.current&1),e=Vt(e,t,n),e!==null?e.sibling:null);me(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cm(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),me(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,sm(e,t,n)}return Vt(e,t,n)}var dm,Zo,fm,pm;dm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zo=function(){};fm=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,En(Rt.current);var i=null;switch(n){case"input":l=ko(e,l),r=ko(e,r),i=[];break;case"select":l=we({},l,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":l=So(e,l),r=So(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ni)}Co(n,r);var s;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var a=l[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ge("scroll",e),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};pm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mr(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _e(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x0(e,t,n){var r=t.pendingProps;switch(Ya(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return Je(t.type)&&Ci(),_e(t),null;case 3:return r=t.stateNode,gr(),xe(Ye),xe($e),su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ul(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(oa(jt),jt=null))),Zo(e,t),_e(t),null;case 5:iu(t);var l=En(hl.current);if(n=t.type,e!==null&&t.stateNode!=null)fm(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(U(166));return _e(t),null}if(e=En(Rt.current),Ul(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Lt]=t,r[pl]=i,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(l=0;l<qr.length;l++)ge(qr[l],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":ic(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":oc(r,i),ge("invalid",r)}Co(n,i),l=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ql(r.textContent,a,e),l=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ql(r.textContent,a,e),l=["children",""+a]):rl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ge("scroll",r)}switch(n){case"input":zl(r),sc(r,i,!0);break;case"textarea":zl(r),ac(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ni)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Lt]=t,e[pl]=r,dm(e,t,!1,!1),t.stateNode=e;e:{switch(s=Po(n,r),n){case"dialog":ge("cancel",e),ge("close",e),l=r;break;case"iframe":case"object":case"embed":ge("load",e),l=r;break;case"video":case"audio":for(l=0;l<qr.length;l++)ge(qr[l],e);l=r;break;case"source":ge("error",e),l=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),l=r;break;case"details":ge("toggle",e),l=r;break;case"input":ic(e,r),l=ko(e,r),ge("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=we({},r,{value:void 0}),ge("invalid",e);break;case"textarea":oc(e,r),l=So(e,r),ge("invalid",e);break;default:l=r}Co(n,l),a=l;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?qf(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Wf(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ll(e,u):typeof u=="number"&&ll(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",e):u!=null&&za(e,i,u,s))}switch(n){case"input":zl(e),sc(e,r,!1);break;case"textarea":zl(e),ac(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?lr(e,!!r.multiple,i,!1):r.defaultValue!=null&&lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ni)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _e(t),null;case 6:if(e&&t.stateNode!=null)pm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(U(166));if(n=En(hl.current),En(Rt.current),Ul(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(i=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:ql(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ql(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return _e(t),null;case 13:if(xe(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&lt!==null&&t.mode&1&&!(t.flags&128))Dp(),mr(),t.flags|=98560,i=!1;else if(i=Ul(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(U(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Lt]=t}else mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_e(t),i=!1}else jt!==null&&(oa(jt),jt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?Ee===0&&(Ee=3):yu())),t.updateQueue!==null&&(t.flags|=4),_e(t),null);case 4:return gr(),Zo(e,t),e===null&&dl(t.stateNode.containerInfo),_e(t),null;case 10:return tu(t.type._context),_e(t),null;case 17:return Je(t.type)&&Ci(),_e(t),null;case 19:if(xe(be),i=t.memoizedState,i===null)return _e(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Mr(i,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Li(e),s!==null){for(t.flags|=128,Mr(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(be,be.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>yr&&(t.flags|=128,r=!0,Mr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Li(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ve)return _e(t),null}else 2*Se()-i.renderingStartTime>yr&&n!==1073741824&&(t.flags|=128,r=!0,Mr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=be.current,me(be,r?n&1|2:n&1),t):(_e(t),null);case 22:case 23:return xu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rt&1073741824&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function y0(e,t){switch(Ya(t),t.tag){case 1:return Je(t.type)&&Ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gr(),xe(Ye),xe($e),su(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(xe(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(be),null;case 4:return gr(),null;case 10:return tu(t.type._context),null;case 22:case 23:return xu(),null;case 24:return null;default:return null}}var Ql=!1,Fe=!1,v0=typeof WeakSet=="function"?WeakSet:Set,K=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function ea(e,t,n){try{n()}catch(r){je(e,t,r)}}var Yc=!1;function b0(e,t){if(_o=wi,e=yp(),Ga(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var m;d!==n||l!==0&&d.nodeType!==3||(a=s+l),d!==i||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===e)break t;if(p===n&&++c===l&&(a=s),p===i&&++f===r&&(u=s),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fo={focusedElem:e,selectionRange:n},wi=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var k=g.memoizedProps,A=g.memoizedState,h=t.stateNode,x=h.getSnapshotBeforeUpdate(t.elementType===t.type?k:kt(t.type,k),A);h.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(E){je(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return g=Yc,Yc=!1,g}function Yr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&ea(t,n,i)}l=l.next}while(l!==r)}}function rs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ta(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mm(e){var t=e.alternate;t!==null&&(e.alternate=null,mm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[pl],delete t[Bo],delete t[n0],delete t[r0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hm(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ni));else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}function ra(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ra(e,t,n),e=e.sibling;e!==null;)ra(e,t,n),e=e.sibling}var Ie=null,wt=!1;function Jt(e,t,n){for(n=n.child;n!==null;)gm(e,t,n),n=n.sibling}function gm(e,t,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Gi,n)}catch{}switch(n.tag){case 5:Fe||nr(n,t);case 6:var r=Ie,l=wt;Ie=null,Jt(e,t,n),Ie=r,wt=l,Ie!==null&&(wt?(e=Ie,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ie.removeChild(n.stateNode));break;case 18:Ie!==null&&(wt?(e=Ie,n=n.stateNode,e.nodeType===8?Os(e.parentNode,n):e.nodeType===1&&Os(e,n),al(e)):Os(Ie,n.stateNode));break;case 4:r=Ie,l=wt,Ie=n.stateNode.containerInfo,wt=!0,Jt(e,t,n),Ie=r,wt=l;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&ea(n,t,s),l=l.next}while(l!==r)}Jt(e,t,n);break;case 1:if(!Fe&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,t,a)}Jt(e,t,n);break;case 21:Jt(e,t,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,Jt(e,t,n),Fe=r):Jt(e,t,n);break;default:Jt(e,t,n)}}function Zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new v0),t.forEach(function(r){var l=A0.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,wt=!1;break e;case 3:Ie=a.stateNode.containerInfo,wt=!0;break e;case 4:Ie=a.stateNode.containerInfo,wt=!0;break e}a=a.return}if(Ie===null)throw Error(U(160));gm(i,s,l),Ie=null,wt=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(c){je(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xm(t,e),t=t.sibling}function xm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),Tt(e),r&4){try{Yr(3,e,e.return),rs(3,e)}catch(k){je(e,e.return,k)}try{Yr(5,e,e.return)}catch(k){je(e,e.return,k)}}break;case 1:bt(t,e),Tt(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(bt(t,e),Tt(e),r&512&&n!==null&&nr(n,n.return),e.flags&32){var l=e.stateNode;try{ll(l,"")}catch(k){je(e,e.return,k)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Of(l,i),Po(a,s);var c=Po(a,i);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];f==="style"?qf(l,d):f==="dangerouslySetInnerHTML"?Wf(l,d):f==="children"?ll(l,d):za(l,f,d,c)}switch(a){case"input":wo(l,i);break;case"textarea":$f(l,i);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?lr(l,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?lr(l,!!i.multiple,i.defaultValue,!0):lr(l,!!i.multiple,i.multiple?[]:"",!1))}l[pl]=i}catch(k){je(e,e.return,k)}}break;case 6:if(bt(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(U(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(k){je(e,e.return,k)}}break;case 3:if(bt(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(k){je(e,e.return,k)}break;case 4:bt(t,e),Tt(e);break;case 13:bt(t,e),Tt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(hu=Se())),r&4&&Zc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Fe=(c=Fe)||f,bt(t,e),Fe=c):bt(t,e),Tt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(K=e,f=e.child;f!==null;){for(d=K=f;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:Yr(4,p,p.return);break;case 1:nr(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(k){je(r,n,k)}}break;case 5:nr(p,p.return);break;case 22:if(p.memoizedState!==null){td(d);continue}}m!==null?(m.return=p,K=m):td(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{l=d.stateNode,c?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Hf("display",s))}catch(k){je(e,e.return,k)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(k){je(e,e.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bt(t,e),Tt(e),r&4&&Zc(e);break;case 21:break;default:bt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hm(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ll(l,""),r.flags&=-33);var i=Jc(e);ra(e,i,l);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Jc(e);na(e,a,s);break;default:throw Error(U(161))}}catch(u){je(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function k0(e,t,n){K=e,ym(e)}function ym(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var l=K,i=l.child;if(l.tag===22&&r){var s=l.memoizedState!==null||Ql;if(!s){var a=l.alternate,u=a!==null&&a.memoizedState!==null||Fe;a=Ql;var c=Fe;if(Ql=s,(Fe=u)&&!c)for(K=l;K!==null;)s=K,u=s.child,s.tag===22&&s.memoizedState!==null?nd(l):u!==null?(u.return=s,K=u):nd(l);for(;i!==null;)K=i,ym(i),i=i.sibling;K=l,Ql=a,Fe=c}ed(e)}else l.subtreeFlags&8772&&i!==null?(i.return=l,K=i):ed(e)}}function ed(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fe||rs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:kt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fc(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fc(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&al(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Fe||t.flags&512&&ta(t)}catch(p){je(t,t.return,p)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function td(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function nd(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(u){je(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){je(t,l,u)}}var i=t.return;try{ta(t)}catch(u){je(t,i,u)}break;case 5:var s=t.return;try{ta(t)}catch(u){je(t,s,u)}}}catch(u){je(t,t.return,u)}if(t===e){K=null;break}var a=t.sibling;if(a!==null){a.return=t.return,K=a;break}K=t.return}}var w0=Math.ceil,zi=Qt.ReactCurrentDispatcher,pu=Qt.ReactCurrentOwner,ht=Qt.ReactCurrentBatchConfig,oe=0,De=null,Ce=null,Me=0,rt=0,rr=yn(0),Ee=0,vl=null,Mn=0,ls=0,mu=0,Jr=null,Qe=null,hu=0,yr=1/0,Ot=null,_i=!1,la=null,fn=null,Gl=!1,sn=null,Fi=0,Zr=0,ia=null,di=-1,fi=0;function qe(){return oe&6?Se():di!==-1?di:di=Se()}function pn(e){return e.mode&1?oe&2&&Me!==0?Me&-Me:i0.transition!==null?(fi===0&&(fi=np()),fi):(e=ae,e!==0||(e=window.event,e=e===void 0?16:up(e.type)),e):1}function Pt(e,t,n,r){if(50<Zr)throw Zr=0,ia=null,Error(U(185));Sl(e,n,r),(!(oe&2)||e!==De)&&(e===De&&(!(oe&2)&&(ls|=n),Ee===4&&rn(e,Me)),Ze(e,r),n===1&&oe===0&&!(t.mode&1)&&(yr=Se()+500,es&&vn()))}function Ze(e,t){var n=e.callbackNode;ix(e,t);var r=ki(e,e===De?Me:0);if(r===0)n!==null&&dc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&dc(n),t===1)e.tag===0?l0(rd.bind(null,e)):Ep(rd.bind(null,e)),e0(function(){!(oe&6)&&vn()}),n=null;else{switch(rp(r)){case 1:n=Ba;break;case 4:n=ep;break;case 16:n=bi;break;case 536870912:n=tp;break;default:n=bi}n=Cm(n,vm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function vm(e,t){if(di=-1,fi=0,oe&6)throw Error(U(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=ki(e,e===De?Me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Oi(e,r);else{t=r;var l=oe;oe|=2;var i=km();(De!==e||Me!==t)&&(Ot=null,yr=Se()+500,An(e,t));do try{N0();break}catch(a){bm(e,a)}while(!0);eu(),zi.current=i,oe=l,Ce!==null?t=0:(De=null,Me=0,t=Ee)}if(t!==0){if(t===2&&(l=Io(e),l!==0&&(r=l,t=sa(e,l))),t===1)throw n=vl,An(e,0),rn(e,r),Ze(e,Se()),n;if(t===6)rn(e,r);else{if(l=e.current.alternate,!(r&30)&&!j0(l)&&(t=Oi(e,r),t===2&&(i=Io(e),i!==0&&(r=i,t=sa(e,i))),t===1))throw n=vl,An(e,0),rn(e,r),Ze(e,Se()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(U(345));case 2:Sn(e,Qe,Ot);break;case 3:if(rn(e,r),(r&130023424)===r&&(t=hu+500-Se(),10<t)){if(ki(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=$o(Sn.bind(null,e,Qe,Ot),t);break}Sn(e,Qe,Ot);break;case 4:if(rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var s=31-Ct(r);i=1<<s,s=t[s],s>l&&(l=s),r&=~i}if(r=l,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w0(r/1960))-r,10<r){e.timeoutHandle=$o(Sn.bind(null,e,Qe,Ot),r);break}Sn(e,Qe,Ot);break;case 5:Sn(e,Qe,Ot);break;default:throw Error(U(329))}}}return Ze(e,Se()),e.callbackNode===n?vm.bind(null,e):null}function sa(e,t){var n=Jr;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=Oi(e,t),e!==2&&(t=Qe,Qe=n,t!==null&&oa(t)),e}function oa(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function j0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],i=l.getSnapshot;l=l.value;try{if(!At(i(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~mu,t&=~ls,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ct(t),r=1<<n;e[n]=-1,t&=~r}}function rd(e){if(oe&6)throw Error(U(327));ur();var t=ki(e,0);if(!(t&1))return Ze(e,Se()),null;var n=Oi(e,t);if(e.tag!==0&&n===2){var r=Io(e);r!==0&&(t=r,n=sa(e,r))}if(n===1)throw n=vl,An(e,0),rn(e,t),Ze(e,Se()),n;if(n===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sn(e,Qe,Ot),Ze(e,Se()),null}function gu(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&(yr=Se()+500,es&&vn())}}function Rn(e){sn!==null&&sn.tag===0&&!(oe&6)&&ur();var t=oe;oe|=1;var n=ht.transition,r=ae;try{if(ht.transition=null,ae=1,e)return e()}finally{ae=r,ht.transition=n,oe=t,!(oe&6)&&vn()}}function xu(){rt=rr.current,xe(rr)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zx(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Ya(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ci();break;case 3:gr(),xe(Ye),xe($e),su();break;case 5:iu(r);break;case 4:gr();break;case 13:xe(be);break;case 19:xe(be);break;case 10:tu(r.type._context);break;case 22:case 23:xu()}n=n.return}if(De=e,Ce=e=mn(e.current,null),Me=rt=t,Ee=0,vl=null,mu=ls=Mn=0,Qe=Jr=null,Pn!==null){for(t=0;t<Pn.length;t++)if(n=Pn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=l,r.next=s}n.pending=r}Pn=null}return e}function bm(e,t){do{var n=Ce;try{if(eu(),ai.current=Ri,Mi){for(var r=ke.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Mi=!1}if(Ln=0,Ae=Pe=ke=null,Kr=!1,gl=0,pu.current=null,n===null||n.return===null){Ee=1,vl=t,Ce=null;break}e:{var i=e,s=n.return,a=n,u=t;if(t=Me,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=qc(s);if(m!==null){m.flags&=-257,Uc(m,s,a,i,t),m.mode&1&&Hc(i,c,t),t=m,u=c;var g=t.updateQueue;if(g===null){var k=new Set;k.add(u),t.updateQueue=k}else g.add(u);break e}else{if(!(t&1)){Hc(i,c,t),yu();break e}u=Error(U(426))}}else if(ve&&a.mode&1){var A=qc(s);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Uc(A,s,a,i,t),Ja(xr(u,a));break e}}i=u=xr(u,a),Ee!==4&&(Ee=2),Jr===null?Jr=[i]:Jr.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=rm(i,u,t);_c(i,h);break e;case 1:a=u;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fn===null||!fn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=lm(i,a,t);_c(i,E);break e}}i=i.return}while(i!==null)}jm(n)}catch(N){t=N,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function km(){var e=zi.current;return zi.current=Ri,e===null?Ri:e}function yu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),De===null||!(Mn&268435455)&&!(ls&268435455)||rn(De,Me)}function Oi(e,t){var n=oe;oe|=2;var r=km();(De!==e||Me!==t)&&(Ot=null,An(e,t));do try{S0();break}catch(l){bm(e,l)}while(!0);if(eu(),oe=n,zi.current=r,Ce!==null)throw Error(U(261));return De=null,Me=0,Ee}function S0(){for(;Ce!==null;)wm(Ce)}function N0(){for(;Ce!==null&&!Kg();)wm(Ce)}function wm(e){var t=Nm(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?jm(e):Ce=t,pu.current=null}function jm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=y0(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,Ce=null;return}}else if(n=x0(n,t,rt),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Ee===0&&(Ee=5)}function Sn(e,t,n){var r=ae,l=ht.transition;try{ht.transition=null,ae=1,C0(e,t,n,r)}finally{ht.transition=l,ae=r}return null}function C0(e,t,n,r){do ur();while(sn!==null);if(oe&6)throw Error(U(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(sx(e,i),e===De&&(Ce=De=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gl||(Gl=!0,Cm(bi,function(){return ur(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ht.transition,ht.transition=null;var s=ae;ae=1;var a=oe;oe|=4,pu.current=null,b0(e,n),xm(n,e),Xx(Fo),wi=!!_o,Fo=_o=null,e.current=n,k0(n),Yg(),oe=a,ae=s,ht.transition=i}else e.current=n;if(Gl&&(Gl=!1,sn=e,Fi=l),i=e.pendingLanes,i===0&&(fn=null),ex(n.stateNode),Ze(e,Se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(_i)throw _i=!1,e=la,la=null,e;return Fi&1&&e.tag!==0&&ur(),i=e.pendingLanes,i&1?e===ia?Zr++:(Zr=0,ia=e):Zr=0,vn(),null}function ur(){if(sn!==null){var e=rp(Fi),t=ht.transition,n=ae;try{if(ht.transition=null,ae=16>e?16:e,sn===null)var r=!1;else{if(e=sn,sn=null,Fi=0,oe&6)throw Error(U(331));var l=oe;for(oe|=4,K=e.current;K!==null;){var i=K,s=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(K=c;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:Yr(8,f,i)}var d=f.child;if(d!==null)d.return=f,K=d;else for(;K!==null;){f=K;var p=f.sibling,m=f.return;if(mm(f),f===c){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var g=i.alternate;if(g!==null){var k=g.child;if(k!==null){g.child=null;do{var A=k.sibling;k.sibling=null,k=A}while(k!==null)}}K=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,K=s;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,K=h;break e}K=i.return}}var x=e.current;for(K=x;K!==null;){s=K;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,K=y;else e:for(s=x;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rs(9,a)}}catch(N){je(a,a.return,N)}if(a===s){K=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,K=E;break e}K=a.return}}if(oe=l,vn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Gi,e)}catch{}r=!0}return r}finally{ae=n,ht.transition=t}}return!1}function ld(e,t,n){t=xr(n,t),t=rm(e,t,1),e=dn(e,t,1),t=qe(),e!==null&&(Sl(e,1,t),Ze(e,t))}function je(e,t,n){if(e.tag===3)ld(e,e,n);else for(;t!==null;){if(t.tag===3){ld(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fn===null||!fn.has(r))){e=xr(n,e),e=lm(t,e,1),t=dn(t,e,1),e=qe(),t!==null&&(Sl(t,1,e),Ze(t,e));break}}t=t.return}}function P0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Me&n)===n&&(Ee===4||Ee===3&&(Me&130023424)===Me&&500>Se()-hu?An(e,0):mu|=n),Ze(e,t)}function Sm(e,t){t===0&&(e.mode&1?(t=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):t=1);var n=qe();e=Xt(e,t),e!==null&&(Sl(e,t,n),Ze(e,n))}function E0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sm(e,n)}function A0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(t),Sm(e,n)}var Nm;Nm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,g0(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,ve&&t.flags&1048576&&Ap(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ci(e,t),e=t.pendingProps;var l=pr(t,$e.current);ar(t,n),l=au(null,t,r,e,l,n);var i=uu();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(i=!0,Pi(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,ru(t),l.updater=ns,t.stateNode=l,l._reactInternals=t,Vo(t,r,e,n),t=Ko(null,t,r,!0,i,n)):(t.tag=0,ve&&i&&Ka(t),We(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ci(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=D0(r),e=kt(r,e),l){case 0:t=Go(null,t,r,e,n);break e;case 1:t=Qc(null,t,r,e,n);break e;case 11:t=Xc(null,t,r,e,n);break e;case 14:t=Vc(null,t,r,kt(r.type,e),n);break e}throw Error(U(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:kt(r,l),Go(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:kt(r,l),Qc(e,t,r,l,n);case 3:e:{if(am(t),e===null)throw Error(U(387));r=t.pendingProps,i=t.memoizedState,l=i.element,Rp(e,t),Ii(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=xr(Error(U(423)),t),t=Gc(e,t,r,n,l);break e}else if(r!==l){l=xr(Error(U(424)),t),t=Gc(e,t,r,n,l);break e}else for(lt=cn(t.stateNode.containerInfo.firstChild),it=t,ve=!0,jt=null,n=Lp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mr(),r===l){t=Vt(e,t,n);break e}We(e,t,r,n)}t=t.child}return t;case 5:return zp(t),e===null&&qo(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,s=l.children,Oo(r,l)?s=null:i!==null&&Oo(r,i)&&(t.flags|=32),om(e,t),We(e,t,s,n),t.child;case 6:return e===null&&qo(t),null;case 13:return um(e,t,n);case 4:return lu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hr(t,null,r,n):We(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:kt(r,l),Xc(e,t,r,l,n);case 7:return We(e,t,t.pendingProps,n),t.child;case 8:return We(e,t,t.pendingProps.children,n),t.child;case 12:return We(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,s=l.value,me(Ti,r._currentValue),r._currentValue=s,i!==null)if(At(i.value,s)){if(i.children===l.children&&!Ye.current){t=Vt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ht(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Uo(i.return,n,t),a.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(U(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Uo(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}We(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,ar(t,n),l=gt(l),r=r(l),t.flags|=1,We(e,t,r,n),t.child;case 14:return r=t.type,l=kt(r,t.pendingProps),l=kt(r.type,l),Vc(e,t,r,l,n);case 15:return im(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:kt(r,l),ci(e,t),t.tag=1,Je(r)?(e=!0,Pi(t)):e=!1,ar(t,n),nm(t,r,l),Vo(t,r,l,n),Ko(null,t,r,!0,e,n);case 19:return cm(e,t,n);case 22:return sm(e,t,n)}throw Error(U(156,t.tag))};function Cm(e,t){return Zf(e,t)}function T0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,n,r){return new T0(e,t,n,r)}function vu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function D0(e){if(typeof e=="function")return vu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fa)return 11;if(e===Oa)return 14}return 2}function mn(e,t){var n=e.alternate;return n===null?(n=mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pi(e,t,n,r,l,i){var s=2;if(r=e,typeof e=="function")vu(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Vn:return Tn(n.children,l,i,t);case _a:s=8,l|=8;break;case xo:return e=mt(12,n,t,l|2),e.elementType=xo,e.lanes=i,e;case yo:return e=mt(13,n,t,l),e.elementType=yo,e.lanes=i,e;case vo:return e=mt(19,n,t,l),e.elementType=vo,e.lanes=i,e;case zf:return is(n,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mf:s=10;break e;case Rf:s=9;break e;case Fa:s=11;break e;case Oa:s=14;break e;case en:s=16,r=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=mt(s,n,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function Tn(e,t,n,r){return e=mt(7,e,r,t),e.lanes=n,e}function is(e,t,n,r){return e=mt(22,e,r,t),e.elementType=zf,e.lanes=n,e.stateNode={isHidden:!1},e}function Vs(e,t,n){return e=mt(6,e,null,t),e.lanes=n,e}function Qs(e,t,n){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I0(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Es(0),this.expirationTimes=Es(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Es(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function bu(e,t,n,r,l,i,s,a,u){return e=new I0(e,t,n,a,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=mt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(i),e}function L0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pm(e){if(!e)return gn;e=e._reactInternals;e:{if($n(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var n=e.type;if(Je(n))return Pp(e,n,t)}return t}function Em(e,t,n,r,l,i,s,a,u){return e=bu(n,r,!0,e,l,i,s,a,u),e.context=Pm(null),n=e.current,r=qe(),l=pn(n),i=Ht(r,l),i.callback=t??null,dn(n,i,l),e.current.lanes=l,Sl(e,l,r),Ze(e,r),e}function ss(e,t,n,r){var l=t.current,i=qe(),s=pn(l);return n=Pm(n),t.context===null?t.context=n:t.pendingContext=n,t=Ht(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dn(l,t,s),e!==null&&(Pt(e,l,s,i),oi(e,l,s)),s}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function id(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ku(e,t){id(e,t),(e=e.alternate)&&id(e,t)}function M0(){return null}var Am=typeof reportError=="function"?reportError:function(e){console.error(e)};function wu(e){this._internalRoot=e}os.prototype.render=wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));ss(e,t,null,null)};os.prototype.unmount=wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){ss(null,e,null,null)}),t[Ut]=null}};function os(e){this._internalRoot=e}os.prototype.unstable_scheduleHydration=function(e){if(e){var t=sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nn.length&&t!==0&&t<nn[n].priority;n++);nn.splice(n,0,e),n===0&&ap(e)}};function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function as(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function R0(e,t,n,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var c=$i(s);i.call(c)}}var s=Em(t,r,e,0,null,!1,!1,"",sd);return e._reactRootContainer=s,e[Ut]=s.current,dl(e.nodeType===8?e.parentNode:e),Rn(),s}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var a=r;r=function(){var c=$i(u);a.call(c)}}var u=bu(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=u,e[Ut]=u.current,dl(e.nodeType===8?e.parentNode:e),Rn(function(){ss(t,u,n,r)}),u}function us(e,t,n,r,l){var i=n._reactRootContainer;if(i){var s=i;if(typeof l=="function"){var a=l;l=function(){var u=$i(s);a.call(u)}}ss(t,s,e,l)}else s=R0(n,t,e,l,r);return $i(s)}lp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hr(t.pendingLanes);n!==0&&(Wa(t,n|1),Ze(t,Se()),!(oe&6)&&(yr=Se()+500,vn()))}break;case 13:Rn(function(){var r=Xt(e,1);if(r!==null){var l=qe();Pt(r,e,1,l)}}),ku(e,1)}};Ha=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var n=qe();Pt(t,e,134217728,n)}ku(e,134217728)}};ip=function(e){if(e.tag===13){var t=pn(e),n=Xt(e,t);if(n!==null){var r=qe();Pt(n,e,t,r)}ku(e,t)}};sp=function(){return ae};op=function(e,t){var n=ae;try{return ae=e,t()}finally{ae=n}};Ao=function(e,t,n){switch(t){case"input":if(wo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Zi(r);if(!l)throw Error(U(90));Ff(r),wo(r,l)}}}break;case"textarea":$f(e,n);break;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}};Vf=gu;Qf=Rn;var z0={usingClientEntryPoint:!1,Events:[Cl,Yn,Zi,Uf,Xf,gu]},Rr={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yf(e),e===null?null:e.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||M0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Gi=Kl.inject(_0),Mt=Kl}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0;at.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(t))throw Error(U(200));return L0(e,t,null,n)};at.createRoot=function(e,t){if(!ju(e))throw Error(U(299));var n=!1,r="",l=Am;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=bu(e,1,!1,null,null,n,!1,r,l),e[Ut]=t.current,dl(e.nodeType===8?e.parentNode:e),new wu(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Yf(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Rn(e)};at.hydrate=function(e,t,n){if(!as(t))throw Error(U(200));return us(null,e,t,!0,n)};at.hydrateRoot=function(e,t,n){if(!ju(e))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,l=!1,i="",s=Am;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Em(t,null,e,1,n??null,l,!1,i,s),e[Ut]=t.current,dl(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new os(t)};at.render=function(e,t,n){if(!as(t))throw Error(U(200));return us(null,e,t,!1,n)};at.unmountComponentAtNode=function(e){if(!as(e))throw Error(U(40));return e._reactRootContainer?(Rn(function(){us(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};at.unstable_batchedUpdates=gu;at.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!as(n))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return us(e,t,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Tm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tm)}catch(e){console.error(e)}}Tm(),Tf.exports=at;var F0=Tf.exports,od=F0;ho.createRoot=od.createRoot,ho.hydrateRoot=od.hydrateRoot;/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(e,t)=>{const n=T.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:u,...c},f)=>T.createElement("svg",{ref:f,...O0,width:l,height:l,stroke:r,strokeWidth:s?Number(i)*24/Number(l):i,className:["lucide",`lucide-${$0(e)}`,a].join(" "),...c},[...t.map(([d,p])=>T.createElement(d,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ue("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=ue("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=ue("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ue("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ue("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=ue("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=ue("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.367.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cd=()=>({name:"",concept:"",combatXP:0,socialXP:0,stats:{MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0},skills:[],perks:[],combatPerks:[],magicPerks:[],equipment:[],customItems:[],progressionLog:[],weaponDomains:{Martial:0,Spellcraft:0},maxWounds:2,hpPerWound:5,extraHP:0,armorType:"None",equippedWeapon1:"None",equippedWeapon2:"None",equippedShield:"None",currentStamina:null,currentHealth:null,markedWounds:0,extraHPCount:0,extraHPHistory:[],extraWoundCount:0,inventory:[],knownSpells:[],attunedSpells:[],bio:"",notes:"",reputation:""}),zr=e=>{try{const t=Bi(),n=t.findIndex(r=>r.name===e.name);n>=0?t[n]=e:t.push(e),localStorage.setItem("exceed-characters",JSON.stringify(t))}catch(t){console.error("Failed to save character:",t)}},ty=e=>{e.knownSpells||(e.knownSpells=[]),e.attunedSpells||(e.attunedSpells=[]),e.inventory||(e.inventory=[]),e.magicPerks||(e.magicPerks=[]),"spellcraft"in e&&delete e.spellcraft,"magicXP"in e&&delete e.magicXP;const t=e.weaponDomains;if(t&&("1H"in t||"2H"in t||"SaS"in t)){const n=Math.max(t["1H"]||0,t["2H"]||0,t.SaS||0,t.Sh||0,t.Ar||0),r=t.Spell||0;e.weaponDomains={Martial:n,Spellcraft:r}}return"Martial"in e.weaponDomains||(e.weaponDomains.Martial=0),"Spellcraft"in e.weaponDomains||(e.weaponDomains.Spellcraft=0),e},Bi=()=>{try{const e=localStorage.getItem("exceed-characters");return(e?JSON.parse(e):[]).map(ty)}catch(e){return console.error("Failed to load characters:",e),[]}},dd=e=>{try{const n=Bi().filter(r=>r.name!==e);localStorage.setItem("exceed-characters",JSON.stringify(n))}catch(t){console.error("Failed to delete character:",t)}},ny=e=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=`${e.name||"character"}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},ry=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=l=>{var i;try{const s=JSON.parse((i=l.target)==null?void 0:i.result);t(s)}catch{n(new Error("Invalid character file"))}},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(e)}),zm=({isOpen:e,onClose:t,title:n,children:r})=>e?o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 min-w-[300px] max-w-[90vw] max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:n}),r]})}):null,ly=({isOpen:e,onClose:t,onAddXP:n})=>{const[r,l]=T.useState(""),[i,s]=T.useState(""),a=()=>{const c=parseInt(r)||0,f=parseInt(i)||0;n(c,f),u()},u=()=>{l(""),s(""),t()};return o.jsxs(zm,{isOpen:e,onClose:u,title:"Add Experience Points",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-white mb-2",children:[o.jsx(bl,{size:16,className:"text-red-400"}),"Combat"]}),o.jsx("input",{type:"number",value:r,onChange:c=>l(c.target.value),placeholder:"Enter Combat XP",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-white mb-2",children:[o.jsx(jr,{size:16,className:"text-blue-400"}),"Skill"]}),o.jsx("input",{type:"number",value:i,onChange:c=>s(c.target.value),placeholder:"Enter Skill XP",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsx("button",{onClick:a,className:"w-full bg-slate-700 hover:bg-slate-600 rounded py-2 mb-2 text-white font-semibold",children:"Okay"}),o.jsx("button",{onClick:u,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})]})},Te={MG:"Might",EN:"Endurance",AG:"Agility",DX:"Dexterity",WT:"Wit",WI:"Will",PR:"Perception",CH:"Charisma"},iy=e=>{if(Te[e])return Te[e];const t=e.trim(),n=t.toLowerCase();if(n==="willpower")return"Will";const l=Object.values(Te).find(i=>i.toLowerCase()===n);return l||t},aa=[10,30,60,100,150],ua=[10,30,60,100,150],ca=[10,30,60,100,150],_r={NONE:{name:"None",speedPenalty:0,dodgePenalty:0},LIGHT:{name:"Light",speedPenalty:-1,dodgePenalty:-1},ENCUMBERED:{name:"Encumbered",speedPenalty:-2,dodgePenalty:-2},HEAVY:{name:"Heavy Encumbered",speedPenalty:-3,dodgePenalty:-3},OVER:{name:"Over-Encumbered",speedPenalty:-4,dodgePenalty:-4}},sy={MG:H0,EN:Y0,AG:J0,DX:X0,WT:B0,WI:U0,PR:q0,CH:Rm},oy={Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"},Gs=(e,t)=>{let n=0,r=t[0];for(let s=0;s<t.length;s++)if(e>=t[s])n=t[s],r=t[s+1]||t[s];else{r=t[s];break}if(e>=t[t.length-1])return 100;const l=r-n,i=e-n;return l>0?i/l*100:0},ay=({character:e,onUpdateXP:t,onMenuToggle:n})=>{const[r,l]=T.useState(!1),[i,s]=T.useState(!1),a=T.useMemo(()=>{const f={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};return e.progressionLog.forEach(d=>{if(d.type!=="stagedPerk"&&d.attribute){const p=oy[d.attribute]||d.attribute;p in f&&(f[p]+=d.cost||0)}}),f},[e.progressionLog]),u=T.useMemo(()=>{let f=0,d=0;return e.progressionLog.forEach(p=>{p.type==="combatPerk"||p.type==="stagedPerk"?f+=p.cost||0:(p.type==="spell"||p.type==="magicPerk")&&(d+=p.cost||0)}),{Martial:f,Spellcraft:d}},[e.progressionLog]),c=(f,d)=>{t(f,d),s(!1)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-black border-b border-slate-700",children:[o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"flex justify-between items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 cursor-pointer",onClick:()=>l(!r),children:[o.jsx("button",{onClick:f=>{f.stopPropagation(),n()},className:"text-slate-400 hover:text-white transition-colors p-1",title:"Open menu",children:o.jsx(Q0,{size:20})}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:e.name})]}),o.jsxs("div",{className:"flex items-center gap-4 bg-slate-800 hover:bg-slate-700 rounded-lg px-4 py-2 cursor-pointer transition-colors border border-slate-600",onClick:f=>{f.stopPropagation(),s(!0)},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bl,{size:16,className:"text-red-400"}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-semibold text-white",children:"Combat"}),o.jsx("span",{className:"text-lg font-bold text-white",children:e.combatXP})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jr,{size:16,className:"text-blue-400"}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-semibold text-white",children:"Skill"}),o.jsx("span",{className:"text-lg font-bold text-white",children:e.socialXP})]})]})]})]})}),o.jsxs("div",{className:"overflow-hidden transition-all duration-250 bg-slate-950",style:{maxHeight:r?"300px":"0px"},children:[o.jsx("div",{className:"grid grid-cols-4 gap-2 p-3 pb-2",children:Object.entries(e.stats).map(([f,d])=>{const p={MG:"Might",EN:"Endurance",AG:"Agility",DX:"Dexterity",WT:"Wit",WI:"Will",PR:"Perception",CH:"Charisma"},m=sy[f],g=a[f]||0,k=Gs(g,aa);return o.jsxs("div",{className:"bg-slate-800 rounded px-2 py-1.5",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[m&&o.jsx(m,{size:14,className:"text-slate-400 flex-shrink-0"}),o.jsxs("span",{className:"text-xs font-semibold text-slate-300 flex-1",children:[o.jsx("span",{className:"hidden sm:inline",children:p[f]||f}),o.jsx("span",{className:"sm:hidden",children:f})]}),o.jsx("span",{className:"text-base font-bold text-white",children:d})]}),o.jsx("div",{className:"h-1 bg-slate-700 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${k}%`}})})]},f)})}),o.jsx("div",{className:"px-3 pb-3",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 bg-red-900/40 border border-red-800/50 rounded px-3 py-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(bl,{size:14,className:"text-red-400"}),o.jsx("span",{className:"text-xs font-semibold text-red-300",children:"Martial"})]}),o.jsx("span",{className:"text-base font-bold text-white",children:e.weaponDomains.Martial})]}),o.jsx("div",{className:"h-1 bg-red-950 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-red-500 transition-all duration-300",style:{width:`${Gs(u.Martial,ua)}%`}})})]}),o.jsxs("div",{className:"flex-1 bg-purple-900/40 border border-purple-800/50 rounded px-3 py-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Rm,{size:14,className:"text-purple-400"}),o.jsx("span",{className:"text-xs font-semibold text-purple-300",children:"Spellcraft"})]}),o.jsx("span",{className:"text-base font-bold text-white",children:e.weaponDomains.Spellcraft})]}),o.jsx("div",{className:"h-1 bg-purple-950 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300",style:{width:`${Gs(u.Spellcraft,ca)}%`}})})]})]})})]})]}),o.jsx(ly,{isOpen:i,onClose:()=>s(!1),onAddXP:c})]})},uy=({attributes:e,onSelect:t,onCancel:n})=>{const r=e.split("/").map(l=>l.trim());return o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-slate-300 text-sm mb-4",children:"Choose an attribute to improve:"}),r.map(l=>o.jsx("button",{onClick:()=>t(l),className:"w-full bg-slate-700 hover:bg-slate-600 rounded py-3 text-white font-semibold",children:l},l)),o.jsx("button",{onClick:n,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold mt-4",children:"Cancel"})]})},cy={"Social Skills":[{name:"Dancing",attributes:"Agility/Charisma",description:"Formal and social dancing, grace in movement, social positioning through performance"},{name:"Negotiating",attributes:"Charisma/Wit",description:"Making deals, bargaining, diplomatic solutions, finding win-win outcomes"},{name:"Manipulation",attributes:"Charisma/Will",description:"Subtle influence, psychological pressure, making people think your ideas are theirs"},{name:"Leadership",attributes:"Charisma/Will",description:"Inspiring groups, command presence, rallying others in crisis situations"},{name:"Fast-talk",attributes:"Charisma/Agility",description:"Quick convincing, rapid lies and truths, overwhelming with words, time-pressure persuasion"},{name:"Singing",attributes:"Endurance/Charisma",description:"Vocal performance, crowd entertainment, emotional resonance through music"},{name:"Gossip",attributes:"Charisma/Perception",description:"Information gathering, rumor trading, social intelligence, reputation management"},{name:"Intimidation",attributes:"Charisma/Might",description:"Coercion, demoralizing and otherwise using fear to adjust behavior of the adversary"},{name:"Acting",attributes:"Charisma/Will",description:"Staying in the role, pretending to be someone else. This doesn't allow change of behavior, but used to enter and sustain a role"}],"Athletic/Acrobatic Skills":[{name:"Running",attributes:"Agility/Endurance",description:"Speed and endurance movement; choose Agility for sprinting/quick bursts or Endurance for long-distance running. Increases Speed as per speed rules"},{name:"Climbing",attributes:"Might/Agility",description:"Scaling walls, cliffs, buildings; vertical movement and grip strength"},{name:"Swimming",attributes:"Endurance/Might",description:"Aquatic movement, underwater endurance, water rescue"},{name:"Jumping",attributes:"Might/Agility",description:"Explosive leg power, long jumps, high jumps, parkour leaps"},{name:"Acrobatics",attributes:"Agility/Dexterity",description:"Tumbling, flips, balance, contortion, graceful movement, fall mitigation, tightrope walking, escaping bonds, squeezing through spaces"},{name:"Lifting",attributes:"Might/Endurance",description:"Raw strength application, moving heavy objects, feats of strength"},{name:"Breaking",attributes:"Might/Wit",description:"Destructive force application, knowing weak points, demolition work"}],"Crafting Skills":[{name:"Smithing",attributes:"Might/Dexterity",description:"Metalwork, jewelry, weapons, armor, tools"},{name:"Woodworking",attributes:"Dexterity/Wit",description:"Carpentry, furniture, bows, wooden tools, construction"},{name:"Textilework",attributes:"Dexterity/Perception",description:"Leatherworking, tailoring, rope-making, fabric crafts"},{name:"Engineering",attributes:"Wit/Perception",description:"Designing complex interconnected mechanisms"}],"Natural Sciences":[{name:"Biology",attributes:"Wit/Perception",description:"Living organisms, anatomy, plant identification, natural remedies, organic poisons"},{name:"Chemistry",attributes:"Wit/Dexterity",description:"Chemical processes, explosives, acids, synthetic compounds, material properties"},{name:"Medicine",attributes:"Wit/Dexterity",description:"Healing, surgery, anatomy, practical medical treatment"}],"Stealth/Criminal Skills":[{name:"Stealth",attributes:"Agility/Perception",description:"Moving unseen, hiding, avoiding detection"},{name:"Lockpicking",attributes:"Dexterity/Perception",description:"Bypassing mechanical and magical security, opening locked containers"},{name:"Sleight of Hand",attributes:"Dexterity/Agility",description:"Pickpocketing, palming objects, manual dexterity tricks"}],"Wilderness Skills":[{name:"Survival",attributes:"Endurance/Perception",description:"Wilderness living, foraging, finding shelter and water"},{name:"Tracking",attributes:"Perception/Wit",description:"Following trails, reading signs, hunting quarry"},{name:"Navigation",attributes:"Perception/Wit",description:"Finding your way, reading maps, celestial navigation"}],"Knowledge Skills":[{name:"Arcane Lore",attributes:"Wit/Will",description:"Magic theory, spell identification, understanding magical phenomena"},{name:"History",attributes:"Wit/Will",description:"Past events, cultures, legends, political knowledge"},{name:"Theology",attributes:"Will/Charisma",description:"Divine knowledge, rituals, religious traditions"},{name:"Streetwise",attributes:"Charisma/Perception",description:"Criminal underworld knowledge, black market connections"}]},dy=({isOpen:e,onClose:t,onSelectSkill:n,learnedSkills:r,availableCP:l})=>{if(!e)return null;const s=(()=>{const c={};return Object.entries(cy).forEach(([f,d])=>{const p=d.filter(m=>!r.includes(m.name));p.length>0&&(c[f]=p)}),c})(),a=Object.keys(s).length===0,u=l>=2;return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full flex flex-col",style:{maxHeight:"80vh"},onClick:c=>c.stopPropagation(),children:[o.jsxs("h3",{className:"text-xl font-bold text-white p-6 pb-4 text-center flex-shrink-0",children:["Add New Skill",o.jsxs("div",{className:"text-sm text-slate-400 font-normal mt-1",children:["Available Skill XP: ",l," CP"]}),!u&&o.jsx("div",{className:"text-sm text-red-400 font-normal",children:"Need 2 CP to learn a skill"})]}),o.jsx("div",{className:"overflow-y-auto px-6 flex-1",style:{minHeight:0},children:a?o.jsx("p",{className:"text-slate-400 text-center py-8",children:"All skills learned!"}):o.jsx("div",{className:"space-y-4 pb-4",children:Object.entries(s).map(([c,f])=>o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-400 mb-2 sticky top-0 bg-slate-800 py-1",children:c}),o.jsx("div",{className:"space-y-2",children:f.map(d=>o.jsxs("button",{onClick:()=>n(d),disabled:!u,className:`w-full rounded p-3 text-left transition-colors ${u?"bg-slate-700 hover:bg-slate-600":"bg-slate-700 opacity-50 cursor-not-allowed"}`,children:[o.jsx("div",{className:"text-white font-medium",children:d.name}),o.jsx("div",{className:"text-slate-400 text-sm",children:d.attributes})]},d.name))})]},c))})}),o.jsx("div",{className:"p-6 pt-4 border-t border-slate-700 flex-shrink-0",children:o.jsx("button",{onClick:t,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})})]})})},fy=({isOpen:e,onClose:t,onSave:n,availableCP:r,editingPerk:l=null,existingCost:i=0})=>{const[s,a]=T.useState(""),[u,c]=T.useState(""),[f,d]=T.useState(""),[p,m]=T.useState(""),g=l!==null;if(T.useEffect(()=>{e&&l?(a(l.name),c(l.cost.toString()),d(l.attribute),m(l.description||"")):e&&!l&&(a(""),c(""),d(""),m(""))},[e,l]),!e)return null;const k=()=>{a(""),c(""),d(""),m(""),t()},A=()=>{const N=parseInt(u),S=g?N-i:N;s.trim()&&N&&f&&r>=S&&(n({name:s.trim(),cost:N,attribute:f,description:p.trim()}),k())},h=parseInt(u||"0"),x=g?h-i:h,y=r>=x,E=s.trim()&&h&&f;return o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:k,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 min-w-[350px] max-w-[500px] w-full",onClick:N=>N.stopPropagation(),children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:[g?"Edit Perk":"Add New Perk",o.jsx("div",{className:"text-sm text-slate-400 font-normal mt-1",children:g?o.jsxs(o.Fragment,{children:["Current: ",i," CP  New: ",h," CP",o.jsx("br",{}),"Available Skill XP: ",r," CP"]}):`Available Skill XP: ${r} CP`})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Perk Name"}),o.jsx("input",{type:"text",value:s,onChange:N=>a(N.target.value),placeholder:"Enter perk name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Cost (CP)"}),o.jsx("input",{type:"number",value:u,onChange:N=>c(N.target.value),placeholder:"Enter CP cost",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-semibold text-white mb-2",children:["Attribute ",f&&o.jsxs("span",{className:"text-blue-400",children:["(",f,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Te).map(([N,S])=>o.jsx("button",{onClick:()=>d(S),className:`py-2 rounded font-semibold transition-colors ${f===S?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:N},N))})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Description (Optional)"}),o.jsx("textarea",{value:p,onChange:N=>m(N.target.value),placeholder:"Enter perk description",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white resize-none"})]}),o.jsx("button",{onClick:A,disabled:!E||!y,className:`w-full rounded py-2 mb-2 text-white font-semibold ${!E||!y?"bg-slate-600 cursor-not-allowed opacity-50":g?"bg-blue-700 hover:bg-blue-600":"bg-slate-700 hover:bg-slate-600"}`,children:E?y?g?"Save Changes":"Add":"Not Enough XP":g?"Save Changes":"Add"}),o.jsx("button",{onClick:k,className:"w-full bg-slate-600 hover:bg-slate-500 rounded py-2 text-white font-semibold",children:"Cancel"})]})})},Yl=e=>Math.floor(Math.random()*e)+1,Nu=({isOpen:e,onClose:t,rollData:n})=>{const[r,l]=T.useState(null),[i,s]=T.useState(!1),[a,u]=T.useState(null),[c,f]=T.useState(null),d=n&&(i&&n.damageRollData?{type:n.type.replace("Attack","Damage"),baseModifier:n.damageRollData.damageBonus,isDamageRoll:!0,damageDice:n.damageRollData.damageDice,damageBonus:n.damageRollData.damageBonus}:n),p=d?r!==null?r:d.baseModifier:0,m=()=>{const h=[Yl(10),Yl(10),Yl(10)],x=[...h].sort((y,E)=>y-E);return{dice:h,normal:h[0]+h[1],disadvantage:x[0]+x[1],advantage:x[1]+x[2]}},g=()=>{if(!d||!d.damageDice)return;if(d.damageDice.sides===1){const x=d.damageDice.count;f({rolls:[x],total:x,breakdown:`${x}`})}else{const x=[];for(let S=0;S<d.damageDice.count;S++)x.push(Yl(d.damageDice.sides));const y=x.reduce((S,w)=>S+w,0),E=d.damageBonus||0,N=y+E;f({rolls:x,total:N,breakdown:`${x.join(" + ")}${E>0?` + ${E}`:""} = ${N}`})}};T.useEffect(()=>{e&&d&&!d.isDamageRoll&&u(m())},[e,p,i]),T.useEffect(()=>{e&&d&&d.isDamageRoll&&g()},[e,i]);const k=()=>{d&&(d.isDamageRoll?g():u(m()))},A=()=>{u(null),f(null),l(null),s(!1),t()};return!e||!n||!d?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:A,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-lg w-full",onClick:h=>h.stopPropagation(),children:[o.jsx("div",{className:"bg-slate-800 border-b border-slate-700 p-4",children:o.jsx("h3",{className:"text-xl font-bold text-white text-center",children:d.type})}),o.jsxs("div",{className:"p-4",children:[n.damageRollData&&o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsx("button",{onClick:h=>{h.stopPropagation(),s(!1),f(null)},className:`py-2 px-4 rounded font-semibold transition-colors ${i?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-blue-700 text-white"}`,children:"Attack Roll"}),o.jsx("button",{onClick:h=>{h.stopPropagation(),s(!0),u(null)},className:`py-2 px-4 rounded font-semibold transition-colors ${i?"bg-red-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Damage Roll"})]}),d.attributeOptions&&d.attributeOptions.length>1&&!d.isDamageRoll&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.attributeOptions.map((h,x)=>o.jsxs("button",{onClick:y=>{y.stopPropagation(),l(h.value)},className:`py-2 px-4 rounded font-semibold transition-colors ${(r!==null?r===h.value:x===0)?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[h.label," (+",h.value,")"]},x))})]}),!d.isDamageRoll&&a&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.dice.map((h,x)=>{const E=a.dice.filter(N=>N===h).length>=2;return o.jsxs("div",{className:`rounded-lg p-3 text-center ${E?"bg-amber-900/50 border-2 border-amber-500":"bg-slate-700 border border-slate-600"}`,children:[o.jsxs("div",{className:"text-xs text-slate-400 font-semibold mb-1",children:["Die ",x+1," ",E?"":""]}),o.jsx("div",{className:"text-3xl font-bold text-white",children:h})]},x)})}),o.jsxs("div",{className:"space-y-3 cursor-pointer",onClick:h=>{h.target.tagName!=="BUTTON"&&k()},children:[(()=>{const h=a.normal+p,x=a.dice[0]===a.dice[1];return o.jsxs("div",{className:`rounded-lg p-4 text-center ${x?"bg-amber-900/50 border-2 border-amber-500":"bg-blue-900/50 border-2 border-blue-500"}`,children:[o.jsx("div",{className:"text-7xl font-bold text-white",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[a.dice[0]," + ",a.dice[1]," + ",p]})]})})(),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const h=a.disadvantage+p,x=[...a.dice].sort((E,N)=>E-N),y=x[0]===x[1];return o.jsxs("div",{className:`rounded-lg p-3 ${y?"bg-amber-900/50 border-2 border-amber-500":"bg-red-900/30 border border-red-700"}`,children:[o.jsx("div",{className:"text-sm text-red-300 font-semibold mb-1",children:"Disadv"}),o.jsx("div",{className:"text-4xl font-bold text-white text-center",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-center",children:[x[0]," + ",x[1]," + ",p]})]})})(),(()=>{const h=a.advantage+p,x=[...a.dice].sort((E,N)=>N-E),y=x[0]===x[1];return o.jsxs("div",{className:`rounded-lg p-3 ${y?"bg-amber-900/50 border-2 border-amber-500":"bg-green-900/30 border border-green-700"}`,children:[o.jsx("div",{className:"text-sm text-green-300 font-semibold mb-1",children:"Adv"}),o.jsx("div",{className:"text-4xl font-bold text-white text-center",children:h}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-center",children:[x[0]," + ",x[1]," + ",p]})]})})()]}),o.jsx("div",{className:"text-center text-slate-500 text-xs mt-2",children:"Click to reroll"})]})]}),d.isDamageRoll&&c&&o.jsxs("div",{className:"bg-red-900/30 border-2 border-red-700 rounded-lg p-6 text-center cursor-pointer",onClick:k,children:[o.jsx("div",{className:"text-sm text-red-300 font-semibold mb-2",children:"DAMAGE"}),o.jsx("div",{className:"text-6xl font-bold text-white mb-3",children:c.total}),o.jsx("div",{className:"text-sm text-slate-300 mb-2",children:c.breakdown}),o.jsx("div",{className:"text-center text-slate-500 text-xs mt-2",children:"Click to reroll"})]})]})]})})},py=["Combat","Skill","Spellcraft"];function _m(e){return e!=null&&e.tags?e.tags.filter(t=>py.includes(t)):[]}function Wi(e,t){return[...new Set([...e,...t])]}function my(e,t,n=!1){if(!t)return[];const r=[],l=new Map(t.abilities.map(s=>[s.id,s])),i=(s,a)=>{var c;if(!((c=s==null?void 0:s.grants)!=null&&c.abilities))return;const u=n?_m(s):[];for(const f of s.grants.abilities){const d=l.get(f);if(d){const p=n?Wi(d.tags,u):d.tags;if(!r.find(m=>m.id===d.id&&m.sourcePerk===a))r.push({id:d.id,name:d.name,effect:d.effect,tags:p,sourcePerk:a,sourcePerkId:s.id});else if(n){const m=r.find(g=>g.id===d.id&&g.sourcePerk===a);m&&(m.tags=Wi(m.tags,u))}}}};for(const s of e.perks)i(s.perkSnapshot,s.name);for(const s of e.combatPerks)i(s.perkSnapshot,s.name);for(const s of e.magicPerks||[])i(s.perkSnapshot,s.name);for(const s of e.stagedPerks||[])i(s.perkSnapshot,s.name);return r}function cs(e,t){return my(e,t,!0)}function hy(e,t,n=!1){if(!t)return[];const r=[],l=new Map(t.effects.map(s=>[s.id,s])),i=(s,a)=>{var c;if(!((c=s==null?void 0:s.grants)!=null&&c.effects))return;const u=n?_m(s):[];for(const f of s.grants.effects){const d=l.get(f);if(d){const p=n?Wi(d.tags,u):d.tags;if(!r.find(m=>m.id===d.id&&m.sourcePerk===a))r.push({id:d.id,name:d.name,effect:d.effect,tags:p,sourcePerk:a,sourcePerkId:s.id});else if(n){const m=r.find(g=>g.id===d.id&&g.sourcePerk===a);m&&(m.tags=Wi(m.tags,u))}}}};for(const s of e.perks)i(s.perkSnapshot,s.name);for(const s of e.combatPerks)i(s.perkSnapshot,s.name);for(const s of e.magicPerks||[])i(s.perkSnapshot,s.name);for(const s of e.stagedPerks||[])i(s.perkSnapshot,s.name);return r}function ds(e,t){return hy(e,t,!0)}const fd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=T.useState(!1),i=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a))}),n&&o.jsxs("button",{onClick:s=>{s.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},gy=({character:e,onUpdate:t,perkDatabase:n})=>{const r=cs(e,n),l=ds(e,n),i=r.filter(L=>L.tags.includes("Skill")),s=l.filter(L=>L.tags.includes("Skill")),[a,u]=T.useState(!1),[c,f]=T.useState(!1),[d,p]=T.useState(!1),[m,g]=T.useState(!1),[k,A]=T.useState(null),[h,x]=T.useState(null),[y,E]=T.useState(null),[N,S]=T.useState(null),[w,D]=T.useState(null),H=L=>({Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"})[L.trim()]||null,j=L=>{const R=L.attributes.split("/").map(_=>_.trim()).map(_=>{const v=H(_),W=v?e.stats[v]:0;return{label:_,value:W+L.level}});A({type:`Skill: ${L.name}`,baseModifier:R[0].value,attributeOptions:R}),g(!0)},C=L=>{e.socialXP>=2&&(x(L),u(!1),p(!0))},P=L=>{if(h!==null){if(y===null){const R={name:h.name,attributes:h.attributes,description:h.description,level:1,attributeHistory:[L]};t({...e,skills:[...e.skills,R],socialXP:e.socialXP-2,progressionLog:[...e.progressionLog,{type:"skill",name:h.name,level:1,attribute:L,cost:2}]})}else{const b=e.skills[y],R=b.level+1,_=R*2,v={...b,level:R,attributeHistory:[...b.attributeHistory,L]},W=[...e.skills];W[y]=v,t({...e,skills:W,socialXP:e.socialXP-_,progressionLog:[...e.progressionLog,{type:"skill",name:b.name,level:R,attribute:L,cost:_}]})}p(!1),x(null),E(null)}},$=()=>{p(!1),x(null),y!==null?E(null):u(!0)},B=L=>{S(N===L?null:L)},I=L=>{const b=e.skills[L],R=(b.level+1)*2;e.socialXP>=R&&(x({name:b.name,attributes:b.attributes,description:b.description}),E(L),p(!0))},q=L=>{const b=e.skills[L];if(b.level<=1)return;const R=b.level*2,_={...b,level:b.level-1,attributeHistory:b.attributeHistory.slice(0,-1)},v=[...e.skills];v[L]=_;const W=[...e.progressionLog];for(let O=W.length-1;O>=0;O--)if(W[O].type==="skill"&&W[O].name===b.name){W.splice(O,1);break}t({...e,skills:v,socialXP:e.socialXP+R,progressionLog:W})},Q=L=>{if(w===null)return;const b=e.perks[w],R=L.cost-b.cost,_=[...e.perks];_[w]=L;const v=e.progressionLog.filter(W=>!(W.type==="perk"&&W.name===b.name&&W.cost===b.cost));t({...e,perks:_,socialXP:e.socialXP-R,progressionLog:[...v,{type:"perk",name:L.name,attribute:L.attribute,cost:L.cost}]}),D(null)},z=L=>{const b=e.perks.findIndex(W=>W.name===L);if(b===-1)return;const R=e.perks[b],_=e.perks.filter((W,O)=>O!==b),v=[...e.progressionLog];for(let W=v.length-1;W>=0;W--)if(v[W].type==="perk"&&v[W].name===R.name&&v[W].cost===R.cost&&v[W].attribute===R.attribute){v.splice(W,1);break}t({...e,perks:_,socialXP:e.socialXP+R.cost,progressionLog:v})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Skills"}),o.jsx("button",{onClick:()=>u(!0),className:"bg-slate-700 hover:bg-slate-600 rounded-lg p-1.5",children:o.jsx(zn,{size:16})})]}),o.jsx("div",{className:"space-y-2",children:e.skills.map((L,b)=>o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsxs("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors flex justify-between items-center",onClick:()=>B(b),children:[o.jsxs("div",{children:[o.jsxs("span",{className:"text-white font-medium",children:[L.name,"[",L.level,"]"]}),o.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:["(",L.attributes,")"]})]}),o.jsx("button",{onClick:R=>{R.stopPropagation(),j(L)},className:"bg-blue-700 hover:bg-blue-600 rounded p-2 text-white transition-colors",children:o.jsx(Dm,{size:16})})]}),N===b&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("p",{className:"text-slate-300 text-sm mt-2 mb-3",children:L.description}),o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-1",children:"Attribute History:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:L.attributeHistory.map((R,_)=>o.jsxs("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded",children:["Lvl ",_+1,": ",R]},_))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:R=>{R.stopPropagation(),I(b)},disabled:L.level>=5||e.socialXP<(L.level+1)*2,className:`flex-1 rounded py-2 text-white font-semibold flex items-center justify-center gap-1 ${L.level>=5||e.socialXP<(L.level+1)*2?"bg-slate-600 cursor-not-allowed opacity-50":"bg-green-700 hover:bg-green-600"}`,children:[o.jsx(zn,{size:16}),"Level Up [",(L.level+1)*2," XP]"]}),o.jsxs("button",{onClick:R=>{R.stopPropagation(),q(b)},disabled:L.level<=1,className:`flex-1 rounded py-2 text-white font-semibold flex items-center justify-center gap-1 ${L.level<=1?"bg-slate-600 cursor-not-allowed opacity-50":"bg-red-700 hover:bg-red-600"}`,children:[o.jsx("span",{className:"text-lg leading-none",children:""}),"Level Down [",L.level*2," XP]"]})]})]})]},b))})]}),o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-3 bg-slate-750 border-b border-slate-700 flex items-center gap-2",children:[o.jsx(jr,{size:18,className:"text-slate-300"}),o.jsx("h3",{className:"text-white font-semibold",children:"Granted Abilities & Effects"}),o.jsxs("span",{className:"text-slate-400 text-sm ml-auto",children:[i.length+s.length," total"]})]}),o.jsx("div",{className:"p-4 space-y-2",children:i.length===0&&s.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Skill perks. Add perks in the Perks tab."}):o.jsxs(o.Fragment,{children:[i.map((L,b)=>o.jsx(fd,{item:L,isAbility:!0,onDelete:()=>z(L.sourcePerk)},`skill-ability-${b}`)),s.map((L,b)=>o.jsx(fd,{item:L,isAbility:!1,onDelete:()=>z(L.sourcePerk)},`skill-effect-${b}`))]})})]})}),o.jsx(dy,{isOpen:a,onClose:()=>u(!1),onSelectSkill:C,learnedSkills:e.skills.map(L=>L.name),availableCP:e.socialXP}),w!==null&&o.jsx(fy,{isOpen:c,onClose:()=>{f(!1),D(null)},onSave:Q,availableCP:e.socialXP,editingPerk:e.perks[w],existingCost:e.perks[w].cost}),d&&h&&o.jsxs(zm,{isOpen:d,onClose:$,title:h.name,children:[o.jsx("p",{className:"text-slate-400 text-sm mb-2 text-center",children:y!==null?`Level ${e.skills[y].level}  ${e.skills[y].level+1}: Select attribute to improve:`:"Select which attribute to apply points to:"}),o.jsxs("p",{className:"text-slate-400 text-xs mb-4 text-center",children:["Cost:"," ",y!==null?(e.skills[y].level+1)*2:2," ","XP",o.jsxs("span",{className:"ml-2",children:["(",e.socialXP," "," ",e.socialXP-(y!==null?(e.skills[y].level+1)*2:2)," ","Skill XP)"]})]}),o.jsx(uy,{attributes:h.attributes,onSelect:P,onCancel:$})]}),o.jsx(Nu,{isOpen:m,onClose:()=>g(!1),rollData:k})]})},Le={None:{domain:null,finesse:!1,damage:"d0",ap:0,traits:[],weight:0},Dagger:{domain:"Martial",finesse:!0,damage:"d4",ap:2,mightReq:0,traits:["Light","Quick Drawn","Range 3","Blade"],weight:.5},"Arming Sword":{domain:"Martial",finesse:!1,damage:"d6",ap:2,mightReq:0,traits:["Light","Blade"],weight:1.5},Mace:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:2,traits:["Impact"],weight:2.5},Javelin:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Range 4","Quick Drawn","Thrown","Polearm"],weight:1},Longsword:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Heavy","Versatile","Blade"],weight:2},Rapier:{domain:"Martial",finesse:!0,damage:"d8",ap:3,mightReq:1,traits:["Conduit","Blade"],weight:1.5},"Danish Axe":{domain:"Martial",finesse:!1,damage:"d12",ap:4,mightReq:3,traits:["Heavy","Large","Sweeping","Axe"],weight:4},UberZweihander:{domain:"Martial",finesse:!1,damage:"d12+1",ap:4,mightReq:4,traits:["Heavy","Reach","Large","Blade"],weight:6},Maul:{domain:"Martial",finesse:!1,damage:"d10",ap:4,mightReq:2,traits:["Nonlethal","Large","Heavy","Impact"],weight:5},Greatsword:{domain:"Martial",finesse:!1,damage:"d10",ap:3,mightReq:2,traits:["Reach","Light","Blade"],weight:3.5},Longspear:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Polearm"],weight:2},"War Staff":{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Polearm","Nonlethal","Conduit"],weight:2},Quarterstaff:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:0,traits:["Polearm","Reach","Nonlethal","Conduit"],weight:1.5},Pike:{domain:"Martial",finesse:!1,damage:"d6",ap:3,mightReq:2,traits:["Polearm","Long Reach","Large"],weight:3},SwordStaff:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:1,traits:["Polearm","Reach","Nonlethal","Double"],weight:2.5},Shortbow:{domain:"Martial",finesse:!1,damage:"d8",ap:3,mightReq:-1,traits:["Aim 10","Range 5","Ranged","Bow"],weight:1},Longbow:{domain:"Martial",finesse:!1,damage:"d10",ap:3,mightReq:0,traits:["Aim 20","Large","Range 2","Ranged","Bow"],weight:1.5}},xy=({isOpen:e,onClose:t,character:n,onUpdate:r,perkDatabase:l})=>{const[i,s]=T.useState(""),[a,u]=T.useState(""),c=T.useMemo(()=>l?l.perks.combat.filter(w=>{var D;return w.tags.includes("Conditioning")||w.cost.variable&&((D=w.cost.formula)==null?void 0:D.includes("Max_Wounds"))}):[],[l]),f=T.useMemo(()=>!n.stagedPerks||n.stagedPerks.length===0?null:n.stagedPerks[0],[n.stagedPerks]),d=f?f.level:0,p=d+1,m=n.maxWounds,g=n.combatXP>=m;if(!e)return null;const k=()=>{s(""),u(""),t()},A=i?c.find(w=>w.id===i):null,h=f?c.find(w=>w.id===f.id):null,x=w=>w?w.attributes.filter(D=>Object.values(Te).includes(D)):[],y=x(f?h:A),E=n.combatPerks.filter(w=>{var D,H;return(H=(D=w.perkSnapshot)==null?void 0:D.tags)==null?void 0:H.includes("Conditioning")}).map(w=>w.id),N=()=>{if(!A||!a||!g)return;const w={id:A.id,name:A.name,level:1,attribute:a,levelHistory:[{level:1,attribute:a,cost:m}],perkSnapshot:A,addedAt:Date.now()};r({...n,stagedPerks:[w],extraHP:n.extraHP+1,combatXP:n.combatXP-m,progressionLog:[...n.progressionLog,{type:"stagedPerk",name:A.name,cost:m,attribute:a}]}),k()},S=()=>{if(!(!f||!a||!g)){if(p>=5){const w={id:f.id,name:f.name,cost:m,attribute:a,description:(h==null?void 0:h.description)||(h==null?void 0:h.shortDescription)||"",isCustom:!1,source:"database",perkSnapshot:f.perkSnapshot,addedAt:Date.now()};r({...n,stagedPerks:[],combatPerks:[...n.combatPerks,w],maxWounds:n.maxWounds+1,extraHP:0,combatXP:n.combatXP-m,progressionLog:[...n.progressionLog,{type:"stagedPerk",name:f.name,cost:m,attribute:a},{type:"combatPerk",name:`${f.name} (Completed)`,cost:0,attribute:a}]})}else{const w={...f,level:p,attribute:a,levelHistory:[...f.levelHistory,{level:p,attribute:a,cost:m}]};r({...n,stagedPerks:[w],extraHP:n.extraHP+1,combatXP:n.combatXP-m,progressionLog:[...n.progressionLog,{type:"stagedPerk",name:f.name,cost:m,attribute:a}]})}k()}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:k,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:f?"Continue Conditioning":"Start Conditioning"}),o.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Combat XP: ",n.combatXP]})]}),o.jsx("button",{onClick:k,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[f&&h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-white font-medium",children:f.name}),o.jsxs("span",{className:"text-sm text-slate-400",children:["Level ",d,"  ",p]})]}),o.jsx("div",{className:"flex gap-1.5 mb-2",children:[1,2,3,4,5].map(w=>o.jsx("div",{className:`flex-1 h-3 rounded ${w<=d?"bg-green-500":w===p?"bg-green-500/50 animate-pulse":"bg-slate-600"}`},w))}),o.jsx("p",{className:"text-slate-300 text-sm",children:h.shortDescription}),o.jsxs("div",{className:"mt-2 text-xs text-blue-400",children:["Current bonus: +",n.extraHP," HP from conditioning"]}),p===5&&o.jsx("div",{className:"mt-2 p-2 bg-yellow-900/30 border border-yellow-700/50 rounded",children:o.jsxs("p",{className:"text-yellow-200 text-xs",children:["Level 5 completion grants +1 Max Wounds and the capstone effect! Your ",n.extraHP," bonus HP will consolidate into the new wound."]})})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-400",children:"Cost:"}),o.jsxs("span",{className:`font-bold ${g?"text-green-400":"text-red-400"}`,children:[m," XP"]})]}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[m," XP per level (Total: ",n.maxWounds*5," XP for all 5 levels)"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select Attribute ",a&&o.jsxs("span",{className:"text-blue-400",children:["(",a,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:y.length>0?y.map(w=>{var D;return o.jsx("button",{onClick:()=>u(w),className:`py-2 rounded font-semibold transition-colors ${a===w?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:((D=Object.entries(Te).find(([,H])=>H===w))==null?void 0:D[0])||w},w)}):Object.entries(Te).map(([w,D])=>o.jsx("button",{onClick:()=>u(D),className:`py-2 rounded font-semibold transition-colors ${a===D?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:w},w))})]})]}),!f&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Conditioning Type"}),o.jsxs("select",{value:i,onChange:w=>{s(w.target.value),u("")},className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose conditioning --"}),c.map(w=>{const D=E.includes(w.id);return o.jsxs("option",{value:w.id,disabled:D,children:[w.name,D?" (Complete)":""]},w.id)})]})]}),A&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-white font-medium",children:A.name}),o.jsx("span",{className:"text-sm text-slate-400",children:"Level 0  1"})]}),o.jsx("div",{className:"flex gap-1.5 mb-2",children:[1,2,3,4,5].map(w=>o.jsx("div",{className:`flex-1 h-3 rounded ${w===1?"bg-green-500/50 animate-pulse":"bg-slate-600"}`},w))}),o.jsx("p",{className:"text-slate-300 text-sm",children:A.shortDescription}),o.jsx("div",{className:"mt-2 text-xs text-blue-400",children:"Levels 1-4: +1 HP each | Level 5: +1 Max Wounds + Capstone"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-400",children:"Cost:"}),o.jsxs("span",{className:`font-bold ${g?"text-green-400":"text-red-400"}`,children:[m," XP"]})]}),o.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[m," XP per level (Total: ",n.maxWounds*5," XP for all 5 levels)"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select Attribute ",a&&o.jsxs("span",{className:"text-blue-400",children:["(",a,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:y.length>0?y.map(w=>{var D;return o.jsx("button",{onClick:()=>u(w),className:`py-2 rounded font-semibold transition-colors ${a===w?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:((D=Object.entries(Te).find(([,H])=>H===w))==null?void 0:D[0])||w},w)}):Object.entries(Te).map(([w,D])=>o.jsx("button",{onClick:()=>u(D),className:`py-2 rounded font-semibold transition-colors ${a===D?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:w},w))})]})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex gap-3",children:[o.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),f?o.jsx("button",{onClick:S,disabled:!a||!g,className:`flex-1 px-4 py-2 rounded font-semibold ${!a||!g?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-green-700 hover:bg-green-600 text-white"}`,children:g?`Train Level ${p}`:"Not Enough XP"}):o.jsx("button",{onClick:N,disabled:!A||!a||!g,className:`flex-1 px-4 py-2 rounded font-semibold ${!A||!a||!g?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-green-700 hover:bg-green-600 text-white"}`,children:g?"Start Conditioning":"Not Enough XP"})]})]})})},Ke={None:{bonus:0,mightReq:0,penalty:0,penaltyMet:0,weight:0},Scout:{bonus:1,mightReq:0,penalty:0,penaltyMet:0,weight:5},Tactical:{bonus:2,mightReq:1,penalty:-1,penaltyMet:-1,weight:10},Defensive:{bonus:3,mightReq:1,penalty:-2,penaltyMet:-2,weight:15},Protective:{bonus:4,mightReq:2,penalty:-3,penaltyMet:-1,weight:20},Bulwark:{bonus:5,mightReq:3,penalty:-4,penaltyMet:-1,weight:30},Titanic:{bonus:6,mightReq:4,penalty:-5,penaltyMet:-2,weight:45},Colossal:{bonus:7,mightReq:5,penalty:-6,penaltyMet:-2,weight:65},"Plot Armor":{bonus:10,mightReq:0,penalty:0,penaltyMet:0,weight:0}},Nt={None:{defenseBonus:0,negation:0,armorPenalty:0,mightReq:0,type:"Light",weight:0},Buckler:{defenseBonus:1,negation:2,armorPenalty:0,mightReq:0,type:"Light",weight:.5},Shield:{defenseBonus:1,negation:3,armorPenalty:0,mightReq:0,type:"Medium",weight:3},"Kite Shield":{defenseBonus:2,negation:4,armorPenalty:1,mightReq:1,type:"Medium",weight:3},"Tower Shield":{defenseBonus:3,negation:5,armorPenalty:2,mightReq:2,type:"Heavy",weight:6},"Fortress Shield":{defenseBonus:4,negation:6,armorPenalty:3,mightReq:3,type:"Heavy",weight:8}},Cu=e=>e.inventory?e.inventory.filter(t=>t.type==="weapon"&&t.state==="equipped"):[],fs=e=>e.inventory&&e.inventory.find(n=>n.type==="armor"&&n.state==="equipped")||null,Fm=e=>e.inventory&&e.inventory.find(n=>n.type==="shield"&&n.state==="equipped")||null,ps=e=>e.type!=="weapon"?null:e.isCustom&&e.customWeaponData?{domain:e.customWeaponData.domain,finesse:e.customWeaponData.finesse,damage:e.customWeaponData.damage,ap:e.customWeaponData.ap,mightReq:e.customWeaponData.mightReq,traits:e.customWeaponData.traits,weight:e.weight}:e.dataRef&&Le[e.dataRef]?Le[e.dataRef]:null,Tl=e=>e.type!=="armor"?null:e.isCustom&&e.customArmorData?{bonus:e.customArmorData.bonus,mightReq:e.customArmorData.mightReq,penalty:e.customArmorData.penalty,penaltyMet:e.customArmorData.penaltyMet,weight:e.weight}:e.dataRef&&Ke[e.dataRef]?Ke[e.dataRef]:null,Pu=e=>e.type!=="shield"?null:e.isCustom&&e.customShieldData?{defenseBonus:e.customShieldData.defenseBonus,negation:e.customShieldData.negation,armorPenalty:e.customShieldData.armorPenalty,mightReq:e.customShieldData.mightReq,type:e.customShieldData.type,weight:e.weight}:e.dataRef&&Nt[e.dataRef]?Nt[e.dataRef]:null,yy=(e,t,n)=>e.inventory?{...e,inventory:e.inventory.map(r=>r.id===t?{...r,state:n}:r)}:e,vy=(e,t)=>({...e,inventory:[...e.inventory||[],t]}),by=(e,t)=>e.inventory?{...e,inventory:e.inventory.filter(n=>n.id!==t)}:e,ky=(e,t,n)=>e.inventory?{...e,inventory:e.inventory.map(r=>r.id===t?{...r,...n}:r)}:e,St=()=>`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,wy=(e,t)=>{if(!e.inventory)return{canEquip:!0};if(t.type==="armor"){const n=fs(e);if(n&&n.id!==t.id)return{canEquip:!1,reason:"Another armor is already equipped. Unequip it first."}}if(t.type==="shield"){const n=Fm(e);if(n&&n.id!==t.id)return{canEquip:!1,reason:"Another shield is already equipped. Unequip it first."}}if(t.type==="weapon"){const n=Cu(e);if(n.length>=2&&!n.some(r=>r.id===t.id))return{canEquip:!1,reason:"Maximum 2 weapons can be equipped. Unequip one first."}}return{canEquip:!0}},jy={Might:"MG",Endurance:"EN",Agility:"AG",Dexterity:"DX",Wit:"WT",Will:"WI",Perception:"PR",Charisma:"CH"},pd=e=>{const t={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};e.forEach(r=>{if(r.type!=="stagedPerk"&&r.attribute){const l=jy[r.attribute]||r.attribute;l in t&&(t[l]+=r.cost)}});const n={MG:0,EN:0,AG:0,DX:0,WT:0,WI:0,PR:0,CH:0};return Object.keys(t).forEach(r=>{const l=t[r];let i=0;for(let s=0;s<aa.length;s++)l>=aa[s]&&(i=s+1);n[r]=i}),n},md=e=>{let t=0,n=0;e.forEach(i=>{i.type==="combatPerk"||i.type==="stagedPerk"?t+=i.cost:(i.type==="spell"||i.type==="magicPerk")&&(n+=i.cost)});let r=0;for(let i=0;i<ua.length;i++)t>=ua[i]&&(r=i+1);let l=0;for(let i=0;i<ca.length;i++)n>=ca[i]&&(l=i+1);return{Martial:r,Spellcraft:l}},Sy=e=>{var u,c,f,d;const t=Math.pow(5+e.stats.EN+e.stats.MG,2);let n,r,l;if(e.inventory&&e.inventory.length>0){r=e.inventory.filter(g=>g.state==="equipped").reduce((g,k)=>g+k.weight*k.quantity,0);const p=e.inventory.filter(g=>g.state==="stowed").reduce((g,k)=>g+k.weight*k.quantity,0),m=e.stowedWeightReduction||0;l=Math.max(0,p-m),n=r+l}else{const p=e.equipment.reduce((x,y)=>x+y.weight*y.quantity,0),m=e.customItems.reduce((x,y)=>x+y.weight*y.quantity,0),g=((u=Ke[e.armorType])==null?void 0:u.weight)||0,k=((c=Le[e.equippedWeapon1])==null?void 0:c.weight)||0,A=((f=Le[e.equippedWeapon2])==null?void 0:f.weight)||0,h=((d=Nt[e.equippedShield])==null?void 0:d.weight)||0;r=g+k+A+h,l=p+m,n=p+m+r}const i=n/t*100;let s=_r.NONE;const a=n/t;return a>=2?s=_r.OVER:a>=1.5?s=_r.HEAVY:a>=1?s=_r.ENCUMBERED:a>=.5&&(s=_r.LIGHT),{capacity:t,totalWeight:n,equippedWeight:r,inventoryWeight:l,percentage:Math.min(300,i),level:s}},Ny=(e,t)=>e+t,Cy=e=>e>=5?3:e>=3?2:1,Py=(e,t)=>{if(e.includes("+Might"))return{die:0,bonus:parseInt(e.split("+")[0])+t,isBow:!0};if(e.includes("+")){const[n,r]=e.split("+");return{die:parseInt(n.replace("d","")),bonus:parseInt(r)+t,isBow:!1}}return{die:parseInt(e.replace("d","")),bonus:t,isBow:!1}},Ey=(e,t)=>{let n=e.stats.AG;return t.traits.includes("Ranged")||t.traits.includes("Bow")?n=e.stats.PR:t.finesse&&e.stats.DX>e.stats.AG?n=e.stats.DX:t.traits.includes("Heavy")&&e.stats.MG>e.stats.AG&&(n=e.stats.MG),n},Ay=(e,t)=>{if(!t.domain||t.traits.includes("Ranged")||t.traits.includes("Bow"))return 0;const n=e.weaponDomains.Martial||0;return(t.finesse&&e.stats.DX>e.stats.AG?e.stats.DX:e.stats.AG)+n},Ty=e=>{const t=Cu(e);let n=[];if(t.length>0)n=t.map(r=>ps(r)).filter(r=>r!==null);else if(e.equippedWeapon1||e.equippedWeapon2){if(e.equippedWeapon1&&e.equippedWeapon1!=="None"){const r=Le[e.equippedWeapon1];r&&n.push(r)}if(e.equippedWeapon2&&e.equippedWeapon2!=="None"){const r=Le[e.equippedWeapon2];r&&n.push(r)}}return Math.max(0,...n.map(r=>Ay(e,r)))},Dy=e=>{const t=Fm(e),n=t?Pu(t)||Nt.None:e.equippedShield?Nt[e.equippedShield]:Nt.None,r=e.weaponDomains.Martial||0;let l=0;if(n.defenseBonus>0){let i=e.stats.AG;n.type==="Medium"?i=e.stats.EN:n.type==="Heavy"&&(i=e.stats.MG),l=i+r+n.defenseBonus}return l},Iy=e=>{const t=fs(e),n=t?Tl(t)||Ke.None:e.armorType?Ke[e.armorType]:Ke.None,l=e.stats.MG>=n.mightReq?n.penaltyMet:n.penalty;return e.stats.AG+e.stats.PR+(l||0)},Ly=e=>{var l;return 2+(((l=e.stagedPerks)==null?void 0:l.filter(i=>i.level>=5))||[]).filter(i=>{var s,a;return(a=(s=i.perkSnapshot)==null?void 0:s.tags)==null?void 0:a.includes("Conditioning")}).length},My=e=>{const t=Ly(e),n=t-e.markedWounds,r=fs(e),i=(r?Tl(r)||Ke.None:e.armorType?Ke[e.armorType]:Ke.None).bonus,s=(i+e.stats.EN)*n,a=e.hpPerWound*n+e.extraHP,u=e.currentStamina!==null?e.currentStamina:s,c=e.currentHealth!==null?e.currentHealth:a,f=s+a,d=u+c,p=d<0,m=t*e.hpPerWound;let g=0,k=0,A=0;return p?A=m>0?Math.min(100,Math.abs(d)/m*100):0:(g=a>0?Math.min(100,c/a*100):0,k=s>0?Math.min(100,u/s*100):0),{maxStamina:s,maxHealth:a,currentStamina:u,currentHealth:c,totalMax:f,totalCurrent:d,effectiveMaxWounds:n,isNegative:p,maxNegativeHP:m,healthPercent:g,staminaPercent:k,negativePercent:A,armorBonus:i}},Ry=e=>{const t=fs(e),n=t?Tl(t):null,r=n?e.stats.MG>=n.mightReq:!0,l=n?r?n.penaltyMet:n.penalty:0,i=e.skills.find(c=>c.name==="Running"),s=i?Math.floor(i.level/2):0,a=5+e.stats.AG+s+l,u=5+e.stats.AG+s;return{withArmor:a,withoutArmor:u}},hd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=T.useState(!1),i=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a))}),n&&o.jsxs("button",{onClick:s=>{s.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},zy=({weaponName:e,weaponData:t,character:n,label:r,onOpenRoller:l})=>{const i=t.domain?n.weaponDomains.Martial:0,s=Ey(n,t),a=Cy(i),u=()=>{const{die:c,bonus:f,isBow:d}=Py(t.damage,n.stats.MG);l({type:`Attack - ${e}`,baseModifier:i+s,damageRollData:{damageDice:{count:d?f:a,sides:d?1:c},damageBonus:d?0:f}})};return o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-medium text-sm",children:e}),o.jsxs("div",{className:"text-slate-400 text-xs",children:[r,"  Martial ",i]})]})}),o.jsx("button",{onClick:u,className:"w-full bg-blue-600 hover:bg-blue-500 rounded py-2 text-white text-sm font-semibold",children:"Roll Attack / Damage"})]})},_y=({character:e,onUpdate:t,perkDatabase:n})=>{const[r,l]=T.useState(!1),i=cs(e,n),s=ds(e,n),a=i.filter(v=>v.tags.includes("Combat")),u=s.filter(v=>v.tags.includes("Combat")),[c,f]=T.useState(!1),[d,p]=T.useState(0),[m,g]=T.useState(0),[k,A]=T.useState(!1),[h,x]=T.useState(!1),[y,E]=T.useState(null),N=My(e),S=v=>{const W=-(e.maxWounds*e.hpPerWound),O=Math.max(W,v);let M,ee;O<=0||O<=N.maxHealth?(ee=0,M=O):(M=N.maxHealth,ee=Math.min(N.maxStamina,O-N.maxHealth)),t({...e,currentStamina:ee,currentHealth:M})},w=v=>{f(!0),p(v.clientX),g(N.totalCurrent),v.preventDefault()},D=v=>{f(!0),p(v.touches[0].clientX),g(N.totalCurrent),v.preventDefault(),v.stopPropagation()},H=v=>{if(!c)return;const W=v.clientX-d,O=Math.round(W/30);S(m+O)},j=v=>{if(!c)return;const W=v.touches[0].clientX-d,O=Math.round(W/30);S(m+O),v.preventDefault()},C=()=>{f(!1)},P=()=>{f(!1)};T.useEffect(()=>{if(c)return window.addEventListener("mousemove",H),window.addEventListener("mouseup",C),window.addEventListener("touchmove",j),window.addEventListener("touchend",P),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",C),window.removeEventListener("touchmove",j),window.removeEventListener("touchend",P)}},[c,d,m]);const $=()=>{t({...e,currentStamina:null,currentHealth:null})},B=v=>{var G,Yt;const W=e.combatPerks[v],O=e.combatPerks.filter((ne,ct)=>ct!==v),M=((Yt=(G=W.perkSnapshot)==null?void 0:G.tags)==null?void 0:Yt.includes("Conditioning"))||W.name.includes("(Completed)"),ee=W.name.replace(" (Completed)","");let te=[...e.progressionLog],he=0,fe=!1;if(M)te=e.progressionLog.filter(ne=>ne.type==="stagedPerk"&&ne.name===ee?(he+=ne.cost||0,!1):!(ne.type==="combatPerk"&&(ne.name===W.name||ne.name===`${ee} (Completed)`))),fe=!0;else{for(let ne=te.length-1;ne>=0;ne--)if(te[ne].type==="combatPerk"&&te[ne].name===W.name&&te[ne].cost===W.cost&&te[ne].attribute===W.attribute){te.splice(ne,1);break}he=W.cost}const ye=te.filter(ne=>ne.type==="combatPerk"||ne.type==="stagedPerk").reduce((ne,ct)=>ne+(ct.cost||0),0);let yt=0;ye>=150?yt=5:ye>=100?yt=4:ye>=60?yt=3:ye>=30?yt=2:ye>=10&&(yt=1),t({...e,combatPerks:O,weaponDomains:{...e.weaponDomains,Martial:yt},maxWounds:fe?e.maxWounds-1:e.maxWounds,combatXP:e.combatXP+he,progressionLog:te})},I=Cu(e);let q=[];I.length>0?q=I.map(v=>{const W=ps(v);return W?{item:v,weaponData:W}:null}).filter(v=>v!==null):(e.equippedWeapon1||e.equippedWeapon2)&&(e.equippedWeapon1&&e.equippedWeapon1!=="None"&&q.push({name:e.equippedWeapon1,weaponData:Le[e.equippedWeapon1]||Le.None}),e.equippedWeapon2&&e.equippedWeapon2!=="None"&&q.push({name:e.equippedWeapon2,weaponData:Le[e.equippedWeapon2]||Le.None}));const Q=Ty(e),z=Dy(e),L=Iy(e),b=Ny(e.stats.EN,e.stats.WI),R=v=>{E(v),x(!0)},_=(v,W)=>{R({type:v,baseModifier:W})};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 cursor-pointer",onClick:()=>l(!r),children:[o.jsxs("div",{className:"text-white",children:[o.jsx("span",{className:`text-3xl font-bold ${N.isNegative?"text-red-400":""}`,children:N.totalCurrent}),o.jsxs("span",{className:"text-slate-400 text-lg",children:[" / ",N.totalMax]})]}),o.jsxs("div",{className:"text-right text-sm",children:[!N.isNegative&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-yellow-400",children:["Stamina: ",N.currentStamina]}),o.jsxs("div",{className:"text-red-400",children:["Health: ",N.currentHealth]})]}),N.isNegative&&o.jsx("div",{className:"text-red-400",children:"Below 0 HP!"})]})]}),o.jsxs("div",{className:`relative h-8 bg-slate-700 rounded-lg overflow-hidden ${c?"cursor-grabbing":"cursor-grab"}`,onMouseDown:w,onTouchStart:D,children:[N.isNegative?o.jsx("div",{className:"absolute inset-y-0 right-0 bg-red-900 transition-all",style:{width:`${N.negativePercent}%`}}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 bg-yellow-600 transition-all",style:{width:`${N.staminaPercent}%`}}),o.jsx("div",{className:"absolute inset-0 bg-red-600 transition-all",style:{width:`${N.healthPercent}%`,left:`${N.staminaPercent}%`}})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-semibold text-sm drop-shadow-md pointer-events-none",children:N.isNegative?o.jsxs("span",{className:"text-red-200",children:[N.totalCurrent," HP"]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-yellow-200",children:N.currentStamina}),o.jsx("span",{className:"mx-1",children:"+"}),o.jsx("span",{className:"text-red-200",children:N.currentHealth})]})}),!c&&o.jsx("div",{className:"absolute bottom-0 right-2 text-xs text-slate-400 pointer-events-none",children:" Drag "})]}),o.jsxs("div",{className:"mt-3 text-sm text-slate-300",children:["Wounds: ",o.jsx("span",{className:"text-white font-semibold",children:e.maxWounds})," | HP/Wound: ",o.jsx("span",{className:"text-white font-semibold",children:e.hpPerWound})," | Armor: ",o.jsxs("span",{className:"text-white font-semibold",children:["+",N.armorBonus]})]}),r&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Marked Wounds"}),o.jsx("input",{type:"number",min:"0",max:e.maxWounds,value:e.markedWounds,onChange:v=>t({...e,markedWounds:Math.min(e.maxWounds,Math.max(0,parseInt(v.target.value)||0))}),className:"bg-slate-600 text-white text-lg font-bold w-16 px-2 py-1 rounded"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>A(!0),children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Conditioning"}),o.jsx("div",{className:"bg-green-700 rounded p-1",children:o.jsx(zn,{size:14})})]}),e.stagedPerks&&e.stagedPerks.length>0?o.jsx("div",{className:"space-y-1",children:e.stagedPerks.slice(0,1).map(v=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"text-white text-xs truncate flex-1",children:v.name}),o.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(W=>o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${W<=v.level?"bg-green-500":"bg-slate-600"}`},W))})]}),e.extraHP>0&&o.jsxs("div",{className:"text-blue-400 text-xs mt-0.5",children:["+",e.extraHP," HP"]})]},v.id))}):o.jsx("div",{className:"text-slate-500 text-xs",children:"Tap to start"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:$,className:"bg-blue-700 hover:bg-blue-600 rounded py-2 text-white font-semibold",children:"Reset to Full HP"}),o.jsx("button",{onClick:()=>t({...e,currentStamina:N.maxStamina}),className:"bg-cyan-700 hover:bg-cyan-600 rounded py-2 text-white font-semibold",children:"Reset Stamina"})]})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Equipped Weapons"}),q.length===0?o.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"No weapons equipped"}):o.jsx("div",{className:`grid gap-3 ${q.length>1?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:q.map((v,W)=>{const O="item"in v?v.item.name:v.name,M=W===0?"Primary":"Secondary";return o.jsx(zy,{weaponName:O,weaponData:v.weaponData,character:e,label:M,onOpenRoller:R},O+W)})})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Defense"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>_("Parry",Q),className:`rounded py-3 text-white text-sm font-semibold ${Q?"bg-emerald-700 hover:bg-emerald-600":"bg-slate-600 hover:bg-slate-500"}`,children:["Parry (",Q||"0",")"]}),o.jsxs("button",{onClick:()=>_("Block",z),className:`rounded py-3 text-white text-sm font-semibold ${z?"bg-amber-700 hover:bg-amber-600":"bg-slate-600 hover:bg-slate-500"}`,children:["Block (",z||"0",")"]}),o.jsxs("button",{onClick:()=>_("Dodge",L),className:"bg-indigo-700 hover:bg-indigo-600 rounded py-3 text-white text-sm font-semibold",children:["Dodge (",L,")"]}),o.jsxs("button",{onClick:()=>_("Endure",b),className:"bg-purple-700 hover:bg-purple-600 rounded py-3 text-white text-sm font-semibold",children:["Endure (",b,")"]})]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"px-4 py-3 bg-slate-750 -mx-4 -mt-4 mb-4 flex items-center gap-2 border-b border-slate-700",children:[o.jsx(bl,{size:18,className:"text-slate-300"}),o.jsx("h3",{className:"text-white font-semibold",children:"Martial Abilities & Effects"}),o.jsxs("span",{className:"text-slate-400 text-sm ml-auto",children:[a.length+u.length," total"]})]}),a.length===0&&u.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Combat perks. Add perks in the Perks tab."}):o.jsxs("div",{className:"space-y-2",children:[a.map((v,W)=>o.jsx(hd,{item:v,isAbility:!0,onDelete:()=>{const O=e.combatPerks.findIndex(M=>M.name===v.sourcePerk);O!==-1&&B(O)}},`combat-ability-${W}`)),u.map((v,W)=>o.jsx(hd,{item:v,isAbility:!1,onDelete:()=>{const O=e.combatPerks.findIndex(M=>M.name===v.sourcePerk);O!==-1&&B(O)}},`combat-effect-${W}`))]})]}),o.jsx(Nu,{isOpen:h,onClose:()=>x(!1),rollData:y}),o.jsx(xy,{isOpen:k,onClose:()=>A(!1),character:e,onUpdate:t,perkDatabase:n})]})},Fy=({isOpen:e,onClose:t,character:n,onUpdate:r})=>{const[l,i]=T.useState("weapon"),[s,a]=T.useState(!1),[u,c]=T.useState("stowed"),[f,d]=T.useState(""),[p,m]=T.useState("1"),[g,k]=T.useState("1"),[A,h]=T.useState(""),[x,y]=T.useState("Martial"),[E,N]=T.useState(!1),[S,w]=T.useState("d6"),[D,H]=T.useState("2"),[j,C]=T.useState("0"),[P,$]=T.useState(""),[B,I]=T.useState("0"),[q,Q]=T.useState("0"),[z,L]=T.useState("0"),[b,R]=T.useState("0"),[_,v]=T.useState("0"),[W,O]=T.useState("0"),[M,ee]=T.useState("0"),[te,he]=T.useState("Light"),fe=()=>{d(""),m("1"),k("1"),h(""),a(!1),c("stowed"),y("Martial"),N(!1),w("d6"),H("2"),C("0"),$(""),I("0"),Q("0"),L("0"),R("0"),v("0"),O("0"),ee("0"),he("Light")},ye=()=>{let G;if(s)if(l==="weapon"){const ne={domain:x,finesse:E,damage:S,ap:parseInt(D)||0,mightReq:parseInt(j)||0,traits:P.split(",").map(ct=>ct.trim()).filter(ct=>ct)};G={id:St(),name:f,type:"weapon",state:u,weight:parseFloat(p)||0,quantity:parseInt(g)||1,isCustom:!0,customWeaponData:ne}}else if(l==="armor"){const ne={bonus:parseInt(B)||0,mightReq:parseInt(j)||0,penalty:parseInt(q)||0,penaltyMet:parseInt(z)||0};G={id:St(),name:f,type:"armor",state:u,weight:parseFloat(p)||0,quantity:parseInt(g)||1,isCustom:!0,customArmorData:ne}}else if(l==="shield"){const ne={defenseBonus:parseInt(b)||0,negation:parseInt(_)||0,armorPenalty:parseInt(W)||0,mightReq:parseInt(M)||0,type:te};G={id:St(),name:f,type:"shield",state:u,weight:parseFloat(p)||0,quantity:parseInt(g)||1,isCustom:!0,customShieldData:ne}}else G={id:St(),name:f,type:"item",state:u,weight:parseFloat(p)||0,quantity:parseInt(g)||1,isCustom:!0};else{let ne=parseFloat(p)||0,ct=A;l==="weapon"&&Le[A]?ne=Le[A].weight:l==="armor"&&Ke[A]?ne=Ke[A].weight:l==="shield"&&Nt[A]&&(ne=Nt[A].weight),G={id:St(),name:ct,type:l,state:u,weight:ne,quantity:parseInt(g)||1,isCustom:!1,dataRef:A}}const Yt=vy(n,G);r(Yt),fe(),t()},yt=()=>s?f.trim()!==""&&p!=="":A!=="";return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Add Item to Inventory"}),o.jsx("button",{onClick:()=>{fe(),t()},className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Item Type"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:["weapon","armor","shield","item"].map(G=>o.jsx("button",{onClick:()=>{i(G),h("")},className:`py-2 px-3 rounded font-semibold capitalize ${l===G?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:G},G))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Source"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>a(!1),className:`py-2 px-3 rounded font-semibold ${s?"bg-slate-700 text-slate-300 hover:bg-slate-600":"bg-blue-700 text-white"}`,children:"From Database"}),o.jsx("button",{onClick:()=>a(!0),className:`py-2 px-3 rounded font-semibold ${s?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Custom Item"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Item State"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:["equipped","stowed","packed"].map(G=>{const Yt=ne=>ne==="stowed"?"On Self":ne==="packed"?"Stored":"Equipped";return o.jsx("button",{onClick:()=>c(G),className:`py-2 px-3 rounded font-semibold ${u===G?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:Yt(G)},G)})})]}),!s&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select ",l]}),o.jsxs("select",{value:A,onChange:G=>h(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsxs("option",{value:"",children:["-- Select ",l," --"]}),l==="weapon"&&Object.keys(Le).map(G=>o.jsxs("option",{value:G,children:[G," - ",Le[G].domain," - ",Le[G].damage]},G)),l==="armor"&&Object.keys(Ke).map(G=>o.jsxs("option",{value:G,children:[G," - Bonus +",Ke[G].bonus]},G)),l==="shield"&&Object.keys(Nt).map(G=>o.jsxs("option",{value:G,children:[G," - Def +",Nt[G].defenseBonus]},G))]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Name"}),o.jsx("input",{type:"text",value:f,onChange:G=>d(G.target.value),placeholder:"Item name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.1",value:p,onChange:G=>m(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",value:g,onChange:G=>k(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),l==="weapon"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Weapon Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Domain"}),o.jsxs("select",{value:x||"",onChange:G=>y(G.target.value===""?null:"Martial"),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Martial",children:"Martial"}),o.jsx("option",{value:"",children:"None (Improvised)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage"}),o.jsx("input",{type:"text",value:S,onChange:G=>w(G.target.value),placeholder:"e.g., d8, d10, 4+Might",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP"}),o.jsx("input",{type:"number",value:D,onChange:G=>H(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:j,onChange:G=>C(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center text-sm text-slate-300",children:[o.jsx("input",{type:"checkbox",checked:E,onChange:G=>N(G.target.checked),className:"mr-2"}),"Finesse Weapon"]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:P,onChange:G=>$(G.target.value),placeholder:"e.g., Light, Quick Drawn, Range 3",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),l==="armor"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Armor Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Bonus"}),o.jsx("input",{type:"number",value:B,onChange:G=>I(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:j,onChange:G=>C(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Unmet)"}),o.jsx("input",{type:"number",value:q,onChange:G=>Q(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Met)"}),o.jsx("input",{type:"number",value:z,onChange:G=>L(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]})]}),l==="shield"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Shield Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Defense Bonus"}),o.jsx("input",{type:"number",value:b,onChange:G=>R(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Negation"}),o.jsx("input",{type:"number",value:_,onChange:G=>v(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Penalty"}),o.jsx("input",{type:"number",value:W,onChange:G=>O(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:M,onChange:G=>ee(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Shield Type"}),o.jsxs("select",{value:te,onChange:G=>he(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Light",children:"Light"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Heavy",children:"Heavy"})]})]})]})]}),!s&&A&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Quantity"}),o.jsx("input",{type:"number",value:g,onChange:G=>k(G.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>{fe(),t()},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:ye,disabled:!yt(),className:`px-4 py-2 rounded font-semibold ${yt()?"bg-blue-700 hover:bg-blue-600 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:"Add Item"})]})]})}):null},Oy=({isOpen:e,onClose:t,item:n,character:r,onUpdate:l})=>{const[i,s]=T.useState(""),[a,u]=T.useState("1"),[c,f]=T.useState(1),[d,p]=T.useState("Martial"),[m,g]=T.useState(!1),[k,A]=T.useState("d6"),[h,x]=T.useState("2"),[y,E]=T.useState("0"),[N,S]=T.useState(""),[w,D]=T.useState("0"),[H,j]=T.useState("0"),[C,P]=T.useState("0"),[$,B]=T.useState("0"),[I,q]=T.useState("0"),[Q,z]=T.useState("0"),[L,b]=T.useState("0"),[R,_]=T.useState("0"),[v,W]=T.useState("Light");T.useEffect(()=>{if(n){if(s(n.name),u(n.weight.toString()),f(n.quantity),n.type==="weapon"){const M=ps(n);M&&(p(M.domain),g(M.finesse),A(M.damage),x(M.ap.toString()),E((M.mightReq||0).toString()),S(M.traits.join(", ")))}else if(n.type==="armor"){const M=Tl(n);M&&(D(M.bonus.toString()),j(M.mightReq.toString()),P(M.penalty.toString()),B(M.penaltyMet.toString()))}else if(n.type==="shield"){const M=Pu(n);M&&(q(M.defenseBonus.toString()),z(M.negation.toString()),b(M.armorPenalty.toString()),_(M.mightReq.toString()),W(M.type))}}},[n]);const O=()=>{if(!n)return;const M={name:i,weight:parseFloat(a)||0,quantity:c,isCustom:!0,dataRef:void 0};n.type==="weapon"?M.customWeaponData={domain:d,finesse:m,damage:k,ap:parseInt(h)||0,mightReq:parseInt(y)||0,traits:N.split(",").map(te=>te.trim()).filter(te=>te)}:n.type==="armor"?M.customArmorData={bonus:parseInt(w)||0,mightReq:parseInt(H)||0,penalty:parseInt(C)||0,penaltyMet:parseInt($)||0}:n.type==="shield"&&(M.customShieldData={defenseBonus:parseInt(I)||0,negation:parseInt(Q)||0,armorPenalty:parseInt(L)||0,mightReq:parseInt(R)||0,type:v});const ee=ky(r,n.id,M);l(ee),t()};return!e||!n?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Item"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[!n.isCustom&&o.jsx("div",{className:"bg-yellow-900 border border-yellow-700 rounded p-3",children:o.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:" Editing will convert this database item to a custom item"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Name"}),o.jsx("input",{type:"text",value:i,onChange:M=>s(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.1",value:a,onChange:M=>u(M.target.value),className:"w-24 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>f(Math.max(1,c-1)),className:"bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded px-2 py-1 text-white",children:o.jsx(Im,{size:14})}),o.jsx("input",{type:"number",min:"1",value:c,onChange:M=>f(Math.max(1,parseInt(M.target.value)||1)),className:"w-16 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-sm text-center"}),o.jsx("button",{onClick:()=>f(c+1),className:"bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded px-2 py-1 text-white",children:o.jsx(zn,{size:14})})]})]})]}),n.type==="weapon"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Weapon Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Domain"}),o.jsxs("select",{value:d||"",onChange:M=>p(M.target.value===""?null:"Martial"),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Martial",children:"Martial"}),o.jsx("option",{value:"",children:"None (Improvised)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage"}),o.jsx("input",{type:"text",value:k,onChange:M=>A(M.target.value),placeholder:"e.g., d8, d10, 4+Might",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP"}),o.jsx("input",{type:"number",value:h,onChange:M=>x(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:y,onChange:M=>E(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center text-sm text-slate-300",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:M=>g(M.target.checked),className:"mr-2"}),"Finesse Weapon"]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:N,onChange:M=>S(M.target.value),placeholder:"e.g., Light, Quick Drawn, Range 3",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),n.type==="armor"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Armor Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Bonus"}),o.jsx("input",{type:"number",value:w,onChange:M=>D(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:H,onChange:M=>j(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Unmet)"}),o.jsx("input",{type:"number",value:C,onChange:M=>P(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Penalty (Met)"}),o.jsx("input",{type:"number",value:$,onChange:M=>B(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]})]}),n.type==="shield"&&o.jsxs("div",{className:"space-y-3 border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-300",children:"Shield Properties"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Defense Bonus"}),o.jsx("input",{type:"number",value:I,onChange:M=>q(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Negation"}),o.jsx("input",{type:"number",value:Q,onChange:M=>z(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Armor Penalty"}),o.jsx("input",{type:"number",value:L,onChange:M=>b(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Might Req"}),o.jsx("input",{type:"number",value:R,onChange:M=>_(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Shield Type"}),o.jsxs("select",{value:v,onChange:M=>W(M.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"Light",children:"Light"}),o.jsx("option",{value:"Medium",children:"Medium"}),o.jsx("option",{value:"Heavy",children:"Heavy"})]})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded font-semibold",children:"Save Changes"})]})]})})},$y=({character:e,onUpdate:t})=>{const[n,r]=T.useState(!1),[l,i]=T.useState(null),[s,a]=T.useState(null),[u,c]=T.useState(null),[f,d]=T.useState(!1),p=Sy(e),{totalWeight:m,capacity:g,level:k}=p,A=w=>{if(confirm("Are you sure you want to delete this item?")){const D=by(e,w);t(D)}},h=(w,D)=>{var j;if(D<1)return;const H=(j=e.inventory)==null?void 0:j.map(C=>C.id===w?{...C,quantity:D}:C);t({...e,inventory:H})},x=w=>{c(w)},y=w=>{w.preventDefault()},E=w=>{if(!u)return;if(w==="equipped"){const{canEquip:H,reason:j}=wy(e,u);if(!H){alert(j),c(null);return}}const D=yy(e,u.id,w);t(D),c(null)},N=w=>{if(w.type==="weapon"){const D=ps(w);if(D)return`${D.domain||"?"} | ${D.damage} | AP ${D.ap}`}else if(w.type==="armor"){const D=Tl(w);if(D)return`+${D.bonus} Armor | Might ${D.mightReq}`}else if(w.type==="shield"){const D=Pu(w);if(D)return`+${D.defenseBonus} Def | Neg ${D.negation}`}return""};e.inventory||(e.inventory=[]);const S=w=>{const D=s===w.id;return o.jsxs("div",{draggable:!0,onDragStart:()=>x(w),className:"bg-slate-700 rounded overflow-hidden cursor-move hover:bg-slate-650 transition-colors",children:[o.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 text-sm",onClick:()=>a(D?null:w.id),children:[o.jsx("div",{className:"flex-shrink-0",children:D?o.jsx(El,{size:16,className:"text-slate-400"}):o.jsx(Al,{size:16,className:"text-slate-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-white font-medium truncate",children:w.name}),w.isCustom&&o.jsx("span",{className:"ml-2 text-xs bg-purple-700 px-1.5 py-0.5 rounded",children:"Custom"})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("button",{onClick:H=>{H.stopPropagation(),h(w.id,w.quantity-1)},className:"w-5 h-5 flex items-center justify-center bg-slate-600 hover:bg-slate-500 rounded text-white",disabled:w.quantity<=1,children:o.jsx(Im,{size:12})}),o.jsxs("span",{className:"text-white font-medium w-8 text-center",children:["",w.quantity]}),o.jsx("button",{onClick:H=>{H.stopPropagation(),h(w.id,w.quantity+1)},className:"w-5 h-5 flex items-center justify-center bg-slate-600 hover:bg-slate-500 rounded text-white",children:o.jsx(zn,{size:12})})]}),o.jsxs("div",{className:"text-slate-300 text-xs flex-shrink-0",children:[(w.weight*w.quantity).toFixed(1)," kg"]})]}),D&&o.jsxs("div",{className:"px-3 pb-2 border-t border-slate-600 pt-2",children:[o.jsxs("div",{className:"text-xs text-slate-300 space-y-1 mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Type:"})," ",o.jsx("span",{className:"capitalize",children:w.type})]}),N(w)&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Stats:"})," ",N(w)]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Weight:"})," ",w.weight," kg each"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:H=>{H.stopPropagation(),i(w)},className:"flex-1 flex items-center justify-center gap-1 bg-slate-600 hover:bg-slate-500 text-white py-1.5 rounded text-xs font-semibold",children:[o.jsx(Lm,{size:12}),"Edit"]}),o.jsxs("button",{onClick:H=>{H.stopPropagation(),A(w.id)},className:"flex-1 flex items-center justify-center gap-1 bg-red-700 hover:bg-red-600 text-white py-1.5 rounded text-xs font-semibold",children:[o.jsx(Su,{size:12}),"Delete"]})]})]})]},w.id)};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Total Weight"}),o.jsxs("div",{className:"text-white font-bold",children:[m.toFixed(1)," kg"]})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Capacity"}),o.jsxs("div",{className:"text-white font-bold",children:[g," kg"]})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Level"}),o.jsx("div",{className:`font-bold ${k.name==="None"?"text-green-400":k.name==="Light"?"text-yellow-400":k.name==="Encumbered"?"text-orange-400":"text-red-400"}`,children:k.name})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2",children:[o.jsx("div",{className:"text-slate-400 text-xs",children:"Speed"}),o.jsx("div",{className:"text-white font-bold",children:(()=>{const w=Ry(e),D=w.withArmor!==w.withoutArmor;return o.jsxs(o.Fragment,{children:[o.jsx("span",{children:w.withArmor}),D&&o.jsxs("span",{className:"text-slate-400 text-sm",children:[" / ",w.withoutArmor]})]})})()})]})]}),k.name!=="None"&&o.jsxs("div",{className:"text-sm text-slate-300 mt-2",children:["Penalties: Speed ",k.speedPenalty,", Dodge ",k.dodgePenalty]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg px-3 py-2 mb-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-slate-400 text-sm",children:"Money:"}),o.jsxs("span",{className:"text-white font-semibold",children:[e.money||0," gp"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>d(!0),className:"flex items-center gap-1 bg-slate-700 hover:bg-slate-600 rounded px-3 py-1.5 text-white text-sm font-semibold",children:"Adjust Money"}),o.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 bg-blue-700 hover:bg-blue-600 rounded px-3 py-1.5 text-white text-sm font-semibold",children:[o.jsx(zn,{size:16}),"Add Item"]})]})]}),e.inventory.length===0?o.jsx("div",{className:"bg-slate-800 rounded-lg p-4",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-slate-400",children:"No items in inventory"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:'Click "Add Item" to get started'})]})}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"bg-green-900/10 rounded-lg overflow-hidden border border-green-900/30",onDragOver:y,onDrop:()=>E("equipped"),children:[o.jsx("div",{className:"bg-green-900/30 border-b border-green-700 px-3 py-1.5",children:o.jsxs("h4",{className:"text-green-300 font-semibold text-sm text-left",children:["Equipped (",e.inventory.filter(w=>w.state==="equipped").length,")"]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(w=>w.state==="equipped").map(w=>S(w)),e.inventory.filter(w=>w.state==="equipped").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No equipped items"})]})]}),o.jsxs("div",{className:"bg-blue-900/10 rounded-lg overflow-hidden border border-blue-900/30",onDragOver:y,onDrop:()=>E("stowed"),children:[o.jsx("div",{className:"bg-blue-900/30 border-b border-blue-700 px-3 py-1.5",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"text-blue-300 font-semibold text-sm text-left",children:["On Self (",e.inventory.filter(w=>w.state==="stowed").length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-blue-400 text-xs",children:"Weight reduction:"}),o.jsx("input",{type:"number",min:"0",step:"0.1",value:e.stowedWeightReduction||0,onChange:w=>{t({...e,stowedWeightReduction:parseFloat(w.target.value)||0})},className:"w-16 bg-slate-700 border border-slate-600 rounded px-2 py-1 text-white text-xs"}),o.jsx("span",{className:"text-blue-400 text-xs",children:"kg"})]})]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(w=>w.state==="stowed").map(w=>S(w)),e.inventory.filter(w=>w.state==="stowed").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No items on self"})]})]}),o.jsxs("div",{className:"bg-slate-800/50 rounded-lg overflow-hidden border border-slate-700",onDragOver:y,onDrop:()=>E("packed"),children:[o.jsx("div",{className:"bg-slate-700 border-b border-slate-600 px-3 py-1.5",children:o.jsxs("h4",{className:"text-slate-300 font-semibold text-sm text-left",children:["Stored (",e.inventory.filter(w=>w.state==="packed").length,")"]})}),o.jsxs("div",{className:"p-2 space-y-1",children:[e.inventory.filter(w=>w.state==="packed").map(w=>S(w)),e.inventory.filter(w=>w.state==="packed").length===0&&o.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"No stored items"})]})]})]}),o.jsx(Fy,{isOpen:n,onClose:()=>r(!1),character:e,onUpdate:t}),o.jsx(Oy,{isOpen:l!==null,onClose:()=>i(null),item:l,character:e,onUpdate:t}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>d(!1),children:o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 max-w-sm w-full mx-4",onClick:w=>w.stopPropagation(),children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Add/Remove Money"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Amount (use negative to subtract)"}),o.jsx("input",{type:"number",step:"0.01",placeholder:"e.g., 50 or -20",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",onKeyDown:w=>{if(w.key==="Enter"){const D=w.currentTarget,H=parseFloat(D.value)||0,j=(e.money||0)+H;t({...e,money:Math.max(0,j)}),d(!1)}}}),o.jsxs("p",{className:"text-slate-400 text-xs mt-1",children:["Current: ",e.money||0," gp"]})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-semibold",children:"Cancel"})})]})})]})},By="/Exceed-Playtest-App/data/spells.json";let cr=[],Ks=!1;async function Wy(){if(!Ks)try{const e=await fetch(By);if(!e.ok)throw new Error(`Failed to load spells.json: ${e.status}`);cr=(await e.json()).spells,Ks=!0,console.log(`Loaded ${cr.length} spells from database`)}catch(e){console.error("Error loading spell database:",e),cr=[],Ks=!0}}function ms(e){return cr.find(t=>t.name===e)}function Om(e){const t=typeof e.basic.limitCost=="number"?e.basic.limitCost:0;return{tier:e.tier,type:e.type,apCost:e.apCost,attributes:e.attributes,limitCost:t,traits:e.traits,effect:e.basic.effect||e.shortDescription,distance:e.basic.distance||"-",duration:e.duration||"-",damage:e.basic.damage}}function gd(e){const t=ms(e);if(t)return Om(t)}const _n=new Proxy({},{get(e,t){return gd(t)},has(e,t){return ms(t)!==void 0},ownKeys(e){return cr.map(t=>t.name)},getOwnPropertyDescriptor(e,t){const n=gd(t);if(n)return{enumerable:!0,configurable:!0,value:n}}});function $m(){return cr.map(e=>[e.name,Om(e)])}const Bm={0:{basic:1,advanced:3},1:{basic:3,advanced:5},2:{basic:5,advanced:7},3:{basic:7,advanced:10},4:{basic:10,advanced:15},5:{basic:15,advanced:25}},Wm=e=>{const t=gs(e);return 3+e.stats.WI+t},Hm=e=>{const t=Wm(e),n=qm(e);return Math.max(0,t-n)},qm=e=>{if(!e.knownSpells||!e.attunedSpells)return 0;const t=e.attunedSpells,n=e.knownSpells;let r=0;for(const l of t){const i=n.find(s=>s.id===l);if(i){const s=hs(i);s&&(r+=s.limitCost)}}return r},Hi=e=>8+e*2,hs=e=>e.isCustom&&e.customSpellData?{tier:e.customSpellData.tier,type:e.customSpellData.type,apCost:e.customSpellData.apCost,attributes:e.customSpellData.attributes,limitCost:e.customSpellData.limitCost,traits:e.customSpellData.traits,effect:e.customSpellData.effect,distance:e.customSpellData.distance,duration:e.customSpellData.duration,damage:e.customSpellData.damage}:e.dataRef&&_n[e.dataRef]?_n[e.dataRef]:null,xd=(e,t)=>{const n=gs(e);return t===0?(e.perks.some(l=>l.name==="Mage")||(e.magicPerks||[]).some(l=>l.name==="Mage"))&&n>=t:n>=t},Fr=(e,t)=>Bm[e][t],gs=e=>e.weaponDomains.Spellcraft||0,da=(e,t)=>{const n=e.knownSpells||[];return{...e,knownSpells:[...n,t]}},Hy=(e,t)=>{if(!e.knownSpells)return e;const n=e.knownSpells.filter(l=>l.id!==t),r=(e.attunedSpells||[]).filter(l=>l!==t);return{...e,knownSpells:n,attunedSpells:r}},qy=(e,t)=>{if(!e.knownSpells)return{success:!1,character:e,reason:"No known spells"};const n=e.knownSpells.find(s=>s.id===t);if(!n)return{success:!1,character:e,reason:"Spell not found"};const r=hs(n);if(!r)return{success:!1,character:e,reason:"Spell data not found"};if(r.limitCost===0)return{success:!1,character:e,reason:"This spell has no Limit cost and cannot be attuned"};const l=e.attunedSpells||[];if(l.includes(t))return{success:!1,character:e,reason:"Spell already attuned"};const i=Hm(e);return r.limitCost>i?{success:!1,character:e,reason:`Not enough Limit. Need ${r.limitCost}, have ${i} remaining.`}:{success:!0,character:{...e,attunedSpells:[...l,t]}}},Uy=(e,t)=>e.attunedSpells?{...e,attunedSpells:e.attunedSpells.filter(n=>n!==t)}:e,fa=()=>`spell_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Xy=(e,t,n)=>e.knownSpells?{...e,knownSpells:e.knownSpells.map(r=>r.id===t?{...r,...n}:r)}:e,Vy=e=>{const t=new Map;if(!e.knownSpells)return t;for(let n=0;n<=5;n++)t.set(n,[]);for(const n of e.knownSpells){const r=t.get(n.tier)||[];t.set(n.tier,[...r,n])}return t},Um=e=>{if(e.type!=="basic"||e.isCustom||!e.dataRef)return!1;const t=ms(e.dataRef);return(t==null?void 0:t.advanced)!==void 0},Xm=e=>{const t=Bm[e.tier].advanced,n=e.xpCost;return t-n},Qy=(e,t,n)=>{if(!e.knownSpells)return{success:!1,character:e,reason:"No known spells"};const r=e.knownSpells.find(d=>d.id===t);if(!r)return{success:!1,character:e,reason:"Spell not found"};if(!Um(r))return{success:!1,character:e,reason:"This spell cannot be upgraded"};const l=Xm(r),i=e.combatXP;if(i<l)return{success:!1,character:e,reason:`Not enough Combat XP. Need ${l}, have ${i}`};const s=ms(r.dataRef),a=_n[r.dataRef];if(!(s!=null&&s.advanced))return{success:!1,character:e,reason:"No advanced version available"};const u=typeof s.advanced.limitCost=="number"?s.advanced.limitCost:0,c={...r,type:"advanced",xpCost:r.xpCost+l,isCustom:!0,dataRef:void 0,customSpellData:{tier:a.tier,type:"advanced",apCost:a.apCost,attributes:a.attributes,limitCost:u,traits:a.traits,effect:s.advanced.effect,distance:s.advanced.distance||s.basic.distance||"-",duration:s.duration||"-",damage:s.advanced.damage}},f={...e,knownSpells:e.knownSpells.map(d=>d.id===t?c:d)};return f.combatXP-=l,f.progressionLog=[...f.progressionLog,{type:"spell",name:`${r.name} (Upgrade)`,tier:r.tier,spellType:"advanced",cost:l,xpType:n}],{success:!0,character:f}},Gy=({isOpen:e,onClose:t,character:n,onUpdate:r})=>{const[l,i]=T.useState("database"),[s,a]=T.useState(null),[u,c]=T.useState(""),[f,d]=T.useState(""),[p,m]=T.useState(0),[g,k]=T.useState("basic"),[A,h]=T.useState("2"),[x,y]=T.useState("WT"),[E,N]=T.useState("0"),[S,w]=T.useState("Spell"),[D,H]=T.useState(""),[j,C]=T.useState("3m"),[P,$]=T.useState("Instant"),[B,I]=T.useState(""),q=gs(n),Q=n.combatXP,z=$m().filter(([O,M])=>{var he;const ee=(he=n.knownSpells)==null?void 0:he.some(fe=>fe.dataRef===O),te=xd(n,M.tier);return!ee&&te}),L=()=>{if(!u){alert("Please select a spell");return}const O=_n[u],M=O.attributes.split("/").map(ye=>ye.trim());if(M.length>1&&!s){alert("Please select which attribute to advance");return}const ee=Fr(O.tier,O.type);if(Q<ee){alert(`Not enough Combat XP. Need ${ee}, have ${Q}`);return}const te={id:fa(),name:u,tier:O.tier,type:O.type,isCustom:!1,dataRef:u,xpCost:ee},he=da(n,te);he.combatXP-=ee;const fe=s||M[0];he.progressionLog=[...he.progressionLog,{type:"spell",name:u,tier:O.tier,spellType:O.type,attribute:fe,cost:ee}],r(he),c(""),a(null),t()},b=()=>{if(!f.trim()){alert("Please enter a spell name");return}const O=x.split("/").map(fe=>fe.trim());if(O.length>1&&!s){alert("Please select which attribute to advance");return}const M=Fr(p,g);if(Q<M){alert(`Not enough Combat XP. Need ${M}, have ${Q}`);return}if(!xd(n,p)){alert(`Your Spellcraft level (${q}) is too low for Tier ${p} spells`);return}const ee={id:fa(),name:f,tier:p,type:g,isCustom:!0,xpCost:M,customSpellData:{tier:p,type:g,apCost:A,attributes:x,limitCost:parseInt(E)||0,traits:S.split(",").map(fe=>fe.trim()).filter(fe=>fe),effect:D,distance:j,duration:P,damage:B||void 0}},te=da(n,ee);te.combatXP-=M;const he=s||O[0];te.progressionLog=[...te.progressionLog,{type:"spell",name:f,tier:p,spellType:g,attribute:he,cost:M}],r(te),R(),a(null),t()},R=()=>{d(""),m(0),k("basic"),h("2"),y("WT"),N("0"),w("Spell"),H(""),C("3m"),$("Instant"),I("")};if(!e)return null;const _=u?_n[u]:null,v=l==="database"&&_?Fr(_.tier,_.type):Fr(p,g),W=Hi(l==="database"&&_?_.tier:p);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Learn Spell"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("button",{onClick:()=>i("database"),className:`flex-1 py-2 px-4 rounded font-semibold ${l==="database"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"From Spellbook"}),o.jsx("button",{onClick:()=>i("custom"),className:`flex-1 py-2 px-4 rounded font-semibold ${l==="custom"?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Create Custom"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-slate-400",children:"Combat XP:"}),o.jsx("span",{className:"font-bold text-red-400",children:n.combatXP})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm mt-2 pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Cost:"}),o.jsxs("span",{className:"text-yellow-400 font-bold",children:[v," XP"]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[o.jsx("span",{className:"text-slate-400",children:"After Learning:"}),o.jsxs("span",{className:`font-bold ${Q-v>=0?"text-green-400":"text-red-400"}`,children:[Q-v," Combat XP"]})]})]}),l==="database"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Select Spell (Spellcraft ",q,")"]}),o.jsxs("select",{value:u,onChange:O=>c(O.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose a spell --"}),z.map(([O,M])=>o.jsxs("option",{value:O,children:[O," (Tier ",M.tier,", ",M.type==="basic"?"Basic":"Advanced",") - ",Fr(M.tier,M.type)," XP"]},O))]}),z.length===0&&o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"No spells available at your current Spellcraft level or all spells already known."})]}),_&&o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:u}),o.jsxs("div",{className:"text-sm text-slate-300 space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Tier:"})," ",_.tier," (DC ",W,")"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Type:"})," ",_.type==="basic"?"Basic":"Advanced"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"AP Cost:"})," ",_.apCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Attributes:"})," ",_.attributes]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Limit:"})," ",_.limitCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Distance:"})," ",_.distance]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Duration:"})," ",_.duration]}),_.damage&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Damage:"})," ",_.damage]}),o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("p",{className:"text-slate-300 italic mt-1",children:_.effect})]})]})]}),_&&_.attributes.split("/").length>1&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute to Advance"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.attributes.split("/").map(O=>{const M=O.trim();return o.jsx("button",{onClick:()=>a(M),className:`py-2 px-4 rounded font-semibold transition-colors ${s===M?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M},M)})})]})]}),l==="custom"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Spell Name"}),o.jsx("input",{type:"text",value:f,onChange:O=>d(O.target.value),placeholder:"e.g., Fireball",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Tier (0-5)"}),o.jsx("select",{value:p,onChange:O=>m(parseInt(O.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[0,1,2,3,4,5].map(O=>o.jsxs("option",{value:O,disabled:O>q,children:["Tier ",O," ",O>q?"(locked)":""]},O))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Type"}),o.jsxs("select",{value:g,onChange:O=>k(O.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"basic",children:"Basic"}),o.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP Cost"}),o.jsx("input",{type:"text",value:A,onChange:O=>h(O.target.value),placeholder:"2, R, 1m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Attributes"}),o.jsx("input",{type:"text",value:x,onChange:O=>y(O.target.value),placeholder:"AG/WT",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Limit Cost"}),o.jsx("input",{type:"number",value:E,onChange:O=>N(O.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Distance"}),o.jsx("input",{type:"text",value:j,onChange:O=>C(O.target.value),placeholder:"3m, Touch, 10m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Duration"}),o.jsx("input",{type:"text",value:P,onChange:O=>$(O.target.value),placeholder:"Instant, 1 minute",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:S,onChange:O=>w(O.target.value),placeholder:"Spell, Offensive, Strike",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage (optional)"}),o.jsx("input",{type:"text",value:B,onChange:O=>I(O.target.value),placeholder:"Spellcraft * 4d",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Effect Description"}),o.jsx("textarea",{value:D,onChange:O=>H(O.target.value),placeholder:"Describe what the spell does...",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-2 text-xs text-slate-400",children:[o.jsxs("div",{children:["Casting DC: ",W]}),o.jsxs("div",{children:["XP Cost: ",v]})]}),x.split("/").length>1&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute to Advance"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.split("/").map(O=>{const M=O.trim();return o.jsx("button",{onClick:()=>a(M),className:`py-2 px-4 rounded font-semibold transition-colors ${s===M?"bg-purple-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M},M)})})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsxs("button",{onClick:l==="database"?L:b,disabled:l==="database"?!u:!f.trim(),className:`px-4 py-2 rounded font-semibold ${l==="database"&&!u||l==="custom"&&!f.trim()?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600 text-white"}`,children:["Learn Spell (",v," XP)"]})]})]})})},Ky=({isOpen:e,onClose:t,spell:n,character:r,onUpdate:l})=>{const[i,s]=T.useState(""),[a,u]=T.useState(0),[c,f]=T.useState("basic"),[d,p]=T.useState("2"),[m,g]=T.useState("WT"),[k,A]=T.useState("0"),[h,x]=T.useState(""),[y,E]=T.useState(""),[N,S]=T.useState("3m"),[w,D]=T.useState("Instant"),[H,j]=T.useState("");T.useEffect(()=>{if(!n)return;const P=hs(n);P&&(s(n.name),u(P.tier),f(P.type),p(P.apCost),g(P.attributes),A(P.limitCost.toString()),x(P.traits.join(", ")),E(P.effect),S(P.distance),D(P.duration),j(P.damage||""))},[n]);const C=()=>{if(!n)return;const P={name:i,tier:a,type:c,isCustom:!0,dataRef:void 0,customSpellData:{tier:a,type:c,apCost:d,attributes:m,limitCost:parseInt(k)||0,traits:h.split(",").map(B=>B.trim()).filter(B=>B),effect:y,distance:N,duration:w,damage:H||void 0}},$=Xy(r,n.id,P);l($),t()};return!e||!n?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Edit Spell"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[!n.isCustom&&o.jsx("div",{className:"bg-yellow-900 border border-yellow-700 rounded p-3",children:o.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:" Editing will convert this database spell to a custom spell"})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Spell Name"}),o.jsx("input",{type:"text",value:i,onChange:P=>s(P.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Tier (0-5)"}),o.jsx("select",{value:a,onChange:P=>u(parseInt(P.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[0,1,2,3,4,5].map(P=>o.jsxs("option",{value:P,children:["Tier ",P]},P))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Type"}),o.jsxs("select",{value:c,onChange:P=>f(P.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[o.jsx("option",{value:"basic",children:"Basic"}),o.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"AP Cost"}),o.jsx("input",{type:"text",value:d,onChange:P=>p(P.target.value),placeholder:"2, R, 1m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Attributes"}),o.jsx("input",{type:"text",value:m,onChange:P=>g(P.target.value),placeholder:"AG/WT",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Limit Cost"}),o.jsx("input",{type:"number",value:k,onChange:P=>A(P.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Distance"}),o.jsx("input",{type:"text",value:N,onChange:P=>S(P.target.value),placeholder:"3m, Touch, 10m",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Duration"}),o.jsx("input",{type:"text",value:w,onChange:P=>D(P.target.value),placeholder:"Instant, 1 minute",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:h,onChange:P=>x(P.target.value),placeholder:"Spell, Offensive, Strike",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Damage (optional)"}),o.jsx("input",{type:"text",value:H,onChange:P=>j(P.target.value),placeholder:"Spellcraft * 4d",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Effect Description"}),o.jsx("textarea",{value:y,onChange:P=>E(P.target.value),placeholder:"Describe what the spell does...",rows:3,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white text-sm"})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-700 hover:bg-blue-600 text-white rounded font-semibold",children:"Save Changes"})]})]})})},Yy=({isOpen:e,onClose:t,character:n,onUpdate:r})=>{const[l,i]=T.useState(""),s=$m().filter(([f,d])=>{var m;const p=(m=n.knownSpells)==null?void 0:m.some(g=>g.dataRef===f);return d.tier===0&&!p}),a=()=>{if(!l){alert("Please select a spell");return}const f=_n[l],d={id:fa(),name:l,tier:f.tier,type:f.type,isCustom:!1,dataRef:l,xpCost:0},p=da(n,d);r(p),i(""),t()};if(!e)return null;const u=l?_n[l]:null,c=u?Hi(u.tier):10;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Mage Perk: Select Free Spell"}),o.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Choose a Tier 0 spell to add to your repertoire"})]}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"bg-purple-900/30 border border-purple-700 rounded p-3 mb-4",children:o.jsxs("p",{className:"text-purple-300 text-sm",children:[o.jsx("strong",{children:"Mage Perk Benefit:"})," This spell is free and doesn't contribute to attribute advancement."]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Tier 0 Spell"}),o.jsxs("select",{value:l,onChange:f=>i(f.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose a spell --"}),s.map(([f,d])=>o.jsxs("option",{value:f,children:[f," (",d.type==="basic"?"Basic":"Advanced",")"]},f))]}),s.length===0&&o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"All Tier 0 spells are already known."})]}),u&&o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:l}),o.jsxs("div",{className:"text-sm text-slate-300 space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Tier:"})," ",u.tier," (DC ",c,")"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Type:"})," ",u.type==="basic"?"Basic":"Advanced"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"AP Cost:"})," ",u.apCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Attributes:"})," ",u.attributes]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Limit:"})," ",u.limitCost]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Distance:"})," ",u.distance]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Duration:"})," ",u.duration]}),u.damage&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Damage:"})," ",u.damage]}),o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("p",{className:"text-slate-300 italic mt-1",children:u.effect})]})]})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:a,disabled:!l,className:`px-4 py-2 rounded font-semibold ${l?"bg-purple-700 hover:bg-purple-600 text-white":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:"Add Free Spell"})]})]})})},yd=({item:e,isAbility:t,onDelete:n})=>{const[r,l]=T.useState(!1),i=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>l(!r),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),r&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((s,a)=>o.jsx("span",{className:`text-xs bg-${i}-900/50 text-${i}-300 px-1.5 py-0.5 rounded`,children:s},a))}),n&&o.jsxs("button",{onClick:s=>{s.stopPropagation(),n()},className:"w-full mt-3 bg-red-700 hover:bg-red-600 rounded py-2 text-white text-sm font-semibold",children:["Remove ",e.sourcePerk]})]})]})},Jy=({character:e,onUpdate:t,perkDatabase:n})=>{var b;const[r,l]=T.useState(!1),[i,s]=T.useState(null),[a,u]=T.useState(!1),[c,f]=T.useState(null),[d,p]=T.useState(!1),[m,g]=T.useState(null);e.knownSpells||(e.knownSpells=[]),e.attunedSpells||(e.attunedSpells=[]);const k=gs(e),A=Wm(e),h=qm(e),x=Hm(e),y=Vy(e),E=e.magicPerks||[],N=e.perks.some(R=>R.name==="Mage")||E.some(R=>R.name==="Mage"),S=((b=e.knownSpells)==null?void 0:b.some(R=>R.tier===0&&R.xpCost===0))||!1,w=N&&!S,D=cs(e,n),H=ds(e,n),j=D.filter(R=>R.tags.includes("Spellcraft")),C=H.filter(R=>R.tags.includes("Spellcraft")),P=R=>{var v;if((v=e.attunedSpells)==null?void 0:v.includes(R)){const W=Uy(e,R);t(W)}else{const W=qy(e,R);W.success?t(W.character):alert(W.reason)}},$=R=>{var W;if(!confirm("Are you sure you want to delete this spell? XP will be refunded."))return;const _=(W=e.knownSpells)==null?void 0:W.find(O=>O.id===R);if(!_)return;const v=Hy(e,R);v.combatXP+=_.xpCost,v.progressionLog=v.progressionLog.filter(O=>!(O.type==="spell"&&O.name===_.name&&O.cost===_.xpCost)),t(v)},B=R=>{const _=k+e.stats.WT;f({type:`Cast Spell: ${R.name}`,baseModifier:_}),u(!0)},I=R=>{const _=Qy(e,R,"combat");_.success?t(_.character):alert(_.reason)},q=R=>{g(m===R?null:R)},Q=R=>{const _=E.findIndex(M=>M.name===R);if(_===-1)return;const v=E[_],W=E.filter((M,ee)=>ee!==_),O=[...e.progressionLog];for(let M=O.length-1;M>=0;M--)if(O[M].type==="magicPerk"&&O[M].name===v.name&&O[M].cost===v.cost&&O[M].attribute===v.attribute){O.splice(M,1);break}t({...e,magicPerks:W,combatXP:e.combatXP+v.cost,progressionLog:O})},z=R=>R>=80?"bg-red-600":R>=50?"bg-yellow-600":"bg-green-600",L=A>0?h/A*100:0;return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"bg-slate-700 rounded p-3 text-center",children:o.jsxs("div",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-slate-400",children:"Spellcraft - "}),o.jsx("span",{className:"text-blue-400",children:N?k:"-"})]})}),!N&&k===0&&o.jsx("div",{className:"text-xs text-amber-400 mt-2",children:"Requires Mage perk for Tier 0 access"})]}),o.jsx("div",{children:o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsxs("div",{className:"text-xl font-bold mb-2",children:[o.jsx("span",{className:"text-slate-400",children:"Limit "}),o.jsxs("span",{className:"text-white",children:[x,"/",A]})]}),o.jsx("div",{className:"relative h-4 bg-slate-600 rounded-full overflow-hidden",children:o.jsx("div",{className:`absolute inset-y-0 left-0 transition-all ${z(L)}`,style:{width:`${L}%`}})}),o.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:["Formula: 3 + Will (",e.stats.WI,") + Spellcraft (",k,")"]})]})})]}),w&&o.jsx("div",{className:"bg-purple-900/30 border border-purple-700 rounded p-3 mb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-purple-300 font-semibold",children:"Mage Perk Selector"}),o.jsx("p",{className:"text-purple-400 text-sm mt-1",children:"Select your initial spell from mage perk"})]}),o.jsx("button",{onClick:()=>p(!0),className:"bg-purple-700 hover:bg-purple-600 rounded px-4 py-2 text-white font-semibold whitespace-nowrap",children:"Select Initial Spell"})]})})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mm,{size:18,className:"text-slate-300"}),o.jsx("h4",{className:"text-lg font-bold text-white",children:"Spellcraft Abilities & Effects"})]}),o.jsxs("span",{className:"text-slate-400 text-sm",children:[j.length+C.length," total"]})]}),j.length===0&&C.length===0?o.jsx("div",{className:"text-slate-500 text-sm text-center py-4",children:"No abilities or effects from #Spellcraft perks. Add perks in the Perks tab."}):o.jsxs("div",{className:"space-y-2",children:[j.map((R,_)=>o.jsx(yd,{item:R,isAbility:!0,onDelete:()=>Q(R.sourcePerk)},`spellcraft-ability-${_}`)),C.map((R,_)=>o.jsx(yd,{item:R,isAbility:!1,onDelete:()=>Q(R.sourcePerk)},`spellcraft-effect-${_}`))]})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:"Known Spells"}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-blue-700 hover:bg-blue-600 rounded px-4 py-2 text-white font-semibold",children:[o.jsx(zn,{size:20}),"Learn Spell"]})]}),e.knownSpells.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-slate-400",children:"No spells learned yet"}),o.jsx("p",{className:"text-slate-500 text-sm mt-2",children:'Click "Learn Spell" to get started'})]}):o.jsx("div",{className:"space-y-4",children:Array.from(y.entries()).map(([R,_])=>_.length===0?null:o.jsxs("div",{className:"border-t border-slate-700 pt-3 first:border-0 first:pt-0",children:[o.jsxs("h5",{className:"text-sm font-semibold text-slate-300 mb-2",children:["Tier ",R]}),o.jsx("div",{className:"space-y-2",children:_.map(v=>{var fe;const W=hs(v);if(!W)return null;const O=(fe=e.attunedSpells)==null?void 0:fe.includes(v.id),M=Hi(v.tier),ee=m===v.id,te=Um(v),he=te?Xm(v):0;return o.jsxs("div",{className:"bg-slate-700 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>q(v.id),children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ee?o.jsx(El,{size:16,className:"text-slate-400 flex-shrink-0"}):o.jsx(Al,{size:16,className:"text-slate-400 flex-shrink-0"}),o.jsx("span",{className:"text-white font-medium truncate",children:v.name}),o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded flex-shrink-0 ${v.type==="basic"?"bg-blue-700":"bg-purple-700"}`,children:v.type==="basic"?"Basic":"Advanced"}),v.isCustom&&o.jsx("span",{className:"text-xs bg-amber-700 px-1.5 py-0.5 rounded flex-shrink-0",children:"Custom"}),O&&o.jsx("span",{className:"text-xs bg-green-700 px-1.5 py-0.5 rounded flex-shrink-0",children:"Attuned"})]}),o.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2 flex-wrap",children:[o.jsxs("span",{children:["AP ",W.apCost]}),o.jsx("span",{children:""}),o.jsx("span",{children:W.distance}),W.limitCost>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{className:"text-yellow-400",children:["Limit ",W.limitCost]})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[W.limitCost>0&&o.jsx("button",{onClick:ye=>{ye.stopPropagation(),P(v.id)},className:`flex-shrink-0 rounded p-2 ${O?"bg-green-700 hover:bg-green-600 text-white":"bg-slate-600 hover:bg-slate-500 text-slate-300"}`,title:O?"Unattuned":"Attune Spell",children:O?o.jsx(ey,{size:18}):o.jsx(Z0,{size:18})}),o.jsx("button",{onClick:ye=>{ye.stopPropagation(),B(v)},className:"flex-shrink-0 bg-blue-600 hover:bg-blue-500 rounded p-2 text-white",title:`Cast Spell (DC ${M})`,children:o.jsx(Dm,{size:18})})]})]})}),ee&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-300 mt-3 mb-3 space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Duration:"})," ",W.duration]}),W.damage&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Damage:"})," ",W.damage]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Traits:"})," ",W.traits.join(", ")]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("p",{className:"text-slate-300 italic mt-1",children:W.effect})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Casting DC:"})," ",M]})]}),te&&o.jsxs("div",{className:"bg-purple-900/30 border border-purple-700 rounded p-3 mb-3",children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-purple-300 font-semibold text-sm",children:"Upgrade Available"}),o.jsxs("p",{className:"text-purple-400 text-xs mt-1",children:["Upgrade to Advanced version (",he," Combat XP)"]})]})}),o.jsx("button",{onClick:ye=>{ye.stopPropagation(),I(v.id)},className:"w-full bg-purple-700 hover:bg-purple-600 rounded py-2 text-white font-semibold text-sm",children:"Upgrade to Advanced"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:ye=>{ye.stopPropagation(),s(v)},className:"flex items-center justify-center gap-1 bg-slate-600 hover:bg-slate-500 text-white py-2 rounded font-semibold text-sm",children:[o.jsx(Lm,{size:14}),"Edit"]}),o.jsxs("button",{onClick:ye=>{ye.stopPropagation(),$(v.id)},className:"flex items-center justify-center gap-1 bg-red-700 hover:bg-red-600 text-white py-2 rounded font-semibold text-sm",children:[o.jsx(Su,{size:14}),"Delete"]})]})]})]},v.id)})})]},R))})]}),o.jsx(Gy,{isOpen:r,onClose:()=>l(!1),character:e,onUpdate:t}),o.jsx(Ky,{isOpen:i!==null,onClose:()=>s(null),spell:i,character:e,onUpdate:t}),o.jsx(Nu,{isOpen:a,onClose:()=>u(!1),rollData:c}),o.jsx(Yy,{isOpen:d,onClose:()=>p(!1),character:e,onUpdate:t})]})},Ys=({isOpen:e,onClose:t,character:n,onUpdate:r,perkDatabase:l,category:i})=>{const[s,a]=T.useState("predefined"),[u,c]=T.useState(""),[f,d]=T.useState(""),[p,m]=T.useState(""),[g,k]=T.useState(""),[A,h]=T.useState(""),[x,y]=T.useState("");if(!e)return null;const E=[];if(l){let I;i==="combat"?I=l.perks.combat.filter(q=>{var Q;return!q.tags.includes("Conditioning")&&!(q.cost.variable&&((Q=q.cost.formula)!=null&&Q.includes("Max_Wounds")))}):i==="magic"?I=l.perks.magic:i==="skill"?I=l.perks.skill:I=[...l.perks.combat,...l.perks.magic,...l.perks.skill];for(const q of I){let Q=!1;q.type==="skill"?Q=n.perks.some(z=>z.id===q.id||z.name===q.name):q.type==="magic"?Q=(n.magicPerks||[]).some(z=>z.id===q.id||z.name===q.name):q.type==="combat"&&(Q=n.combatPerks.some(z=>z.id===q.id||z.name===q.name)),Q||E.push(q)}}const N=u?E.find(I=>I.id===u):null,S=N?N.attributes:[],w=S.length>1,D=()=>{a("predefined"),c(""),d(""),m(""),k(""),h(""),y(""),t()},H=()=>{s==="predefined"&&N?j(N):s==="custom"&&C()},j=I=>{let q;if(w){if(!f){alert("Please select an attribute for this perk");return}q=f}else if(I.attributes.length===1)q=I.attributes[0];else{alert("Please select an attribute");return}const Q=I.type==="skill"?"social":"combat",z=Q==="social"?n.socialXP:n.combatXP,L=I.cost.xp;if(z<L){alert(`Not enough ${Q==="social"?"Skill":"Combat"} XP. Need ${L}, have ${z}.`);return}let b={...n};if(I.type==="skill"){const R={id:I.id,name:I.name,cost:L,attribute:q,description:I.effect||I.shortDescription,isCustom:!1,source:"database",perkSnapshot:I,addedAt:Date.now()};b.perks=[...n.perks,R],b.socialXP-=L}else if(I.type==="magic"){const R={id:I.id,name:I.name,cost:L,attribute:q,description:I.effect||I.shortDescription,isCustom:!1,source:"database",perkSnapshot:I,addedAt:Date.now()};b.magicPerks=[...n.magicPerks||[],R],b.combatXP-=L}else if(I.type==="combat"){const R={id:I.id,name:I.name,cost:L,attribute:q,description:I.effect||I.shortDescription,isCustom:!1,source:"database",perkSnapshot:I,addedAt:Date.now()};b.combatPerks=[...n.combatPerks,R],b.combatXP-=L}b.progressionLog=[...b.progressionLog,{type:I.type==="skill"?"perk":I.type==="magic"?"magicPerk":"combatPerk",name:I.name,cost:L,attribute:q,xpType:Q}],r(b),D()},C=()=>{const I=parseInt(g);if(!p||!I||!A){alert("Please fill in all required fields");return}const q=i||"skill",Q=q==="skill"?"social":"combat",z=Q==="social"?n.socialXP:n.combatXP;if(z<I){alert(`Not enough ${Q==="social"?"Skill":"Combat"} XP. Need ${I}, have ${z}.`);return}let L={...n};if(q==="skill"){const b={name:p,cost:I,attribute:A,description:x,isCustom:!0,source:"custom",addedAt:Date.now()};L.perks=[...n.perks,b],L.socialXP-=I}else if(q==="magic"){const b={name:p,cost:I,attribute:A,description:x,isCustom:!0,source:"custom",addedAt:Date.now()};L.magicPerks=[...n.magicPerks||[],b],L.combatXP-=I}else if(q==="combat"){const b={name:p,cost:I,attribute:A,description:x,isCustom:!0,source:"custom",addedAt:Date.now()};L.combatPerks=[...n.combatPerks,b],L.combatXP-=I}L.progressionLog=[...L.progressionLog,{type:q==="skill"?"perk":q==="magic"?"magicPerk":"combatPerk",name:p,cost:I,attribute:A,xpType:Q}],r(L),D()};let P;i==="skill"?P="social":P="combat";const $=P==="social"?n.socialXP:n.combatXP,B=s==="predefined"?N?$>=N.cost.xp:!1:g?$>=parseInt(g):!1;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:D,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Add Perk"}),o.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Available ",P==="social"?"Skill":"Combat"," XP: ",$,l&&`  ${E.length} perks available`]})]}),o.jsx("button",{onClick:D,className:"text-slate-400 hover:text-white",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsx("button",{onClick:()=>a("predefined"),className:`py-2 px-4 rounded font-semibold transition-colors ${s==="predefined"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Database Perk"}),o.jsx("button",{onClick:()=>a("custom"),className:`py-2 px-4 rounded font-semibold transition-colors ${s==="custom"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Custom Perk"})]}),!l&&s==="predefined"&&o.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded p-3 mb-4",children:o.jsx("p",{className:"text-yellow-200 text-sm",children:"Perk database is loading... Please wait or create a custom perk."})}),s==="predefined"&&l&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Perk"}),o.jsxs("select",{value:u,onChange:I=>{c(I.target.value),d("")},className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white",children:[o.jsx("option",{value:"",children:"-- Choose a perk --"}),E.map(I=>o.jsxs("option",{value:I.id,children:[I.name," (",I.cost.xp," XP)"]},I.id))]}),E.length===0&&o.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"All perks in this category are already learned."})]}),N&&o.jsxs(o.Fragment,{children:[w&&o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Attribute for Progression *"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map((I,q)=>o.jsx("button",{onClick:()=>d(I),className:`py-2 px-4 rounded font-semibold transition-colors ${f===I?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:I},q))}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"This determines which attribute advances when you spend XP"})]}),o.jsxs("div",{className:"bg-slate-700 rounded p-3",children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:N.name}),o.jsxs("div",{className:"text-sm text-slate-300 space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Category:"})," ",N.type]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Cost:"})," ",N.cost.xp," XP ",N.cost.variable&&"(Variable)"]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Attributes:"})," ",N.attributes.join(" / ")]}),N.requirements.text&&N.requirements.text!=="-"&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Requirements:"})," ",N.requirements.text]}),N.apCost!==null&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"AP Cost:"})," ",N.apCost]}),N.tags.length>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-slate-400",children:"Tags:"})," ",N.tags.map(I=>`#${I}`).join(" ")]}),N.shortDescription&&o.jsxs("div",{className:"pt-2",children:[o.jsx("span",{className:"text-slate-400",children:"Summary:"}),o.jsx("p",{className:"text-slate-300 mt-1 text-xs",children:N.shortDescription})]}),o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Effect:"}),o.jsx("pre",{className:"text-slate-300 mt-1 whitespace-pre-wrap text-xs",children:N.effect})]}),N.description&&o.jsxs("div",{className:"pt-2 border-t border-slate-600",children:[o.jsx("span",{className:"text-slate-400",children:"Description:"}),o.jsx("pre",{className:"text-slate-300 mt-1 whitespace-pre-wrap text-xs",children:N.description})]})]})]})]})]}),s==="custom"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Perk Name *"}),o.jsx("input",{type:"text",value:p,onChange:I=>m(I.target.value),placeholder:"Enter perk name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"XP Cost *"}),o.jsx("input",{type:"number",value:g,onChange:I=>k(I.target.value),placeholder:"Enter XP cost",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:["Attribute * ",A&&o.jsxs("span",{className:"text-blue-400",children:["(",A,")"]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(Te).map(([I,q])=>o.jsx("button",{onClick:()=>h(q),className:`py-2 rounded font-semibold transition-colors ${A===q?"bg-blue-600 text-white":"bg-slate-700 hover:bg-slate-600 text-slate-300"}`,children:I},I))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Description"}),o.jsx("textarea",{value:x,onChange:I=>y(I.target.value),placeholder:"Enter perk description",rows:4,className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white resize-none"})]})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-slate-800 border-t border-slate-700 p-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:D,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold",children:"Cancel"}),o.jsx("button",{onClick:H,disabled:!B||(s==="predefined"?!N||w&&!f:!p||!g||!A),className:`px-4 py-2 rounded font-semibold ${!B||(s==="predefined"?!N||w&&!f:!p||!g||!A)?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600 text-white"}`,children:B?"Add Perk":"Not Enough XP"})]})]})})},vd=({item:e,isAbility:t})=>{const[n,r]=T.useState(!1),l=t?"blue":"purple";return o.jsxs("div",{className:"bg-slate-800 rounded overflow-hidden",children:[o.jsx("div",{className:"p-3 cursor-pointer hover:bg-slate-750 transition-colors",onClick:()=>r(!n),children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:["from ",e.sourcePerk]})]}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 justify-end ml-2",children:[e.tags.slice(0,2).map((i,s)=>o.jsx("span",{className:`text-xs bg-${l}-900/50 text-${l}-300 px-1.5 py-0.5 rounded`,children:i},s)),e.tags.length>2&&o.jsxs("span",{className:"text-xs text-slate-500",children:["+",e.tags.length-2]})]})]})}),n&&o.jsxs("div",{className:"px-3 pb-3 border-t border-slate-700",children:[o.jsx("div",{className:"text-slate-300 text-sm mt-2 whitespace-pre-wrap",children:e.effect}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map((i,s)=>o.jsx("span",{className:`text-xs bg-${l}-900/50 text-${l}-300 px-1.5 py-0.5 rounded`,children:i},s))})]})]})},Zy=({perk:e,onEdit:t,onDelete:n})=>{const r=e.perkSnapshot,l=(r==null?void 0:r.tags)||[];return o.jsx("div",{className:"bg-slate-800 rounded overflow-hidden",children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-medium text-sm",children:e.name}),o.jsxs("div",{className:"text-slate-400 text-xs mt-0.5",children:[e.cost," XP  ",e.attribute]})]}),o.jsxs("div",{className:"flex gap-1 ml-2",children:[t&&o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white p-1",children:""}),n&&o.jsx("button",{onClick:n,className:"text-slate-400 hover:text-red-400 p-1",children:""})]})]}),l.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:l.map((i,s)=>o.jsx("span",{className:"text-xs bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded",children:i},s))})]})})},Js=({config:e,isExpanded:t,onToggle:n,viewMode:r,onViewChange:l,abilities:i,effects:s,onAddPerk:a,onPerkDelete:u})=>o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("button",{onClick:n,className:"w-full px-4 py-3 flex items-center justify-between bg-slate-750 hover:bg-slate-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-slate-300",children:t?o.jsx(El,{size:20}):o.jsx(Al,{size:20})}),o.jsxs("div",{className:"flex items-center gap-2",children:[e.icon,o.jsx("span",{className:"text-white font-semibold",children:e.title})]})]}),o.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[o.jsxs("span",{children:[e.ownedPerks.length," perks"]}),o.jsxs("span",{children:[i.length+s.length," abilities/effects"]})]})]}),t&&o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("button",{onClick:()=>l("owned"),className:`flex-1 py-2 px-3 rounded text-sm font-semibold transition-colors ${r==="owned"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Owned"}),o.jsx("button",{onClick:()=>l("browse"),className:`flex-1 py-2 px-3 rounded text-sm font-semibold transition-colors ${r==="browse"?"bg-blue-700 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Browse"})]}),r==="owned"&&o.jsxs("div",{className:"space-y-3",children:[e.ownedPerks.length===0?o.jsxs("div",{className:"text-slate-500 text-sm text-center py-4",children:["No ",e.title.toLowerCase()," perks yet"]}):o.jsx("div",{className:"space-y-2",children:e.ownedPerks.map((c,f)=>o.jsx(Zy,{perk:c,onDelete:u?()=>u(f):void 0},`${e.id}-perk-${f}-${c.id||c.name}`))}),(i.length>0||s.length>0)&&o.jsxs("div",{className:"border-t border-slate-700 pt-3",children:[o.jsx("h4",{className:"text-slate-300 text-sm font-semibold mb-2",children:"Granted Abilities & Effects"}),i.length===0&&s.length===0?o.jsx("div",{className:"text-slate-500 text-xs text-center py-2",children:"No abilities or effects"}):o.jsxs("div",{className:"space-y-2",children:[i.map((c,f)=>o.jsx(vd,{item:c,isAbility:!0},`${e.id}-ability-${f}`)),s.map((c,f)=>o.jsx(vd,{item:c,isAbility:!1},`${e.id}-effect-${f}`))]})]})]}),r==="browse"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Browse functionality coming soon"}),o.jsxs("button",{onClick:a,className:"w-full bg-blue-700 hover:bg-blue-600 rounded py-2 text-white text-sm font-semibold",children:["Add ",e.title," Perk"]})]})]})]}),ev=({character:e,onUpdate:t,perkDatabase:n})=>{const[r,l]=T.useState({spellcraft:!0,martial:!0,skill:!0}),[i,s]=T.useState({spellcraft:"owned",martial:"owned",skill:"owned"}),[a,u]=T.useState(!1),[c,f]=T.useState(!1),[d,p]=T.useState(!1),m=cs(e,n),g=ds(e,n),k=m.filter(C=>C.tags.includes("Spellcraft")),A=g.filter(C=>C.tags.includes("Spellcraft")),h=m.filter(C=>C.tags.includes("Combat")),x=g.filter(C=>C.tags.includes("Combat")),y=m.filter(C=>C.tags.includes("Skill")),E=g.filter(C=>C.tags.includes("Skill")),N=C=>{var I,q;const P=(I=e.magicPerks)==null?void 0:I[C];if(!P)return;const $=((q=e.magicPerks)==null?void 0:q.filter((Q,z)=>z!==C))||[],B=[...e.progressionLog];for(let Q=B.length-1;Q>=0;Q--)if(B[Q].type==="magicPerk"&&B[Q].name===P.name&&B[Q].cost===P.cost&&B[Q].attribute===P.attribute){B.splice(Q,1);break}t({...e,magicPerks:$,combatXP:e.combatXP+P.cost,progressionLog:B})},S=C=>{var b,R;const P=e.combatPerks[C],$=e.combatPerks.filter((_,v)=>v!==C),B=((R=(b=P.perkSnapshot)==null?void 0:b.tags)==null?void 0:R.includes("Conditioning"))||P.name.includes("(Completed)"),I=P.name.replace(" (Completed)","");let q=[...e.progressionLog],Q=0,z=!1;if(B)q=e.progressionLog.filter(_=>_.type==="stagedPerk"&&_.name===I?(Q+=_.cost||0,!1):!(_.type==="combatPerk"&&(_.name===P.name||_.name===`${I} (Completed)`))),z=!0;else for(let _=q.length-1;_>=0;_--)if(q[_].type==="combatPerk"&&q[_].name===P.name&&q[_].cost===P.cost){Q=q[_].cost||0,q.splice(_,1);break}const L={...e,combatPerks:$,combatXP:e.combatXP+Q,progressionLog:q};z&&e.maxWounds>1&&(L.maxWounds=e.maxWounds-1),t(L)},w=C=>{const P=e.perks[C],$=e.perks.filter((I,q)=>q!==C),B=[...e.progressionLog];for(let I=B.length-1;I>=0;I--)if(B[I].type==="perk"&&B[I].name===P.name&&B[I].cost===P.cost&&B[I].attribute===P.attribute){B.splice(I,1);break}t({...e,perks:$,socialXP:e.socialXP+P.cost,progressionLog:B})},D=[{id:"spellcraft",title:"Spellcraft",icon:o.jsx(Mm,{size:18}),tag:"Spellcraft",ownedPerks:e.magicPerks||[],allPerks:(n==null?void 0:n.perks.magic)||[]},{id:"martial",title:"Martial",icon:o.jsx(bl,{size:18}),tag:"Combat",ownedPerks:e.combatPerks,allPerks:(n==null?void 0:n.perks.combat)||[]},{id:"skill",title:"Skill",icon:o.jsx(jr,{size:18}),tag:"Skill",ownedPerks:e.perks,allPerks:(n==null?void 0:n.perks.skill)||[]}],H=C=>{l(P=>({...P,[C]:!P[C]}))},j=C=>{switch(C){case"spellcraft":u(!0);break;case"martial":f(!0);break;case"skill":p(!0);break}};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx(Js,{config:D[0],isExpanded:r.spellcraft,onToggle:()=>H("spellcraft"),viewMode:i.spellcraft,onViewChange:C=>s(P=>({...P,spellcraft:C})),abilities:k,effects:A,onAddPerk:()=>j("spellcraft"),onPerkDelete:N}),o.jsx(Js,{config:D[1],isExpanded:r.martial,onToggle:()=>H("martial"),viewMode:i.martial,onViewChange:C=>s(P=>({...P,martial:C})),abilities:h,effects:x,onAddPerk:()=>j("martial"),onPerkDelete:S}),o.jsx(Js,{config:D[2],isExpanded:r.skill,onToggle:()=>H("skill"),viewMode:i.skill,onViewChange:C=>s(P=>({...P,skill:C})),abilities:y,effects:E,onAddPerk:()=>j("skill"),onPerkDelete:w}),o.jsx(Ys,{isOpen:a,onClose:()=>u(!1),character:e,onUpdate:t,category:"magic",perkDatabase:n}),o.jsx(Ys,{isOpen:c,onClose:()=>f(!1),character:e,onUpdate:t,category:"combat",perkDatabase:n}),o.jsx(Ys,{isOpen:d,onClose:()=>p(!1),character:e,onUpdate:t,category:"skill",perkDatabase:n})]})},tv=({character:e,onUpdate:t})=>{const[n,r]=T.useState(!1),l=(u,c)=>{t({...e,[u]:c})},s=(()=>{const u={Might:0,Endurance:0,Agility:0,Dexterity:0,Wit:0,Will:0,Perception:0,Charisma:0};return e.progressionLog.forEach(c=>{if(c.attribute&&c.cost){const f=iy(c.attribute);u[f]=(u[f]||0)+c.cost}}),u})(),a=[{abbr:"MG",full:Te.MG},{abbr:"EN",full:Te.EN},{abbr:"AG",full:Te.AG},{abbr:"DX",full:Te.DX},{abbr:"WT",full:Te.WT},{abbr:"WI",full:Te.WI},{abbr:"PR",full:Te.PR},{abbr:"CH",full:Te.CH}];return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:e.bio||"",onChange:u=>l("bio",u.target.value),placeholder:"Character background, personality, appearance...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Notes"}),o.jsx("textarea",{value:e.notes||"",onChange:u=>l("notes",u.target.value),placeholder:"Session notes, goals, reminders...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Reputation"}),o.jsx("textarea",{value:e.reputation||"",onChange:u=>l("reputation",u.target.value),placeholder:"Factions, relationships, standing...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500 resize-none",rows:4})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:[o.jsxs("button",{onClick:()=>r(!n),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors text-left",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Progression History"}),n?o.jsx(El,{size:20,className:"text-slate-400"}):o.jsx(Al,{size:20,className:"text-slate-400"})]}),n&&o.jsxs("div",{className:"p-4 border-t border-slate-700",children:[o.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"Attribute Points"}),o.jsxs("div",{className:"bg-slate-700 rounded-lg p-3 mb-6",children:[o.jsx("div",{className:"grid grid-cols-8 gap-2 mb-2",children:a.map(({abbr:u})=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-400 text-xs font-semibold",children:u}),o.jsx("div",{className:"text-white text-lg font-bold",children:e.stats[u]})]},u))}),o.jsx("div",{className:"grid grid-cols-8 gap-2",children:a.map(({abbr:u,full:c})=>o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-slate-500 text-xs",children:"CP"}),o.jsx("div",{className:"text-green-400 text-sm font-semibold",children:s[c]})]},u))})]}),o.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:"History"}),e.progressionLog.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-slate-400",children:"No progression recorded yet"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-600",children:[o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Type"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Name"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Level"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Attribute"}),o.jsx("th",{className:"text-left py-2 px-3 text-sm font-semibold text-slate-400",children:"Cost"})]})}),o.jsx("tbody",{children:e.progressionLog.map((u,c)=>o.jsxs("tr",{className:"border-b border-slate-700",children:[o.jsx("td",{className:"py-3 px-3 text-sm",children:o.jsx("span",{className:"bg-slate-600 px-2 py-1 rounded text-xs uppercase",children:u.type})}),o.jsxs("td",{className:"py-3 px-3 text-sm text-white",children:[u.name,u.type==="spell"&&u.spellType&&o.jsxs("span",{className:"ml-2 text-xs text-purple-400",children:["(",u.spellType,")"]})]}),o.jsx("td",{className:"py-3 px-3 text-sm text-slate-300",children:u.type==="spell"?`T${u.tier||0}`:u.level||"-"}),o.jsx("td",{className:"py-3 px-3 text-sm text-blue-400",children:u.attribute||"-"}),o.jsx("td",{className:"py-3 px-3 text-sm text-green-400",children:u.type==="spell"?u.cost?`${u.cost} ${u.xpType==="social"?"SP":"CP"}`:"-":u.cost?`${u.cost} CP`:"-"})]},c))})]})})]})]})]})},nv=e=>{if(e.inventory&&e.inventory.length>0)return e;const t=[];if(e.equippedWeapon1&&e.equippedWeapon1!=="None"){const n=Le[e.equippedWeapon1];n&&t.push({id:St(),name:e.equippedWeapon1,type:"weapon",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedWeapon1})}if(e.equippedWeapon2&&e.equippedWeapon2!=="None"){const n=Le[e.equippedWeapon2];n&&t.push({id:St(),name:e.equippedWeapon2,type:"weapon",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedWeapon2})}if(e.armorType&&e.armorType!=="None"){const n=Ke[e.armorType];n&&t.push({id:St(),name:e.armorType,type:"armor",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.armorType})}if(e.equippedShield&&e.equippedShield!=="None"){const n=Nt[e.equippedShield];n&&t.push({id:St(),name:e.equippedShield,type:"shield",state:"equipped",weight:n.weight,quantity:1,isCustom:!1,dataRef:e.equippedShield})}return e.equipment&&e.equipment.length>0&&e.equipment.forEach(n=>{t.push({id:St(),name:n.name,type:"item",state:"stowed",weight:n.weight,quantity:n.quantity,isCustom:!1})}),e.customItems&&e.customItems.length>0&&e.customItems.forEach(n=>{t.push({id:St(),name:n.name,type:"item",state:"stowed",weight:n.weight,quantity:n.quantity,isCustom:!0})}),{...e,inventory:t}},Vm=e=>{const t=e.equippedWeapon1&&e.equippedWeapon1!=="None"||e.equippedWeapon2&&e.equippedWeapon2!=="None"||e.armorType&&e.armorType!=="None"||e.equippedShield&&e.equippedShield!=="None"||e.equipment&&e.equipment.length>0||e.customItems&&e.customItems.length>0,n=e.inventory&&e.inventory.length>0;return t&&!n},rv=e=>Vm(e)?(console.log("Migrating character to new inventory system..."),nv(e)):e,lv=({character:e,onUpdate:t,perkDatabase:n,onMenuToggle:r})=>{const[l,i]=T.useState("skills"),[s,a]=T.useState(0),[u,c]=T.useState(0),f=["skills","combat","equipment","magic","perks","list"],d=A=>{a(A.touches[0].clientX)},p=A=>{c(A.touches[0].clientX)},m=()=>{if(!s||!u)return;const A=s-u,h=A>75,x=A<-75;if(s<50&&x){r(),a(0),c(0);return}const y=f.indexOf(l);h&&y<f.length-1&&i(f[y+1]),x&&y>0&&i(f[y-1]),a(0),c(0)};T.useEffect(()=>{if(Vm(e)){const A=rv(e);t(A)}},[e.name]),T.useEffect(()=>{const A=pd(e.progressionLog),h=md(e.progressionLog),x=Object.keys(A).some(E=>A[E]!==e.stats[E]),y=Object.keys(h).some(E=>h[E]!==e.weaponDomains[E]);(x||y)&&t({...e,stats:A,weaponDomains:h})},[e.progressionLog]);const g=(A,h)=>{t({...e,combatXP:e.combatXP+A,socialXP:e.socialXP+h})},k={...e,stats:pd(e.progressionLog),weaponDomains:md(e.progressionLog)};return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white",onTouchStart:d,onTouchMove:p,onTouchEnd:m,children:[o.jsx(ay,{character:k,onUpdateXP:g,onMenuToggle:r}),o.jsx("div",{className:"sticky top-0 z-10 bg-slate-900 border-b border-slate-700",children:o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>i("skills"),className:`flex-1 py-3 font-semibold ${l==="skills"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Skills"}),o.jsx("button",{onClick:()=>i("combat"),className:`flex-1 py-3 font-semibold ${l==="combat"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Combat"}),o.jsx("button",{onClick:()=>i("equipment"),className:`flex-1 py-3 font-semibold ${l==="equipment"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Equipment"}),o.jsx("button",{onClick:()=>i("magic"),className:`flex-1 py-3 font-semibold ${l==="magic"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Magic"}),o.jsx("button",{onClick:()=>i("perks"),className:`flex-1 py-3 font-semibold ${l==="perks"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Perks"}),o.jsx("button",{onClick:()=>i("list"),className:`flex-1 py-3 font-semibold ${l==="list"?"text-white border-b-2 border-white":"text-slate-500"}`,children:" Notes"})]})}),o.jsxs("div",{className:"bg-black min-h-screen",children:[l==="skills"&&o.jsx(gy,{character:k,onUpdate:t,perkDatabase:n}),l==="combat"&&o.jsx(_y,{character:k,onUpdate:t,perkDatabase:n}),l==="equipment"&&o.jsx($y,{character:k,onUpdate:t}),l==="magic"&&o.jsx(Jy,{character:k,onUpdate:t,perkDatabase:n}),l==="perks"&&o.jsx(ev,{character:k,onUpdate:t,perkDatabase:n}),l==="list"&&o.jsx(tv,{character:k,onUpdate:t})]})]})};function iv(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const sv=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ov=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,av={};function bd(e,t){return(av.jsx?ov:sv).test(e)}const uv=/[ \t\n\f\r]/g;function cv(e){return typeof e=="object"?e.type==="text"?kd(e.value):!1:kd(e)}function kd(e){return e.replace(uv,"")===""}class Dl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Dl.prototype.normal={};Dl.prototype.property={};Dl.prototype.space=void 0;function Qm(e,t){const n={},r={};for(const l of e)Object.assign(n,l.property),Object.assign(r,l.normal);return new Dl(n,r,t)}function pa(e){return e.toLowerCase()}class et{constructor(t,n){this.attribute=n,this.property=t}}et.prototype.attribute="";et.prototype.booleanish=!1;et.prototype.boolean=!1;et.prototype.commaOrSpaceSeparated=!1;et.prototype.commaSeparated=!1;et.prototype.defined=!1;et.prototype.mustUseProperty=!1;et.prototype.number=!1;et.prototype.overloadedBoolean=!1;et.prototype.property="";et.prototype.spaceSeparated=!1;et.prototype.space=void 0;let dv=0;const Z=Bn(),Ne=Bn(),ma=Bn(),X=Bn(),pe=Bn(),dr=Bn(),nt=Bn();function Bn(){return 2**++dv}const ha=Object.freeze(Object.defineProperty({__proto__:null,boolean:Z,booleanish:Ne,commaOrSpaceSeparated:nt,commaSeparated:dr,number:X,overloadedBoolean:ma,spaceSeparated:pe},Symbol.toStringTag,{value:"Module"})),Zs=Object.keys(ha);class Eu extends et{constructor(t,n,r,l){let i=-1;if(super(t,n),wd(this,"space",l),typeof r=="number")for(;++i<Zs.length;){const s=Zs[i];wd(this,Zs[i],(r&ha[s])===ha[s])}}}Eu.prototype.defined=!0;function wd(e,t,n){n&&(e[t]=n)}function Sr(e){const t={},n={};for(const[r,l]of Object.entries(e.properties)){const i=new Eu(r,e.transform(e.attributes||{},r),l,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[pa(r)]=r,n[pa(i.attribute)]=r}return new Dl(t,n,e.space)}const Gm=Sr({properties:{ariaActiveDescendant:null,ariaAtomic:Ne,ariaAutoComplete:null,ariaBusy:Ne,ariaChecked:Ne,ariaColCount:X,ariaColIndex:X,ariaColSpan:X,ariaControls:pe,ariaCurrent:null,ariaDescribedBy:pe,ariaDetails:null,ariaDisabled:Ne,ariaDropEffect:pe,ariaErrorMessage:null,ariaExpanded:Ne,ariaFlowTo:pe,ariaGrabbed:Ne,ariaHasPopup:null,ariaHidden:Ne,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pe,ariaLevel:X,ariaLive:null,ariaModal:Ne,ariaMultiLine:Ne,ariaMultiSelectable:Ne,ariaOrientation:null,ariaOwns:pe,ariaPlaceholder:null,ariaPosInSet:X,ariaPressed:Ne,ariaReadOnly:Ne,ariaRelevant:null,ariaRequired:Ne,ariaRoleDescription:pe,ariaRowCount:X,ariaRowIndex:X,ariaRowSpan:X,ariaSelected:Ne,ariaSetSize:X,ariaSort:null,ariaValueMax:X,ariaValueMin:X,ariaValueNow:X,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Km(e,t){return t in e?e[t]:t}function Ym(e,t){return Km(e,t.toLowerCase())}const fv=Sr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dr,acceptCharset:pe,accessKey:pe,action:null,allow:null,allowFullScreen:Z,allowPaymentRequest:Z,allowUserMedia:Z,alt:null,as:null,async:Z,autoCapitalize:null,autoComplete:pe,autoFocus:Z,autoPlay:Z,blocking:pe,capture:null,charSet:null,checked:Z,cite:null,className:pe,cols:X,colSpan:null,content:null,contentEditable:Ne,controls:Z,controlsList:pe,coords:X|dr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Z,defer:Z,dir:null,dirName:null,disabled:Z,download:ma,draggable:Ne,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Z,formTarget:null,headers:pe,height:X,hidden:ma,high:X,href:null,hrefLang:null,htmlFor:pe,httpEquiv:pe,id:null,imageSizes:null,imageSrcSet:null,inert:Z,inputMode:null,integrity:null,is:null,isMap:Z,itemId:null,itemProp:pe,itemRef:pe,itemScope:Z,itemType:pe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Z,low:X,manifest:null,max:null,maxLength:X,media:null,method:null,min:null,minLength:X,multiple:Z,muted:Z,name:null,nonce:null,noModule:Z,noValidate:Z,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Z,optimum:X,pattern:null,ping:pe,placeholder:null,playsInline:Z,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Z,referrerPolicy:null,rel:pe,required:Z,reversed:Z,rows:X,rowSpan:X,sandbox:pe,scope:null,scoped:Z,seamless:Z,selected:Z,shadowRootClonable:Z,shadowRootDelegatesFocus:Z,shadowRootMode:null,shape:null,size:X,sizes:null,slot:null,span:X,spellCheck:Ne,src:null,srcDoc:null,srcLang:null,srcSet:null,start:X,step:null,style:null,tabIndex:X,target:null,title:null,translate:null,type:null,typeMustMatch:Z,useMap:null,value:Ne,width:X,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pe,axis:null,background:null,bgColor:null,border:X,borderColor:null,bottomMargin:X,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Z,declare:Z,event:null,face:null,frame:null,frameBorder:null,hSpace:X,leftMargin:X,link:null,longDesc:null,lowSrc:null,marginHeight:X,marginWidth:X,noResize:Z,noHref:Z,noShade:Z,noWrap:Z,object:null,profile:null,prompt:null,rev:null,rightMargin:X,rules:null,scheme:null,scrolling:Ne,standby:null,summary:null,text:null,topMargin:X,valueType:null,version:null,vAlign:null,vLink:null,vSpace:X,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Z,disableRemotePlayback:Z,prefix:null,property:null,results:X,security:null,unselectable:null},space:"html",transform:Ym}),pv=Sr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:nt,accentHeight:X,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:X,amplitude:X,arabicForm:null,ascent:X,attributeName:null,attributeType:null,azimuth:X,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:X,by:null,calcMode:null,capHeight:X,className:pe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:X,diffuseConstant:X,direction:null,display:null,dur:null,divisor:X,dominantBaseline:null,download:Z,dx:null,dy:null,edgeMode:null,editable:null,elevation:X,enableBackground:null,end:null,event:null,exponent:X,externalResourcesRequired:null,fill:null,fillOpacity:X,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dr,g2:dr,glyphName:dr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:X,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:X,horizOriginX:X,horizOriginY:X,id:null,ideographic:X,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:X,k:X,k1:X,k2:X,k3:X,k4:X,kernelMatrix:nt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:X,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:X,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:X,overlineThickness:X,paintOrder:null,panose1:null,path:null,pathLength:X,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:X,pointsAtY:X,pointsAtZ:X,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nt,rev:nt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nt,requiredFeatures:nt,requiredFonts:nt,requiredFormats:nt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:X,specularExponent:X,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:X,strikethroughThickness:X,string:null,stroke:null,strokeDashArray:nt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:X,strokeOpacity:X,strokeWidth:null,style:null,surfaceScale:X,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nt,tabIndex:X,tableValues:null,target:null,targetX:X,targetY:X,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:X,underlineThickness:X,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:X,values:null,vAlphabetic:X,vMathematical:X,vectorEffect:null,vHanging:X,vIdeographic:X,version:null,vertAdvY:X,vertOriginX:X,vertOriginY:X,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:X,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Km}),Jm=Sr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Zm=Sr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Ym}),eh=Sr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),mv={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hv=/[A-Z]/g,jd=/-[a-z]/g,gv=/^data[-\w.:]+$/i;function xv(e,t){const n=pa(t);let r=t,l=et;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gv.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(jd,vv);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!jd.test(i)){let s=i.replace(hv,yv);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}l=Eu}return new l(r,t)}function yv(e){return"-"+e.toLowerCase()}function vv(e){return e.charAt(1).toUpperCase()}const bv=Qm([Gm,fv,Jm,Zm,eh],"html"),Au=Qm([Gm,pv,Jm,Zm,eh],"svg");function kv(e){return e.join(" ").trim()}var Tu={},Sd=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wv=/\n/g,jv=/^\s*/,Sv=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Nv=/^:\s*/,Cv=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Pv=/^[;\s]*/,Ev=/^\s+|\s+$/g,Av=`
`,Nd="/",Cd="*",Nn="",Tv="comment",Dv="declaration",Iv=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function l(g){var k=g.match(wv);k&&(n+=k.length);var A=g.lastIndexOf(Av);r=~A?g.length-A:r+g.length}function i(){var g={line:n,column:r};return function(k){return k.position=new s(g),c(),k}}function s(g){this.start=g,this.end={line:n,column:r},this.source=t.source}s.prototype.content=e;function a(g){var k=new Error(t.source+":"+n+":"+r+": "+g);if(k.reason=g,k.filename=t.source,k.line=n,k.column=r,k.source=e,!t.silent)throw k}function u(g){var k=g.exec(e);if(k){var A=k[0];return l(A),e=e.slice(A.length),k}}function c(){u(jv)}function f(g){var k;for(g=g||[];k=d();)k!==!1&&g.push(k);return g}function d(){var g=i();if(!(Nd!=e.charAt(0)||Cd!=e.charAt(1))){for(var k=2;Nn!=e.charAt(k)&&(Cd!=e.charAt(k)||Nd!=e.charAt(k+1));)++k;if(k+=2,Nn===e.charAt(k-1))return a("End of comment missing");var A=e.slice(2,k-2);return r+=2,l(A),e=e.slice(k),r+=2,g({type:Tv,comment:A})}}function p(){var g=i(),k=u(Sv);if(k){if(d(),!u(Nv))return a("property missing ':'");var A=u(Cv),h=g({type:Dv,property:Pd(k[0].replace(Sd,Nn)),value:A?Pd(A[0].replace(Sd,Nn)):Nn});return u(Pv),h}}function m(){var g=[];f(g);for(var k;k=p();)k!==!1&&(g.push(k),f(g));return g}return c(),m()};function Pd(e){return e?e.replace(Ev,Nn):Nn}var Lv=gi&&gi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.default=Rv;const Mv=Lv(Iv);function Rv(e,t){let n=null;if(!e||typeof e!="string")return n;const r=(0,Mv.default)(e),l=typeof t=="function";return r.forEach(i=>{if(i.type!=="declaration")return;const{property:s,value:a}=i;l?t(s,a,i):a&&(n=n||{},n[s]=a)}),n}var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.camelCase=void 0;var zv=/^--[a-zA-Z0-9_-]+$/,_v=/-([a-z])/g,Fv=/^[^-]+$/,Ov=/^-(webkit|moz|ms|o|khtml)-/,$v=/^-(ms)-/,Bv=function(e){return!e||Fv.test(e)||zv.test(e)},Wv=function(e,t){return t.toUpperCase()},Ed=function(e,t){return"".concat(t,"-")},Hv=function(e,t){return t===void 0&&(t={}),Bv(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace($v,Ed):e=e.replace(Ov,Ed),e.replace(_v,Wv))};xs.camelCase=Hv;var qv=gi&&gi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Uv=qv(Tu),Xv=xs;function ga(e,t){var n={};return!e||typeof e!="string"||(0,Uv.default)(e,function(r,l){r&&l&&(n[(0,Xv.camelCase)(r,t)]=l)}),n}ga.default=ga;var Vv=ga;const Qv=Aa(Vv),th=nh("end"),Du=nh("start");function nh(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Gv(e){const t=Du(e),n=th(e);if(t&&n)return{start:t,end:n}}function el(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ad(e.position):"start"in e||"end"in e?Ad(e):"line"in e||"column"in e?xa(e):""}function xa(e){return Td(e&&e.line)+":"+Td(e&&e.column)}function Ad(e){return xa(e&&e.start)+"-"+xa(e&&e.end)}function Td(e){return e&&typeof e=="number"?e:1}class Be extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let l="",i={},s=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?l=t:!i.cause&&t&&(s=!0,l=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?i.ruleId=r:(i.source=r.slice(0,u),i.ruleId=r.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=a?a.line:void 0,this.name=el(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Be.prototype.file="";Be.prototype.name="";Be.prototype.reason="";Be.prototype.message="";Be.prototype.stack="";Be.prototype.column=void 0;Be.prototype.line=void 0;Be.prototype.ancestors=void 0;Be.prototype.cause=void 0;Be.prototype.fatal=void 0;Be.prototype.place=void 0;Be.prototype.ruleId=void 0;Be.prototype.source=void 0;const Iu={}.hasOwnProperty,Kv=new Map,Yv=/[A-Z]/g,Jv=new Set(["table","tbody","thead","tfoot","tr"]),Zv=new Set(["td","th"]),rh="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eb(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ab(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ob(n,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Au:bv,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=lh(l,e,void 0);return i&&typeof i!="string"?i:l.create(e,l.Fragment,{children:i||void 0},void 0)}function lh(e,t,n){if(t.type==="element")return tb(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return nb(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lb(e,t,n);if(t.type==="mdxjsEsm")return rb(e,t);if(t.type==="root")return ib(e,t,n);if(t.type==="text")return sb(e,t)}function tb(e,t,n){const r=e.schema;let l=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(l=Au,e.schema=l),e.ancestors.push(t);const i=sh(e,t.tagName,!1),s=ub(e,t);let a=Mu(e,t);return Jv.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!cv(u):!0})),ih(e,s,i,t),Lu(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function nb(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}kl(e,t.position)}function rb(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);kl(e,t.position)}function lb(e,t,n){const r=e.schema;let l=r;t.name==="svg"&&r.space==="html"&&(l=Au,e.schema=l),e.ancestors.push(t);const i=t.name===null?e.Fragment:sh(e,t.name,!0),s=cb(e,t),a=Mu(e,t);return ih(e,s,i,t),Lu(s,a),e.ancestors.pop(),e.schema=r,e.create(t,i,s,n)}function ib(e,t,n){const r={};return Lu(r,Mu(e,t)),e.create(t,e.Fragment,r,n)}function sb(e,t){return t.value}function ih(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Lu(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ob(e,t,n){return r;function r(l,i,s,a){const c=Array.isArray(s.children)?n:t;return a?c(i,s,a):c(i,s)}}function ab(e,t){return n;function n(r,l,i,s){const a=Array.isArray(i.children),u=Du(r);return t(l,i,s,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function ub(e,t){const n={};let r,l;for(l in t.properties)if(l!=="children"&&Iu.call(t.properties,l)){const i=db(e,l,t.properties[l]);if(i){const[s,a]=i;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&Zv.has(t.tagName)?r=a:n[s]=a}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function cb(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const s=i.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else kl(e,t.position);else{const l=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,i=e.evaluater.evaluateExpression(a.expression)}else kl(e,t.position);else i=r.value===null?!0:r.value;n[l]=i}return n}function Mu(e,t){const n=[];let r=-1;const l=e.passKeys?new Map:Kv;for(;++r<t.children.length;){const i=t.children[r];let s;if(e.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const c=l.get(u)||0;s=u+"-"+c,l.set(u,c+1)}}const a=lh(e,i,s);a!==void 0&&n.push(a)}return n}function db(e,t,n){const r=xv(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?iv(n):kv(n)),r.property==="style"){let l=typeof n=="object"?n:fb(e,String(n));return e.stylePropertyNameCase==="css"&&(l=pb(l)),["style",l]}return[e.elementAttributeNameCase==="react"&&r.space?mv[r.property]||r.property:r.attribute,n]}}function fb(e,t){try{return Qv(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,l=new Be("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=e.filePath||void 0,l.url=rh+"#cannot-parse-style-attribute",l}}function sh(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let i=-1,s;for(;++i<l.length;){const a=bd(l[i])?{type:"Identifier",name:l[i]}:{type:"Literal",value:l[i]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}r=s}else r=bd(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const l=r.value;return Iu.call(e.components,l)?e.components[l]:l}if(e.evaluater)return e.evaluater.evaluateExpression(r);kl(e)}function kl(e,t){const n=new Be("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rh+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pb(e){const t={};let n;for(n in e)Iu.call(e,n)&&(t[mb(n)]=e[n]);return t}function mb(e){let t=e.replace(Yv,hb);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function hb(e){return"-"+e.toLowerCase()}const eo={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},gb={};function Ru(e,t){const n=gb,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return oh(e,r,l)}function oh(e,t,n){if(xb(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Dd(e.children,t,n)}return Array.isArray(e)?Dd(e,t,n):""}function Dd(e,t,n){const r=[];let l=-1;for(;++l<e.length;)r[l]=oh(e[l],t,n);return r.join("")}function xb(e){return!!(e&&typeof e=="object")}const Id=document.createElement("i");function zu(e){const t="&"+e+";";Id.innerHTML=t;const n=Id.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function st(e,t,n,r){const l=e.length;let i=0,s;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);i<r.length;)s=r.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function pt(e,t){return e.length>0?(st(e,e.length,0,t),e):t}const Ld={}.hasOwnProperty;function ah(e){const t={};let n=-1;for(;++n<e.length;)yb(t,e[n]);return t}function yb(e,t){let n;for(n in t){const l=(Ld.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let s;if(i)for(s in i){Ld.call(l,s)||(l[s]=[]);const a=i[s];vb(l[s],Array.isArray(a)?a:a?[a]:[])}}}function vb(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);st(e,0,0,r)}function uh(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Et(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const He=bn(/[A-Za-z]/),Oe=bn(/[\dA-Za-z]/),bb=bn(/[#-'*+\--9=?A-Z^-~]/);function qi(e){return e!==null&&(e<32||e===127)}const ya=bn(/\d/),kb=bn(/[\dA-Fa-f]/),wb=bn(/[!-/:-@[-`{-~]/);function Y(e){return e!==null&&e<-2}function de(e){return e!==null&&(e<0||e===32)}function re(e){return e===-2||e===-1||e===32}const ys=bn(new RegExp("\\p{P}|\\p{S}","u")),Fn=bn(/\s/);function bn(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Nr(e){const t=[];let n=-1,r=0,l=0;for(;++n<e.length;){const i=e.charCodeAt(n);let s="";if(i===37&&Oe(e.charCodeAt(n+1))&&Oe(e.charCodeAt(n+2)))l=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const a=e.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(s=String.fromCharCode(i,a),l=1):s=""}else s=String.fromCharCode(i);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+l+1,s=""),l&&(n+=l,l=0)}return t.join("")+e.slice(r)}function se(e,t,n,r){const l=r?r-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(u){return re(u)?(e.enter(n),a(u)):t(u)}function a(u){return re(u)&&i++<l?(e.consume(u),a):(e.exit(n),t(u))}}const jb={tokenize:Sb};function Sb(e){const t=e.attempt(this.parser.constructs.contentInitial,r,l);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),se(e,t,"linePrefix")}function l(a){return e.enter("paragraph"),i(a)}function i(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Y(a)?(e.consume(a),e.exit("chunkText"),i):(e.consume(a),s)}}const Nb={tokenize:Cb},Md={tokenize:Pb};function Cb(e){const t=this,n=[];let r=0,l,i,s;return a;function a(y){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,c)(y)}return c(y)}function u(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&x();const E=t.events.length;let N=E,S;for(;N--;)if(t.events[N][0]==="exit"&&t.events[N][1].type==="chunkFlow"){S=t.events[N][1].end;break}h(r);let w=E;for(;w<t.events.length;)t.events[w][1].end={...S},w++;return st(t.events,N+1,0,t.events.slice(E)),t.events.length=w,c(y)}return a(y)}function c(y){if(r===n.length){if(!l)return p(y);if(l.currentConstruct&&l.currentConstruct.concrete)return g(y);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Md,f,d)(y)}function f(y){return l&&x(),h(r),p(y)}function d(y){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,g(y)}function p(y){return t.containerState={},e.attempt(Md,m,g)(y)}function m(y){return r++,n.push([t.currentConstruct,t.containerState]),p(y)}function g(y){if(y===null){l&&x(),h(0),e.consume(y);return}return l=l||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:i}),k(y)}function k(y){if(y===null){A(e.exit("chunkFlow"),!0),h(0),e.consume(y);return}return Y(y)?(e.consume(y),A(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(y),k)}function A(y,E){const N=t.sliceStream(y);if(E&&N.push(null),y.previous=i,i&&(i.next=y),i=y,l.defineSkip(y.start),l.write(N),t.parser.lazy[y.start.line]){let S=l.events.length;for(;S--;)if(l.events[S][1].start.offset<s&&(!l.events[S][1].end||l.events[S][1].end.offset>s))return;const w=t.events.length;let D=w,H,j;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(H){j=t.events[D][1].end;break}H=!0}for(h(r),S=w;S<t.events.length;)t.events[S][1].end={...j},S++;st(t.events,D+1,0,t.events.slice(w)),t.events.length=S}}function h(y){let E=n.length;for(;E-- >y;){const N=n[E];t.containerState=N[1],N[0].exit.call(t,e)}n.length=y}function x(){l.write([null]),i=void 0,l=void 0,t.containerState._closeFlow=void 0}}function Pb(e,t,n){return se(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function vr(e){if(e===null||de(e)||Fn(e))return 1;if(ys(e))return 2}function vs(e,t,n){const r=[];let l=-1;for(;++l<e.length;){const i=e[l].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const va={name:"attention",resolveAll:Eb,tokenize:Ab};function Eb(e,t){let n=-1,r,l,i,s,a,u,c,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},p={...e[n][1].start};Rd(d,-u),Rd(p,u),s={type:u>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:u>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},i={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},l={type:u>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[r][1].end={...s.start},e[n][1].start={...a.end},c=[],e[r][1].end.offset-e[r][1].start.offset&&(c=pt(c,[["enter",e[r][1],t],["exit",e[r][1],t]])),c=pt(c,[["enter",l,t],["enter",s,t],["exit",s,t],["enter",i,t]]),c=pt(c,vs(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),c=pt(c,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",l,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,c=pt(c,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,st(e,r-1,n-r+3,c),n=r+c.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Ab(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,l=vr(r);let i;return s;function s(u){return i=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===i)return e.consume(u),a;const c=e.exit("attentionSequence"),f=vr(u),d=!f||f===2&&l||n.includes(u),p=!l||l===2&&f||n.includes(r);return c._open=!!(i===42?d:d&&(l||!p)),c._close=!!(i===42?p:p&&(f||!d)),t(u)}}function Rd(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Tb={name:"autolink",tokenize:Db};function Db(e,t,n){let r=0;return l;function l(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(m){return He(m)?(e.consume(m),s):m===64?n(m):c(m)}function s(m){return m===43||m===45||m===46||Oe(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(e.consume(m),r=0,u):(m===43||m===45||m===46||Oe(m))&&r++<32?(e.consume(m),a):(r=0,c(m))}function u(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||qi(m)?n(m):(e.consume(m),u)}function c(m){return m===64?(e.consume(m),f):bb(m)?(e.consume(m),c):n(m)}function f(m){return Oe(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):p(m)}function p(m){if((m===45||Oe(m))&&r++<63){const g=m===45?p:d;return e.consume(m),g}return n(m)}}const Il={partial:!0,tokenize:Ib};function Ib(e,t,n){return r;function r(i){return re(i)?se(e,l,"linePrefix")(i):l(i)}function l(i){return i===null||Y(i)?t(i):n(i)}}const ch={continuation:{tokenize:Mb},exit:Rb,name:"blockQuote",tokenize:Lb};function Lb(e,t,n){const r=this;return l;function l(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return n(s)}function i(s){return re(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Mb(e,t,n){const r=this;return l;function l(s){return re(s)?se(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(ch,t,n)(s)}}function Rb(e){e.exit("blockQuote")}const dh={name:"characterEscape",tokenize:zb};function zb(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),l}function l(i){return wb(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const fh={name:"characterReference",tokenize:_b};function _b(e,t,n){const r=this;let l=0,i,s;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,s=Oe,f(d))}function c(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=kb,f):(e.enter("characterReferenceValue"),i=7,s=ya,f(d))}function f(d){if(d===59&&l){const p=e.exit("characterReferenceValue");return s===Oe&&!zu(r.sliceSerialize(p))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(d)&&l++<i?(e.consume(d),f):n(d)}}const zd={partial:!0,tokenize:Ob},_d={concrete:!0,name:"codeFenced",tokenize:Fb};function Fb(e,t,n){const r=this,l={partial:!0,tokenize:N};let i=0,s=0,a;return u;function u(S){return c(S)}function c(S){const w=r.events[r.events.length-1];return i=w&&w[1].type==="linePrefix"?w[2].sliceSerialize(w[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(S)}function f(S){return S===a?(s++,e.consume(S),f):s<3?n(S):(e.exit("codeFencedFenceSequence"),re(S)?se(e,d,"whitespace")(S):d(S))}function d(S){return S===null||Y(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(zd,k,E)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Y(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):re(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),se(e,m,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return S===null||Y(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||Y(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),g)}function k(S){return e.attempt(l,E,A)(S)}function A(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),h}function h(S){return i>0&&re(S)?se(e,x,"linePrefix",i+1)(S):x(S)}function x(S){return S===null||Y(S)?e.check(zd,k,E)(S):(e.enter("codeFlowValue"),y(S))}function y(S){return S===null||Y(S)?(e.exit("codeFlowValue"),x(S)):(e.consume(S),y)}function E(S){return e.exit("codeFenced"),t(S)}function N(S,w,D){let H=0;return j;function j(I){return S.enter("lineEnding"),S.consume(I),S.exit("lineEnding"),C}function C(I){return S.enter("codeFencedFence"),re(I)?se(S,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):P(I)}function P(I){return I===a?(S.enter("codeFencedFenceSequence"),$(I)):D(I)}function $(I){return I===a?(H++,S.consume(I),$):H>=s?(S.exit("codeFencedFenceSequence"),re(I)?se(S,B,"whitespace")(I):B(I)):D(I)}function B(I){return I===null||Y(I)?(S.exit("codeFencedFence"),w(I)):D(I)}}}function Ob(e,t,n){const r=this;return l;function l(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const to={name:"codeIndented",tokenize:Bb},$b={partial:!0,tokenize:Wb};function Bb(e,t,n){const r=this;return l;function l(c){return e.enter("codeIndented"),se(e,i,"linePrefix",5)(c)}function i(c){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?u(c):Y(c)?e.attempt($b,s,u)(c):(e.enter("codeFlowValue"),a(c))}function a(c){return c===null||Y(c)?(e.exit("codeFlowValue"),s(c)):(e.consume(c),a)}function u(c){return e.exit("codeIndented"),t(c)}}function Wb(e,t,n){const r=this;return l;function l(s){return r.parser.lazy[r.now().line]?n(s):Y(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),l):se(e,i,"linePrefix",5)(s)}function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):Y(s)?l(s):n(s)}}const Hb={name:"codeText",previous:Ub,resolve:qb,tokenize:Xb};function qb(e){let t=e.length-4,n=3,r,l;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)l===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(l=r):(r===t||e[r][1].type==="lineEnding")&&(e[l][1].type="codeTextData",r!==l+2&&(e[l][1].end=e[r-1][1].end,e.splice(l+2,r-l-2),t-=r-l-2,r=l+2),l=void 0);return e}function Ub(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Xb(e,t,n){let r=0,l,i;return s;function s(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(i=e.enter("codeTextSequence"),l=0,f(d)):Y(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Y(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),c)}function f(d){return d===96?(e.consume(d),l++,f):l===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(i.type="codeTextData",c(d))}}class Vb{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const l=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return r&&Or(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Or(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Or(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Or(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Or(this.left,n.reverse())}}}function Or(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ph(e){const t={};let n=-1,r,l,i,s,a,u,c;const f=new Vb(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Qb(f,n)),n=t[n],c=!0);else if(r[1]._container){for(i=n,l=void 0;i--;)if(s=f.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(l&&(f.get(l)[1].type="lineEndingBlank"),s[1].type="lineEnding",l=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;l&&(r[1].end={...f.get(l)[1].start},a=f.slice(l,n),a.unshift(r),f.splice(l,n-l+1,a))}}return st(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!c}function Qb(e,t){const n=e.get(t)[1],r=e.get(t)[2];let l=t-1;const i=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,u=[],c={};let f,d,p=-1,m=n,g=0,k=0;const A=[k];for(;m;){for(;e.get(++l)[1]!==m;);i.push(l),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&s.defineSkip(m.start),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(f),m._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(k=p+1,A.push(k),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(s.events=[],m?(m._tokenizer=void 0,m.previous=void 0):A.pop(),p=A.length;p--;){const h=a.slice(A[p],A[p+1]),x=i.pop();u.push([x,x+h.length-1]),e.splice(x,2,h)}for(u.reverse(),p=-1;++p<u.length;)c[g+u[p][0]]=g+u[p][1],g+=u[p][1]-u[p][0]-1;return c}const Gb={resolve:Yb,tokenize:Jb},Kb={partial:!0,tokenize:Zb};function Yb(e){return ph(e),e}function Jb(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),l(a)}function l(a){return a===null?i(a):Y(a)?e.check(Kb,s,i)(a):(e.consume(a),l)}function i(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function Zb(e,t,n){const r=this;return l;function l(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),se(e,i,"linePrefix")}function i(s){if(s===null||Y(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function mh(e,t,n,r,l,i,s,a,u){const c=u||Number.POSITIVE_INFINITY;let f=0;return d;function d(h){return h===60?(e.enter(r),e.enter(l),e.enter(i),e.consume(h),e.exit(i),p):h===null||h===32||h===41||qi(h)?n(h):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),k(h))}function p(h){return h===62?(e.enter(i),e.consume(h),e.exit(i),e.exit(l),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),m(h))}function m(h){return h===62?(e.exit("chunkString"),e.exit(a),p(h)):h===null||h===60||Y(h)?n(h):(e.consume(h),h===92?g:m)}function g(h){return h===60||h===62||h===92?(e.consume(h),m):m(h)}function k(h){return!f&&(h===null||h===41||de(h))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(h)):f<c&&h===40?(e.consume(h),f++,k):h===41?(e.consume(h),f--,k):h===null||h===32||h===40||qi(h)?n(h):(e.consume(h),h===92?A:k)}function A(h){return h===40||h===41||h===92?(e.consume(h),k):k(h)}}function hh(e,t,n,r,l,i){const s=this;let a=0,u;return c;function c(m){return e.enter(r),e.enter(l),e.consume(m),e.exit(l),e.enter(i),f}function f(m){return a>999||m===null||m===91||m===93&&!u||m===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(m):m===93?(e.exit(i),e.enter(l),e.consume(m),e.exit(l),e.exit(r),t):Y(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||Y(m)||a++>999?(e.exit("chunkString"),f(m)):(e.consume(m),u||(u=!re(m)),m===92?p:d)}function p(m){return m===91||m===92||m===93?(e.consume(m),a++,d):d(m)}}function gh(e,t,n,r,l,i){let s;return a;function a(p){return p===34||p===39||p===40?(e.enter(r),e.enter(l),e.consume(p),e.exit(l),s=p===40?41:p,u):n(p)}function u(p){return p===s?(e.enter(l),e.consume(p),e.exit(l),e.exit(r),t):(e.enter(i),c(p))}function c(p){return p===s?(e.exit(i),u(s)):p===null?n(p):Y(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),se(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===s||p===null||Y(p)?(e.exit("chunkString"),c(p)):(e.consume(p),p===92?d:f)}function d(p){return p===s||p===92?(e.consume(p),f):f(p)}}function tl(e,t){let n;return r;function r(l){return Y(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),n=!0,r):re(l)?se(e,r,n?"linePrefix":"lineSuffix")(l):t(l)}}const e1={name:"definition",tokenize:n1},t1={partial:!0,tokenize:r1};function n1(e,t,n){const r=this;let l;return i;function i(m){return e.enter("definition"),s(m)}function s(m){return hh.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return l=Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),u):n(m)}function u(m){return de(m)?tl(e,c)(m):c(m)}function c(m){return mh(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(t1,d,d)(m)}function d(m){return re(m)?se(e,p,"whitespace")(m):p(m)}function p(m){return m===null||Y(m)?(e.exit("definition"),r.parser.defined.push(l),t(m)):n(m)}}function r1(e,t,n){return r;function r(a){return de(a)?tl(e,l)(a):n(a)}function l(a){return gh(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return re(a)?se(e,s,"whitespace")(a):s(a)}function s(a){return a===null||Y(a)?t(a):n(a)}}const l1={name:"hardBreakEscape",tokenize:i1};function i1(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),l}function l(i){return Y(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const s1={name:"headingAtx",resolve:o1,tokenize:a1};function o1(e,t){let n=e.length-2,r=3,l,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(l={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},st(e,r,n-r+1,[["enter",l,t],["enter",i,t],["exit",i,t],["exit",l,t]])),e}function a1(e,t,n){let r=0;return l;function l(f){return e.enter("atxHeading"),i(f)}function i(f){return e.enter("atxHeadingSequence"),s(f)}function s(f){return f===35&&r++<6?(e.consume(f),s):f===null||de(f)?(e.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(e.enter("atxHeadingSequence"),u(f)):f===null||Y(f)?(e.exit("atxHeading"),t(f)):re(f)?se(e,a,"whitespace")(f):(e.enter("atxHeadingText"),c(f))}function u(f){return f===35?(e.consume(f),u):(e.exit("atxHeadingSequence"),a(f))}function c(f){return f===null||f===35||de(f)?(e.exit("atxHeadingText"),a(f)):(e.consume(f),c)}}const u1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Fd=["pre","script","style","textarea"],c1={concrete:!0,name:"htmlFlow",resolveTo:p1,tokenize:m1},d1={partial:!0,tokenize:g1},f1={partial:!0,tokenize:h1};function p1(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function m1(e,t,n){const r=this;let l,i,s,a,u;return c;function c(v){return f(v)}function f(v){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(v),d}function d(v){return v===33?(e.consume(v),p):v===47?(e.consume(v),i=!0,k):v===63?(e.consume(v),l=3,r.interrupt?t:b):He(v)?(e.consume(v),s=String.fromCharCode(v),A):n(v)}function p(v){return v===45?(e.consume(v),l=2,m):v===91?(e.consume(v),l=5,a=0,g):He(v)?(e.consume(v),l=4,r.interrupt?t:b):n(v)}function m(v){return v===45?(e.consume(v),r.interrupt?t:b):n(v)}function g(v){const W="CDATA[";return v===W.charCodeAt(a++)?(e.consume(v),a===W.length?r.interrupt?t:P:g):n(v)}function k(v){return He(v)?(e.consume(v),s=String.fromCharCode(v),A):n(v)}function A(v){if(v===null||v===47||v===62||de(v)){const W=v===47,O=s.toLowerCase();return!W&&!i&&Fd.includes(O)?(l=1,r.interrupt?t(v):P(v)):u1.includes(s.toLowerCase())?(l=6,W?(e.consume(v),h):r.interrupt?t(v):P(v)):(l=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(v):i?x(v):y(v))}return v===45||Oe(v)?(e.consume(v),s+=String.fromCharCode(v),A):n(v)}function h(v){return v===62?(e.consume(v),r.interrupt?t:P):n(v)}function x(v){return re(v)?(e.consume(v),x):j(v)}function y(v){return v===47?(e.consume(v),j):v===58||v===95||He(v)?(e.consume(v),E):re(v)?(e.consume(v),y):j(v)}function E(v){return v===45||v===46||v===58||v===95||Oe(v)?(e.consume(v),E):N(v)}function N(v){return v===61?(e.consume(v),S):re(v)?(e.consume(v),N):y(v)}function S(v){return v===null||v===60||v===61||v===62||v===96?n(v):v===34||v===39?(e.consume(v),u=v,w):re(v)?(e.consume(v),S):D(v)}function w(v){return v===u?(e.consume(v),u=null,H):v===null||Y(v)?n(v):(e.consume(v),w)}function D(v){return v===null||v===34||v===39||v===47||v===60||v===61||v===62||v===96||de(v)?N(v):(e.consume(v),D)}function H(v){return v===47||v===62||re(v)?y(v):n(v)}function j(v){return v===62?(e.consume(v),C):n(v)}function C(v){return v===null||Y(v)?P(v):re(v)?(e.consume(v),C):n(v)}function P(v){return v===45&&l===2?(e.consume(v),q):v===60&&l===1?(e.consume(v),Q):v===62&&l===4?(e.consume(v),R):v===63&&l===3?(e.consume(v),b):v===93&&l===5?(e.consume(v),L):Y(v)&&(l===6||l===7)?(e.exit("htmlFlowData"),e.check(d1,_,$)(v)):v===null||Y(v)?(e.exit("htmlFlowData"),$(v)):(e.consume(v),P)}function $(v){return e.check(f1,B,_)(v)}function B(v){return e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),I}function I(v){return v===null||Y(v)?$(v):(e.enter("htmlFlowData"),P(v))}function q(v){return v===45?(e.consume(v),b):P(v)}function Q(v){return v===47?(e.consume(v),s="",z):P(v)}function z(v){if(v===62){const W=s.toLowerCase();return Fd.includes(W)?(e.consume(v),R):P(v)}return He(v)&&s.length<8?(e.consume(v),s+=String.fromCharCode(v),z):P(v)}function L(v){return v===93?(e.consume(v),b):P(v)}function b(v){return v===62?(e.consume(v),R):v===45&&l===2?(e.consume(v),b):P(v)}function R(v){return v===null||Y(v)?(e.exit("htmlFlowData"),_(v)):(e.consume(v),R)}function _(v){return e.exit("htmlFlow"),t(v)}}function h1(e,t,n){const r=this;return l;function l(s){return Y(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):n(s)}function i(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function g1(e,t,n){return r;function r(l){return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),e.attempt(Il,t,n)}}const x1={name:"htmlText",tokenize:y1};function y1(e,t,n){const r=this;let l,i,s;return a;function a(b){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(b),u}function u(b){return b===33?(e.consume(b),c):b===47?(e.consume(b),N):b===63?(e.consume(b),y):He(b)?(e.consume(b),D):n(b)}function c(b){return b===45?(e.consume(b),f):b===91?(e.consume(b),i=0,g):He(b)?(e.consume(b),x):n(b)}function f(b){return b===45?(e.consume(b),m):n(b)}function d(b){return b===null?n(b):b===45?(e.consume(b),p):Y(b)?(s=d,Q(b)):(e.consume(b),d)}function p(b){return b===45?(e.consume(b),m):d(b)}function m(b){return b===62?q(b):b===45?p(b):d(b)}function g(b){const R="CDATA[";return b===R.charCodeAt(i++)?(e.consume(b),i===R.length?k:g):n(b)}function k(b){return b===null?n(b):b===93?(e.consume(b),A):Y(b)?(s=k,Q(b)):(e.consume(b),k)}function A(b){return b===93?(e.consume(b),h):k(b)}function h(b){return b===62?q(b):b===93?(e.consume(b),h):k(b)}function x(b){return b===null||b===62?q(b):Y(b)?(s=x,Q(b)):(e.consume(b),x)}function y(b){return b===null?n(b):b===63?(e.consume(b),E):Y(b)?(s=y,Q(b)):(e.consume(b),y)}function E(b){return b===62?q(b):y(b)}function N(b){return He(b)?(e.consume(b),S):n(b)}function S(b){return b===45||Oe(b)?(e.consume(b),S):w(b)}function w(b){return Y(b)?(s=w,Q(b)):re(b)?(e.consume(b),w):q(b)}function D(b){return b===45||Oe(b)?(e.consume(b),D):b===47||b===62||de(b)?H(b):n(b)}function H(b){return b===47?(e.consume(b),q):b===58||b===95||He(b)?(e.consume(b),j):Y(b)?(s=H,Q(b)):re(b)?(e.consume(b),H):q(b)}function j(b){return b===45||b===46||b===58||b===95||Oe(b)?(e.consume(b),j):C(b)}function C(b){return b===61?(e.consume(b),P):Y(b)?(s=C,Q(b)):re(b)?(e.consume(b),C):H(b)}function P(b){return b===null||b===60||b===61||b===62||b===96?n(b):b===34||b===39?(e.consume(b),l=b,$):Y(b)?(s=P,Q(b)):re(b)?(e.consume(b),P):(e.consume(b),B)}function $(b){return b===l?(e.consume(b),l=void 0,I):b===null?n(b):Y(b)?(s=$,Q(b)):(e.consume(b),$)}function B(b){return b===null||b===34||b===39||b===60||b===61||b===96?n(b):b===47||b===62||de(b)?H(b):(e.consume(b),B)}function I(b){return b===47||b===62||de(b)?H(b):n(b)}function q(b){return b===62?(e.consume(b),e.exit("htmlTextData"),e.exit("htmlText"),t):n(b)}function Q(b){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),z}function z(b){return re(b)?se(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):L(b)}function L(b){return e.enter("htmlTextData"),s(b)}}const _u={name:"labelEnd",resolveAll:w1,resolveTo:j1,tokenize:S1},v1={tokenize:N1},b1={tokenize:C1},k1={tokenize:P1};function w1(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const l=r.type==="labelImage"?4:2;r.type="data",t+=l}}return e.length!==n.length&&st(e,0,e.length,n),e}function j1(e,t){let n=e.length,r=0,l,i,s,a;for(;n--;)if(l=e[n][1],i){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;e[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(i=n,l.type!=="labelLink")){r=2;break}}else l.type==="labelEnd"&&(s=n);const u={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},f={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",u,t],["enter",c,t]],a=pt(a,e.slice(i+1,i+r+3)),a=pt(a,[["enter",f,t]]),a=pt(a,vs(t.parser.constructs.insideSpan.null,e.slice(i+r+4,s-3),t)),a=pt(a,[["exit",f,t],e[s-2],e[s-1],["exit",c,t]]),a=pt(a,e.slice(s+1)),a=pt(a,[["exit",u,t]]),st(e,i,e.length,a),e}function S1(e,t,n){const r=this;let l=r.events.length,i,s;for(;l--;)if((r.events[l][1].type==="labelImage"||r.events[l][1].type==="labelLink")&&!r.events[l][1]._balanced){i=r.events[l][1];break}return a;function a(p){return i?i._inactive?d(p):(s=r.parser.defined.includes(Et(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),u):n(p)}function u(p){return p===40?e.attempt(v1,f,s?f:d)(p):p===91?e.attempt(b1,f,s?c:d)(p):s?f(p):d(p)}function c(p){return e.attempt(k1,f,d)(p)}function f(p){return t(p)}function d(p){return i._balanced=!0,n(p)}}function N1(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),l}function l(d){return de(d)?tl(e,i)(d):i(d)}function i(d){return d===41?f(d):mh(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return de(d)?tl(e,u)(d):f(d)}function a(d){return n(d)}function u(d){return d===34||d===39||d===40?gh(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function c(d){return de(d)?tl(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function C1(e,t,n){const r=this;return l;function l(a){return hh.call(r,e,i,s,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Et(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function P1(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),l}function l(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const E1={name:"labelStartImage",resolveAll:_u.resolveAll,tokenize:A1};function A1(e,t,n){const r=this;return l;function l(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),i}function i(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const T1={name:"labelStartLink",resolveAll:_u.resolveAll,tokenize:D1};function D1(e,t,n){const r=this;return l;function l(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const no={name:"lineEnding",tokenize:I1};function I1(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),se(e,t,"linePrefix")}}const mi={name:"thematicBreak",tokenize:L1};function L1(e,t,n){let r=0,l;return i;function i(c){return e.enter("thematicBreak"),s(c)}function s(c){return l=c,a(c)}function a(c){return c===l?(e.enter("thematicBreakSequence"),u(c)):r>=3&&(c===null||Y(c))?(e.exit("thematicBreak"),t(c)):n(c)}function u(c){return c===l?(e.consume(c),r++,u):(e.exit("thematicBreakSequence"),re(c)?se(e,a,"whitespace")(c):a(c))}}const Ve={continuation:{tokenize:_1},exit:O1,name:"list",tokenize:z1},M1={partial:!0,tokenize:$1},R1={partial:!0,tokenize:F1};function z1(e,t,n){const r=this,l=r.events[r.events.length-1];let i=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,s=0;return a;function a(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:ya(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(mi,n,c)(m):c(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(m)}return n(m)}function u(m){return ya(m)&&++s<10?(e.consume(m),u):(!r.interrupt||s<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),c(m)):n(m)}function c(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Il,r.interrupt?n:f,e.attempt(M1,p,d))}function f(m){return r.containerState.initialBlankLine=!0,i++,p(m)}function d(m){return re(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function _1(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Il,l,i);function l(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,se(e,t,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!re(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(R1,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,se(e,e.attempt(Ve,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function F1(e,t,n){const r=this;return se(e,l,"listItemIndent",r.containerState.size+1);function l(i){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(i):n(i)}}function O1(e){e.exit(this.containerState.type)}function $1(e,t,n){const r=this;return se(e,l,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(i){const s=r.events[r.events.length-1];return!re(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Od={name:"setextUnderline",resolveTo:B1,tokenize:W1};function B1(e,t){let n=e.length,r,l,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(l=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const s={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[l][1].type="setextHeadingText",i?(e.splice(l,0,["enter",s,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=s,e.push(["exit",s,t]),e}function W1(e,t,n){const r=this;let l;return i;function i(c){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),l=c,s(c)):n(c)}function s(c){return e.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===l?(e.consume(c),a):(e.exit("setextHeadingLineSequence"),re(c)?se(e,u,"lineSuffix")(c):u(c))}function u(c){return c===null||Y(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const H1={tokenize:q1};function q1(e){const t=this,n=e.attempt(Il,r,e.attempt(this.parser.constructs.flowInitial,l,se(e,e.attempt(this.parser.constructs.flow,l,e.attempt(Gb,l)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function l(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const U1={resolveAll:yh()},X1=xh("string"),V1=xh("text");function xh(e){return{resolveAll:yh(e==="text"?Q1:void 0),tokenize:t};function t(n){const r=this,l=this.parser.constructs[e],i=n.attempt(l,s,a);return s;function s(f){return c(f)?i(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),u}function u(f){return c(f)?(n.exit("data"),i(f)):(n.consume(f),u)}function c(f){if(f===null)return!0;const d=l[f];let p=-1;if(d)for(;++p<d.length;){const m=d[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function yh(e){return t;function t(n,r){let l=-1,i;for(;++l<=n.length;)i===void 0?n[l]&&n[l][1].type==="data"&&(i=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==i+2&&(n[i][1].end=n[l-1][1].end,n.splice(i+2,l-i-2),l=i+2),i=void 0);return e?e(n,r):n}}function Q1(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],l=t.sliceStream(r);let i=l.length,s=-1,a=0,u;for(;i--;){const c=l[i];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)u=!0,a++;else if(c!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const c={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:r.start._bufferIndex+s,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(e.splice(n,0,["enter",c,t],["exit",c,t]),n+=2)}n++}return e}const G1={42:Ve,43:Ve,45:Ve,48:Ve,49:Ve,50:Ve,51:Ve,52:Ve,53:Ve,54:Ve,55:Ve,56:Ve,57:Ve,62:ch},K1={91:e1},Y1={[-2]:to,[-1]:to,32:to},J1={35:s1,42:mi,45:[Od,mi],60:c1,61:Od,95:mi,96:_d,126:_d},Z1={38:fh,92:dh},ek={[-5]:no,[-4]:no,[-3]:no,33:E1,38:fh,42:va,60:[Tb,x1],91:T1,92:[l1,dh],93:_u,95:va,96:Hb},tk={null:[va,U1]},nk={null:[42,95]},rk={null:[]},lk=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nk,contentInitial:K1,disable:rk,document:G1,flow:J1,flowInitial:Y1,insideSpan:tk,string:Z1,text:ek},Symbol.toStringTag,{value:"Module"}));function ik(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},i=[];let s=[],a=[];const u={attempt:w(N),check:w(S),consume:x,enter:y,exit:E,interrupt:w(S,{interrupt:!0})},c={code:null,containerState:{},defineSkip:k,events:[],now:g,parser:e,previous:null,sliceSerialize:p,sliceStream:m,write:d};let f=t.tokenize.call(c,u);return t.resolveAll&&i.push(t),c;function d(C){return s=pt(s,C),A(),s[s.length-1]!==null?[]:(D(t,0),c.events=vs(i,c.events,c),c.events)}function p(C,P){return ok(m(C),P)}function m(C){return sk(s,C)}function g(){const{_bufferIndex:C,_index:P,line:$,column:B,offset:I}=r;return{_bufferIndex:C,_index:P,line:$,column:B,offset:I}}function k(C){l[C.line]=C.column,j()}function A(){let C;for(;r._index<s.length;){const P=s[r._index];if(typeof P=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<P.length;)h(P.charCodeAt(r._bufferIndex));else h(P)}}function h(C){f=f(C)}function x(C){Y(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,j()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C}function y(C,P){const $=P||{};return $.type=C,$.start=g(),c.events.push(["enter",$,c]),a.push($),$}function E(C){const P=a.pop();return P.end=g(),c.events.push(["exit",P,c]),P}function N(C,P){D(C,P.from)}function S(C,P){P.restore()}function w(C,P){return $;function $(B,I,q){let Q,z,L,b;return Array.isArray(B)?_(B):"tokenize"in B?_([B]):R(B);function R(M){return ee;function ee(te){const he=te!==null&&M[te],fe=te!==null&&M.null,ye=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return _(ye)(te)}}function _(M){return Q=M,z=0,M.length===0?q:v(M[z])}function v(M){return ee;function ee(te){return b=H(),L=M,M.partial||(c.currentConstruct=M),M.name&&c.parser.constructs.disable.null.includes(M.name)?O():M.tokenize.call(P?Object.assign(Object.create(c),P):c,u,W,O)(te)}}function W(M){return C(L,b),I}function O(M){return b.restore(),++z<Q.length?v(Q[z]):q}}}function D(C,P){C.resolveAll&&!i.includes(C)&&i.push(C),C.resolve&&st(c.events,P,c.events.length-P,C.resolve(c.events.slice(P),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c))}function H(){const C=g(),P=c.previous,$=c.currentConstruct,B=c.events.length,I=Array.from(a);return{from:B,restore:q};function q(){r=C,c.previous=P,c.currentConstruct=$,c.events.length=B,a=I,j()}}function j(){r.line in l&&r.column<2&&(r.column=l[r.line],r.offset+=l[r.line]-1)}}function sk(e,t){const n=t.start._index,r=t.start._bufferIndex,l=t.end._index,i=t.end._bufferIndex;let s;if(n===l)s=[e[n].slice(r,i)];else{if(s=e.slice(n,l),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}i>0&&s.push(e[l].slice(0,i))}return s}function ok(e,t){let n=-1;const r=[];let l;for(;++n<e.length;){const i=e[n];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&l)continue;s=" ";break}default:s=String.fromCharCode(i)}l=i===-2,r.push(s)}return r.join("")}function ak(e){const r={constructs:ah([lk,...(e||{}).extensions||[]]),content:l(jb),defined:[],document:l(Nb),flow:l(H1),lazy:{},string:l(X1),text:l(V1)};return r;function l(i){return s;function s(a){return ik(r,i,a)}}}function uk(e){for(;!ph(e););return e}const $d=/[\0\t\n\r]/g;function ck(){let e=1,t="",n=!0,r;return l;function l(i,s,a){const u=[];let c,f,d,p,m;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),d=0,t="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if($d.lastIndex=d,c=$d.exec(i),p=c&&c.index!==void 0?c.index:i.length,m=i.charCodeAt(p),!c){t=i.slice(d);break}if(m===10&&d===p&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<p&&(u.push(i.slice(d,p)),e+=p-d),m){case 0:{u.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,u.push(-2);e++<f;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=p+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const dk=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fk(e){return e.replace(dk,pk)}function pk(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),i=l===120||l===88;return uh(n.slice(i?2:1),i?16:10)}return zu(n)||e}const vh={}.hasOwnProperty;function mk(e,t,n){return typeof t!="string"&&(n=t,t=void 0),hk(n)(uk(ak(n).document().write(ck()(e,t,!0))))}function hk(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Yu),autolinkProtocol:H,autolinkEmail:H,atxHeading:i(ne),blockQuote:i(fe),characterEscape:H,characterReference:H,codeFenced:i(ye),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(ye,s),codeText:i(yt,s),codeTextData:H,data:H,codeFlowValue:H,definition:i(G),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i(Yt),hardBreakEscape:i(ct),hardBreakTrailing:i(ct),htmlFlow:i(Ku,s),htmlFlowData:H,htmlText:i(Ku,s),htmlTextData:H,image:i(sg),label:s,link:i(Yu),listItem:i(og),listItemValue:p,listOrdered:i(Ju,d),listUnordered:i(Ju),paragraph:i(ag),reference:v,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(ne),strong:i(ug),thematicBreak:i(dg)},exit:{atxHeading:u(),atxHeadingSequence:N,autolink:u(),autolinkEmail:he,autolinkProtocol:te,blockQuote:u(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:O,characterReferenceMarkerNumeric:O,characterReferenceValue:M,characterReference:ee,codeFenced:u(A),codeFencedFence:k,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:j,codeIndented:u(h),codeText:u(I),codeTextData:j,data:j,definition:u(),definitionDestinationString:E,definitionLabelString:x,definitionTitleString:y,emphasis:u(),hardBreakEscape:u(P),hardBreakTrailing:u(P),htmlFlow:u($),htmlFlowData:j,htmlText:u(B),htmlTextData:j,image:u(Q),label:L,labelText:z,lineEnding:C,link:u(q),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:W,resourceDestinationString:b,resourceTitleString:R,resource:_,setextHeading:u(D),setextHeadingLineSequence:w,setextHeadingText:S,strong:u(),thematicBreak:u()}};bh(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(F){let V={type:"root",children:[]};const J={stack:[V],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:f,data:n},ie=[];let ce=-1;for(;++ce<F.length;)if(F[ce][1].type==="listOrdered"||F[ce][1].type==="listUnordered")if(F[ce][0]==="enter")ie.push(ce);else{const vt=ie.pop();ce=l(F,vt,ce)}for(ce=-1;++ce<F.length;){const vt=t[F[ce][0]];vh.call(vt,F[ce][1].type)&&vt[F[ce][1].type].call(Object.assign({sliceSerialize:F[ce][2].sliceSerialize},J),F[ce][1])}if(J.tokenStack.length>0){const vt=J.tokenStack[J.tokenStack.length-1];(vt[1]||Bd).call(J,void 0,vt[0])}for(V.position={start:Zt(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:Zt(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},ce=-1;++ce<t.transforms.length;)V=t.transforms[ce](V)||V;return V}function l(F,V,J){let ie=V-1,ce=-1,vt=!1,kn,_t,Cr,Pr;for(;++ie<=J;){const tt=F[ie];switch(tt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tt[0]==="enter"?ce++:ce--,Pr=void 0;break}case"lineEndingBlank":{tt[0]==="enter"&&(kn&&!Pr&&!ce&&!Cr&&(Cr=ie),Pr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pr=void 0}if(!ce&&tt[0]==="enter"&&tt[1].type==="listItemPrefix"||ce===-1&&tt[0]==="exit"&&(tt[1].type==="listUnordered"||tt[1].type==="listOrdered")){if(kn){let Wn=ie;for(_t=void 0;Wn--;){const Ft=F[Wn];if(Ft[1].type==="lineEnding"||Ft[1].type==="lineEndingBlank"){if(Ft[0]==="exit")continue;_t&&(F[_t][1].type="lineEndingBlank",vt=!0),Ft[1].type="lineEnding",_t=Wn}else if(!(Ft[1].type==="linePrefix"||Ft[1].type==="blockQuotePrefix"||Ft[1].type==="blockQuotePrefixWhitespace"||Ft[1].type==="blockQuoteMarker"||Ft[1].type==="listItemIndent"))break}Cr&&(!_t||Cr<_t)&&(kn._spread=!0),kn.end=Object.assign({},_t?F[_t][1].start:tt[1].end),F.splice(_t||ie,0,["exit",kn,tt[2]]),ie++,J++}if(tt[1].type==="listItemPrefix"){const Wn={type:"listItem",_spread:!1,start:Object.assign({},tt[1].start),end:void 0};kn=Wn,F.splice(ie,0,["enter",Wn,tt[2]]),ie++,J++,Cr=void 0,Pr=!0}}}return F[V][1]._spread=vt,J}function i(F,V){return J;function J(ie){a.call(this,F(ie),ie),V&&V.call(this,ie)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(F,V,J){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([V,J||void 0]),F.position={start:Zt(V.start),end:void 0}}function u(F){return V;function V(J){F&&F.call(this,J),c.call(this,J)}}function c(F,V){const J=this.stack.pop(),ie=this.tokenStack.pop();if(ie)ie[0].type!==F.type&&(V?V.call(this,F,ie[0]):(ie[1]||Bd).call(this,F,ie[0]));else throw new Error("Cannot close `"+F.type+"` ("+el({start:F.start,end:F.end})+"): its not open");J.position.end=Zt(F.end)}function f(){return Ru(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(F){if(this.data.expectingFirstListItemValue){const V=this.stack[this.stack.length-2];V.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function m(){const F=this.resume(),V=this.stack[this.stack.length-1];V.lang=F}function g(){const F=this.resume(),V=this.stack[this.stack.length-1];V.meta=F}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const F=this.resume(),V=this.stack[this.stack.length-1];V.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function h(){const F=this.resume(),V=this.stack[this.stack.length-1];V.value=F.replace(/(\r?\n|\r)$/g,"")}function x(F){const V=this.resume(),J=this.stack[this.stack.length-1];J.label=V,J.identifier=Et(this.sliceSerialize(F)).toLowerCase()}function y(){const F=this.resume(),V=this.stack[this.stack.length-1];V.title=F}function E(){const F=this.resume(),V=this.stack[this.stack.length-1];V.url=F}function N(F){const V=this.stack[this.stack.length-1];if(!V.depth){const J=this.sliceSerialize(F).length;V.depth=J}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function w(F){const V=this.stack[this.stack.length-1];V.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function H(F){const J=this.stack[this.stack.length-1].children;let ie=J[J.length-1];(!ie||ie.type!=="text")&&(ie=cg(),ie.position={start:Zt(F.start),end:void 0},J.push(ie)),this.stack.push(ie)}function j(F){const V=this.stack.pop();V.value+=this.sliceSerialize(F),V.position.end=Zt(F.end)}function C(F){const V=this.stack[this.stack.length-1];if(this.data.atHardBreak){const J=V.children[V.children.length-1];J.position.end=Zt(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(V.type)&&(H.call(this,F),j.call(this,F))}function P(){this.data.atHardBreak=!0}function $(){const F=this.resume(),V=this.stack[this.stack.length-1];V.value=F}function B(){const F=this.resume(),V=this.stack[this.stack.length-1];V.value=F}function I(){const F=this.resume(),V=this.stack[this.stack.length-1];V.value=F}function q(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=V,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function Q(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const V=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=V,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function z(F){const V=this.sliceSerialize(F),J=this.stack[this.stack.length-2];J.label=fk(V),J.identifier=Et(V).toLowerCase()}function L(){const F=this.stack[this.stack.length-1],V=this.resume(),J=this.stack[this.stack.length-1];if(this.data.inReference=!0,J.type==="link"){const ie=F.children;J.children=ie}else J.alt=V}function b(){const F=this.resume(),V=this.stack[this.stack.length-1];V.url=F}function R(){const F=this.resume(),V=this.stack[this.stack.length-1];V.title=F}function _(){this.data.inReference=void 0}function v(){this.data.referenceType="collapsed"}function W(F){const V=this.resume(),J=this.stack[this.stack.length-1];J.label=V,J.identifier=Et(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function O(F){this.data.characterReferenceType=F.type}function M(F){const V=this.sliceSerialize(F),J=this.data.characterReferenceType;let ie;J?(ie=uh(V,J==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ie=zu(V);const ce=this.stack[this.stack.length-1];ce.value+=ie}function ee(F){const V=this.stack.pop();V.position.end=Zt(F.end)}function te(F){j.call(this,F);const V=this.stack[this.stack.length-1];V.url=this.sliceSerialize(F)}function he(F){j.call(this,F);const V=this.stack[this.stack.length-1];V.url="mailto:"+this.sliceSerialize(F)}function fe(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function yt(){return{type:"inlineCode",value:""}}function G(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Yt(){return{type:"emphasis",children:[]}}function ne(){return{type:"heading",depth:0,children:[]}}function ct(){return{type:"break"}}function Ku(){return{type:"html",value:""}}function sg(){return{type:"image",title:null,url:"",alt:null}}function Yu(){return{type:"link",title:null,url:"",children:[]}}function Ju(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function og(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function ag(){return{type:"paragraph",children:[]}}function ug(){return{type:"strong",children:[]}}function cg(){return{type:"text",value:""}}function dg(){return{type:"thematicBreak"}}}function Zt(e){return{line:e.line,column:e.column,offset:e.offset}}function bh(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?bh(e,r):gk(e,r)}}function gk(e,t){let n;for(n in t)if(vh.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Bd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+el({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+el({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+el({start:t.start,end:t.end})+") is still open")}function xk(e){const t=this;t.parser=n;function n(r){return mk(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function yk(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function vk(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function bk(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let l={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function kk(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wk(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jk(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),l=Nr(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=i+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const c={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,c),e.applyData(t,c)}function Sk(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Nk(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function kh(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const l=e.all(t),i=l[0];i&&i.type==="text"?i.value="["+i.value:l.unshift({type:"text",value:"["});const s=l[l.length-1];return s&&s.type==="text"?s.value+=r:l.push({type:"text",value:r}),l}function Ck(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return kh(e,t);const l={src:Nr(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(l.title=r.title);const i={type:"element",tagName:"img",properties:l,children:[]};return e.patch(t,i),e.applyData(t,i)}function Pk(e,t){const n={src:Nr(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Ek(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Ak(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return kh(e,t);const l={href:Nr(r.url||"")};r.title!==null&&r.title!==void 0&&(l.title=r.title);const i={type:"element",tagName:"a",properties:l,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Tk(e,t){const n={href:Nr(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Dk(e,t,n){const r=e.all(t),l=n?Ik(n):wh(t),i={},s=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const f=r[a];(l||a!==0||f.type!=="element"||f.tagName!=="p")&&s.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!l?s.push(...f.children):s.push(f)}const u=r[r.length-1];u&&(l||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:s};return e.patch(t,c),e.applyData(t,c)}function Ik(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=wh(n[r])}return t}function wh(e){const t=e.spread;return t??e.children.length>1}function Lk(e,t){const n={},r=e.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++l<r.length;){const s=r[l];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function Mk(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rk(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function zk(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _k(e,t){const n=e.all(t),r=n.shift(),l=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),l.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Du(t.children[1]),u=th(t.children[t.children.length-1]);a&&u&&(s.position={start:a,end:u}),l.push(s)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,i),e.applyData(t,i)}function Fk(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let u=-1;const c=[];for(;++u<a;){const d=t.children[u],p={},m=s?s[u]:void 0;m&&(p.align=m);let g={type:"element",tagName:i,properties:p,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),c.push(g)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,f),e.applyData(t,f)}function Ok(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Wd=9,Hd=32;function $k(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),l=0;const i=[];for(;r;)i.push(qd(t.slice(l,r.index),l>0,!0),r[0]),l=r.index+r[0].length,r=n.exec(t);return i.push(qd(t.slice(l),l>0,!1)),i.join("")}function qd(e,t,n){let r=0,l=e.length;if(t){let i=e.codePointAt(r);for(;i===Wd||i===Hd;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(l-1);for(;i===Wd||i===Hd;)l--,i=e.codePointAt(l-1)}return l>r?e.slice(r,l):""}function Bk(e,t){const n={type:"text",value:$k(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Wk(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Hk={blockquote:yk,break:vk,code:bk,delete:kk,emphasis:wk,footnoteReference:jk,heading:Sk,html:Nk,imageReference:Ck,image:Pk,inlineCode:Ek,linkReference:Ak,link:Tk,listItem:Dk,list:Lk,paragraph:Mk,root:Rk,strong:zk,table:_k,tableCell:Ok,tableRow:Fk,text:Bk,thematicBreak:Wk,toml:Jl,yaml:Jl,definition:Jl,footnoteDefinition:Jl};function Jl(){}const jh=-1,bs=0,nl=1,Ui=2,Fu=3,Ou=4,$u=5,Bu=6,Sh=7,Nh=8,Ud=typeof self=="object"?self:globalThis,qk=(e,t)=>{const n=(l,i)=>(e.set(i,l),l),r=l=>{if(e.has(l))return e.get(l);const[i,s]=t[l];switch(i){case bs:case jh:return n(s,l);case nl:{const a=n([],l);for(const u of s)a.push(r(u));return a}case Ui:{const a=n({},l);for(const[u,c]of s)a[r(u)]=r(c);return a}case Fu:return n(new Date(s),l);case Ou:{const{source:a,flags:u}=s;return n(new RegExp(a,u),l)}case $u:{const a=n(new Map,l);for(const[u,c]of s)a.set(r(u),r(c));return a}case Bu:{const a=n(new Set,l);for(const u of s)a.add(r(u));return a}case Sh:{const{name:a,message:u}=s;return n(new Ud[a](u),l)}case Nh:return n(BigInt(s),l);case"BigInt":return n(Object(BigInt(s)),l);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new Ud[i](s),l)};return r},Xd=e=>qk(new Map,e)(0),qn="",{toString:Uk}={},{keys:Xk}=Object,$r=e=>{const t=typeof e;if(t!=="object"||!e)return[bs,t];const n=Uk.call(e).slice(8,-1);switch(n){case"Array":return[nl,qn];case"Object":return[Ui,qn];case"Date":return[Fu,qn];case"RegExp":return[Ou,qn];case"Map":return[$u,qn];case"Set":return[Bu,qn];case"DataView":return[nl,n]}return n.includes("Array")?[nl,n]:n.includes("Error")?[Sh,n]:[Ui,n]},Zl=([e,t])=>e===bs&&(t==="function"||t==="symbol"),Vk=(e,t,n,r)=>{const l=(s,a)=>{const u=r.push(s)-1;return n.set(a,u),u},i=s=>{if(n.has(s))return n.get(s);let[a,u]=$r(s);switch(a){case bs:{let f=s;switch(u){case"bigint":a=Nh,f=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);f=null;break;case"undefined":return l([jh],s)}return l([a,f],s)}case nl:{if(u){let p=s;return u==="DataView"?p=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(p=new Uint8Array(s)),l([u,[...p]],s)}const f=[],d=l([a,f],s);for(const p of s)f.push(i(p));return d}case Ui:{if(u)switch(u){case"BigInt":return l([u,s.toString()],s);case"Boolean":case"Number":case"String":return l([u,s.valueOf()],s)}if(t&&"toJSON"in s)return i(s.toJSON());const f=[],d=l([a,f],s);for(const p of Xk(s))(e||!Zl($r(s[p])))&&f.push([i(p),i(s[p])]);return d}case Fu:return l([a,s.toISOString()],s);case Ou:{const{source:f,flags:d}=s;return l([a,{source:f,flags:d}],s)}case $u:{const f=[],d=l([a,f],s);for(const[p,m]of s)(e||!(Zl($r(p))||Zl($r(m))))&&f.push([i(p),i(m)]);return d}case Bu:{const f=[],d=l([a,f],s);for(const p of s)(e||!Zl($r(p)))&&f.push(i(p));return d}}const{message:c}=s;return l([a,{name:u,message:c}],s)};return i},Vd=(e,{json:t,lossy:n}={})=>{const r=[];return Vk(!(t||n),!!t,new Map,r)(e),r},Xi=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Xd(Vd(e,t)):structuredClone(e):(e,t)=>Xd(Vd(e,t));function Qk(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Gk(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Kk(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Qk,r=e.options.footnoteBackLabel||Gk,l=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[u]);if(!c)continue;const f=e.all(c),d=String(c.identifier).toUpperCase(),p=Nr(d.toLowerCase());let m=0;const g=[],k=e.footnoteCounts.get(d);for(;k!==void 0&&++m<=k;){g.length>0&&g.push({type:"text",value:" "});let x=typeof n=="string"?n:n(u,m);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,m),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const A=f[f.length-1];if(A&&A.type==="element"&&A.tagName==="p"){const x=A.children[A.children.length-1];x&&x.type==="text"?x.value+=" ":A.children.push({type:"text",value:" "}),A.children.push(...g)}else f.push(...g);const h={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(f,!0)};e.patch(c,h),a.push(h)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Xi(s),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ks=function(e){if(e==null)return ew;if(typeof e=="function")return ws(e);if(typeof e=="object")return Array.isArray(e)?Yk(e):Jk(e);if(typeof e=="string")return Zk(e);throw new Error("Expected function, string, or object as test")};function Yk(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ks(e[n]);return ws(r);function r(...l){let i=-1;for(;++i<t.length;)if(t[i].apply(this,l))return!0;return!1}}function Jk(e){const t=e;return ws(n);function n(r){const l=r;let i;for(i in e)if(l[i]!==t[i])return!1;return!0}}function Zk(e){return ws(t);function t(n){return n&&n.type===e}}function ws(e){return t;function t(n,r,l){return!!(tw(n)&&e.call(this,n,typeof r=="number"?r:void 0,l||void 0))}}function ew(){return!0}function tw(e){return e!==null&&typeof e=="object"&&"type"in e}const Ch=[],nw=!0,ba=!1,rw="skip";function Ph(e,t,n,r){let l;typeof t=="function"&&typeof n!="function"?(r=n,n=t):l=t;const i=ks(l),s=r?-1:1;a(e,void 0,[])();function a(u,c,f){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(u.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=Ch,g,k,A;if((!t||i(u,c,f[f.length-1]||void 0))&&(m=lw(n(u,f)),m[0]===ba))return m;if("children"in u&&u.children){const h=u;if(h.children&&m[0]!==rw)for(k=(r?h.children.length:-1)+s,A=f.concat(h);k>-1&&k<h.children.length;){const x=h.children[k];if(g=a(x,k,A)(),g[0]===ba)return g;k=typeof g[1]=="number"?g[1]:k+s}}return m}}}function lw(e){return Array.isArray(e)?e:typeof e=="number"?[nw,e]:e==null?Ch:[e]}function Wu(e,t,n,r){let l,i,s;typeof t=="function"&&typeof n!="function"?(i=void 0,s=t,l=n):(i=t,s=n,l=r),Ph(e,i,a,l);function a(u,c){const f=c[c.length-1],d=f?f.children.indexOf(u):void 0;return s(u,d,f)}}const ka={}.hasOwnProperty,iw={};function sw(e,t){const n=t||iw,r=new Map,l=new Map,i=new Map,s={...Hk,...n.handlers},a={all:c,applyData:aw,definitionById:r,footnoteById:l,footnoteCounts:i,footnoteOrder:[],handlers:s,one:u,options:n,patch:ow,wrap:cw};return Wu(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:l,p=String(f.identifier).toUpperCase();d.has(p)||d.set(p,f)}}),a;function u(f,d){const p=f.type,m=a.handlers[p];if(ka.call(a.handlers,p)&&m)return m(a,f,d);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in f){const{children:k,...A}=f,h=Xi(A);return h.children=a.all(f),h}return Xi(f)}return(a.options.unknownHandler||uw)(a,f,d)}function c(f){const d=[];if("children"in f){const p=f.children;let m=-1;for(;++m<p.length;){const g=a.one(p[m],f);if(g){if(m&&p[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=Qd(g.value)),!Array.isArray(g)&&g.type==="element")){const k=g.children[0];k&&k.type==="text"&&(k.value=Qd(k.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function ow(e,t){e.position&&(t.position=Gv(e))}function aw(e,t){let n=t;if(e&&e.data){const r=e.data.hName,l=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&i&&Object.assign(n.properties,Xi(i)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function uw(e,t){const n=t.data||{},r="value"in t&&!(ka.call(n,"hProperties")||ka.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cw(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Qd(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Gd(e,t){const n=sw(e,t),r=n.one(e,void 0),l=Kk(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return l&&i.children.push({type:"text",value:`
`},l),i}function dw(e,t){return e&&"run"in e?async function(n,r){const l=Gd(n,{file:r,...t});await e.run(l,r)}:function(n,r){return Gd(n,{file:r,...e||t})}}function Kd(e){if(e)throw e}var hi=Object.prototype.hasOwnProperty,Eh=Object.prototype.toString,Yd=Object.defineProperty,Jd=Object.getOwnPropertyDescriptor,Zd=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Eh.call(t)==="[object Array]"},ef=function(t){if(!t||Eh.call(t)!=="[object Object]")return!1;var n=hi.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&hi.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var l;for(l in t);return typeof l>"u"||hi.call(t,l)},tf=function(t,n){Yd&&n.name==="__proto__"?Yd(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},nf=function(t,n){if(n==="__proto__")if(hi.call(t,n)){if(Jd)return Jd(t,n).value}else return;return t[n]},fw=function e(){var t,n,r,l,i,s,a=arguments[0],u=1,c=arguments.length,f=!1;for(typeof a=="boolean"&&(f=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(n in t)r=nf(a,n),l=nf(t,n),a!==l&&(f&&l&&(ef(l)||(i=Zd(l)))?(i?(i=!1,s=r&&Zd(r)?r:[]):s=r&&ef(r)?r:{},tf(a,{name:n,newValue:e(f,s,l)})):typeof l<"u"&&tf(a,{name:n,newValue:l}));return a};const ro=Aa(fw);function wa(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pw(){const e=[],t={run:n,use:r};return t;function n(...l){let i=-1;const s=l.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...l);function a(u,...c){const f=e[++i];let d=-1;if(u){s(u);return}for(;++d<l.length;)(c[d]===null||c[d]===void 0)&&(c[d]=l[d]);l=c,f?mw(f,a)(...c):s(null,...c)}}function r(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return e.push(l),t}}function mw(e,t){let n;return r;function r(...s){const a=e.length>s.length;let u;a&&s.push(l);try{u=e.apply(this,s)}catch(c){const f=c;if(a&&n)throw f;return l(f)}a||(u&&u.then&&typeof u.then=="function"?u.then(i,l):u instanceof Error?l(u):i(u))}function l(s,...a){n||(n=!0,t(s,...a))}function i(s){l(null,s)}}const It={basename:hw,dirname:gw,extname:xw,join:yw,sep:"/"};function hw(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ll(e);let n=0,r=-1,l=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;l--;)if(e.codePointAt(l)===47){if(i){n=l+1;break}}else r<0&&(i=!0,r=l+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;l--;)if(e.codePointAt(l)===47){if(i){n=l+1;break}}else s<0&&(i=!0,s=l+1),a>-1&&(e.codePointAt(l)===t.codePointAt(a--)?a<0&&(r=l):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function gw(e){if(Ll(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function xw(e){Ll(e);let t=e.length,n=-1,r=0,l=-1,i=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?l<0?l=t:i!==1&&(i=1):l>-1&&(i=-1)}return l<0||n<0||i===0||i===1&&l===n-1&&l===r+1?"":e.slice(l,n)}function yw(...e){let t=-1,n;for(;++t<e.length;)Ll(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":vw(n)}function vw(e){Ll(e);const t=e.codePointAt(0)===47;let n=bw(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function bw(e,t){let n="",r=0,l=-1,i=0,s=-1,a,u;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(l===s-1||i===1))if(l!==s-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),l=s,i=0;continue}}else if(n.length>0){n="",r=0,l=s,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(l+1,s):n=e.slice(l+1,s),r=s-l-1;l=s,i=0}else a===46&&i>-1?i++:i=-1}return n}function Ll(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kw={cwd:ww};function ww(){return"/"}function ja(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function jw(e){if(typeof e=="string")e=new URL(e);else if(!ja(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Sw(e)}function Sw(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const lo=["history","path","basename","stem","extname","dirname"];class Ah{constructor(t){let n;t?ja(t)?n={path:t}:typeof t=="string"||Nw(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":kw.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<lo.length;){const i=lo[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let l;for(l in n)lo.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?It.basename(this.path):void 0}set basename(t){so(t,"basename"),io(t,"basename"),this.path=It.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?It.dirname(this.path):void 0}set dirname(t){rf(this.basename,"dirname"),this.path=It.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?It.extname(this.path):void 0}set extname(t){if(io(t,"extname"),rf(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=It.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ja(t)&&(t=jw(t)),so(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?It.basename(this.path,this.extname):void 0}set stem(t){so(t,"stem"),io(t,"stem"),this.path=It.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const l=this.message(t,n,r);throw l.fatal=!0,l}info(t,n,r){const l=this.message(t,n,r);return l.fatal=void 0,l}message(t,n,r){const l=new Be(t,n,r);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function io(e,t){if(e&&e.includes(It.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+It.sep+"`")}function so(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rf(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Nw(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Cw=function(e){const r=this.constructor.prototype,l=r[e],i=function(){return l.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},Pw={}.hasOwnProperty;class Hu extends Cw{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pw()}copy(){const t=new Hu;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ro(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(uo("data",this.frozen),this.namespace[t]=n,this):Pw.call(this.namespace,t)&&this.namespace[t]||void 0:t?(uo("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const l=n.call(t,...r);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=ei(t),r=this.parser||this.Parser;return oo("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),oo("process",this.parser||this.Parser),ao("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(i,s){const a=ei(t),u=r.parse(a);r.run(u,a,function(f,d,p){if(f||!d||!p)return c(f);const m=d,g=r.stringify(m,p);Tw(g)?p.value=g:p.result=g,c(f,p)});function c(f,d){f||!d?s(f):i?i(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),oo("processSync",this.parser||this.Parser),ao("processSync",this.compiler||this.Compiler),this.process(t,l),sf("processSync","process",n),r;function l(i,s){n=!0,Kd(i),r=s}}run(t,n,r){lf(t),this.freeze();const l=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(s,a){const u=ei(n);l.run(t,u,c);function c(f,d,p){const m=d||t;f?a(f):s?s(m):r(void 0,m,p)}}}runSync(t,n){let r=!1,l;return this.run(t,n,i),sf("runSync","run",r),l;function i(s,a){Kd(s),l=a,r=!0}}stringify(t,n){this.freeze();const r=ei(n),l=this.compiler||this.Compiler;return ao("stringify",l),lf(t),l(t,r)}use(t,...n){const r=this.attachers,l=this.namespace;if(uo("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(c){if(typeof c=="function")u(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[f,...d]=c;u(f,d)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(l.settings=ro(!0,l.settings,c.settings))}function a(c){let f=-1;if(c!=null)if(Array.isArray(c))for(;++f<c.length;){const d=c[f];i(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function u(c,f){let d=-1,p=-1;for(;++d<r.length;)if(r[d][0]===c){p=d;break}if(p===-1)r.push([c,...f]);else if(f.length>0){let[m,...g]=f;const k=r[p][1];wa(k)&&wa(m)&&(m=ro(!0,k,m)),r[p]=[c,m,...g]}}}}const Ew=new Hu().freeze();function oo(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ao(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function uo(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lf(e){if(!wa(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function sf(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ei(e){return Aw(e)?e:new Ah(e)}function Aw(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Tw(e){return typeof e=="string"||Dw(e)}function Dw(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Iw="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",of=[],af={allowDangerousHtml:!0},Lw=/^(https?|ircs?|mailto|xmpp)$/i,Mw=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uf(e){const t=Rw(e),n=zw(e);return _w(t.runSync(t.parse(n),n),e)}function Rw(e){const t=e.rehypePlugins||of,n=e.remarkPlugins||of,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...af}:af;return Ew().use(xk).use(n).use(dw,r).use(t)}function zw(e){const t=e.children||"",n=new Ah;return typeof t=="string"&&(n.value=t),n}function _w(e,t){const n=t.allowedElements,r=t.allowElement,l=t.components,i=t.disallowedElements,s=t.skipHtml,a=t.unwrapDisallowed,u=t.urlTransform||Fw;for(const f of Mw)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+Iw+f.id,void 0);return Wu(e,c),eb(e,{Fragment:o.Fragment,components:l,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function c(f,d,p){if(f.type==="raw"&&p&&typeof d=="number")return s?p.children.splice(d,1):p.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in eo)if(Object.hasOwn(eo,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],k=eo[m];(k===null||k.includes(f.tagName))&&(f.properties[m]=u(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):i?i.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,p)),m&&p&&typeof d=="number")return a&&f.children?p.children.splice(d,1,...f.children):p.children.splice(d,1),d}}}function Fw(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),l=e.indexOf("/");return t===-1||l!==-1&&t>l||n!==-1&&t>n||r!==-1&&t>r||Lw.test(e.slice(0,t))?e:""}function cf(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,l=n.indexOf(t);for(;l!==-1;)r++,l=n.indexOf(t,l+t.length);return r}function Ow(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function $w(e,t,n){const l=ks((n||{}).ignore||[]),i=Bw(t);let s=-1;for(;++s<i.length;)Ph(e,"text",a);function a(c,f){let d=-1,p;for(;++d<f.length;){const m=f[d],g=p?p.children:void 0;if(l(m,g?g.indexOf(m):void 0,p))return;p=m}if(p)return u(c,f)}function u(c,f){const d=f[f.length-1],p=i[s][0],m=i[s][1];let g=0;const A=d.children.indexOf(c);let h=!1,x=[];p.lastIndex=0;let y=p.exec(c.value);for(;y;){const E=y.index,N={index:y.index,input:y.input,stack:[...f,c]};let S=m(...y,N);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?p.lastIndex=E+1:(g!==E&&x.push({type:"text",value:c.value.slice(g,E)}),Array.isArray(S)?x.push(...S):S&&x.push(S),g=E+y[0].length,h=!0),!p.global)break;y=p.exec(c.value)}return h?(g<c.value.length&&x.push({type:"text",value:c.value.slice(g)}),d.children.splice(A,1,...x)):x=[c],A+x.length}}function Bw(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const l=n[r];t.push([Ww(l[0]),Hw(l[1])])}return t}function Ww(e){return typeof e=="string"?new RegExp(Ow(e),"g"):e}function Hw(e){return typeof e=="function"?e:function(){return e}}const co="phrasing",fo=["autolink","link","image","label"];function qw(){return{transforms:[Yw],enter:{literalAutolink:Xw,literalAutolinkEmail:po,literalAutolinkHttp:po,literalAutolinkWww:po},exit:{literalAutolink:Kw,literalAutolinkEmail:Gw,literalAutolinkHttp:Vw,literalAutolinkWww:Qw}}}function Uw(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:co,notInConstruct:fo},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:co,notInConstruct:fo},{character:":",before:"[ps]",after:"\\/",inConstruct:co,notInConstruct:fo}]}}function Xw(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function po(e){this.config.enter.autolinkProtocol.call(this,e)}function Vw(e){this.config.exit.autolinkProtocol.call(this,e)}function Qw(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Gw(e){this.config.exit.autolinkEmail.call(this,e)}function Kw(e){this.exit(e)}function Yw(e){$w(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Jw],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Zw]],{ignore:["link","linkReference"]})}function Jw(e,t,n,r,l){let i="";if(!Th(l)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!ej(n)))return!1;const s=tj(n+r);if(!s[0])return!1;const a={type:"link",title:null,url:i+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function Zw(e,t,n,r){return!Th(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function ej(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function tj(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const l=cf(e,"(");let i=cf(e,")");for(;r!==-1&&l>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function Th(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Fn(n)||ys(n))&&(!t||n!==47)}Dh.peek=cj;function nj(){this.buffer()}function rj(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function lj(){this.buffer()}function ij(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function sj(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Et(this.sliceSerialize(e)).toLowerCase(),n.label=t}function oj(e){this.exit(e)}function aj(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Et(this.sliceSerialize(e)).toLowerCase(),n.label=t}function uj(e){this.exit(e)}function cj(){return"["}function Dh(e,t,n,r){const l=n.createTracker(r);let i=l.move("[^");const s=n.enter("footnoteReference"),a=n.enter("reference");return i+=l.move(n.safe(n.associationId(e),{after:"]",before:i})),a(),s(),i+=l.move("]"),i}function dj(){return{enter:{gfmFootnoteCallString:nj,gfmFootnoteCall:rj,gfmFootnoteDefinitionLabelString:lj,gfmFootnoteDefinition:ij},exit:{gfmFootnoteCallString:sj,gfmFootnoteCall:oj,gfmFootnoteDefinitionLabelString:aj,gfmFootnoteDefinition:uj}}}function fj(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Dh},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,l,i,s){const a=i.createTracker(s);let u=a.move("[^");const c=i.enter("footnoteDefinition"),f=i.enter("label");return u+=a.move(i.safe(i.associationId(r),{before:u,after:"]"})),f(),u+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),u+=a.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),t?Ih:pj))),c(),u}}function pj(e,t,n){return t===0?e:Ih(e,t,n)}function Ih(e,t,n){return(n?"":"    ")+e}const mj=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Lh.peek=vj;function hj(){return{canContainEols:["delete"],enter:{strikethrough:xj},exit:{strikethrough:yj}}}function gj(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:mj}],handlers:{delete:Lh}}}function xj(e){this.enter({type:"delete",children:[]},e)}function yj(e){this.exit(e)}function Lh(e,t,n,r){const l=n.createTracker(r),i=n.enter("strikethrough");let s=l.move("~~");return s+=n.containerPhrasing(e,{...l.current(),before:s,after:"~"}),s+=l.move("~~"),i(),s}function vj(){return"~"}function bj(e){return e.length}function kj(e,t){const n=t||{},r=(n.align||[]).concat(),l=n.stringLength||bj,i=[],s=[],a=[],u=[];let c=0,f=-1;for(;++f<e.length;){const k=[],A=[];let h=-1;for(e[f].length>c&&(c=e[f].length);++h<e[f].length;){const x=wj(e[f][h]);if(n.alignDelimiters!==!1){const y=l(x);A[h]=y,(u[h]===void 0||y>u[h])&&(u[h]=y)}k.push(x)}s[f]=k,a[f]=A}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)i[d]=df(r[d]);else{const k=df(r);for(;++d<c;)i[d]=k}d=-1;const p=[],m=[];for(;++d<c;){const k=i[d];let A="",h="";k===99?(A=":",h=":"):k===108?A=":":k===114&&(h=":");let x=n.alignDelimiters===!1?1:Math.max(1,u[d]-A.length-h.length);const y=A+"-".repeat(x)+h;n.alignDelimiters!==!1&&(x=A.length+x+h.length,x>u[d]&&(u[d]=x),m[d]=x),p[d]=y}s.splice(1,0,p),a.splice(1,0,m),f=-1;const g=[];for(;++f<s.length;){const k=s[f],A=a[f];d=-1;const h=[];for(;++d<c;){const x=k[d]||"";let y="",E="";if(n.alignDelimiters!==!1){const N=u[d]-(A[d]||0),S=i[d];S===114?y=" ".repeat(N):S===99?N%2?(y=" ".repeat(N/2+.5),E=" ".repeat(N/2-.5)):(y=" ".repeat(N/2),E=y):E=" ".repeat(N)}n.delimiterStart!==!1&&!d&&h.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&x==="")&&(n.delimiterStart!==!1||d)&&h.push(" "),n.alignDelimiters!==!1&&h.push(y),h.push(x),n.alignDelimiters!==!1&&h.push(E),n.padding!==!1&&h.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&h.push("|")}g.push(n.delimiterEnd===!1?h.join("").replace(/ +$/,""):h.join(""))}return g.join(`
`)}function wj(e){return e==null?"":String(e)}function df(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function jj(e,t,n,r){const l=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const s=n.indentLines(n.containerFlow(e,i.current()),Sj);return l(),s}function Sj(e,t,n){return">"+(n?"":" ")+e}function Nj(e,t){return ff(e,t.inConstruct,!0)&&!ff(e,t.notInConstruct,!1)}function ff(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function pf(e,t,n,r){let l=-1;for(;++l<n.unsafe.length;)if(n.unsafe[l].character===`
`&&Nj(n.stack,n.unsafe[l]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Cj(e,t){const n=String(e);let r=n.indexOf(t),l=r,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===l?++i>s&&(s=i):i=1,l=r+t.length,r=n.indexOf(t,l);return s}function Pj(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Ej(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Aj(e,t,n,r){const l=Ej(n),i=e.value||"",s=l==="`"?"GraveAccent":"Tilde";if(Pj(e,n)){const d=n.enter("codeIndented"),p=n.indentLines(i,Tj);return d(),p}const a=n.createTracker(r),u=l.repeat(Math.max(Cj(i,l)+1,3)),c=n.enter("codeFenced");let f=a.move(u);if(e.lang){const d=n.enter(`codeFencedLang${s}`);f+=a.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${s}`);f+=a.move(" "),f+=a.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...a.current()})),d()}return f+=a.move(`
`),i&&(f+=a.move(i+`
`)),f+=a.move(u),c(),f}function Tj(e,t,n){return(n?"":"    ")+e}function qu(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Dj(e,t,n,r){const l=qu(n),i=l==='"'?"Quote":"Apostrophe",s=n.enter("definition");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),{before:c,after:"]",...u.current()})),c+=u.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(a=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":`
`,...u.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=u.move(" "+l),c+=u.move(n.safe(e.title,{before:c,after:l,...u.current()})),c+=u.move(l),a()),s(),c}function Ij(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function wl(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Vi(e,t,n){const r=vr(e),l=vr(t);return r===void 0?l===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Mh.peek=Lj;function Mh(e,t,n,r){const l=Ij(n),i=n.enter("emphasis"),s=n.createTracker(r),a=s.move(l);let u=s.move(n.containerPhrasing(e,{after:l,before:a,...s.current()}));const c=u.charCodeAt(0),f=Vi(r.before.charCodeAt(r.before.length-1),c,l);f.inside&&(u=wl(c)+u.slice(1));const d=u.charCodeAt(u.length-1),p=Vi(r.after.charCodeAt(0),d,l);p.inside&&(u=u.slice(0,-1)+wl(d));const m=s.move(l);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+u+m}function Lj(e,t,n){return n.options.emphasis||"*"}function Mj(e,t){let n=!1;return Wu(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,ba}),!!((!e.depth||e.depth<3)&&Ru(e)&&(t.options.setext||n))}function Rj(e,t,n,r){const l=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(Mj(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),p=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return d(),f(),p+`
`+(l===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const s="#".repeat(l),a=n.enter("headingAtx"),u=n.enter("phrasing");i.move(s+" ");let c=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=wl(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),u(),a(),c}Rh.peek=zj;function Rh(e){return e.value||""}function zj(){return"<"}zh.peek=_j;function zh(e,t,n,r){const l=qu(n),i=l==='"'?"Quote":"Apostrophe",s=n.enter("image");let a=n.enter("label");const u=n.createTracker(r);let c=u.move("![");return c+=u.move(n.safe(e.alt,{before:c,after:"]",...u.current()})),c+=u.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(a=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,{before:c,after:e.title?" ":")",...u.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=u.move(" "+l),c+=u.move(n.safe(e.title,{before:c,after:l,...u.current()})),c+=u.move(l),a()),c+=u.move(")"),s(),c}function _j(){return"!"}_h.peek=Fj;function _h(e,t,n,r){const l=e.referenceType,i=n.enter("imageReference");let s=n.enter("label");const a=n.createTracker(r);let u=a.move("![");const c=n.safe(e.alt,{before:u,after:"]",...a.current()});u+=a.move(c+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const d=n.safe(n.associationId(e),{before:u,after:"]",...a.current()});return s(),n.stack=f,i(),l==="full"||!c||c!==d?u+=a.move(d+"]"):l==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function Fj(){return"!"}Fh.peek=Oj;function Fh(e,t,n){let r=e.value||"",l="`",i=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(r);)l+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const s=n.unsafe[i],a=n.compilePattern(s);let u;if(s.atBreak)for(;u=a.exec(r);){let c=u.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(u.index+1)}}return l+r+l}function Oj(){return"`"}function Oh(e,t){const n=Ru(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}$h.peek=$j;function $h(e,t,n,r){const l=qu(n),i=l==='"'?"Quote":"Apostrophe",s=n.createTracker(r);let a,u;if(Oh(e,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let d=s.move("<");return d+=s.move(n.containerPhrasing(e,{before:d,after:">",...s.current()})),d+=s.move(">"),a(),n.stack=f,d}a=n.enter("link"),u=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(u=n.enter("destinationRaw"),c+=s.move(n.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),u(),e.title&&(u=n.enter(`title${i}`),c+=s.move(" "+l),c+=s.move(n.safe(e.title,{before:c,after:l,...s.current()})),c+=s.move(l),u()),c+=s.move(")"),a(),c}function $j(e,t,n){return Oh(e,n)?"<":"["}Bh.peek=Bj;function Bh(e,t,n,r){const l=e.referenceType,i=n.enter("linkReference");let s=n.enter("label");const a=n.createTracker(r);let u=a.move("[");const c=n.containerPhrasing(e,{before:u,after:"]",...a.current()});u+=a.move(c+"]["),s();const f=n.stack;n.stack=[],s=n.enter("reference");const d=n.safe(n.associationId(e),{before:u,after:"]",...a.current()});return s(),n.stack=f,i(),l==="full"||!c||c!==d?u+=a.move(d+"]"):l==="shortcut"?u=u.slice(0,-1):u+=a.move("]"),u}function Bj(){return"["}function Uu(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Wj(e){const t=Uu(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Hj(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Wh(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function qj(e,t,n,r){const l=n.enter("list"),i=n.bulletCurrent;let s=e.ordered?Hj(n):Uu(n);const a=e.ordered?s==="."?")":".":Wj(n);let u=t&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),Wh(n)===s&&f){let d=-1;for(;++d<e.children.length;){const p=e.children[d];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=a),n.bulletCurrent=s;const c=n.containerFlow(e,r);return n.bulletLastUsed=s,n.bulletCurrent=i,l(),c}function Uj(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Xj(e,t,n,r){const l=Uj(n);let i=n.bulletCurrent||Uu(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(l==="tab"||l==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(s-i.length)),a.shift(s);const u=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),f);return u(),c;function f(d,p,m){return p?(m?"":" ".repeat(s))+d:(m?i:i+" ".repeat(s-i.length))+d}}function Vj(e,t,n,r){const l=n.enter("paragraph"),i=n.enter("phrasing"),s=n.containerPhrasing(e,r);return i(),l(),s}const Qj=ks(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Gj(e,t,n,r){return(e.children.some(function(s){return Qj(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Kj(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Hh.peek=Yj;function Hh(e,t,n,r){const l=Kj(n),i=n.enter("strong"),s=n.createTracker(r),a=s.move(l+l);let u=s.move(n.containerPhrasing(e,{after:l,before:a,...s.current()}));const c=u.charCodeAt(0),f=Vi(r.before.charCodeAt(r.before.length-1),c,l);f.inside&&(u=wl(c)+u.slice(1));const d=u.charCodeAt(u.length-1),p=Vi(r.after.charCodeAt(0),d,l);p.inside&&(u=u.slice(0,-1)+wl(d));const m=s.move(l+l);return i(),n.attentionEncodeSurroundingInfo={after:p.outside,before:f.outside},a+u+m}function Yj(e,t,n){return n.options.strong||"*"}function Jj(e,t,n,r){return n.safe(e.value,r)}function Zj(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function eS(e,t,n){const r=(Wh(n)+(n.options.ruleSpaces?" ":"")).repeat(Zj(n));return n.options.ruleSpaces?r.slice(0,-1):r}const qh={blockquote:jj,break:pf,code:Aj,definition:Dj,emphasis:Mh,hardBreak:pf,heading:Rj,html:Rh,image:zh,imageReference:_h,inlineCode:Fh,link:$h,linkReference:Bh,list:qj,listItem:Xj,paragraph:Vj,root:Gj,strong:Hh,text:Jj,thematicBreak:eS};function tS(){return{enter:{table:nS,tableData:mf,tableHeader:mf,tableRow:lS},exit:{codeText:iS,table:rS,tableData:mo,tableHeader:mo,tableRow:mo}}}function nS(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function rS(e){this.exit(e),this.data.inTable=void 0}function lS(e){this.enter({type:"tableRow",children:[]},e)}function mo(e){this.exit(e)}function mf(e){this.enter({type:"tableCell",children:[]},e)}function iS(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,sS));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function sS(e,t){return t==="|"?t:e}function oS(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,l=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:s,tableCell:u,tableRow:a}};function s(m,g,k,A){return c(f(m,k,A),m.align)}function a(m,g,k,A){const h=d(m,k,A),x=c([h]);return x.slice(0,x.indexOf(`
`))}function u(m,g,k,A){const h=k.enter("tableCell"),x=k.enter("phrasing"),y=k.containerPhrasing(m,{...A,before:i,after:i});return x(),h(),y}function c(m,g){return kj(m,{align:g,alignDelimiters:r,padding:n,stringLength:l})}function f(m,g,k){const A=m.children;let h=-1;const x=[],y=g.enter("table");for(;++h<A.length;)x[h]=d(A[h],g,k);return y(),x}function d(m,g,k){const A=m.children;let h=-1;const x=[],y=g.enter("tableRow");for(;++h<A.length;)x[h]=u(A[h],m,g,k);return y(),x}function p(m,g,k){let A=qh.inlineCode(m,g,k);return k.stack.includes("tableCell")&&(A=A.replace(/\|/g,"\\$&")),A}}function aS(){return{exit:{taskListCheckValueChecked:hf,taskListCheckValueUnchecked:hf,paragraph:cS}}}function uS(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:dS}}}function hf(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function cS(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const l=t.children;let i=-1,s;for(;++i<l.length;){const a=l[i];if(a.type==="paragraph"){s=a;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function dS(e,t,n,r){const l=e.children[0],i=typeof e.checked=="boolean"&&l&&l.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(s);let u=qh.listItem(e,t,n,{...r,...a.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),u;function c(f){return f+s}}function fS(){return[qw(),dj(),hj(),tS(),aS()]}function pS(e){return{extensions:[Uw(),fj(e),gj(),oS(e),uS()]}}const mS={tokenize:bS,partial:!0},Uh={tokenize:kS,partial:!0},Xh={tokenize:wS,partial:!0},Vh={tokenize:jS,partial:!0},hS={tokenize:SS,partial:!0},Qh={name:"wwwAutolink",tokenize:yS,previous:Kh},Gh={name:"protocolAutolink",tokenize:vS,previous:Yh},Kt={name:"emailAutolink",tokenize:xS,previous:Jh},zt={};function gS(){return{text:zt}}let wn=48;for(;wn<123;)zt[wn]=Kt,wn++,wn===58?wn=65:wn===91&&(wn=97);zt[43]=Kt;zt[45]=Kt;zt[46]=Kt;zt[95]=Kt;zt[72]=[Kt,Gh];zt[104]=[Kt,Gh];zt[87]=[Kt,Qh];zt[119]=[Kt,Qh];function xS(e,t,n){const r=this;let l,i;return s;function s(d){return!Sa(d)||!Jh.call(r,r.previous)||Xu(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(d))}function a(d){return Sa(d)?(e.consume(d),a):d===64?(e.consume(d),u):n(d)}function u(d){return d===46?e.check(hS,f,c)(d):d===45||d===95||Oe(d)?(i=!0,e.consume(d),u):f(d)}function c(d){return e.consume(d),l=!0,u}function f(d){return i&&l&&He(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function yS(e,t,n){const r=this;return l;function l(s){return s!==87&&s!==119||!Kh.call(r,r.previous)||Xu(r.events)?n(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(mS,e.attempt(Uh,e.attempt(Xh,i),n),n)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function vS(e,t,n){const r=this;let l="",i=!1;return s;function s(d){return(d===72||d===104)&&Yh.call(r,r.previous)&&!Xu(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),l+=String.fromCodePoint(d),e.consume(d),a):n(d)}function a(d){if(He(d)&&l.length<5)return l+=String.fromCodePoint(d),e.consume(d),a;if(d===58){const p=l.toLowerCase();if(p==="http"||p==="https")return e.consume(d),u}return n(d)}function u(d){return d===47?(e.consume(d),i?c:(i=!0,u)):n(d)}function c(d){return d===null||qi(d)||de(d)||Fn(d)||ys(d)?n(d):e.attempt(Uh,e.attempt(Xh,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function bS(e,t,n){let r=0;return l;function l(s){return(s===87||s===119)&&r<3?(r++,e.consume(s),l):s===46&&r===3?(e.consume(s),i):n(s)}function i(s){return s===null?n(s):t(s)}}function kS(e,t,n){let r,l,i;return s;function s(c){return c===46||c===95?e.check(Vh,u,a)(c):c===null||de(c)||Fn(c)||c!==45&&ys(c)?u(c):(i=!0,e.consume(c),s)}function a(c){return c===95?r=!0:(l=r,r=void 0),e.consume(c),s}function u(c){return l||r||!i?n(c):t(c)}}function wS(e,t){let n=0,r=0;return l;function l(s){return s===40?(n++,e.consume(s),l):s===41&&r<n?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(Vh,t,i)(s):s===null||de(s)||Fn(s)?t(s):(e.consume(s),l)}function i(s){return s===41&&r++,e.consume(s),l}}function jS(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),i):a===93?(e.consume(a),l):a===60||a===null||de(a)||Fn(a)?t(a):n(a)}function l(a){return a===null||a===40||a===91||de(a)||Fn(a)?t(a):r(a)}function i(a){return He(a)?s(a):n(a)}function s(a){return a===59?(e.consume(a),r):He(a)?(e.consume(a),s):n(a)}}function SS(e,t,n){return r;function r(i){return e.consume(i),l}function l(i){return Oe(i)?n(i):t(i)}}function Kh(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||de(e)}function Yh(e){return!He(e)}function Jh(e){return!(e===47||Sa(e))}function Sa(e){return e===43||e===45||e===46||e===95||Oe(e)}function Xu(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const NS={tokenize:LS,partial:!0};function CS(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:TS,continuation:{tokenize:DS},exit:IS}},text:{91:{name:"gfmFootnoteCall",tokenize:AS},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:PS,resolveTo:ES}}}}function PS(e,t,n){const r=this;let l=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;l--;){const u=r.events[l][1];if(u.type==="labelImage"){s=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return a;function a(u){if(!s||!s._balanced)return n(u);const c=Et(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function ES(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",l,t],["exit",l,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function AS(e,t,n){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,s;return a;function a(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),u}function u(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(d){if(i>999||d===93&&!s||d===null||d===91||de(d))return n(d);if(d===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return l.includes(Et(r.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return de(d)||(s=!0),i++,e.consume(d),d===92?f:c}function f(d){return d===91||d===92||d===93?(e.consume(d),i++,c):c(d)}}function TS(e,t,n){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,s=0,a;return u;function u(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(g)}function f(g){if(s>999||g===93&&!a||g===null||g===91||de(g))return n(g);if(g===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return i=Et(r.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return de(g)||(a=!0),s++,e.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(e.consume(g),s++,f):f(g)}function p(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),l.includes(i)||l.push(i),se(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function DS(e,t,n){return e.check(Il,t,e.attempt(NS,t,n))}function IS(e){e.exit("gfmFootnoteDefinition")}function LS(e,t,n){const r=this;return se(e,l,"gfmFootnoteDefinitionIndent",5);function l(i){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):n(i)}}function MS(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:l};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function l(s,a){let u=-1;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._close){let c=u;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[u][1].end.offset-s[u][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[u][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[u][1].end)},d={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[u][1].start)},p=[["enter",f,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",d,a]],m=a.parser.constructs.insideSpan.null;m&&st(p,p.length,0,vs(m,s.slice(c+1,u),a)),st(p,p.length,0,[["exit",d,a],["enter",s[u][1],a],["exit",s[u][1],a],["exit",f,a]]),st(s,c-1,u-c+3,p),u=c+p.length-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="strikethroughSequenceTemporary"&&(s[u][1].type="data");return s}function i(s,a,u){const c=this.previous,f=this.events;let d=0;return p;function p(g){return c===126&&f[f.length-1][1].type!=="characterEscape"?u(g):(s.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const k=vr(c);if(g===126)return d>1?u(g):(s.consume(g),d++,m);if(d<2&&!n)return u(g);const A=s.exit("strikethroughSequenceTemporary"),h=vr(g);return A._open=!h||h===2&&!!k,A._close=!k||k===2&&!!h,a(g)}}}class RS{constructor(){this.map=[]}add(t,n,r){zS(this,t,n,r)}consume(t){if(this.map.sort(function(i,s){return i[0]-s[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let l=r.pop();for(;l;){for(const i of l)t.push(i);l=r.pop()}this.map.length=0}}function zS(e,t,n,r){let l=0;if(!(n===0&&r.length===0)){for(;l<e.map.length;){if(e.map[l][0]===t){e.map[l][1]+=n,e.map[l][2].push(...r);return}l+=1}e.map.push([t,n,r])}}function _S(e,t){let n=!1;const r=[];for(;t<e.length;){const l=e[t];if(n){if(l[0]==="enter")l[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function FS(){return{flow:{null:{name:"table",tokenize:OS,resolveAll:$S}}}}function OS(e,t,n){const r=this;let l=0,i=0,s;return a;function a(j){let C=r.events.length-1;for(;C>-1;){const B=r.events[C][1].type;if(B==="lineEnding"||B==="linePrefix")C--;else break}const P=C>-1?r.events[C][1].type:null,$=P==="tableHead"||P==="tableRow"?S:u;return $===S&&r.parser.lazy[r.now().line]?n(j):$(j)}function u(j){return e.enter("tableHead"),e.enter("tableRow"),c(j)}function c(j){return j===124||(s=!0,i+=1),f(j)}function f(j){return j===null?n(j):Y(j)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),m):n(j):re(j)?se(e,f,"whitespace")(j):(i+=1,s&&(s=!1,l+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),s=!0,f):(e.enter("data"),d(j)))}function d(j){return j===null||j===124||de(j)?(e.exit("data"),f(j)):(e.consume(j),j===92?p:d)}function p(j){return j===92||j===124?(e.consume(j),d):d(j)}function m(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(e.enter("tableDelimiterRow"),s=!1,re(j)?se(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):g(j))}function g(j){return j===45||j===58?A(j):j===124?(s=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),k):N(j)}function k(j){return re(j)?se(e,A,"whitespace")(j):A(j)}function A(j){return j===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),h):j===45?(i+=1,h(j)):j===null||Y(j)?E(j):N(j)}function h(j){return j===45?(e.enter("tableDelimiterFiller"),x(j)):N(j)}function x(j){return j===45?(e.consume(j),x):j===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(j))}function y(j){return re(j)?se(e,E,"whitespace")(j):E(j)}function E(j){return j===124?g(j):j===null||Y(j)?!s||l!==i?N(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(j)):N(j)}function N(j){return n(j)}function S(j){return e.enter("tableRow"),w(j)}function w(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),w):j===null||Y(j)?(e.exit("tableRow"),t(j)):re(j)?se(e,w,"whitespace")(j):(e.enter("data"),D(j))}function D(j){return j===null||j===124||de(j)?(e.exit("data"),w(j)):(e.consume(j),j===92?H:D)}function H(j){return j===92||j===124?(e.consume(j),D):D(j)}}function $S(e,t){let n=-1,r=!0,l=0,i=[0,0,0,0],s=[0,0,0,0],a=!1,u=0,c,f,d;const p=new RS;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(a=!1,u!==0&&(gf(p,t,u,c,f),f=void 0,u=0),c={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",c,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],s=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},p.add(n,0,[["enter",f,t]])),l=g.type==="tableDelimiterRow"?2:f?3:1):l&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],d=ti(p,t,i,l,void 0,d),i=[0,0,0,0]),s[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(s[0]=s[1],d=ti(p,t,i,l,void 0,d)),i=s,s=[i[1],n,0,0])):g.type==="tableHead"?(a=!0,u=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(u=n,i[1]!==0?(s[0]=s[1],d=ti(p,t,i,l,n,d)):s[1]!==0&&(d=ti(p,t,s,l,n,d)),l=0):l&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(s[3]=n)}for(u!==0&&gf(p,t,u,c,f),p.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=_S(t.events,n))}return e}function ti(e,t,n,r,l,i){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},Un(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const u=Un(t.events,n[1]);if(i={type:s,start:Object.assign({},u),end:Object.assign({},u)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const c=Un(t.events,n[2]),f=Un(t.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const p=t.events[n[2]],m=t.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,k=n[3]-n[2]-1;e.add(g,k,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return l!==void 0&&(i.end=Object.assign({},Un(t.events,l)),e.add(l,0,[["exit",i,t]]),i=void 0),i}function gf(e,t,n,r,l){const i=[],s=Un(t.events,n);l&&(l.end=Object.assign({},s),i.push(["exit",l,t])),r.end=Object.assign({},s),i.push(["exit",r,t]),e.add(n+1,0,i)}function Un(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const BS={name:"tasklistCheck",tokenize:HS};function WS(){return{text:{91:BS}}}function HS(e,t,n){const r=this;return l;function l(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),i)}function i(u){return de(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),s):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),s):n(u)}function s(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(u)}function a(u){return Y(u)?t(u):re(u)?e.check({tokenize:qS},t,n)(u):n(u)}}function qS(e,t,n){return se(e,r,"whitespace");function r(l){return l===null?n(l):t(l)}}function US(e){return ah([gS(),CS(),MS(e),FS(),WS()])}const XS={};function xf(e){const t=this,n=e||XS,r=t.data(),l=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);l.push(US(n)),i.push(fS()),s.push(pS(n))}const VS="https://api.github.com/repos/BigScaryGames/ExceedV/contents",Zh="https://raw.githubusercontent.com/BigScaryGames/ExceedV/main",Vu="Ruleset/Core Rules",eg=24*60*60*1e3,Qu="exceed_rules_",Gu="exceed_rules_meta",Na="exceed_rules_filelist";function tg(){const e=localStorage.getItem(Gu);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function QS(e,t){const n=tg()||{lastFetch:0,files:{}};n.files[e]=t,n.lastFetch=Date.now(),localStorage.setItem(Gu,JSON.stringify(n))}function Ca(e){const t=Qu+e,n=localStorage.getItem(t);if(!n)return null;try{const r=JSON.parse(n);return Date.now()-r.timestamp<eg?r:null}catch{return null}}function ng(e,t,n){const r=Qu+e,l={content:t,timestamp:Date.now(),url:n};localStorage.setItem(r,JSON.stringify(l)),QS(e,l.timestamp)}async function yf(e=!1){if(!e){const i=localStorage.getItem(Na);if(i)try{const s=JSON.parse(i);if(Date.now()-s.timestamp<eg)return s.files}catch{}}const t=`${VS}/${Vu}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file list: ${n.statusText}`);const l=(await n.json()).filter(i=>i.type==="file"&&i.name.endsWith(".md")).map(i=>({name:i.name,path:i.path,download_url:i.download_url})).sort((i,s)=>i.name.localeCompare(s.name,void 0,{numeric:!0}));return localStorage.setItem(Na,JSON.stringify({files:l,timestamp:Date.now()})),l}async function GS(e,t=!1){if(!t){const n=Ca(e);if(n)return{content:n.content,cached:!0,timestamp:n.timestamp}}try{const n=`${Zh}/${Vu}/${encodeURIComponent(e)}`,r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch ${e}: ${r.statusText}`);const l=await r.text();return ng(e,l,n),{content:l,cached:!1,timestamp:Date.now()}}catch(n){const r=Ca(e);if(r)return console.warn(`Using stale cache for ${e}:`,n),{content:r.content,cached:!0,timestamp:r.timestamp};throw n}}function KS(){const e=tg();e&&Object.keys(e.files).forEach(t=>{const n=Qu+t;localStorage.removeItem(n)}),localStorage.removeItem(Gu),localStorage.removeItem(Na)}async function YS(e){const t=e.endsWith(".md")?e:`${e}.md`,n=`embed_${t}`,r=Ca(n);if(r)return r.content;const l=`${Zh}/${Vu}/${encodeURIComponent(t).replace(/%2F/g,"/")}`;try{const i=await fetch(l);if(!i.ok)return console.warn(`Failed to fetch embedded file ${t}: ${i.statusText}`),`> *[Could not load: ${e}]*`;const s=await i.text();return ng(n,s,l),s}catch(i){return console.warn(`Error fetching embedded file ${t}:`,i),`> *[Could not load: ${e}]*`}}async function rg(e,t=3,n=0){if(n>=t)return e;const r=/!\[\[([^\]]+)\]\]/g,l=[...e.matchAll(r)];if(l.length===0)return e;const i=l.map(async u=>{const c=u[1],f=await YS(c),d=await rg(f,t,n+1);return{original:u[0],resolved:d}}),s=await Promise.all(i);let a=e;for(const{original:u,resolved:c}of s)a=a.replace(u,c);return a}function JS(e){return e.replace(/\[\[([^\]|#]+)(?:#[^\]|]*)?(?:\|([^\]]+))?\]\]/g,(t,n,r)=>{const l=r||n,i=n.trim();return`[${l}](#rule:${encodeURIComponent(i)})`})}function ZS(e){const t=Date.now()-e,n=Math.floor(t/6e4),r=Math.floor(n/60),l=Math.floor(r/24);return l>0?`${l}d ago`:r>0?`${r}h ago`:n>0?`${n}m ago`:"Just now"}const eN=()=>{const[e,t]=T.useState([]),[n,r]=T.useState(null),[l,i]=T.useState(""),[s,a]=T.useState(!0),[u,c]=T.useState(!1),[f,d]=T.useState(null),[p,m]=T.useState(null),[g,k]=T.useState(!1),[A,h]=T.useState(new Set);T.useEffect(()=>{x()},[]);const x=async(C=!1)=>{a(!0),d(null);try{const P=await yf(C);t(P)}catch(P){d(`Failed to load rules list: ${P instanceof Error?P.message:"Unknown error"}`)}finally{a(!1)}},y=async(C,P=!1)=>{r(C),a(!0),d(null);try{const $=await GS(C.name,P),B=await rg($.content),I=JS(B);i(I),m($.timestamp),k($.cached)}catch($){d(`Failed to load rule: ${$ instanceof Error?$.message:"Unknown error"}`),i("")}finally{a(!1)}},E=async C=>{if(C.startsWith("#rule:")){const P=decodeURIComponent(C.replace("#rule:",""));console.log("Navigating to rule:",P);let $=e;$.length===0&&(console.log("Files not loaded, fetching..."),$=await yf(),t($)),console.log("Available files:",$.map(I=>I.name));let B=$.find(I=>I.name.replace(".md","")===P||I.name===P||I.name===`${P}.md`);console.log("Exact match result:",B),B||(B=$.find(I=>I.name.replace(".md","").endsWith(P)||I.name.replace(".md","").toLowerCase().includes(P.toLowerCase())),console.log("Fuzzy match result:",B)),B?(console.log("Loading file:",B.name),y(B)):(console.warn(`Rule not found: ${P}`),console.warn("Searched in files:",$.map(I=>I.name)))}},N=({href:C,children:P})=>C!=null&&C.startsWith("#rule:")?o.jsx("button",{onClick:()=>E(C),className:"text-blue-400 hover:text-blue-300 underline cursor-pointer",children:P}):o.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:P}),S=async()=>{c(!0);try{KS(),await x(!0),n&&await y(n,!0)}catch(C){d(`Refresh failed: ${C instanceof Error?C.message:"Unknown error"}`)}finally{c(!1)}},w=C=>C.replace(".md",""),D=T.useMemo(()=>{if(!l)return[];const C=l.split(`
`),P=[];let $=null,B=null,I=[];const q=()=>{const z=I.join(`
`).trim();return I=[],z};for(const z of C){const L=z.match(/^(#{1,4})\s+(.+)$/);if(L){const b=L[1].length,R=L[2],_=`${R.toLowerCase().replace(/[^a-z0-9]+/g,"-")}-${P.length}`;if(b<=2)B?B.content=q():$&&($.content=q()),$&&P.push($),$={id:_,title:R,content:"",level:2,children:[]},B=null;else if(b===3&&$)B?B.content=q():$.content=q(),B={id:_,title:R,content:"",level:3,children:[]},$.children.push(B);else if(b===4&&B){const v=q();B.children.length===0?B.content=v:B.children.length>0&&(B.children[B.children.length-1].content=v);const W={id:_,title:R,content:"",level:4,children:[]};B.children.push(W)}else I.push(z)}else I.push(z)}const Q=q();return B?B.children.length>0?B.children[B.children.length-1].content=Q:B.content=Q:$&&($.content=Q),$&&P.push($),P.length>0&&A.size===0&&h(new Set([P[0].id])),P},[l]),H=C=>{h(P=>{const $=new Set(P);return $.has(C)?$.delete(C):$.add(C),$})},j=(C,P=0)=>{const $=A.has(C.id),B=C.content.length>0,I=C.children.length>0,q=P>0?"ml-4":"";return o.jsxs("div",{className:`border border-slate-700 rounded-lg overflow-hidden ${q} ${P>0?"mt-2":""}`,children:[o.jsxs("button",{onClick:()=>H(C.id),className:`w-full flex items-center justify-between p-3 hover:bg-slate-700 transition-colors text-left ${P===0?"bg-slate-750":"bg-slate-800"}`,children:[o.jsx("h2",{className:`font-semibold text-white ${P===0?"text-lg":P===1?"text-base":"text-sm"}`,children:C.title}),(B||I)&&($?o.jsx(El,{size:18,className:"text-slate-400 flex-shrink-0"}):o.jsx(Al,{size:18,className:"text-slate-400 flex-shrink-0"}))]}),$&&(B||I)&&o.jsxs("div",{className:`bg-slate-800 border-t border-slate-700 ${B?"p-4":"p-2"}`,children:[B&&o.jsx("div",{className:"prose prose-invert prose-slate max-w-none text-left prose-sm",children:o.jsx(uf,{remarkPlugins:[xf],components:{a:N},children:C.content})}),I&&o.jsx("div",{className:B?"mt-3":"",children:C.children.map(Q=>j(Q,P+1))})]})]},C.id)};return o.jsxs("div",{className:"p-4 h-screen flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Rules"}),o.jsx("button",{onClick:S,disabled:u,className:`p-2 rounded-lg transition-colors ${u?"bg-slate-600 cursor-not-allowed":"bg-slate-700 hover:bg-slate-600"}`,title:"Refresh rules from GitHub",children:o.jsx(K0,{size:20,className:`text-white ${u?"animate-spin":""}`})})]}),f&&o.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded-lg p-3 mb-4",children:o.jsx("p",{className:"text-red-200 text-sm",children:f})}),n&&p&&o.jsxs("div",{className:"text-xs text-slate-400 mb-2",children:[g?"Cached":"Fresh","  Last updated: ",ZS(p)]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"Select Rule"}),s&&!n?o.jsx("div",{className:"bg-slate-800 rounded-lg p-3 text-slate-400 text-center",children:"Loading rules..."}):e.length===0?o.jsx("div",{className:"bg-slate-800 rounded-lg p-3 text-slate-400 text-center",children:"No rules found"}):o.jsxs("select",{value:(n==null?void 0:n.name)||"",onChange:C=>{const P=e.find($=>$.name===C.target.value);P&&y(P)},className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:[o.jsx("option",{value:"",children:"-- Choose a rule --"}),e.map(C=>o.jsx("option",{value:C.name,children:w(C.name)},C.name))]})]}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-slate-800 rounded-lg p-6 overflow-y-auto",children:n?s?o.jsx("div",{className:"text-center text-slate-400 py-16",children:"Loading rule content..."}):D.length>0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:w(n.name)}),D.map(C=>j(C,0))]}):l?o.jsx("div",{className:"prose prose-invert prose-slate max-w-none text-left",children:o.jsx(uf,{remarkPlugins:[xf],components:{a:N},children:l})}):null:o.jsxs("div",{className:"text-center text-slate-400 py-16",children:[o.jsx("p",{className:"text-lg mb-2",children:"Select a rule to view"}),o.jsx("p",{className:"text-sm",children:"Choose from the dropdown above"})]})})})]})},tN=({isOpen:e,onClose:t,characterName:n,onBackToLanding:r,onRename:l,onExport:i,onViewRules:s})=>{const a=u=>{u(),t()};return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:t}),o.jsxs("div",{className:`fixed top-0 left-0 h-full w-64 bg-slate-800 z-50 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,children:[o.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-bold text-white truncate",children:n}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:o.jsx(Gt,{size:24})})]}),o.jsxs("nav",{className:"p-2",children:[o.jsxs("button",{onClick:()=>a(r),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(V0,{size:20}),o.jsx("span",{children:"Back to Landing"})]}),o.jsxs("button",{onClick:()=>a(l),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(G0,{size:20}),o.jsx("span",{children:"Rename Character"})]}),o.jsxs("button",{onClick:()=>a(i),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(W0,{size:20}),o.jsx("span",{children:"Export Character"})]}),o.jsxs("button",{onClick:()=>a(s),className:"w-full flex items-center gap-3 px-4 py-3 text-left text-slate-300 hover:bg-slate-700 rounded-lg transition-colors",children:[o.jsx(jr,{size:20}),o.jsx("span",{children:"View Rules"})]})]})]})]})},nN=({isOpen:e,onClose:t,currentName:n,onRename:r})=>{const[l,i]=T.useState(n);if(T.useEffect(()=>{e&&i(n)},[e,n]),!e)return null;const s=()=>{const u=l.trim();if(!u){alert("Character name cannot be empty");return}r(u),t()},a=u=>{u.key==="Enter"&&s()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:t,children:o.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-md w-full p-6",onClick:u=>u.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Rename Character"}),o.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:o.jsx(Gt,{size:24})})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-300 mb-2",children:"New Name"}),o.jsx("input",{type:"text",value:l,onChange:u=>i(u.target.value),onKeyDown:a,placeholder:"Enter character name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:t,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 rounded transition-colors",children:"Cancel"}),o.jsx("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded transition-colors",children:"Rename"})]})]})})},rN="/Exceed-Playtest-App/data/perks.json";async function lN(){try{const e=await fetch(rN);return e.ok?await e.json():(console.error("Failed to load bundled perks:",e.statusText),null)}catch(e){return console.error("Error loading bundled perks:",e),null}}const iN="BigScaryGames/ExceedV",sN="main",oN=`https://raw.githubusercontent.com/${iN}/${sN}/Ruleset/Perks`,Pa="exceed-perks-cache",aN=7*24*60*60*1e3;function uN(){try{const e=localStorage.getItem(Pa);if(!e)return null;const t=JSON.parse(e);return Date.now()>t.expiresAt?(localStorage.removeItem(Pa),null):t.database}catch(e){return console.error("Error reading perk cache:",e),null}}function Ea(e){try{const t={database:e,timestamp:Date.now(),expiresAt:Date.now()+aN};localStorage.setItem(Pa,JSON.stringify(t))}catch(t){console.error("Error caching perks:",t)}}async function cN(){const e=uN();if(e)return console.log("[PerkSync] Using cached perks from localStorage"),dN(e).catch(n=>console.error("[PerkSync] Background update check failed:",n)),e;console.log("[PerkSync] Loading bundled perks");const t=await lN();if(!t)throw new Error("Failed to load perks: bundled data not available");return ig().then(n=>{n&&lg(n,t)?(console.log("[PerkSync] GitHub perks are newer, caching"),Ea(n)):(console.log("[PerkSync] Bundled perks are current, caching"),Ea(t))}).catch(n=>console.error("[PerkSync] GitHub fetch failed:",n)),t}async function dN(e){console.log("[PerkSync] Checking for updates from GitHub");const t=await ig();if(!t){console.log("[PerkSync] GitHub fetch failed, keeping current perks");return}lg(t,e)?(console.log("[PerkSync] Newer perks available, updating cache"),Ea(t),window.dispatchEvent(new CustomEvent("perks-updated",{detail:t}))):console.log("[PerkSync] Current perks are up-to-date")}function lg(e,t){return e.lastUpdated>t.lastUpdated}async function ig(){try{return console.log("[PerkSync] GitHub fetch not yet fully implemented"),console.log("[PerkSync] Would fetch from:",oN),null}catch(e){return console.error("[PerkSync] Error fetching from GitHub:",e),null}}function fN(){const[e,t]=T.useState("landing"),[n,r]=T.useState([]),[l,i]=T.useState(null),[s,a]=T.useState(cd()),[u,c]=T.useState(null),[f,d]=T.useState(!1),[p,m]=T.useState(!1),g=T.useRef(null);T.useEffect(()=>{const j=Bi();r(j)},[]),T.useEffect(()=>{cN().then(C=>{c(C),console.log("[App] Perk database loaded:",{combat:C.perks.combat.length,magic:C.perks.magic.length,skill:C.perks.skill.length,version:C.version})}).catch(C=>{console.error("[App] Failed to load perk database:",C)}),Wy().catch(C=>{console.error("[App] Failed to load spell database:",C)});const j=C=>{console.log("[App] Perks updated from GitHub"),c(C.detail)};return window.addEventListener("perks-updated",j),()=>{window.removeEventListener("perks-updated",j)}},[]),T.useEffect(()=>{l&&e==="characterSheet"&&(zr(l),r(j=>j.map(C=>C.name===l.name?l:C)))},[l,e]);const k=()=>{a(cd()),t("create")},A=()=>{const j=Bi();r(j),t("characterList")},h=()=>{if(!s.name.trim()){alert("Please enter a character name");return}zr(s),r(j=>[...j,s]),i(s),t("characterSheet")},x=j=>{const C={...j,lastOpened:Date.now()};zr(C),i(C),t("characterSheet")},y=j=>{i(j)},E=async j=>{var P;const C=(P=j.target.files)==null?void 0:P[0];if(C){try{const $=await ry(C);zr($),r(B=>[...B,$]),i($),t("characterSheet"),alert("Character imported successfully!")}catch($){alert("Failed to import character. Please check the file format."),console.error("Import error:",$)}g.current&&(g.current.value="")}},N=()=>{l&&ny(l)},S=(j,C)=>{if(C.stopPropagation(),!confirm(`Are you sure you want to delete "${j}"? This cannot be undone.`))return;dd(j);const P=n.filter($=>$.name!==j);r(P),(l==null?void 0:l.name)===j&&i(null)},w=()=>{t("landing"),i(null),d(!1)},D=j=>{if(!l)return;const C=l.name,P={...l,name:j};dd(C),zr(P),i(P),r($=>$.map(B=>B.name===C?P:B))},H=()=>{t("rules"),d(!1)};return e==="landing"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-5xl font-bold text-slate-100 mb-2",children:"EXCEED"}),o.jsx("p",{className:"text-slate-400 text-lg",children:"Character Manager"})]}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 space-y-4 shadow-xl border border-slate-700",children:[o.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-colors",children:[o.jsx(ud,{size:24}),o.jsx("span",{children:"New Character"})]}),o.jsxs("button",{onClick:A,className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600",children:[o.jsx(ad,{size:24}),o.jsx("span",{children:"Load Character"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:g,type:"file",accept:".json",onChange:E,className:"hidden",id:"file-import"}),o.jsxs("label",{htmlFor:"file-import",className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600 cursor-pointer",children:[o.jsx(ad,{size:24}),o.jsx("span",{children:"Import Character"})]})]}),o.jsxs("button",{onClick:()=>t("rules"),className:"w-full flex items-center justify-center gap-3 bg-slate-700 hover:bg-slate-600 text-slate-100 font-semibold py-4 px-6 rounded-lg transition-colors border border-slate-600",children:[o.jsx(jr,{size:24}),o.jsx("span",{children:"View Rules"})]})]}),o.jsx("div",{className:"text-center text-slate-500 text-sm",children:o.jsx("p",{children:"A skill-based fantasy TTRPG system"})})]})}):e==="create"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-8",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Character Creation"}),o.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 space-y-4 border border-slate-700",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:s.name,onChange:j=>a({...s,name:j.target.value}),placeholder:"Character name",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Concept"}),o.jsx("input",{type:"text",value:s.concept,onChange:j=>a({...s,concept:j.target.value}),placeholder:"Character concept (e.g., Warrior, Mage, Rogue)",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Combat XP"}),o.jsx("input",{type:"number",value:s.combatXP,onChange:j=>a({...s,combatXP:parseInt(j.target.value)||0}),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Skill XP"}),o.jsx("input",{type:"number",value:s.socialXP,onChange:j=>a({...s,socialXP:parseInt(j.target.value)||0}),className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-blue-500",min:"0"})]})]}),o.jsxs("div",{className:"flex gap-4 mt-6",children:[o.jsx("button",{onClick:h,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Create Character"}),o.jsx("button",{onClick:w,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-semibold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]})}):e==="characterList"?o.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-3xl font-bold",children:"Load Character"}),o.jsx("button",{onClick:w,className:"bg-slate-700 hover:bg-slate-600 text-slate-100 px-4 py-2 rounded transition-colors",children:"Back"})]}),o.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700",children:n.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(ud,{size:48,className:"mx-auto mb-4 text-slate-600"}),o.jsx("p",{className:"text-slate-400 text-lg mb-2",children:"No characters yet"}),o.jsx("p",{className:"text-slate-500 text-sm",children:"Create a new character to get started"})]}):o.jsx("div",{className:"divide-y divide-slate-700",children:n.sort((j,C)=>{const P=j.lastOpened||0;return(C.lastOpened||0)-P}).map((j,C)=>o.jsxs("div",{onClick:()=>x(j),className:"p-4 hover:bg-slate-750 cursor-pointer transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:j.name}),j.concept&&o.jsx("p",{className:"text-slate-400 text-sm",children:j.concept}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[o.jsxs("span",{children:["Combat XP: ",j.combatXP]}),o.jsxs("span",{children:["Skill XP: ",j.socialXP]}),j.lastOpened&&o.jsxs("span",{children:[" Last opened: ",new Date(j.lastOpened).toLocaleDateString()," ",new Date(j.lastOpened).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),o.jsx("button",{onClick:P=>S(j.name,P),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 p-2 rounded transition-colors",title:"Delete character",children:o.jsx(Su,{size:20})})]},j.name+C))})})]})}):e==="characterSheet"&&l?o.jsxs(o.Fragment,{children:[o.jsx(tN,{isOpen:f,onClose:()=>d(!1),characterName:l.name,onBackToLanding:w,onRename:()=>m(!0),onExport:N,onViewRules:H}),o.jsx(nN,{isOpen:p,onClose:()=>m(!1),currentName:l.name,onRename:D}),o.jsx(lv,{character:l,onUpdate:y,perkDatabase:u,onMenuToggle:()=>d(!f)})]}):e==="rules"?o.jsxs("div",{className:"min-h-screen bg-slate-900",children:[o.jsx("div",{className:"bg-black p-4 border-b border-slate-700",children:o.jsx("button",{onClick:w,className:"text-slate-400 hover:text-white transition-colors",children:" Back"})}),o.jsx(eN,{})]}):null}ho.createRoot(document.getElementById("root")).render(o.jsx(Pg.StrictMode,{children:o.jsx(fN,{})}));
